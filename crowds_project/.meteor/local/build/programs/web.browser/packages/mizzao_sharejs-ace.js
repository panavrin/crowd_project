//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var Template = Package.templating.Template;
var ShareJSConnector = Package['mizzao:sharejs'].ShareJSConnector;
var Blaze = Package.blaze.Blaze;
var UI = Package.blaze.UI;
var Handlebars = Package.blaze.Handlebars;
var Spacebars = Package.spacebars.Spacebars;
var HTML = Package.htmljs.HTML;

/* Package-scope variables */
var __coffeescriptShare;

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/mizzao_sharejs-ace/ace-builds/src/ace.js                                                                   //
// This file is in bare mode and is not in its own closure.                                                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
/* ***** BEGIN LICENSE BLOCK *****                                                                                     // 1
 * Distributed under the BSD license:                                                                                  // 2
 *                                                                                                                     // 3
 * Copyright (c) 2010, Ajax.org B.V.                                                                                   // 4
 * All rights reserved.                                                                                                // 5
 *                                                                                                                     // 6
 * Redistribution and use in source and binary forms, with or without                                                  // 7
 * modification, are permitted provided that the following conditions are met:                                         // 8
 *     * Redistributions of source code must retain the above copyright                                                // 9
 *       notice, this list of conditions and the following disclaimer.                                                 // 10
 *     * Redistributions in binary form must reproduce the above copyright                                             // 11
 *       notice, this list of conditions and the following disclaimer in the                                           // 12
 *       documentation and/or other materials provided with the distribution.                                          // 13
 *     * Neither the name of Ajax.org B.V. nor the                                                                     // 14
 *       names of its contributors may be used to endorse or promote products                                          // 15
 *       derived from this software without specific prior written permission.                                         // 16
 *                                                                                                                     // 17
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND                                     // 18
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED                                       // 19
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE                                              // 20
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY                                                       // 21
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES                                          // 22
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;                                        // 23
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND                                         // 24
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT                                          // 25
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS                                       // 26
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                                                        // 27
 *                                                                                                                     // 28
 * ***** END LICENSE BLOCK ***** */                                                                                    // 29
                                                                                                                       // 30
/**                                                                                                                    // 31
 * Define a module along with a payload                                                                                // 32
 * @param module a name for the payload                                                                                // 33
 * @param payload a function to call with (require, exports, module) params                                            // 34
 */                                                                                                                    // 35
                                                                                                                       // 36
(function() {                                                                                                          // 37
                                                                                                                       // 38
var ACE_NAMESPACE = "";                                                                                                // 39
                                                                                                                       // 40
var global = (function() { return this; })();                                                                          // 41
if (!global && typeof window != "undefined") global = window; // strict mode                                           // 42
                                                                                                                       // 43
                                                                                                                       // 44
if (!ACE_NAMESPACE && typeof requirejs !== "undefined")                                                                // 45
    return;                                                                                                            // 46
                                                                                                                       // 47
                                                                                                                       // 48
var define = function(module, deps, payload) {                                                                         // 49
    if (typeof module !== "string") {                                                                                  // 50
        if (define.original)                                                                                           // 51
            define.original.apply(this, arguments);                                                                    // 52
        else {                                                                                                         // 53
            console.error("dropping module because define wasn\'t a string.");                                         // 54
            console.trace();                                                                                           // 55
        }                                                                                                              // 56
        return;                                                                                                        // 57
    }                                                                                                                  // 58
    if (arguments.length == 2)                                                                                         // 59
        payload = deps;                                                                                                // 60
    if (!define.modules[module]) {                                                                                     // 61
        define.payloads[module] = payload;                                                                             // 62
        define.modules[module] = null;                                                                                 // 63
    }                                                                                                                  // 64
};                                                                                                                     // 65
                                                                                                                       // 66
define.modules = {};                                                                                                   // 67
define.payloads = {};                                                                                                  // 68
                                                                                                                       // 69
/**                                                                                                                    // 70
 * Get at functionality define()ed using the function above                                                            // 71
 */                                                                                                                    // 72
var _require = function(parentId, module, callback) {                                                                  // 73
    if (typeof module === "string") {                                                                                  // 74
        var payload = lookup(parentId, module);                                                                        // 75
        if (payload != undefined) {                                                                                    // 76
            callback && callback();                                                                                    // 77
            return payload;                                                                                            // 78
        }                                                                                                              // 79
    } else if (Object.prototype.toString.call(module) === "[object Array]") {                                          // 80
        var params = [];                                                                                               // 81
        for (var i = 0, l = module.length; i < l; ++i) {                                                               // 82
            var dep = lookup(parentId, module[i]);                                                                     // 83
            if (dep == undefined && require.original)                                                                  // 84
                return;                                                                                                // 85
            params.push(dep);                                                                                          // 86
        }                                                                                                              // 87
        return callback && callback.apply(null, params) || true;                                                       // 88
    }                                                                                                                  // 89
};                                                                                                                     // 90
                                                                                                                       // 91
var require = function(module, callback) {                                                                             // 92
    var packagedModule = _require("", module, callback);                                                               // 93
    if (packagedModule == undefined && require.original)                                                               // 94
        return require.original.apply(this, arguments);                                                                // 95
    return packagedModule;                                                                                             // 96
};                                                                                                                     // 97
                                                                                                                       // 98
var normalizeModule = function(parentId, moduleName) {                                                                 // 99
    // normalize plugin requires                                                                                       // 100
    if (moduleName.indexOf("!") !== -1) {                                                                              // 101
        var chunks = moduleName.split("!");                                                                            // 102
        return normalizeModule(parentId, chunks[0]) + "!" + normalizeModule(parentId, chunks[1]);                      // 103
    }                                                                                                                  // 104
    // normalize relative requires                                                                                     // 105
    if (moduleName.charAt(0) == ".") {                                                                                 // 106
        var base = parentId.split("/").slice(0, -1).join("/");                                                         // 107
        moduleName = base + "/" + moduleName;                                                                          // 108
                                                                                                                       // 109
        while(moduleName.indexOf(".") !== -1 && previous != moduleName) {                                              // 110
            var previous = moduleName;                                                                                 // 111
            moduleName = moduleName.replace(/\/\.\//, "/").replace(/[^\/]+\/\.\.\//, "");                              // 112
        }                                                                                                              // 113
    }                                                                                                                  // 114
    return moduleName;                                                                                                 // 115
};                                                                                                                     // 116
                                                                                                                       // 117
/**                                                                                                                    // 118
 * Internal function to lookup moduleNames and resolve them by calling the                                             // 119
 * definition function if needed.                                                                                      // 120
 */                                                                                                                    // 121
var lookup = function(parentId, moduleName) {                                                                          // 122
    moduleName = normalizeModule(parentId, moduleName);                                                                // 123
                                                                                                                       // 124
    var module = define.modules[moduleName];                                                                           // 125
    if (!module) {                                                                                                     // 126
        module = define.payloads[moduleName];                                                                          // 127
        if (typeof module === 'function') {                                                                            // 128
            var exports = {};                                                                                          // 129
            var mod = {                                                                                                // 130
                id: moduleName,                                                                                        // 131
                uri: '',                                                                                               // 132
                exports: exports,                                                                                      // 133
                packaged: true                                                                                         // 134
            };                                                                                                         // 135
                                                                                                                       // 136
            var req = function(module, callback) {                                                                     // 137
                return _require(moduleName, module, callback);                                                         // 138
            };                                                                                                         // 139
                                                                                                                       // 140
            var returnValue = module(req, exports, mod);                                                               // 141
            exports = returnValue || mod.exports;                                                                      // 142
            define.modules[moduleName] = exports;                                                                      // 143
            delete define.payloads[moduleName];                                                                        // 144
        }                                                                                                              // 145
        module = define.modules[moduleName] = exports || module;                                                       // 146
    }                                                                                                                  // 147
    return module;                                                                                                     // 148
};                                                                                                                     // 149
                                                                                                                       // 150
function exportAce(ns) {                                                                                               // 151
    var root = global;                                                                                                 // 152
    if (ns) {                                                                                                          // 153
        if (!global[ns])                                                                                               // 154
            global[ns] = {};                                                                                           // 155
        root = global[ns];                                                                                             // 156
    }                                                                                                                  // 157
                                                                                                                       // 158
    if (!root.define || !root.define.packaged) {                                                                       // 159
        define.original = root.define;                                                                                 // 160
        root.define = define;                                                                                          // 161
        root.define.packaged = true;                                                                                   // 162
    }                                                                                                                  // 163
                                                                                                                       // 164
    if (!root.require || !root.require.packaged) {                                                                     // 165
        require.original = root.require;                                                                               // 166
        root.require = require;                                                                                        // 167
        root.require.packaged = true;                                                                                  // 168
    }                                                                                                                  // 169
}                                                                                                                      // 170
                                                                                                                       // 171
exportAce(ACE_NAMESPACE);                                                                                              // 172
                                                                                                                       // 173
})();                                                                                                                  // 174
                                                                                                                       // 175
define("ace/lib/regexp",["require","exports","module"], function(require, exports, module) {                           // 176
"use strict";                                                                                                          // 177
                                                                                                                       // 178
    var real = {                                                                                                       // 179
            exec: RegExp.prototype.exec,                                                                               // 180
            test: RegExp.prototype.test,                                                                               // 181
            match: String.prototype.match,                                                                             // 182
            replace: String.prototype.replace,                                                                         // 183
            split: String.prototype.split                                                                              // 184
        },                                                                                                             // 185
        compliantExecNpcg = real.exec.call(/()??/, "")[1] === undefined, // check `exec` handling of nonparticipating capturing groups
        compliantLastIndexIncrement = function () {                                                                    // 187
            var x = /^/g;                                                                                              // 188
            real.test.call(x, "");                                                                                     // 189
            return !x.lastIndex;                                                                                       // 190
        }();                                                                                                           // 191
                                                                                                                       // 192
    if (compliantLastIndexIncrement && compliantExecNpcg)                                                              // 193
        return;                                                                                                        // 194
    RegExp.prototype.exec = function (str) {                                                                           // 195
        var match = real.exec.apply(this, arguments),                                                                  // 196
            name, r2;                                                                                                  // 197
        if ( typeof(str) == 'string' && match) {                                                                       // 198
            if (!compliantExecNpcg && match.length > 1 && indexOf(match, "") > -1) {                                   // 199
                r2 = RegExp(this.source, real.replace.call(getNativeFlags(this), "g", ""));                            // 200
                real.replace.call(str.slice(match.index), r2, function () {                                            // 201
                    for (var i = 1; i < arguments.length - 2; i++) {                                                   // 202
                        if (arguments[i] === undefined)                                                                // 203
                            match[i] = undefined;                                                                      // 204
                    }                                                                                                  // 205
                });                                                                                                    // 206
            }                                                                                                          // 207
            if (this._xregexp && this._xregexp.captureNames) {                                                         // 208
                for (var i = 1; i < match.length; i++) {                                                               // 209
                    name = this._xregexp.captureNames[i - 1];                                                          // 210
                    if (name)                                                                                          // 211
                       match[name] = match[i];                                                                         // 212
                }                                                                                                      // 213
            }                                                                                                          // 214
            if (!compliantLastIndexIncrement && this.global && !match[0].length && (this.lastIndex > match.index))     // 215
                this.lastIndex--;                                                                                      // 216
        }                                                                                                              // 217
        return match;                                                                                                  // 218
    };                                                                                                                 // 219
    if (!compliantLastIndexIncrement) {                                                                                // 220
        RegExp.prototype.test = function (str) {                                                                       // 221
            var match = real.exec.call(this, str);                                                                     // 222
            if (match && this.global && !match[0].length && (this.lastIndex > match.index))                            // 223
                this.lastIndex--;                                                                                      // 224
            return !!match;                                                                                            // 225
        };                                                                                                             // 226
    }                                                                                                                  // 227
                                                                                                                       // 228
    function getNativeFlags (regex) {                                                                                  // 229
        return (regex.global     ? "g" : "") +                                                                         // 230
               (regex.ignoreCase ? "i" : "") +                                                                         // 231
               (regex.multiline  ? "m" : "") +                                                                         // 232
               (regex.extended   ? "x" : "") + // Proposed for ES4; included in AS3                                    // 233
               (regex.sticky     ? "y" : "");                                                                          // 234
    }                                                                                                                  // 235
                                                                                                                       // 236
    function indexOf (array, item, from) {                                                                             // 237
        if (Array.prototype.indexOf) // Use the native array method if available                                       // 238
            return array.indexOf(item, from);                                                                          // 239
        for (var i = from || 0; i < array.length; i++) {                                                               // 240
            if (array[i] === item)                                                                                     // 241
                return i;                                                                                              // 242
        }                                                                                                              // 243
        return -1;                                                                                                     // 244
    }                                                                                                                  // 245
                                                                                                                       // 246
});                                                                                                                    // 247
                                                                                                                       // 248
define("ace/lib/es5-shim",["require","exports","module"], function(require, exports, module) {                         // 249
                                                                                                                       // 250
function Empty() {}                                                                                                    // 251
                                                                                                                       // 252
if (!Function.prototype.bind) {                                                                                        // 253
    Function.prototype.bind = function bind(that) { // .length is 1                                                    // 254
        var target = this;                                                                                             // 255
        if (typeof target != "function") {                                                                             // 256
            throw new TypeError("Function.prototype.bind called on incompatible " + target);                           // 257
        }                                                                                                              // 258
        var args = slice.call(arguments, 1); // for normal call                                                        // 259
        var bound = function () {                                                                                      // 260
                                                                                                                       // 261
            if (this instanceof bound) {                                                                               // 262
                                                                                                                       // 263
                var result = target.apply(                                                                             // 264
                    this,                                                                                              // 265
                    args.concat(slice.call(arguments))                                                                 // 266
                );                                                                                                     // 267
                if (Object(result) === result) {                                                                       // 268
                    return result;                                                                                     // 269
                }                                                                                                      // 270
                return this;                                                                                           // 271
                                                                                                                       // 272
            } else {                                                                                                   // 273
                return target.apply(                                                                                   // 274
                    that,                                                                                              // 275
                    args.concat(slice.call(arguments))                                                                 // 276
                );                                                                                                     // 277
                                                                                                                       // 278
            }                                                                                                          // 279
                                                                                                                       // 280
        };                                                                                                             // 281
        if(target.prototype) {                                                                                         // 282
            Empty.prototype = target.prototype;                                                                        // 283
            bound.prototype = new Empty();                                                                             // 284
            Empty.prototype = null;                                                                                    // 285
        }                                                                                                              // 286
        return bound;                                                                                                  // 287
    };                                                                                                                 // 288
}                                                                                                                      // 289
var call = Function.prototype.call;                                                                                    // 290
var prototypeOfArray = Array.prototype;                                                                                // 291
var prototypeOfObject = Object.prototype;                                                                              // 292
var slice = prototypeOfArray.slice;                                                                                    // 293
var _toString = call.bind(prototypeOfObject.toString);                                                                 // 294
var owns = call.bind(prototypeOfObject.hasOwnProperty);                                                                // 295
var defineGetter;                                                                                                      // 296
var defineSetter;                                                                                                      // 297
var lookupGetter;                                                                                                      // 298
var lookupSetter;                                                                                                      // 299
var supportsAccessors;                                                                                                 // 300
if ((supportsAccessors = owns(prototypeOfObject, "__defineGetter__"))) {                                               // 301
    defineGetter = call.bind(prototypeOfObject.__defineGetter__);                                                      // 302
    defineSetter = call.bind(prototypeOfObject.__defineSetter__);                                                      // 303
    lookupGetter = call.bind(prototypeOfObject.__lookupGetter__);                                                      // 304
    lookupSetter = call.bind(prototypeOfObject.__lookupSetter__);                                                      // 305
}                                                                                                                      // 306
if ([1,2].splice(0).length != 2) {                                                                                     // 307
    if(function() { // test IE < 9 to splice bug - see issue #138                                                      // 308
        function makeArray(l) {                                                                                        // 309
            var a = new Array(l+2);                                                                                    // 310
            a[0] = a[1] = 0;                                                                                           // 311
            return a;                                                                                                  // 312
        }                                                                                                              // 313
        var array = [], lengthBefore;                                                                                  // 314
                                                                                                                       // 315
        array.splice.apply(array, makeArray(20));                                                                      // 316
        array.splice.apply(array, makeArray(26));                                                                      // 317
                                                                                                                       // 318
        lengthBefore = array.length; //46                                                                              // 319
        array.splice(5, 0, "XXX"); // add one element                                                                  // 320
                                                                                                                       // 321
        lengthBefore + 1 == array.length                                                                               // 322
                                                                                                                       // 323
        if (lengthBefore + 1 == array.length) {                                                                        // 324
            return true;// has right splice implementation without bugs                                                // 325
        }                                                                                                              // 326
    }()) {//IE 6/7                                                                                                     // 327
        var array_splice = Array.prototype.splice;                                                                     // 328
        Array.prototype.splice = function(start, deleteCount) {                                                        // 329
            if (!arguments.length) {                                                                                   // 330
                return [];                                                                                             // 331
            } else {                                                                                                   // 332
                return array_splice.apply(this, [                                                                      // 333
                    start === void 0 ? 0 : start,                                                                      // 334
                    deleteCount === void 0 ? (this.length - start) : deleteCount                                       // 335
                ].concat(slice.call(arguments, 2)))                                                                    // 336
            }                                                                                                          // 337
        };                                                                                                             // 338
    } else {//IE8                                                                                                      // 339
        Array.prototype.splice = function(pos, removeCount){                                                           // 340
            var length = this.length;                                                                                  // 341
            if (pos > 0) {                                                                                             // 342
                if (pos > length)                                                                                      // 343
                    pos = length;                                                                                      // 344
            } else if (pos == void 0) {                                                                                // 345
                pos = 0;                                                                                               // 346
            } else if (pos < 0) {                                                                                      // 347
                pos = Math.max(length + pos, 0);                                                                       // 348
            }                                                                                                          // 349
                                                                                                                       // 350
            if (!(pos+removeCount < length))                                                                           // 351
                removeCount = length - pos;                                                                            // 352
                                                                                                                       // 353
            var removed = this.slice(pos, pos+removeCount);                                                            // 354
            var insert = slice.call(arguments, 2);                                                                     // 355
            var add = insert.length;                                                                                   // 356
            if (pos === length) {                                                                                      // 357
                if (add) {                                                                                             // 358
                    this.push.apply(this, insert);                                                                     // 359
                }                                                                                                      // 360
            } else {                                                                                                   // 361
                var remove = Math.min(removeCount, length - pos);                                                      // 362
                var tailOldPos = pos + remove;                                                                         // 363
                var tailNewPos = tailOldPos + add - remove;                                                            // 364
                var tailCount = length - tailOldPos;                                                                   // 365
                var lengthAfterRemove = length - remove;                                                               // 366
                                                                                                                       // 367
                if (tailNewPos < tailOldPos) { // case A                                                               // 368
                    for (var i = 0; i < tailCount; ++i) {                                                              // 369
                        this[tailNewPos+i] = this[tailOldPos+i];                                                       // 370
                    }                                                                                                  // 371
                } else if (tailNewPos > tailOldPos) { // case B                                                        // 372
                    for (i = tailCount; i--; ) {                                                                       // 373
                        this[tailNewPos+i] = this[tailOldPos+i];                                                       // 374
                    }                                                                                                  // 375
                } // else, add == remove (nothing to do)                                                               // 376
                                                                                                                       // 377
                if (add && pos === lengthAfterRemove) {                                                                // 378
                    this.length = lengthAfterRemove; // truncate array                                                 // 379
                    this.push.apply(this, insert);                                                                     // 380
                } else {                                                                                               // 381
                    this.length = lengthAfterRemove + add; // reserves space                                           // 382
                    for (i = 0; i < add; ++i) {                                                                        // 383
                        this[pos+i] = insert[i];                                                                       // 384
                    }                                                                                                  // 385
                }                                                                                                      // 386
            }                                                                                                          // 387
            return removed;                                                                                            // 388
        };                                                                                                             // 389
    }                                                                                                                  // 390
}                                                                                                                      // 391
if (!Array.isArray) {                                                                                                  // 392
    Array.isArray = function isArray(obj) {                                                                            // 393
        return _toString(obj) == "[object Array]";                                                                     // 394
    };                                                                                                                 // 395
}                                                                                                                      // 396
var boxedString = Object("a"),                                                                                         // 397
    splitString = boxedString[0] != "a" || !(0 in boxedString);                                                        // 398
                                                                                                                       // 399
if (!Array.prototype.forEach) {                                                                                        // 400
    Array.prototype.forEach = function forEach(fun /*, thisp*/) {                                                      // 401
        var object = toObject(this),                                                                                   // 402
            self = splitString && _toString(this) == "[object String]" ?                                               // 403
                this.split("") :                                                                                       // 404
                object,                                                                                                // 405
            thisp = arguments[1],                                                                                      // 406
            i = -1,                                                                                                    // 407
            length = self.length >>> 0;                                                                                // 408
        if (_toString(fun) != "[object Function]") {                                                                   // 409
            throw new TypeError(); // TODO message                                                                     // 410
        }                                                                                                              // 411
                                                                                                                       // 412
        while (++i < length) {                                                                                         // 413
            if (i in self) {                                                                                           // 414
                fun.call(thisp, self[i], i, object);                                                                   // 415
            }                                                                                                          // 416
        }                                                                                                              // 417
    };                                                                                                                 // 418
}                                                                                                                      // 419
if (!Array.prototype.map) {                                                                                            // 420
    Array.prototype.map = function map(fun /*, thisp*/) {                                                              // 421
        var object = toObject(this),                                                                                   // 422
            self = splitString && _toString(this) == "[object String]" ?                                               // 423
                this.split("") :                                                                                       // 424
                object,                                                                                                // 425
            length = self.length >>> 0,                                                                                // 426
            result = Array(length),                                                                                    // 427
            thisp = arguments[1];                                                                                      // 428
        if (_toString(fun) != "[object Function]") {                                                                   // 429
            throw new TypeError(fun + " is not a function");                                                           // 430
        }                                                                                                              // 431
                                                                                                                       // 432
        for (var i = 0; i < length; i++) {                                                                             // 433
            if (i in self)                                                                                             // 434
                result[i] = fun.call(thisp, self[i], i, object);                                                       // 435
        }                                                                                                              // 436
        return result;                                                                                                 // 437
    };                                                                                                                 // 438
}                                                                                                                      // 439
if (!Array.prototype.filter) {                                                                                         // 440
    Array.prototype.filter = function filter(fun /*, thisp */) {                                                       // 441
        var object = toObject(this),                                                                                   // 442
            self = splitString && _toString(this) == "[object String]" ?                                               // 443
                this.split("") :                                                                                       // 444
                    object,                                                                                            // 445
            length = self.length >>> 0,                                                                                // 446
            result = [],                                                                                               // 447
            value,                                                                                                     // 448
            thisp = arguments[1];                                                                                      // 449
        if (_toString(fun) != "[object Function]") {                                                                   // 450
            throw new TypeError(fun + " is not a function");                                                           // 451
        }                                                                                                              // 452
                                                                                                                       // 453
        for (var i = 0; i < length; i++) {                                                                             // 454
            if (i in self) {                                                                                           // 455
                value = self[i];                                                                                       // 456
                if (fun.call(thisp, value, i, object)) {                                                               // 457
                    result.push(value);                                                                                // 458
                }                                                                                                      // 459
            }                                                                                                          // 460
        }                                                                                                              // 461
        return result;                                                                                                 // 462
    };                                                                                                                 // 463
}                                                                                                                      // 464
if (!Array.prototype.every) {                                                                                          // 465
    Array.prototype.every = function every(fun /*, thisp */) {                                                         // 466
        var object = toObject(this),                                                                                   // 467
            self = splitString && _toString(this) == "[object String]" ?                                               // 468
                this.split("") :                                                                                       // 469
                object,                                                                                                // 470
            length = self.length >>> 0,                                                                                // 471
            thisp = arguments[1];                                                                                      // 472
        if (_toString(fun) != "[object Function]") {                                                                   // 473
            throw new TypeError(fun + " is not a function");                                                           // 474
        }                                                                                                              // 475
                                                                                                                       // 476
        for (var i = 0; i < length; i++) {                                                                             // 477
            if (i in self && !fun.call(thisp, self[i], i, object)) {                                                   // 478
                return false;                                                                                          // 479
            }                                                                                                          // 480
        }                                                                                                              // 481
        return true;                                                                                                   // 482
    };                                                                                                                 // 483
}                                                                                                                      // 484
if (!Array.prototype.some) {                                                                                           // 485
    Array.prototype.some = function some(fun /*, thisp */) {                                                           // 486
        var object = toObject(this),                                                                                   // 487
            self = splitString && _toString(this) == "[object String]" ?                                               // 488
                this.split("") :                                                                                       // 489
                object,                                                                                                // 490
            length = self.length >>> 0,                                                                                // 491
            thisp = arguments[1];                                                                                      // 492
        if (_toString(fun) != "[object Function]") {                                                                   // 493
            throw new TypeError(fun + " is not a function");                                                           // 494
        }                                                                                                              // 495
                                                                                                                       // 496
        for (var i = 0; i < length; i++) {                                                                             // 497
            if (i in self && fun.call(thisp, self[i], i, object)) {                                                    // 498
                return true;                                                                                           // 499
            }                                                                                                          // 500
        }                                                                                                              // 501
        return false;                                                                                                  // 502
    };                                                                                                                 // 503
}                                                                                                                      // 504
if (!Array.prototype.reduce) {                                                                                         // 505
    Array.prototype.reduce = function reduce(fun /*, initial*/) {                                                      // 506
        var object = toObject(this),                                                                                   // 507
            self = splitString && _toString(this) == "[object String]" ?                                               // 508
                this.split("") :                                                                                       // 509
                object,                                                                                                // 510
            length = self.length >>> 0;                                                                                // 511
        if (_toString(fun) != "[object Function]") {                                                                   // 512
            throw new TypeError(fun + " is not a function");                                                           // 513
        }                                                                                                              // 514
        if (!length && arguments.length == 1) {                                                                        // 515
            throw new TypeError("reduce of empty array with no initial value");                                        // 516
        }                                                                                                              // 517
                                                                                                                       // 518
        var i = 0;                                                                                                     // 519
        var result;                                                                                                    // 520
        if (arguments.length >= 2) {                                                                                   // 521
            result = arguments[1];                                                                                     // 522
        } else {                                                                                                       // 523
            do {                                                                                                       // 524
                if (i in self) {                                                                                       // 525
                    result = self[i++];                                                                                // 526
                    break;                                                                                             // 527
                }                                                                                                      // 528
                if (++i >= length) {                                                                                   // 529
                    throw new TypeError("reduce of empty array with no initial value");                                // 530
                }                                                                                                      // 531
            } while (true);                                                                                            // 532
        }                                                                                                              // 533
                                                                                                                       // 534
        for (; i < length; i++) {                                                                                      // 535
            if (i in self) {                                                                                           // 536
                result = fun.call(void 0, result, self[i], i, object);                                                 // 537
            }                                                                                                          // 538
        }                                                                                                              // 539
                                                                                                                       // 540
        return result;                                                                                                 // 541
    };                                                                                                                 // 542
}                                                                                                                      // 543
if (!Array.prototype.reduceRight) {                                                                                    // 544
    Array.prototype.reduceRight = function reduceRight(fun /*, initial*/) {                                            // 545
        var object = toObject(this),                                                                                   // 546
            self = splitString && _toString(this) == "[object String]" ?                                               // 547
                this.split("") :                                                                                       // 548
                object,                                                                                                // 549
            length = self.length >>> 0;                                                                                // 550
        if (_toString(fun) != "[object Function]") {                                                                   // 551
            throw new TypeError(fun + " is not a function");                                                           // 552
        }                                                                                                              // 553
        if (!length && arguments.length == 1) {                                                                        // 554
            throw new TypeError("reduceRight of empty array with no initial value");                                   // 555
        }                                                                                                              // 556
                                                                                                                       // 557
        var result, i = length - 1;                                                                                    // 558
        if (arguments.length >= 2) {                                                                                   // 559
            result = arguments[1];                                                                                     // 560
        } else {                                                                                                       // 561
            do {                                                                                                       // 562
                if (i in self) {                                                                                       // 563
                    result = self[i--];                                                                                // 564
                    break;                                                                                             // 565
                }                                                                                                      // 566
                if (--i < 0) {                                                                                         // 567
                    throw new TypeError("reduceRight of empty array with no initial value");                           // 568
                }                                                                                                      // 569
            } while (true);                                                                                            // 570
        }                                                                                                              // 571
                                                                                                                       // 572
        do {                                                                                                           // 573
            if (i in this) {                                                                                           // 574
                result = fun.call(void 0, result, self[i], i, object);                                                 // 575
            }                                                                                                          // 576
        } while (i--);                                                                                                 // 577
                                                                                                                       // 578
        return result;                                                                                                 // 579
    };                                                                                                                 // 580
}                                                                                                                      // 581
if (!Array.prototype.indexOf || ([0, 1].indexOf(1, 2) != -1)) {                                                        // 582
    Array.prototype.indexOf = function indexOf(sought /*, fromIndex */ ) {                                             // 583
        var self = splitString && _toString(this) == "[object String]" ?                                               // 584
                this.split("") :                                                                                       // 585
                toObject(this),                                                                                        // 586
            length = self.length >>> 0;                                                                                // 587
                                                                                                                       // 588
        if (!length) {                                                                                                 // 589
            return -1;                                                                                                 // 590
        }                                                                                                              // 591
                                                                                                                       // 592
        var i = 0;                                                                                                     // 593
        if (arguments.length > 1) {                                                                                    // 594
            i = toInteger(arguments[1]);                                                                               // 595
        }                                                                                                              // 596
        i = i >= 0 ? i : Math.max(0, length + i);                                                                      // 597
        for (; i < length; i++) {                                                                                      // 598
            if (i in self && self[i] === sought) {                                                                     // 599
                return i;                                                                                              // 600
            }                                                                                                          // 601
        }                                                                                                              // 602
        return -1;                                                                                                     // 603
    };                                                                                                                 // 604
}                                                                                                                      // 605
if (!Array.prototype.lastIndexOf || ([0, 1].lastIndexOf(0, -3) != -1)) {                                               // 606
    Array.prototype.lastIndexOf = function lastIndexOf(sought /*, fromIndex */) {                                      // 607
        var self = splitString && _toString(this) == "[object String]" ?                                               // 608
                this.split("") :                                                                                       // 609
                toObject(this),                                                                                        // 610
            length = self.length >>> 0;                                                                                // 611
                                                                                                                       // 612
        if (!length) {                                                                                                 // 613
            return -1;                                                                                                 // 614
        }                                                                                                              // 615
        var i = length - 1;                                                                                            // 616
        if (arguments.length > 1) {                                                                                    // 617
            i = Math.min(i, toInteger(arguments[1]));                                                                  // 618
        }                                                                                                              // 619
        i = i >= 0 ? i : length - Math.abs(i);                                                                         // 620
        for (; i >= 0; i--) {                                                                                          // 621
            if (i in self && sought === self[i]) {                                                                     // 622
                return i;                                                                                              // 623
            }                                                                                                          // 624
        }                                                                                                              // 625
        return -1;                                                                                                     // 626
    };                                                                                                                 // 627
}                                                                                                                      // 628
if (!Object.getPrototypeOf) {                                                                                          // 629
    Object.getPrototypeOf = function getPrototypeOf(object) {                                                          // 630
        return object.__proto__ || (                                                                                   // 631
            object.constructor ?                                                                                       // 632
            object.constructor.prototype :                                                                             // 633
            prototypeOfObject                                                                                          // 634
        );                                                                                                             // 635
    };                                                                                                                 // 636
}                                                                                                                      // 637
if (!Object.getOwnPropertyDescriptor) {                                                                                // 638
    var ERR_NON_OBJECT = "Object.getOwnPropertyDescriptor called on a " +                                              // 639
                         "non-object: ";                                                                               // 640
    Object.getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {                            // 641
        if ((typeof object != "object" && typeof object != "function") || object === null)                             // 642
            throw new TypeError(ERR_NON_OBJECT + object);                                                              // 643
        if (!owns(object, property))                                                                                   // 644
            return;                                                                                                    // 645
                                                                                                                       // 646
        var descriptor, getter, setter;                                                                                // 647
        descriptor =  { enumerable: true, configurable: true };                                                        // 648
        if (supportsAccessors) {                                                                                       // 649
            var prototype = object.__proto__;                                                                          // 650
            object.__proto__ = prototypeOfObject;                                                                      // 651
                                                                                                                       // 652
            var getter = lookupGetter(object, property);                                                               // 653
            var setter = lookupSetter(object, property);                                                               // 654
            object.__proto__ = prototype;                                                                              // 655
                                                                                                                       // 656
            if (getter || setter) {                                                                                    // 657
                if (getter) descriptor.get = getter;                                                                   // 658
                if (setter) descriptor.set = setter;                                                                   // 659
                return descriptor;                                                                                     // 660
            }                                                                                                          // 661
        }                                                                                                              // 662
        descriptor.value = object[property];                                                                           // 663
        return descriptor;                                                                                             // 664
    };                                                                                                                 // 665
}                                                                                                                      // 666
if (!Object.getOwnPropertyNames) {                                                                                     // 667
    Object.getOwnPropertyNames = function getOwnPropertyNames(object) {                                                // 668
        return Object.keys(object);                                                                                    // 669
    };                                                                                                                 // 670
}                                                                                                                      // 671
if (!Object.create) {                                                                                                  // 672
    var createEmpty;                                                                                                   // 673
    if (Object.prototype.__proto__ === null) {                                                                         // 674
        createEmpty = function () {                                                                                    // 675
            return { "__proto__": null };                                                                              // 676
        };                                                                                                             // 677
    } else {                                                                                                           // 678
        createEmpty = function () {                                                                                    // 679
            var empty = {};                                                                                            // 680
            for (var i in empty)                                                                                       // 681
                empty[i] = null;                                                                                       // 682
            empty.constructor =                                                                                        // 683
            empty.hasOwnProperty =                                                                                     // 684
            empty.propertyIsEnumerable =                                                                               // 685
            empty.isPrototypeOf =                                                                                      // 686
            empty.toLocaleString =                                                                                     // 687
            empty.toString =                                                                                           // 688
            empty.valueOf =                                                                                            // 689
            empty.__proto__ = null;                                                                                    // 690
            return empty;                                                                                              // 691
        }                                                                                                              // 692
    }                                                                                                                  // 693
                                                                                                                       // 694
    Object.create = function create(prototype, properties) {                                                           // 695
        var object;                                                                                                    // 696
        if (prototype === null) {                                                                                      // 697
            object = createEmpty();                                                                                    // 698
        } else {                                                                                                       // 699
            if (typeof prototype != "object")                                                                          // 700
                throw new TypeError("typeof prototype["+(typeof prototype)+"] != 'object'");                           // 701
            var Type = function () {};                                                                                 // 702
            Type.prototype = prototype;                                                                                // 703
            object = new Type();                                                                                       // 704
            object.__proto__ = prototype;                                                                              // 705
        }                                                                                                              // 706
        if (properties !== void 0)                                                                                     // 707
            Object.defineProperties(object, properties);                                                               // 708
        return object;                                                                                                 // 709
    };                                                                                                                 // 710
}                                                                                                                      // 711
                                                                                                                       // 712
function doesDefinePropertyWork(object) {                                                                              // 713
    try {                                                                                                              // 714
        Object.defineProperty(object, "sentinel", {});                                                                 // 715
        return "sentinel" in object;                                                                                   // 716
    } catch (exception) {                                                                                              // 717
    }                                                                                                                  // 718
}                                                                                                                      // 719
if (Object.defineProperty) {                                                                                           // 720
    var definePropertyWorksOnObject = doesDefinePropertyWork({});                                                      // 721
    var definePropertyWorksOnDom = typeof document == "undefined" ||                                                   // 722
        doesDefinePropertyWork(document.createElement("div"));                                                         // 723
    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) {                                                   // 724
        var definePropertyFallback = Object.defineProperty;                                                            // 725
    }                                                                                                                  // 726
}                                                                                                                      // 727
                                                                                                                       // 728
if (!Object.defineProperty || definePropertyFallback) {                                                                // 729
    var ERR_NON_OBJECT_DESCRIPTOR = "Property description must be an object: ";                                        // 730
    var ERR_NON_OBJECT_TARGET = "Object.defineProperty called on non-object: "                                         // 731
    var ERR_ACCESSORS_NOT_SUPPORTED = "getters & setters can not be defined " +                                        // 732
                                      "on this javascript engine";                                                     // 733
                                                                                                                       // 734
    Object.defineProperty = function defineProperty(object, property, descriptor) {                                    // 735
        if ((typeof object != "object" && typeof object != "function") || object === null)                             // 736
            throw new TypeError(ERR_NON_OBJECT_TARGET + object);                                                       // 737
        if ((typeof descriptor != "object" && typeof descriptor != "function") || descriptor === null)                 // 738
            throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);                                               // 739
        if (definePropertyFallback) {                                                                                  // 740
            try {                                                                                                      // 741
                return definePropertyFallback.call(Object, object, property, descriptor);                              // 742
            } catch (exception) {                                                                                      // 743
            }                                                                                                          // 744
        }                                                                                                              // 745
        if (owns(descriptor, "value")) {                                                                               // 746
                                                                                                                       // 747
            if (supportsAccessors && (lookupGetter(object, property) ||                                                // 748
                                      lookupSetter(object, property)))                                                 // 749
            {                                                                                                          // 750
                var prototype = object.__proto__;                                                                      // 751
                object.__proto__ = prototypeOfObject;                                                                  // 752
                delete object[property];                                                                               // 753
                object[property] = descriptor.value;                                                                   // 754
                object.__proto__ = prototype;                                                                          // 755
            } else {                                                                                                   // 756
                object[property] = descriptor.value;                                                                   // 757
            }                                                                                                          // 758
        } else {                                                                                                       // 759
            if (!supportsAccessors)                                                                                    // 760
                throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);                                                      // 761
            if (owns(descriptor, "get"))                                                                               // 762
                defineGetter(object, property, descriptor.get);                                                        // 763
            if (owns(descriptor, "set"))                                                                               // 764
                defineSetter(object, property, descriptor.set);                                                        // 765
        }                                                                                                              // 766
                                                                                                                       // 767
        return object;                                                                                                 // 768
    };                                                                                                                 // 769
}                                                                                                                      // 770
if (!Object.defineProperties) {                                                                                        // 771
    Object.defineProperties = function defineProperties(object, properties) {                                          // 772
        for (var property in properties) {                                                                             // 773
            if (owns(properties, property))                                                                            // 774
                Object.defineProperty(object, property, properties[property]);                                         // 775
        }                                                                                                              // 776
        return object;                                                                                                 // 777
    };                                                                                                                 // 778
}                                                                                                                      // 779
if (!Object.seal) {                                                                                                    // 780
    Object.seal = function seal(object) {                                                                              // 781
        return object;                                                                                                 // 782
    };                                                                                                                 // 783
}                                                                                                                      // 784
if (!Object.freeze) {                                                                                                  // 785
    Object.freeze = function freeze(object) {                                                                          // 786
        return object;                                                                                                 // 787
    };                                                                                                                 // 788
}                                                                                                                      // 789
try {                                                                                                                  // 790
    Object.freeze(function () {});                                                                                     // 791
} catch (exception) {                                                                                                  // 792
    Object.freeze = (function freeze(freezeObject) {                                                                   // 793
        return function freeze(object) {                                                                               // 794
            if (typeof object == "function") {                                                                         // 795
                return object;                                                                                         // 796
            } else {                                                                                                   // 797
                return freezeObject(object);                                                                           // 798
            }                                                                                                          // 799
        };                                                                                                             // 800
    })(Object.freeze);                                                                                                 // 801
}                                                                                                                      // 802
if (!Object.preventExtensions) {                                                                                       // 803
    Object.preventExtensions = function preventExtensions(object) {                                                    // 804
        return object;                                                                                                 // 805
    };                                                                                                                 // 806
}                                                                                                                      // 807
if (!Object.isSealed) {                                                                                                // 808
    Object.isSealed = function isSealed(object) {                                                                      // 809
        return false;                                                                                                  // 810
    };                                                                                                                 // 811
}                                                                                                                      // 812
if (!Object.isFrozen) {                                                                                                // 813
    Object.isFrozen = function isFrozen(object) {                                                                      // 814
        return false;                                                                                                  // 815
    };                                                                                                                 // 816
}                                                                                                                      // 817
if (!Object.isExtensible) {                                                                                            // 818
    Object.isExtensible = function isExtensible(object) {                                                              // 819
        if (Object(object) === object) {                                                                               // 820
            throw new TypeError(); // TODO message                                                                     // 821
        }                                                                                                              // 822
        var name = '';                                                                                                 // 823
        while (owns(object, name)) {                                                                                   // 824
            name += '?';                                                                                               // 825
        }                                                                                                              // 826
        object[name] = true;                                                                                           // 827
        var returnValue = owns(object, name);                                                                          // 828
        delete object[name];                                                                                           // 829
        return returnValue;                                                                                            // 830
    };                                                                                                                 // 831
}                                                                                                                      // 832
if (!Object.keys) {                                                                                                    // 833
    var hasDontEnumBug = true,                                                                                         // 834
        dontEnums = [                                                                                                  // 835
            "toString",                                                                                                // 836
            "toLocaleString",                                                                                          // 837
            "valueOf",                                                                                                 // 838
            "hasOwnProperty",                                                                                          // 839
            "isPrototypeOf",                                                                                           // 840
            "propertyIsEnumerable",                                                                                    // 841
            "constructor"                                                                                              // 842
        ],                                                                                                             // 843
        dontEnumsLength = dontEnums.length;                                                                            // 844
                                                                                                                       // 845
    for (var key in {"toString": null}) {                                                                              // 846
        hasDontEnumBug = false;                                                                                        // 847
    }                                                                                                                  // 848
                                                                                                                       // 849
    Object.keys = function keys(object) {                                                                              // 850
                                                                                                                       // 851
        if (                                                                                                           // 852
            (typeof object != "object" && typeof object != "function") ||                                              // 853
            object === null                                                                                            // 854
        ) {                                                                                                            // 855
            throw new TypeError("Object.keys called on a non-object");                                                 // 856
        }                                                                                                              // 857
                                                                                                                       // 858
        var keys = [];                                                                                                 // 859
        for (var name in object) {                                                                                     // 860
            if (owns(object, name)) {                                                                                  // 861
                keys.push(name);                                                                                       // 862
            }                                                                                                          // 863
        }                                                                                                              // 864
                                                                                                                       // 865
        if (hasDontEnumBug) {                                                                                          // 866
            for (var i = 0, ii = dontEnumsLength; i < ii; i++) {                                                       // 867
                var dontEnum = dontEnums[i];                                                                           // 868
                if (owns(object, dontEnum)) {                                                                          // 869
                    keys.push(dontEnum);                                                                               // 870
                }                                                                                                      // 871
            }                                                                                                          // 872
        }                                                                                                              // 873
        return keys;                                                                                                   // 874
    };                                                                                                                 // 875
                                                                                                                       // 876
}                                                                                                                      // 877
if (!Date.now) {                                                                                                       // 878
    Date.now = function now() {                                                                                        // 879
        return new Date().getTime();                                                                                   // 880
    };                                                                                                                 // 881
}                                                                                                                      // 882
var ws = "\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003" +                                          // 883
    "\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028" +                                             // 884
    "\u2029\uFEFF";                                                                                                    // 885
if (!String.prototype.trim || ws.trim()) {                                                                             // 886
    ws = "[" + ws + "]";                                                                                               // 887
    var trimBeginRegexp = new RegExp("^" + ws + ws + "*"),                                                             // 888
        trimEndRegexp = new RegExp(ws + ws + "*$");                                                                    // 889
    String.prototype.trim = function trim() {                                                                          // 890
        return String(this).replace(trimBeginRegexp, "").replace(trimEndRegexp, "");                                   // 891
    };                                                                                                                 // 892
}                                                                                                                      // 893
                                                                                                                       // 894
function toInteger(n) {                                                                                                // 895
    n = +n;                                                                                                            // 896
    if (n !== n) { // isNaN                                                                                            // 897
        n = 0;                                                                                                         // 898
    } else if (n !== 0 && n !== (1/0) && n !== -(1/0)) {                                                               // 899
        n = (n > 0 || -1) * Math.floor(Math.abs(n));                                                                   // 900
    }                                                                                                                  // 901
    return n;                                                                                                          // 902
}                                                                                                                      // 903
                                                                                                                       // 904
function isPrimitive(input) {                                                                                          // 905
    var type = typeof input;                                                                                           // 906
    return (                                                                                                           // 907
        input === null ||                                                                                              // 908
        type === "undefined" ||                                                                                        // 909
        type === "boolean" ||                                                                                          // 910
        type === "number" ||                                                                                           // 911
        type === "string"                                                                                              // 912
    );                                                                                                                 // 913
}                                                                                                                      // 914
                                                                                                                       // 915
function toPrimitive(input) {                                                                                          // 916
    var val, valueOf, toString;                                                                                        // 917
    if (isPrimitive(input)) {                                                                                          // 918
        return input;                                                                                                  // 919
    }                                                                                                                  // 920
    valueOf = input.valueOf;                                                                                           // 921
    if (typeof valueOf === "function") {                                                                               // 922
        val = valueOf.call(input);                                                                                     // 923
        if (isPrimitive(val)) {                                                                                        // 924
            return val;                                                                                                // 925
        }                                                                                                              // 926
    }                                                                                                                  // 927
    toString = input.toString;                                                                                         // 928
    if (typeof toString === "function") {                                                                              // 929
        val = toString.call(input);                                                                                    // 930
        if (isPrimitive(val)) {                                                                                        // 931
            return val;                                                                                                // 932
        }                                                                                                              // 933
    }                                                                                                                  // 934
    throw new TypeError();                                                                                             // 935
}                                                                                                                      // 936
var toObject = function (o) {                                                                                          // 937
    if (o == null) { // this matches both null and undefined                                                           // 938
        throw new TypeError("can't convert "+o+" to object");                                                          // 939
    }                                                                                                                  // 940
    return Object(o);                                                                                                  // 941
};                                                                                                                     // 942
                                                                                                                       // 943
});                                                                                                                    // 944
                                                                                                                       // 945
define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"], function(require, exports, module) {
"use strict";                                                                                                          // 947
                                                                                                                       // 948
require("./regexp");                                                                                                   // 949
require("./es5-shim");                                                                                                 // 950
                                                                                                                       // 951
});                                                                                                                    // 952
                                                                                                                       // 953
define("ace/lib/dom",["require","exports","module"], function(require, exports, module) {                              // 954
"use strict";                                                                                                          // 955
                                                                                                                       // 956
var XHTML_NS = "http://www.w3.org/1999/xhtml";                                                                         // 957
                                                                                                                       // 958
exports.getDocumentHead = function(doc) {                                                                              // 959
    if (!doc)                                                                                                          // 960
        doc = document;                                                                                                // 961
    return doc.head || doc.getElementsByTagName("head")[0] || doc.documentElement;                                     // 962
}                                                                                                                      // 963
                                                                                                                       // 964
exports.createElement = function(tag, ns) {                                                                            // 965
    return document.createElementNS ?                                                                                  // 966
           document.createElementNS(ns || XHTML_NS, tag) :                                                             // 967
           document.createElement(tag);                                                                                // 968
};                                                                                                                     // 969
                                                                                                                       // 970
exports.hasCssClass = function(el, name) {                                                                             // 971
    var classes = (el.className || "").split(/\s+/g);                                                                  // 972
    return classes.indexOf(name) !== -1;                                                                               // 973
};                                                                                                                     // 974
exports.addCssClass = function(el, name) {                                                                             // 975
    if (!exports.hasCssClass(el, name)) {                                                                              // 976
        el.className += " " + name;                                                                                    // 977
    }                                                                                                                  // 978
};                                                                                                                     // 979
exports.removeCssClass = function(el, name) {                                                                          // 980
    var classes = el.className.split(/\s+/g);                                                                          // 981
    while (true) {                                                                                                     // 982
        var index = classes.indexOf(name);                                                                             // 983
        if (index == -1) {                                                                                             // 984
            break;                                                                                                     // 985
        }                                                                                                              // 986
        classes.splice(index, 1);                                                                                      // 987
    }                                                                                                                  // 988
    el.className = classes.join(" ");                                                                                  // 989
};                                                                                                                     // 990
                                                                                                                       // 991
exports.toggleCssClass = function(el, name) {                                                                          // 992
    var classes = el.className.split(/\s+/g), add = true;                                                              // 993
    while (true) {                                                                                                     // 994
        var index = classes.indexOf(name);                                                                             // 995
        if (index == -1) {                                                                                             // 996
            break;                                                                                                     // 997
        }                                                                                                              // 998
        add = false;                                                                                                   // 999
        classes.splice(index, 1);                                                                                      // 1000
    }                                                                                                                  // 1001
    if(add)                                                                                                            // 1002
        classes.push(name);                                                                                            // 1003
                                                                                                                       // 1004
    el.className = classes.join(" ");                                                                                  // 1005
    return add;                                                                                                        // 1006
};                                                                                                                     // 1007
exports.setCssClass = function(node, className, include) {                                                             // 1008
    if (include) {                                                                                                     // 1009
        exports.addCssClass(node, className);                                                                          // 1010
    } else {                                                                                                           // 1011
        exports.removeCssClass(node, className);                                                                       // 1012
    }                                                                                                                  // 1013
};                                                                                                                     // 1014
                                                                                                                       // 1015
exports.hasCssString = function(id, doc) {                                                                             // 1016
    var index = 0, sheets;                                                                                             // 1017
    doc = doc || document;                                                                                             // 1018
                                                                                                                       // 1019
    if (doc.createStyleSheet && (sheets = doc.styleSheets)) {                                                          // 1020
        while (index < sheets.length)                                                                                  // 1021
            if (sheets[index++].owningElement.id === id) return true;                                                  // 1022
    } else if ((sheets = doc.getElementsByTagName("style"))) {                                                         // 1023
        while (index < sheets.length)                                                                                  // 1024
            if (sheets[index++].id === id) return true;                                                                // 1025
    }                                                                                                                  // 1026
                                                                                                                       // 1027
    return false;                                                                                                      // 1028
};                                                                                                                     // 1029
                                                                                                                       // 1030
exports.importCssString = function importCssString(cssText, id, doc) {                                                 // 1031
    doc = doc || document;                                                                                             // 1032
    if (id && exports.hasCssString(id, doc))                                                                           // 1033
        return null;                                                                                                   // 1034
                                                                                                                       // 1035
    var style;                                                                                                         // 1036
                                                                                                                       // 1037
    if (id)                                                                                                            // 1038
        cssText += "\n/*# sourceURL=ace/css/" + id + " */";                                                            // 1039
                                                                                                                       // 1040
    if (doc.createStyleSheet) {                                                                                        // 1041
        style = doc.createStyleSheet();                                                                                // 1042
        style.cssText = cssText;                                                                                       // 1043
        if (id)                                                                                                        // 1044
            style.owningElement.id = id;                                                                               // 1045
    } else {                                                                                                           // 1046
        style = doc.createElementNS                                                                                    // 1047
            ? doc.createElementNS(XHTML_NS, "style")                                                                   // 1048
            : doc.createElement("style");                                                                              // 1049
                                                                                                                       // 1050
        style.appendChild(doc.createTextNode(cssText));                                                                // 1051
        if (id)                                                                                                        // 1052
            style.id = id;                                                                                             // 1053
                                                                                                                       // 1054
        exports.getDocumentHead(doc).appendChild(style);                                                               // 1055
    }                                                                                                                  // 1056
};                                                                                                                     // 1057
                                                                                                                       // 1058
exports.importCssStylsheet = function(uri, doc) {                                                                      // 1059
    if (doc.createStyleSheet) {                                                                                        // 1060
        doc.createStyleSheet(uri);                                                                                     // 1061
    } else {                                                                                                           // 1062
        var link = exports.createElement('link');                                                                      // 1063
        link.rel = 'stylesheet';                                                                                       // 1064
        link.href = uri;                                                                                               // 1065
                                                                                                                       // 1066
        exports.getDocumentHead(doc).appendChild(link);                                                                // 1067
    }                                                                                                                  // 1068
};                                                                                                                     // 1069
                                                                                                                       // 1070
exports.getInnerWidth = function(element) {                                                                            // 1071
    return (                                                                                                           // 1072
        parseInt(exports.computedStyle(element, "paddingLeft"), 10) +                                                  // 1073
        parseInt(exports.computedStyle(element, "paddingRight"), 10) +                                                 // 1074
        element.clientWidth                                                                                            // 1075
    );                                                                                                                 // 1076
};                                                                                                                     // 1077
                                                                                                                       // 1078
exports.getInnerHeight = function(element) {                                                                           // 1079
    return (                                                                                                           // 1080
        parseInt(exports.computedStyle(element, "paddingTop"), 10) +                                                   // 1081
        parseInt(exports.computedStyle(element, "paddingBottom"), 10) +                                                // 1082
        element.clientHeight                                                                                           // 1083
    );                                                                                                                 // 1084
};                                                                                                                     // 1085
                                                                                                                       // 1086
exports.scrollbarWidth = function(document) {                                                                          // 1087
    var inner = exports.createElement("ace_inner");                                                                    // 1088
    inner.style.width = "100%";                                                                                        // 1089
    inner.style.minWidth = "0px";                                                                                      // 1090
    inner.style.height = "200px";                                                                                      // 1091
    inner.style.display = "block";                                                                                     // 1092
                                                                                                                       // 1093
    var outer = exports.createElement("ace_outer");                                                                    // 1094
    var style = outer.style;                                                                                           // 1095
                                                                                                                       // 1096
    style.position = "absolute";                                                                                       // 1097
    style.left = "-10000px";                                                                                           // 1098
    style.overflow = "hidden";                                                                                         // 1099
    style.width = "200px";                                                                                             // 1100
    style.minWidth = "0px";                                                                                            // 1101
    style.height = "150px";                                                                                            // 1102
    style.display = "block";                                                                                           // 1103
                                                                                                                       // 1104
    outer.appendChild(inner);                                                                                          // 1105
                                                                                                                       // 1106
    var body = document.documentElement;                                                                               // 1107
    body.appendChild(outer);                                                                                           // 1108
                                                                                                                       // 1109
    var noScrollbar = inner.offsetWidth;                                                                               // 1110
                                                                                                                       // 1111
    style.overflow = "scroll";                                                                                         // 1112
    var withScrollbar = inner.offsetWidth;                                                                             // 1113
                                                                                                                       // 1114
    if (noScrollbar == withScrollbar) {                                                                                // 1115
        withScrollbar = outer.clientWidth;                                                                             // 1116
    }                                                                                                                  // 1117
                                                                                                                       // 1118
    body.removeChild(outer);                                                                                           // 1119
                                                                                                                       // 1120
    return noScrollbar-withScrollbar;                                                                                  // 1121
};                                                                                                                     // 1122
                                                                                                                       // 1123
if (typeof document == "undefined") {                                                                                  // 1124
    exports.importCssString = function() {};                                                                           // 1125
    return;                                                                                                            // 1126
}                                                                                                                      // 1127
                                                                                                                       // 1128
if (window.pageYOffset !== undefined) {                                                                                // 1129
    exports.getPageScrollTop = function() {                                                                            // 1130
        return window.pageYOffset;                                                                                     // 1131
    };                                                                                                                 // 1132
                                                                                                                       // 1133
    exports.getPageScrollLeft = function() {                                                                           // 1134
        return window.pageXOffset;                                                                                     // 1135
    };                                                                                                                 // 1136
}                                                                                                                      // 1137
else {                                                                                                                 // 1138
    exports.getPageScrollTop = function() {                                                                            // 1139
        return document.body.scrollTop;                                                                                // 1140
    };                                                                                                                 // 1141
                                                                                                                       // 1142
    exports.getPageScrollLeft = function() {                                                                           // 1143
        return document.body.scrollLeft;                                                                               // 1144
    };                                                                                                                 // 1145
}                                                                                                                      // 1146
                                                                                                                       // 1147
if (window.getComputedStyle)                                                                                           // 1148
    exports.computedStyle = function(element, style) {                                                                 // 1149
        if (style)                                                                                                     // 1150
            return (window.getComputedStyle(element, "") || {})[style] || "";                                          // 1151
        return window.getComputedStyle(element, "") || {};                                                             // 1152
    };                                                                                                                 // 1153
else                                                                                                                   // 1154
    exports.computedStyle = function(element, style) {                                                                 // 1155
        if (style)                                                                                                     // 1156
            return element.currentStyle[style];                                                                        // 1157
        return element.currentStyle;                                                                                   // 1158
    };                                                                                                                 // 1159
exports.setInnerHtml = function(el, innerHtml) {                                                                       // 1160
    var element = el.cloneNode(false);//document.createElement("div");                                                 // 1161
    element.innerHTML = innerHtml;                                                                                     // 1162
    el.parentNode.replaceChild(element, el);                                                                           // 1163
    return element;                                                                                                    // 1164
};                                                                                                                     // 1165
                                                                                                                       // 1166
if ("textContent" in document.documentElement) {                                                                       // 1167
    exports.setInnerText = function(el, innerText) {                                                                   // 1168
        el.textContent = innerText;                                                                                    // 1169
    };                                                                                                                 // 1170
                                                                                                                       // 1171
    exports.getInnerText = function(el) {                                                                              // 1172
        return el.textContent;                                                                                         // 1173
    };                                                                                                                 // 1174
}                                                                                                                      // 1175
else {                                                                                                                 // 1176
    exports.setInnerText = function(el, innerText) {                                                                   // 1177
        el.innerText = innerText;                                                                                      // 1178
    };                                                                                                                 // 1179
                                                                                                                       // 1180
    exports.getInnerText = function(el) {                                                                              // 1181
        return el.innerText;                                                                                           // 1182
    };                                                                                                                 // 1183
}                                                                                                                      // 1184
                                                                                                                       // 1185
exports.getParentWindow = function(document) {                                                                         // 1186
    return document.defaultView || document.parentWindow;                                                              // 1187
};                                                                                                                     // 1188
                                                                                                                       // 1189
});                                                                                                                    // 1190
                                                                                                                       // 1191
define("ace/lib/oop",["require","exports","module"], function(require, exports, module) {                              // 1192
"use strict";                                                                                                          // 1193
                                                                                                                       // 1194
exports.inherits = function(ctor, superCtor) {                                                                         // 1195
    ctor.super_ = superCtor;                                                                                           // 1196
    ctor.prototype = Object.create(superCtor.prototype, {                                                              // 1197
        constructor: {                                                                                                 // 1198
            value: ctor,                                                                                               // 1199
            enumerable: false,                                                                                         // 1200
            writable: true,                                                                                            // 1201
            configurable: true                                                                                         // 1202
        }                                                                                                              // 1203
    });                                                                                                                // 1204
};                                                                                                                     // 1205
                                                                                                                       // 1206
exports.mixin = function(obj, mixin) {                                                                                 // 1207
    for (var key in mixin) {                                                                                           // 1208
        obj[key] = mixin[key];                                                                                         // 1209
    }                                                                                                                  // 1210
    return obj;                                                                                                        // 1211
};                                                                                                                     // 1212
                                                                                                                       // 1213
exports.implement = function(proto, mixin) {                                                                           // 1214
    exports.mixin(proto, mixin);                                                                                       // 1215
};                                                                                                                     // 1216
                                                                                                                       // 1217
});                                                                                                                    // 1218
                                                                                                                       // 1219
define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"], function(require, exports, module) {
"use strict";                                                                                                          // 1221
                                                                                                                       // 1222
require("./fixoldbrowsers");                                                                                           // 1223
                                                                                                                       // 1224
var oop = require("./oop");                                                                                            // 1225
var Keys = (function() {                                                                                               // 1226
    var ret = {                                                                                                        // 1227
        MODIFIER_KEYS: {                                                                                               // 1228
            16: 'Shift', 17: 'Ctrl', 18: 'Alt', 224: 'Meta'                                                            // 1229
        },                                                                                                             // 1230
                                                                                                                       // 1231
        KEY_MODS: {                                                                                                    // 1232
            "ctrl": 1, "alt": 2, "option" : 2, "shift": 4,                                                             // 1233
            "super": 8, "meta": 8, "command": 8, "cmd": 8                                                              // 1234
        },                                                                                                             // 1235
                                                                                                                       // 1236
        FUNCTION_KEYS : {                                                                                              // 1237
            8  : "Backspace",                                                                                          // 1238
            9  : "Tab",                                                                                                // 1239
            13 : "Return",                                                                                             // 1240
            19 : "Pause",                                                                                              // 1241
            27 : "Esc",                                                                                                // 1242
            32 : "Space",                                                                                              // 1243
            33 : "PageUp",                                                                                             // 1244
            34 : "PageDown",                                                                                           // 1245
            35 : "End",                                                                                                // 1246
            36 : "Home",                                                                                               // 1247
            37 : "Left",                                                                                               // 1248
            38 : "Up",                                                                                                 // 1249
            39 : "Right",                                                                                              // 1250
            40 : "Down",                                                                                               // 1251
            44 : "Print",                                                                                              // 1252
            45 : "Insert",                                                                                             // 1253
            46 : "Delete",                                                                                             // 1254
            96 : "Numpad0",                                                                                            // 1255
            97 : "Numpad1",                                                                                            // 1256
            98 : "Numpad2",                                                                                            // 1257
            99 : "Numpad3",                                                                                            // 1258
            100: "Numpad4",                                                                                            // 1259
            101: "Numpad5",                                                                                            // 1260
            102: "Numpad6",                                                                                            // 1261
            103: "Numpad7",                                                                                            // 1262
            104: "Numpad8",                                                                                            // 1263
            105: "Numpad9",                                                                                            // 1264
            '-13': "NumpadEnter",                                                                                      // 1265
            112: "F1",                                                                                                 // 1266
            113: "F2",                                                                                                 // 1267
            114: "F3",                                                                                                 // 1268
            115: "F4",                                                                                                 // 1269
            116: "F5",                                                                                                 // 1270
            117: "F6",                                                                                                 // 1271
            118: "F7",                                                                                                 // 1272
            119: "F8",                                                                                                 // 1273
            120: "F9",                                                                                                 // 1274
            121: "F10",                                                                                                // 1275
            122: "F11",                                                                                                // 1276
            123: "F12",                                                                                                // 1277
            144: "Numlock",                                                                                            // 1278
            145: "Scrolllock"                                                                                          // 1279
        },                                                                                                             // 1280
                                                                                                                       // 1281
        PRINTABLE_KEYS: {                                                                                              // 1282
           32: ' ',  48: '0',  49: '1',  50: '2',  51: '3',  52: '4', 53:  '5',                                        // 1283
           54: '6',  55: '7',  56: '8',  57: '9',  59: ';',  61: '=', 65:  'a',                                        // 1284
           66: 'b',  67: 'c',  68: 'd',  69: 'e',  70: 'f',  71: 'g', 72:  'h',                                        // 1285
           73: 'i',  74: 'j',  75: 'k',  76: 'l',  77: 'm',  78: 'n', 79:  'o',                                        // 1286
           80: 'p',  81: 'q',  82: 'r',  83: 's',  84: 't',  85: 'u', 86:  'v',                                        // 1287
           87: 'w',  88: 'x',  89: 'y',  90: 'z', 107: '+', 109: '-', 110: '.',                                        // 1288
          186: ';', 187: '=', 188: ',', 189: '-', 190: '.', 191: '/', 192: '`',                                        // 1289
          219: '[', 220: '\\',221: ']', 222: '\''                                                                      // 1290
        }                                                                                                              // 1291
    };                                                                                                                 // 1292
    var name, i;                                                                                                       // 1293
    for (i in ret.FUNCTION_KEYS) {                                                                                     // 1294
        name = ret.FUNCTION_KEYS[i].toLowerCase();                                                                     // 1295
        ret[name] = parseInt(i, 10);                                                                                   // 1296
    }                                                                                                                  // 1297
    for (i in ret.PRINTABLE_KEYS) {                                                                                    // 1298
        name = ret.PRINTABLE_KEYS[i].toLowerCase();                                                                    // 1299
        ret[name] = parseInt(i, 10);                                                                                   // 1300
    }                                                                                                                  // 1301
    oop.mixin(ret, ret.MODIFIER_KEYS);                                                                                 // 1302
    oop.mixin(ret, ret.PRINTABLE_KEYS);                                                                                // 1303
    oop.mixin(ret, ret.FUNCTION_KEYS);                                                                                 // 1304
    ret.enter = ret["return"];                                                                                         // 1305
    ret.escape = ret.esc;                                                                                              // 1306
    ret.del = ret["delete"];                                                                                           // 1307
    ret[173] = '-';                                                                                                    // 1308
                                                                                                                       // 1309
    (function() {                                                                                                      // 1310
        var mods = ["cmd", "ctrl", "alt", "shift"];                                                                    // 1311
        for (var i = Math.pow(2, mods.length); i--;) {                                                                 // 1312
            ret.KEY_MODS[i] = mods.filter(function(x) {                                                                // 1313
                return i & ret.KEY_MODS[x];                                                                            // 1314
            }).join("-") + "-";                                                                                        // 1315
        }                                                                                                              // 1316
    })();                                                                                                              // 1317
                                                                                                                       // 1318
    ret.KEY_MODS[0] = "";                                                                                              // 1319
    ret.KEY_MODS[-1] = "input-";                                                                                       // 1320
                                                                                                                       // 1321
    return ret;                                                                                                        // 1322
})();                                                                                                                  // 1323
oop.mixin(exports, Keys);                                                                                              // 1324
                                                                                                                       // 1325
exports.keyCodeToString = function(keyCode) {                                                                          // 1326
    var keyString = Keys[keyCode];                                                                                     // 1327
    if (typeof keyString != "string")                                                                                  // 1328
        keyString = String.fromCharCode(keyCode);                                                                      // 1329
    return keyString.toLowerCase();                                                                                    // 1330
};                                                                                                                     // 1331
                                                                                                                       // 1332
});                                                                                                                    // 1333
                                                                                                                       // 1334
define("ace/lib/useragent",["require","exports","module"], function(require, exports, module) {                        // 1335
"use strict";                                                                                                          // 1336
exports.OS = {                                                                                                         // 1337
    LINUX: "LINUX",                                                                                                    // 1338
    MAC: "MAC",                                                                                                        // 1339
    WINDOWS: "WINDOWS"                                                                                                 // 1340
};                                                                                                                     // 1341
exports.getOS = function() {                                                                                           // 1342
    if (exports.isMac) {                                                                                               // 1343
        return exports.OS.MAC;                                                                                         // 1344
    } else if (exports.isLinux) {                                                                                      // 1345
        return exports.OS.LINUX;                                                                                       // 1346
    } else {                                                                                                           // 1347
        return exports.OS.WINDOWS;                                                                                     // 1348
    }                                                                                                                  // 1349
};                                                                                                                     // 1350
if (typeof navigator != "object")                                                                                      // 1351
    return;                                                                                                            // 1352
                                                                                                                       // 1353
var os = (navigator.platform.match(/mac|win|linux/i) || ["other"])[0].toLowerCase();                                   // 1354
var ua = navigator.userAgent;                                                                                          // 1355
exports.isWin = (os == "win");                                                                                         // 1356
exports.isMac = (os == "mac");                                                                                         // 1357
exports.isLinux = (os == "linux");                                                                                     // 1358
exports.isIE =                                                                                                         // 1359
    (navigator.appName == "Microsoft Internet Explorer" || navigator.appName.indexOf("MSAppHost") >= 0)                // 1360
    ? parseFloat((ua.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1])                         // 1361
    : parseFloat((ua.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]); // for ie                    // 1362
                                                                                                                       // 1363
exports.isOldIE = exports.isIE && exports.isIE < 9;                                                                    // 1364
exports.isGecko = exports.isMozilla = (window.Controllers || window.controllers) && window.navigator.product === "Gecko";
exports.isOldGecko = exports.isGecko && parseInt((ua.match(/rv\:(\d+)/)||[])[1], 10) < 4;                              // 1366
exports.isOpera = window.opera && Object.prototype.toString.call(window.opera) == "[object Opera]";                    // 1367
exports.isWebKit = parseFloat(ua.split("WebKit/")[1]) || undefined;                                                    // 1368
                                                                                                                       // 1369
exports.isChrome = parseFloat(ua.split(" Chrome/")[1]) || undefined;                                                   // 1370
                                                                                                                       // 1371
exports.isAIR = ua.indexOf("AdobeAIR") >= 0;                                                                           // 1372
                                                                                                                       // 1373
exports.isIPad = ua.indexOf("iPad") >= 0;                                                                              // 1374
                                                                                                                       // 1375
exports.isTouchPad = ua.indexOf("TouchPad") >= 0;                                                                      // 1376
                                                                                                                       // 1377
exports.isChromeOS = ua.indexOf(" CrOS ") >= 0;                                                                        // 1378
                                                                                                                       // 1379
});                                                                                                                    // 1380
                                                                                                                       // 1381
define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"], function(require, exports, module) {
"use strict";                                                                                                          // 1383
                                                                                                                       // 1384
var keys = require("./keys");                                                                                          // 1385
var useragent = require("./useragent");                                                                                // 1386
                                                                                                                       // 1387
exports.addListener = function(elem, type, callback) {                                                                 // 1388
    if (elem.addEventListener) {                                                                                       // 1389
        return elem.addEventListener(type, callback, false);                                                           // 1390
    }                                                                                                                  // 1391
    if (elem.attachEvent) {                                                                                            // 1392
        var wrapper = function() {                                                                                     // 1393
            callback.call(elem, window.event);                                                                         // 1394
        };                                                                                                             // 1395
        callback._wrapper = wrapper;                                                                                   // 1396
        elem.attachEvent("on" + type, wrapper);                                                                        // 1397
    }                                                                                                                  // 1398
};                                                                                                                     // 1399
                                                                                                                       // 1400
exports.removeListener = function(elem, type, callback) {                                                              // 1401
    if (elem.removeEventListener) {                                                                                    // 1402
        return elem.removeEventListener(type, callback, false);                                                        // 1403
    }                                                                                                                  // 1404
    if (elem.detachEvent) {                                                                                            // 1405
        elem.detachEvent("on" + type, callback._wrapper || callback);                                                  // 1406
    }                                                                                                                  // 1407
};                                                                                                                     // 1408
exports.stopEvent = function(e) {                                                                                      // 1409
    exports.stopPropagation(e);                                                                                        // 1410
    exports.preventDefault(e);                                                                                         // 1411
    return false;                                                                                                      // 1412
};                                                                                                                     // 1413
                                                                                                                       // 1414
exports.stopPropagation = function(e) {                                                                                // 1415
    if (e.stopPropagation)                                                                                             // 1416
        e.stopPropagation();                                                                                           // 1417
    else                                                                                                               // 1418
        e.cancelBubble = true;                                                                                         // 1419
};                                                                                                                     // 1420
                                                                                                                       // 1421
exports.preventDefault = function(e) {                                                                                 // 1422
    if (e.preventDefault)                                                                                              // 1423
        e.preventDefault();                                                                                            // 1424
    else                                                                                                               // 1425
        e.returnValue = false;                                                                                         // 1426
};                                                                                                                     // 1427
exports.getButton = function(e) {                                                                                      // 1428
    if (e.type == "dblclick")                                                                                          // 1429
        return 0;                                                                                                      // 1430
    if (e.type == "contextmenu" || (useragent.isMac && (e.ctrlKey && !e.altKey && !e.shiftKey)))                       // 1431
        return 2;                                                                                                      // 1432
    if (e.preventDefault) {                                                                                            // 1433
        return e.button;                                                                                               // 1434
    }                                                                                                                  // 1435
    else {                                                                                                             // 1436
        return {1:0, 2:2, 4:1}[e.button];                                                                              // 1437
    }                                                                                                                  // 1438
};                                                                                                                     // 1439
                                                                                                                       // 1440
exports.capture = function(el, eventHandler, releaseCaptureHandler) {                                                  // 1441
    function onMouseUp(e) {                                                                                            // 1442
        eventHandler && eventHandler(e);                                                                               // 1443
        releaseCaptureHandler && releaseCaptureHandler(e);                                                             // 1444
                                                                                                                       // 1445
        exports.removeListener(document, "mousemove", eventHandler, true);                                             // 1446
        exports.removeListener(document, "mouseup", onMouseUp, true);                                                  // 1447
        exports.removeListener(document, "dragstart", onMouseUp, true);                                                // 1448
    }                                                                                                                  // 1449
                                                                                                                       // 1450
    exports.addListener(document, "mousemove", eventHandler, true);                                                    // 1451
    exports.addListener(document, "mouseup", onMouseUp, true);                                                         // 1452
    exports.addListener(document, "dragstart", onMouseUp, true);                                                       // 1453
                                                                                                                       // 1454
    return onMouseUp;                                                                                                  // 1455
};                                                                                                                     // 1456
                                                                                                                       // 1457
exports.addTouchMoveListener = function (el, callback) {                                                               // 1458
    if ("ontouchmove" in el) {                                                                                         // 1459
        var startx, starty;                                                                                            // 1460
        exports.addListener(el, "touchstart", function (e) {                                                           // 1461
            var touchObj = e.changedTouches[0];                                                                        // 1462
            startx = touchObj.clientX;                                                                                 // 1463
            starty = touchObj.clientY;                                                                                 // 1464
        });                                                                                                            // 1465
        exports.addListener(el, "touchmove", function (e) {                                                            // 1466
            var factor = 1,                                                                                            // 1467
            touchObj = e.changedTouches[0];                                                                            // 1468
                                                                                                                       // 1469
            e.wheelX = -(touchObj.clientX - startx) / factor;                                                          // 1470
            e.wheelY = -(touchObj.clientY - starty) / factor;                                                          // 1471
                                                                                                                       // 1472
            startx = touchObj.clientX;                                                                                 // 1473
            starty = touchObj.clientY;                                                                                 // 1474
                                                                                                                       // 1475
            callback(e);                                                                                               // 1476
        });                                                                                                            // 1477
    }                                                                                                                  // 1478
};                                                                                                                     // 1479
                                                                                                                       // 1480
exports.addMouseWheelListener = function(el, callback) {                                                               // 1481
    if ("onmousewheel" in el) {                                                                                        // 1482
        exports.addListener(el, "mousewheel", function(e) {                                                            // 1483
            var factor = 8;                                                                                            // 1484
            if (e.wheelDeltaX !== undefined) {                                                                         // 1485
                e.wheelX = -e.wheelDeltaX / factor;                                                                    // 1486
                e.wheelY = -e.wheelDeltaY / factor;                                                                    // 1487
            } else {                                                                                                   // 1488
                e.wheelX = 0;                                                                                          // 1489
                e.wheelY = -e.wheelDelta / factor;                                                                     // 1490
            }                                                                                                          // 1491
            callback(e);                                                                                               // 1492
        });                                                                                                            // 1493
    } else if ("onwheel" in el) {                                                                                      // 1494
        exports.addListener(el, "wheel",  function(e) {                                                                // 1495
            var factor = 0.35;                                                                                         // 1496
            switch (e.deltaMode) {                                                                                     // 1497
                case e.DOM_DELTA_PIXEL:                                                                                // 1498
                    e.wheelX = e.deltaX * factor || 0;                                                                 // 1499
                    e.wheelY = e.deltaY * factor || 0;                                                                 // 1500
                    break;                                                                                             // 1501
                case e.DOM_DELTA_LINE:                                                                                 // 1502
                case e.DOM_DELTA_PAGE:                                                                                 // 1503
                    e.wheelX = (e.deltaX || 0) * 5;                                                                    // 1504
                    e.wheelY = (e.deltaY || 0) * 5;                                                                    // 1505
                    break;                                                                                             // 1506
            }                                                                                                          // 1507
                                                                                                                       // 1508
            callback(e);                                                                                               // 1509
        });                                                                                                            // 1510
    } else {                                                                                                           // 1511
        exports.addListener(el, "DOMMouseScroll", function(e) {                                                        // 1512
            if (e.axis && e.axis == e.HORIZONTAL_AXIS) {                                                               // 1513
                e.wheelX = (e.detail || 0) * 5;                                                                        // 1514
                e.wheelY = 0;                                                                                          // 1515
            } else {                                                                                                   // 1516
                e.wheelX = 0;                                                                                          // 1517
                e.wheelY = (e.detail || 0) * 5;                                                                        // 1518
            }                                                                                                          // 1519
            callback(e);                                                                                               // 1520
        });                                                                                                            // 1521
    }                                                                                                                  // 1522
};                                                                                                                     // 1523
                                                                                                                       // 1524
exports.addMultiMouseDownListener = function(el, timeouts, eventHandler, callbackName) {                               // 1525
    var clicks = 0;                                                                                                    // 1526
    var startX, startY, timer;                                                                                         // 1527
    var eventNames = {                                                                                                 // 1528
        2: "dblclick",                                                                                                 // 1529
        3: "tripleclick",                                                                                              // 1530
        4: "quadclick"                                                                                                 // 1531
    };                                                                                                                 // 1532
                                                                                                                       // 1533
    exports.addListener(el, "mousedown", function(e) {                                                                 // 1534
        if (exports.getButton(e) !== 0) {                                                                              // 1535
            clicks = 0;                                                                                                // 1536
        } else if (e.detail > 1) {                                                                                     // 1537
            clicks++;                                                                                                  // 1538
            if (clicks > 4)                                                                                            // 1539
                clicks = 1;                                                                                            // 1540
        } else {                                                                                                       // 1541
            clicks = 1;                                                                                                // 1542
        }                                                                                                              // 1543
        if (useragent.isIE) {                                                                                          // 1544
            var isNewClick = Math.abs(e.clientX - startX) > 5 || Math.abs(e.clientY - startY) > 5;                     // 1545
            if (!timer || isNewClick)                                                                                  // 1546
                clicks = 1;                                                                                            // 1547
            if (timer)                                                                                                 // 1548
                clearTimeout(timer);                                                                                   // 1549
            timer = setTimeout(function() {timer = null}, timeouts[clicks - 1] || 600);                                // 1550
                                                                                                                       // 1551
            if (clicks == 1) {                                                                                         // 1552
                startX = e.clientX;                                                                                    // 1553
                startY = e.clientY;                                                                                    // 1554
            }                                                                                                          // 1555
        }                                                                                                              // 1556
                                                                                                                       // 1557
        e._clicks = clicks;                                                                                            // 1558
                                                                                                                       // 1559
        eventHandler[callbackName]("mousedown", e);                                                                    // 1560
                                                                                                                       // 1561
        if (clicks > 4)                                                                                                // 1562
            clicks = 0;                                                                                                // 1563
        else if (clicks > 1)                                                                                           // 1564
            return eventHandler[callbackName](eventNames[clicks], e);                                                  // 1565
    });                                                                                                                // 1566
                                                                                                                       // 1567
    if (useragent.isOldIE) {                                                                                           // 1568
        exports.addListener(el, "dblclick", function(e) {                                                              // 1569
            clicks = 2;                                                                                                // 1570
            if (timer)                                                                                                 // 1571
                clearTimeout(timer);                                                                                   // 1572
            timer = setTimeout(function() {timer = null}, timeouts[clicks - 1] || 600);                                // 1573
            eventHandler[callbackName]("mousedown", e);                                                                // 1574
            eventHandler[callbackName](eventNames[clicks], e);                                                         // 1575
        });                                                                                                            // 1576
    }                                                                                                                  // 1577
};                                                                                                                     // 1578
                                                                                                                       // 1579
var getModifierHash = useragent.isMac && useragent.isOpera && !("KeyboardEvent" in window)                             // 1580
    ? function(e) {                                                                                                    // 1581
        return 0 | (e.metaKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.ctrlKey ? 8 : 0);              // 1582
    }                                                                                                                  // 1583
    : function(e) {                                                                                                    // 1584
        return 0 | (e.ctrlKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.metaKey ? 8 : 0);              // 1585
    };                                                                                                                 // 1586
                                                                                                                       // 1587
exports.getModifierString = function(e) {                                                                              // 1588
    return keys.KEY_MODS[getModifierHash(e)];                                                                          // 1589
};                                                                                                                     // 1590
                                                                                                                       // 1591
function normalizeCommandKeys(callback, e, keyCode) {                                                                  // 1592
    var hashId = getModifierHash(e);                                                                                   // 1593
                                                                                                                       // 1594
    if (!useragent.isMac && pressedKeys) {                                                                             // 1595
        if (pressedKeys[91] || pressedKeys[92])                                                                        // 1596
            hashId |= 8;                                                                                               // 1597
        if (pressedKeys.altGr) {                                                                                       // 1598
            if ((3 & hashId) != 3)                                                                                     // 1599
                pressedKeys.altGr = 0;                                                                                 // 1600
            else                                                                                                       // 1601
                return;                                                                                                // 1602
        }                                                                                                              // 1603
        if (keyCode === 18 || keyCode === 17) {                                                                        // 1604
            var location = "location" in e ? e.location : e.keyLocation;                                               // 1605
            if (keyCode === 17 && location === 1) {                                                                    // 1606
                if (pressedKeys[keyCode] == 1)                                                                         // 1607
                    ts = e.timeStamp;                                                                                  // 1608
            } else if (keyCode === 18 && hashId === 3 && location === 2) {                                             // 1609
                var dt = e.timeStamp - ts;                                                                             // 1610
                if (dt < 50)                                                                                           // 1611
                    pressedKeys.altGr = true;                                                                          // 1612
            }                                                                                                          // 1613
        }                                                                                                              // 1614
    }                                                                                                                  // 1615
                                                                                                                       // 1616
    if (keyCode in keys.MODIFIER_KEYS) {                                                                               // 1617
        keyCode = -1;                                                                                                  // 1618
    }                                                                                                                  // 1619
                                                                                                                       // 1620
    if (hashId & 8 && (keyCode === 91 || keyCode === 93)) {                                                            // 1621
        keyCode = -1;                                                                                                  // 1622
    }                                                                                                                  // 1623
                                                                                                                       // 1624
    if (!hashId && keyCode === 13) {                                                                                   // 1625
        var location = "location" in e ? e.location : e.keyLocation;                                                   // 1626
        if (location === 3) {                                                                                          // 1627
            callback(e, hashId, -keyCode);                                                                             // 1628
            if (e.defaultPrevented)                                                                                    // 1629
                return;                                                                                                // 1630
        }                                                                                                              // 1631
    }                                                                                                                  // 1632
                                                                                                                       // 1633
    if (useragent.isChromeOS && hashId & 8) {                                                                          // 1634
        callback(e, hashId, keyCode);                                                                                  // 1635
        if (e.defaultPrevented)                                                                                        // 1636
            return;                                                                                                    // 1637
        else                                                                                                           // 1638
            hashId &= ~8;                                                                                              // 1639
    }                                                                                                                  // 1640
    if (!hashId && !(keyCode in keys.FUNCTION_KEYS) && !(keyCode in keys.PRINTABLE_KEYS)) {                            // 1641
        return false;                                                                                                  // 1642
    }                                                                                                                  // 1643
                                                                                                                       // 1644
    return callback(e, hashId, keyCode);                                                                               // 1645
}                                                                                                                      // 1646
                                                                                                                       // 1647
var pressedKeys = null;                                                                                                // 1648
var ts = 0;                                                                                                            // 1649
exports.addCommandKeyListener = function(el, callback) {                                                               // 1650
    var addListener = exports.addListener;                                                                             // 1651
    if (useragent.isOldGecko || (useragent.isOpera && !("KeyboardEvent" in window))) {                                 // 1652
        var lastKeyDownKeyCode = null;                                                                                 // 1653
        addListener(el, "keydown", function(e) {                                                                       // 1654
            lastKeyDownKeyCode = e.keyCode;                                                                            // 1655
        });                                                                                                            // 1656
        addListener(el, "keypress", function(e) {                                                                      // 1657
            return normalizeCommandKeys(callback, e, lastKeyDownKeyCode);                                              // 1658
        });                                                                                                            // 1659
    } else {                                                                                                           // 1660
        var lastDefaultPrevented = null;                                                                               // 1661
                                                                                                                       // 1662
        addListener(el, "keydown", function(e) {                                                                       // 1663
            pressedKeys[e.keyCode] = (pressedKeys[e.keyCode] || 0) + 1;                                                // 1664
            var result = normalizeCommandKeys(callback, e, e.keyCode);                                                 // 1665
            lastDefaultPrevented = e.defaultPrevented;                                                                 // 1666
            return result;                                                                                             // 1667
        });                                                                                                            // 1668
                                                                                                                       // 1669
        addListener(el, "keypress", function(e) {                                                                      // 1670
            if (lastDefaultPrevented && (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey)) {                          // 1671
                exports.stopEvent(e);                                                                                  // 1672
                lastDefaultPrevented = null;                                                                           // 1673
            }                                                                                                          // 1674
        });                                                                                                            // 1675
                                                                                                                       // 1676
        addListener(el, "keyup", function(e) {                                                                         // 1677
            pressedKeys[e.keyCode] = null;                                                                             // 1678
        });                                                                                                            // 1679
                                                                                                                       // 1680
        if (!pressedKeys) {                                                                                            // 1681
            resetPressedKeys();                                                                                        // 1682
            addListener(window, "focus", resetPressedKeys);                                                            // 1683
        }                                                                                                              // 1684
    }                                                                                                                  // 1685
};                                                                                                                     // 1686
function resetPressedKeys(e) {                                                                                         // 1687
    pressedKeys = Object.create(null);                                                                                 // 1688
}                                                                                                                      // 1689
                                                                                                                       // 1690
if (typeof window == "object" && window.postMessage && !useragent.isOldIE) {                                           // 1691
    var postMessageId = 1;                                                                                             // 1692
    exports.nextTick = function(callback, win) {                                                                       // 1693
        win = win || window;                                                                                           // 1694
        var messageName = "zero-timeout-message-" + postMessageId;                                                     // 1695
        exports.addListener(win, "message", function listener(e) {                                                     // 1696
            if (e.data == messageName) {                                                                               // 1697
                exports.stopPropagation(e);                                                                            // 1698
                exports.removeListener(win, "message", listener);                                                      // 1699
                callback();                                                                                            // 1700
            }                                                                                                          // 1701
        });                                                                                                            // 1702
        win.postMessage(messageName, "*");                                                                             // 1703
    };                                                                                                                 // 1704
}                                                                                                                      // 1705
                                                                                                                       // 1706
                                                                                                                       // 1707
exports.nextFrame = typeof window == "object" && (window.requestAnimationFrame                                         // 1708
    || window.mozRequestAnimationFrame                                                                                 // 1709
    || window.webkitRequestAnimationFrame                                                                              // 1710
    || window.msRequestAnimationFrame                                                                                  // 1711
    || window.oRequestAnimationFrame);                                                                                 // 1712
                                                                                                                       // 1713
if (exports.nextFrame)                                                                                                 // 1714
    exports.nextFrame = exports.nextFrame.bind(window);                                                                // 1715
else                                                                                                                   // 1716
    exports.nextFrame = function(callback) {                                                                           // 1717
        setTimeout(callback, 17);                                                                                      // 1718
    };                                                                                                                 // 1719
});                                                                                                                    // 1720
                                                                                                                       // 1721
define("ace/lib/lang",["require","exports","module"], function(require, exports, module) {                             // 1722
"use strict";                                                                                                          // 1723
                                                                                                                       // 1724
exports.last = function(a) {                                                                                           // 1725
    return a[a.length - 1];                                                                                            // 1726
};                                                                                                                     // 1727
                                                                                                                       // 1728
exports.stringReverse = function(string) {                                                                             // 1729
    return string.split("").reverse().join("");                                                                        // 1730
};                                                                                                                     // 1731
                                                                                                                       // 1732
exports.stringRepeat = function (string, count) {                                                                      // 1733
    var result = '';                                                                                                   // 1734
    while (count > 0) {                                                                                                // 1735
        if (count & 1)                                                                                                 // 1736
            result += string;                                                                                          // 1737
                                                                                                                       // 1738
        if (count >>= 1)                                                                                               // 1739
            string += string;                                                                                          // 1740
    }                                                                                                                  // 1741
    return result;                                                                                                     // 1742
};                                                                                                                     // 1743
                                                                                                                       // 1744
var trimBeginRegexp = /^\s\s*/;                                                                                        // 1745
var trimEndRegexp = /\s\s*$/;                                                                                          // 1746
                                                                                                                       // 1747
exports.stringTrimLeft = function (string) {                                                                           // 1748
    return string.replace(trimBeginRegexp, '');                                                                        // 1749
};                                                                                                                     // 1750
                                                                                                                       // 1751
exports.stringTrimRight = function (string) {                                                                          // 1752
    return string.replace(trimEndRegexp, '');                                                                          // 1753
};                                                                                                                     // 1754
                                                                                                                       // 1755
exports.copyObject = function(obj) {                                                                                   // 1756
    var copy = {};                                                                                                     // 1757
    for (var key in obj) {                                                                                             // 1758
        copy[key] = obj[key];                                                                                          // 1759
    }                                                                                                                  // 1760
    return copy;                                                                                                       // 1761
};                                                                                                                     // 1762
                                                                                                                       // 1763
exports.copyArray = function(array){                                                                                   // 1764
    var copy = [];                                                                                                     // 1765
    for (var i=0, l=array.length; i<l; i++) {                                                                          // 1766
        if (array[i] && typeof array[i] == "object")                                                                   // 1767
            copy[i] = this.copyObject( array[i] );                                                                     // 1768
        else                                                                                                           // 1769
            copy[i] = array[i];                                                                                        // 1770
    }                                                                                                                  // 1771
    return copy;                                                                                                       // 1772
};                                                                                                                     // 1773
                                                                                                                       // 1774
exports.deepCopy = function deepCopy(obj) {                                                                            // 1775
    if (typeof obj !== "object" || !obj)                                                                               // 1776
        return obj;                                                                                                    // 1777
    var copy;                                                                                                          // 1778
    if (Array.isArray(obj)) {                                                                                          // 1779
        copy = [];                                                                                                     // 1780
        for (var key = 0; key < obj.length; key++) {                                                                   // 1781
            copy[key] = deepCopy(obj[key]);                                                                            // 1782
        }                                                                                                              // 1783
        return copy;                                                                                                   // 1784
    }                                                                                                                  // 1785
    var cons = obj.constructor;                                                                                        // 1786
    if (cons === RegExp)                                                                                               // 1787
        return obj;                                                                                                    // 1788
                                                                                                                       // 1789
    copy = cons();                                                                                                     // 1790
    for (var key in obj) {                                                                                             // 1791
        copy[key] = deepCopy(obj[key]);                                                                                // 1792
    }                                                                                                                  // 1793
    return copy;                                                                                                       // 1794
};                                                                                                                     // 1795
                                                                                                                       // 1796
exports.arrayToMap = function(arr) {                                                                                   // 1797
    var map = {};                                                                                                      // 1798
    for (var i=0; i<arr.length; i++) {                                                                                 // 1799
        map[arr[i]] = 1;                                                                                               // 1800
    }                                                                                                                  // 1801
    return map;                                                                                                        // 1802
                                                                                                                       // 1803
};                                                                                                                     // 1804
                                                                                                                       // 1805
exports.createMap = function(props) {                                                                                  // 1806
    var map = Object.create(null);                                                                                     // 1807
    for (var i in props) {                                                                                             // 1808
        map[i] = props[i];                                                                                             // 1809
    }                                                                                                                  // 1810
    return map;                                                                                                        // 1811
};                                                                                                                     // 1812
exports.arrayRemove = function(array, value) {                                                                         // 1813
  for (var i = 0; i <= array.length; i++) {                                                                            // 1814
    if (value === array[i]) {                                                                                          // 1815
      array.splice(i, 1);                                                                                              // 1816
    }                                                                                                                  // 1817
  }                                                                                                                    // 1818
};                                                                                                                     // 1819
                                                                                                                       // 1820
exports.escapeRegExp = function(str) {                                                                                 // 1821
    return str.replace(/([.*+?^${}()|[\]\/\\])/g, '\\$1');                                                             // 1822
};                                                                                                                     // 1823
                                                                                                                       // 1824
exports.escapeHTML = function(str) {                                                                                   // 1825
    return str.replace(/&/g, "&#38;").replace(/"/g, "&#34;").replace(/'/g, "&#39;").replace(/</g, "&#60;");            // 1826
};                                                                                                                     // 1827
                                                                                                                       // 1828
exports.getMatchOffsets = function(string, regExp) {                                                                   // 1829
    var matches = [];                                                                                                  // 1830
                                                                                                                       // 1831
    string.replace(regExp, function(str) {                                                                             // 1832
        matches.push({                                                                                                 // 1833
            offset: arguments[arguments.length-2],                                                                     // 1834
            length: str.length                                                                                         // 1835
        });                                                                                                            // 1836
    });                                                                                                                // 1837
                                                                                                                       // 1838
    return matches;                                                                                                    // 1839
};                                                                                                                     // 1840
exports.deferredCall = function(fcn) {                                                                                 // 1841
    var timer = null;                                                                                                  // 1842
    var callback = function() {                                                                                        // 1843
        timer = null;                                                                                                  // 1844
        fcn();                                                                                                         // 1845
    };                                                                                                                 // 1846
                                                                                                                       // 1847
    var deferred = function(timeout) {                                                                                 // 1848
        deferred.cancel();                                                                                             // 1849
        timer = setTimeout(callback, timeout || 0);                                                                    // 1850
        return deferred;                                                                                               // 1851
    };                                                                                                                 // 1852
                                                                                                                       // 1853
    deferred.schedule = deferred;                                                                                      // 1854
                                                                                                                       // 1855
    deferred.call = function() {                                                                                       // 1856
        this.cancel();                                                                                                 // 1857
        fcn();                                                                                                         // 1858
        return deferred;                                                                                               // 1859
    };                                                                                                                 // 1860
                                                                                                                       // 1861
    deferred.cancel = function() {                                                                                     // 1862
        clearTimeout(timer);                                                                                           // 1863
        timer = null;                                                                                                  // 1864
        return deferred;                                                                                               // 1865
    };                                                                                                                 // 1866
                                                                                                                       // 1867
    deferred.isPending = function() {                                                                                  // 1868
        return timer;                                                                                                  // 1869
    };                                                                                                                 // 1870
                                                                                                                       // 1871
    return deferred;                                                                                                   // 1872
};                                                                                                                     // 1873
                                                                                                                       // 1874
                                                                                                                       // 1875
exports.delayedCall = function(fcn, defaultTimeout) {                                                                  // 1876
    var timer = null;                                                                                                  // 1877
    var callback = function() {                                                                                        // 1878
        timer = null;                                                                                                  // 1879
        fcn();                                                                                                         // 1880
    };                                                                                                                 // 1881
                                                                                                                       // 1882
    var _self = function(timeout) {                                                                                    // 1883
        if (timer == null)                                                                                             // 1884
            timer = setTimeout(callback, timeout || defaultTimeout);                                                   // 1885
    };                                                                                                                 // 1886
                                                                                                                       // 1887
    _self.delay = function(timeout) {                                                                                  // 1888
        timer && clearTimeout(timer);                                                                                  // 1889
        timer = setTimeout(callback, timeout || defaultTimeout);                                                       // 1890
    };                                                                                                                 // 1891
    _self.schedule = _self;                                                                                            // 1892
                                                                                                                       // 1893
    _self.call = function() {                                                                                          // 1894
        this.cancel();                                                                                                 // 1895
        fcn();                                                                                                         // 1896
    };                                                                                                                 // 1897
                                                                                                                       // 1898
    _self.cancel = function() {                                                                                        // 1899
        timer && clearTimeout(timer);                                                                                  // 1900
        timer = null;                                                                                                  // 1901
    };                                                                                                                 // 1902
                                                                                                                       // 1903
    _self.isPending = function() {                                                                                     // 1904
        return timer;                                                                                                  // 1905
    };                                                                                                                 // 1906
                                                                                                                       // 1907
    return _self;                                                                                                      // 1908
};                                                                                                                     // 1909
});                                                                                                                    // 1910
                                                                                                                       // 1911
define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"], function(require, exports, module) {
"use strict";                                                                                                          // 1913
                                                                                                                       // 1914
var event = require("../lib/event");                                                                                   // 1915
var useragent = require("../lib/useragent");                                                                           // 1916
var dom = require("../lib/dom");                                                                                       // 1917
var lang = require("../lib/lang");                                                                                     // 1918
var BROKEN_SETDATA = useragent.isChrome < 18;                                                                          // 1919
var USE_IE_MIME_TYPE =  useragent.isIE;                                                                                // 1920
                                                                                                                       // 1921
var TextInput = function(parentNode, host) {                                                                           // 1922
    var text = dom.createElement("textarea");                                                                          // 1923
    text.className = "ace_text-input";                                                                                 // 1924
                                                                                                                       // 1925
    if (useragent.isTouchPad)                                                                                          // 1926
        text.setAttribute("x-palm-disable-auto-cap", true);                                                            // 1927
                                                                                                                       // 1928
    text.setAttribute("wrap", "off");                                                                                  // 1929
    text.setAttribute("autocorrect", "off");                                                                           // 1930
    text.setAttribute("autocapitalize", "off");                                                                        // 1931
    text.setAttribute("spellcheck", false);                                                                            // 1932
                                                                                                                       // 1933
    text.style.opacity = "0";                                                                                          // 1934
    if (useragent.isOldIE) text.style.top = "-1000px";                                                                 // 1935
    parentNode.insertBefore(text, parentNode.firstChild);                                                              // 1936
                                                                                                                       // 1937
    var PLACEHOLDER = "\x01\x01";                                                                                      // 1938
                                                                                                                       // 1939
    var copied = false;                                                                                                // 1940
    var pasted = false;                                                                                                // 1941
    var inComposition = false;                                                                                         // 1942
    var tempStyle = '';                                                                                                // 1943
    var isSelectionEmpty = true;                                                                                       // 1944
    try { var isFocused = document.activeElement === text; } catch(e) {}                                               // 1945
                                                                                                                       // 1946
    event.addListener(text, "blur", function(e) {                                                                      // 1947
        host.onBlur(e);                                                                                                // 1948
        isFocused = false;                                                                                             // 1949
    });                                                                                                                // 1950
    event.addListener(text, "focus", function(e) {                                                                     // 1951
        isFocused = true;                                                                                              // 1952
        host.onFocus(e);                                                                                               // 1953
        resetSelection();                                                                                              // 1954
    });                                                                                                                // 1955
    this.focus = function() {                                                                                          // 1956
        if (tempStyle) return text.focus();                                                                            // 1957
        var top = text.style.top;                                                                                      // 1958
        text.style.position = "fixed";                                                                                 // 1959
        text.style.top = "-1000px";                                                                                    // 1960
        text.focus();                                                                                                  // 1961
        setTimeout(function() {                                                                                        // 1962
            text.style.position = "";                                                                                  // 1963
            if (text.style.top == "-1000px")                                                                           // 1964
                text.style.top = top;                                                                                  // 1965
        }, 0);                                                                                                         // 1966
    };                                                                                                                 // 1967
    this.blur = function() {                                                                                           // 1968
        text.blur();                                                                                                   // 1969
    };                                                                                                                 // 1970
    this.isFocused = function() {                                                                                      // 1971
        return isFocused;                                                                                              // 1972
    };                                                                                                                 // 1973
    var syncSelection = lang.delayedCall(function() {                                                                  // 1974
        isFocused && resetSelection(isSelectionEmpty);                                                                 // 1975
    });                                                                                                                // 1976
    var syncValue = lang.delayedCall(function() {                                                                      // 1977
         if (!inComposition) {                                                                                         // 1978
            text.value = PLACEHOLDER;                                                                                  // 1979
            isFocused && resetSelection();                                                                             // 1980
         }                                                                                                             // 1981
    });                                                                                                                // 1982
                                                                                                                       // 1983
    function resetSelection(isEmpty) {                                                                                 // 1984
        if (inComposition)                                                                                             // 1985
            return;                                                                                                    // 1986
        inComposition = true;                                                                                          // 1987
                                                                                                                       // 1988
        if (inputHandler) {                                                                                            // 1989
            selectionStart = 0;                                                                                        // 1990
            selectionEnd = isEmpty ? 0 : text.value.length - 1;                                                        // 1991
        } else {                                                                                                       // 1992
            var selectionStart = isEmpty ? 2 : 1;                                                                      // 1993
            var selectionEnd = 2;                                                                                      // 1994
        }                                                                                                              // 1995
        try {                                                                                                          // 1996
            text.setSelectionRange(selectionStart, selectionEnd);                                                      // 1997
        } catch(e){}                                                                                                   // 1998
                                                                                                                       // 1999
        inComposition = false;                                                                                         // 2000
    }                                                                                                                  // 2001
                                                                                                                       // 2002
    function resetValue() {                                                                                            // 2003
        if (inComposition)                                                                                             // 2004
            return;                                                                                                    // 2005
        text.value = PLACEHOLDER;                                                                                      // 2006
        if (useragent.isWebKit)                                                                                        // 2007
            syncValue.schedule();                                                                                      // 2008
    }                                                                                                                  // 2009
                                                                                                                       // 2010
    useragent.isWebKit || host.addEventListener('changeSelection', function() {                                        // 2011
        if (host.selection.isEmpty() != isSelectionEmpty) {                                                            // 2012
            isSelectionEmpty = !isSelectionEmpty;                                                                      // 2013
            syncSelection.schedule();                                                                                  // 2014
        }                                                                                                              // 2015
    });                                                                                                                // 2016
                                                                                                                       // 2017
    resetValue();                                                                                                      // 2018
    if (isFocused)                                                                                                     // 2019
        host.onFocus();                                                                                                // 2020
                                                                                                                       // 2021
                                                                                                                       // 2022
    var isAllSelected = function(text) {                                                                               // 2023
        return text.selectionStart === 0 && text.selectionEnd === text.value.length;                                   // 2024
    };                                                                                                                 // 2025
    if (!text.setSelectionRange && text.createTextRange) {                                                             // 2026
        text.setSelectionRange = function(selectionStart, selectionEnd) {                                              // 2027
            var range = this.createTextRange();                                                                        // 2028
            range.collapse(true);                                                                                      // 2029
            range.moveStart('character', selectionStart);                                                              // 2030
            range.moveEnd('character', selectionEnd);                                                                  // 2031
            range.select();                                                                                            // 2032
        };                                                                                                             // 2033
        isAllSelected = function(text) {                                                                               // 2034
            try {                                                                                                      // 2035
                var range = text.ownerDocument.selection.createRange();                                                // 2036
            }catch(e) {}                                                                                               // 2037
            if (!range || range.parentElement() != text) return false;                                                 // 2038
                return range.text == text.value;                                                                       // 2039
        }                                                                                                              // 2040
    }                                                                                                                  // 2041
    if (useragent.isOldIE) {                                                                                           // 2042
        var inPropertyChange = false;                                                                                  // 2043
        var onPropertyChange = function(e){                                                                            // 2044
            if (inPropertyChange)                                                                                      // 2045
                return;                                                                                                // 2046
            var data = text.value;                                                                                     // 2047
            if (inComposition || !data || data == PLACEHOLDER)                                                         // 2048
                return;                                                                                                // 2049
            if (e && data == PLACEHOLDER[0])                                                                           // 2050
                return syncProperty.schedule();                                                                        // 2051
                                                                                                                       // 2052
            sendText(data);                                                                                            // 2053
            inPropertyChange = true;                                                                                   // 2054
            resetValue();                                                                                              // 2055
            inPropertyChange = false;                                                                                  // 2056
        };                                                                                                             // 2057
        var syncProperty = lang.delayedCall(onPropertyChange);                                                         // 2058
        event.addListener(text, "propertychange", onPropertyChange);                                                   // 2059
                                                                                                                       // 2060
        var keytable = { 13:1, 27:1 };                                                                                 // 2061
        event.addListener(text, "keyup", function (e) {                                                                // 2062
            if (inComposition && (!text.value || keytable[e.keyCode]))                                                 // 2063
                setTimeout(onCompositionEnd, 0);                                                                       // 2064
            if ((text.value.charCodeAt(0)||0) < 129) {                                                                 // 2065
                return syncProperty.call();                                                                            // 2066
            }                                                                                                          // 2067
            inComposition ? onCompositionUpdate() : onCompositionStart();                                              // 2068
        });                                                                                                            // 2069
        event.addListener(text, "keydown", function (e) {                                                              // 2070
            syncProperty.schedule(50);                                                                                 // 2071
        });                                                                                                            // 2072
    }                                                                                                                  // 2073
                                                                                                                       // 2074
    var onSelect = function(e) {                                                                                       // 2075
        if (copied) {                                                                                                  // 2076
            copied = false;                                                                                            // 2077
        } else if (isAllSelected(text)) {                                                                              // 2078
            host.selectAll();                                                                                          // 2079
            resetSelection();                                                                                          // 2080
        } else if (inputHandler) {                                                                                     // 2081
            resetSelection(host.selection.isEmpty());                                                                  // 2082
        }                                                                                                              // 2083
    };                                                                                                                 // 2084
                                                                                                                       // 2085
    var inputHandler = null;                                                                                           // 2086
    this.setInputHandler = function(cb) {inputHandler = cb};                                                           // 2087
    this.getInputHandler = function() {return inputHandler};                                                           // 2088
    var afterContextMenu = false;                                                                                      // 2089
                                                                                                                       // 2090
    var sendText = function(data) {                                                                                    // 2091
        if (inputHandler) {                                                                                            // 2092
            data = inputHandler(data);                                                                                 // 2093
            inputHandler = null;                                                                                       // 2094
        }                                                                                                              // 2095
        if (pasted) {                                                                                                  // 2096
            resetSelection();                                                                                          // 2097
            if (data)                                                                                                  // 2098
                host.onPaste(data);                                                                                    // 2099
            pasted = false;                                                                                            // 2100
        } else if (data == PLACEHOLDER.charAt(0)) {                                                                    // 2101
            if (afterContextMenu)                                                                                      // 2102
                host.execCommand("del", {source: "ace"});                                                              // 2103
            else // some versions of android do not fire keydown when pressing backspace                               // 2104
                host.execCommand("backspace", {source: "ace"});                                                        // 2105
        } else {                                                                                                       // 2106
            if (data.substring(0, 2) == PLACEHOLDER)                                                                   // 2107
                data = data.substr(2);                                                                                 // 2108
            else if (data.charAt(0) == PLACEHOLDER.charAt(0))                                                          // 2109
                data = data.substr(1);                                                                                 // 2110
            else if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0))                                            // 2111
                data = data.slice(0, -1);                                                                              // 2112
            if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0))                                                 // 2113
                data = data.slice(0, -1);                                                                              // 2114
                                                                                                                       // 2115
            if (data)                                                                                                  // 2116
                host.onTextInput(data);                                                                                // 2117
        }                                                                                                              // 2118
        if (afterContextMenu)                                                                                          // 2119
            afterContextMenu = false;                                                                                  // 2120
    };                                                                                                                 // 2121
    var onInput = function(e) {                                                                                        // 2122
        if (inComposition)                                                                                             // 2123
            return;                                                                                                    // 2124
        var data = text.value;                                                                                         // 2125
        sendText(data);                                                                                                // 2126
        resetValue();                                                                                                  // 2127
    };                                                                                                                 // 2128
                                                                                                                       // 2129
    var handleClipboardData = function(e, data) {                                                                      // 2130
        var clipboardData = e.clipboardData || window.clipboardData;                                                   // 2131
        if (!clipboardData || BROKEN_SETDATA)                                                                          // 2132
            return;                                                                                                    // 2133
        var mime = USE_IE_MIME_TYPE ? "Text" : "text/plain";                                                           // 2134
        if (data) {                                                                                                    // 2135
            return clipboardData.setData(mime, data) !== false;                                                        // 2136
        } else {                                                                                                       // 2137
            return clipboardData.getData(mime);                                                                        // 2138
        }                                                                                                              // 2139
    };                                                                                                                 // 2140
                                                                                                                       // 2141
    var doCopy = function(e, isCut) {                                                                                  // 2142
        var data = host.getCopyText();                                                                                 // 2143
        if (!data)                                                                                                     // 2144
            return event.preventDefault(e);                                                                            // 2145
                                                                                                                       // 2146
        if (handleClipboardData(e, data)) {                                                                            // 2147
            isCut ? host.onCut() : host.onCopy();                                                                      // 2148
            event.preventDefault(e);                                                                                   // 2149
        } else {                                                                                                       // 2150
            copied = true;                                                                                             // 2151
            text.value = data;                                                                                         // 2152
            text.select();                                                                                             // 2153
            setTimeout(function(){                                                                                     // 2154
                copied = false;                                                                                        // 2155
                resetValue();                                                                                          // 2156
                resetSelection();                                                                                      // 2157
                isCut ? host.onCut() : host.onCopy();                                                                  // 2158
            });                                                                                                        // 2159
        }                                                                                                              // 2160
    };                                                                                                                 // 2161
                                                                                                                       // 2162
    var onCut = function(e) {                                                                                          // 2163
        doCopy(e, true);                                                                                               // 2164
    };                                                                                                                 // 2165
                                                                                                                       // 2166
    var onCopy = function(e) {                                                                                         // 2167
        doCopy(e, false);                                                                                              // 2168
    };                                                                                                                 // 2169
                                                                                                                       // 2170
    var onPaste = function(e) {                                                                                        // 2171
        var data = handleClipboardData(e);                                                                             // 2172
        if (typeof data == "string") {                                                                                 // 2173
            if (data)                                                                                                  // 2174
                host.onPaste(data, e);                                                                                 // 2175
            if (useragent.isIE)                                                                                        // 2176
                setTimeout(resetSelection);                                                                            // 2177
            event.preventDefault(e);                                                                                   // 2178
        }                                                                                                              // 2179
        else {                                                                                                         // 2180
            text.value = "";                                                                                           // 2181
            pasted = true;                                                                                             // 2182
        }                                                                                                              // 2183
    };                                                                                                                 // 2184
                                                                                                                       // 2185
    event.addCommandKeyListener(text, host.onCommandKey.bind(host));                                                   // 2186
                                                                                                                       // 2187
    event.addListener(text, "select", onSelect);                                                                       // 2188
                                                                                                                       // 2189
    event.addListener(text, "input", onInput);                                                                         // 2190
                                                                                                                       // 2191
    event.addListener(text, "cut", onCut);                                                                             // 2192
    event.addListener(text, "copy", onCopy);                                                                           // 2193
    event.addListener(text, "paste", onPaste);                                                                         // 2194
    if (!('oncut' in text) || !('oncopy' in text) || !('onpaste' in text)){                                            // 2195
        event.addListener(parentNode, "keydown", function(e) {                                                         // 2196
            if ((useragent.isMac && !e.metaKey) || !e.ctrlKey)                                                         // 2197
                return;                                                                                                // 2198
                                                                                                                       // 2199
            switch (e.keyCode) {                                                                                       // 2200
                case 67:                                                                                               // 2201
                    onCopy(e);                                                                                         // 2202
                    break;                                                                                             // 2203
                case 86:                                                                                               // 2204
                    onPaste(e);                                                                                        // 2205
                    break;                                                                                             // 2206
                case 88:                                                                                               // 2207
                    onCut(e);                                                                                          // 2208
                    break;                                                                                             // 2209
            }                                                                                                          // 2210
        });                                                                                                            // 2211
    }                                                                                                                  // 2212
    var onCompositionStart = function(e) {                                                                             // 2213
        if (inComposition || !host.onCompositionStart || host.$readOnly)                                               // 2214
            return;                                                                                                    // 2215
        inComposition = {};                                                                                            // 2216
        host.onCompositionStart();                                                                                     // 2217
        setTimeout(onCompositionUpdate, 0);                                                                            // 2218
        host.on("mousedown", onCompositionEnd);                                                                        // 2219
        if (!host.selection.isEmpty()) {                                                                               // 2220
            host.insert("");                                                                                           // 2221
            host.session.markUndoGroup();                                                                              // 2222
            host.selection.clearSelection();                                                                           // 2223
        }                                                                                                              // 2224
        host.session.markUndoGroup();                                                                                  // 2225
    };                                                                                                                 // 2226
                                                                                                                       // 2227
    var onCompositionUpdate = function() {                                                                             // 2228
        if (!inComposition || !host.onCompositionUpdate || host.$readOnly)                                             // 2229
            return;                                                                                                    // 2230
        var val = text.value.replace(/\x01/g, "");                                                                     // 2231
        if (inComposition.lastValue === val) return;                                                                   // 2232
                                                                                                                       // 2233
        host.onCompositionUpdate(val);                                                                                 // 2234
        if (inComposition.lastValue)                                                                                   // 2235
            host.undo();                                                                                               // 2236
        inComposition.lastValue = val;                                                                                 // 2237
        if (inComposition.lastValue) {                                                                                 // 2238
            var r = host.selection.getRange();                                                                         // 2239
            host.insert(inComposition.lastValue);                                                                      // 2240
            host.session.markUndoGroup();                                                                              // 2241
            inComposition.range = host.selection.getRange();                                                           // 2242
            host.selection.setRange(r);                                                                                // 2243
            host.selection.clearSelection();                                                                           // 2244
        }                                                                                                              // 2245
    };                                                                                                                 // 2246
                                                                                                                       // 2247
    var onCompositionEnd = function(e) {                                                                               // 2248
        if (!host.onCompositionEnd || host.$readOnly) return;                                                          // 2249
        var c = inComposition;                                                                                         // 2250
        inComposition = false;                                                                                         // 2251
        var timer = setTimeout(function() {                                                                            // 2252
            timer = null;                                                                                              // 2253
            var str = text.value.replace(/\x01/g, "");                                                                 // 2254
            if (inComposition)                                                                                         // 2255
                return;                                                                                                // 2256
            else if (str == c.lastValue)                                                                               // 2257
                resetValue();                                                                                          // 2258
            else if (!c.lastValue && str) {                                                                            // 2259
                resetValue();                                                                                          // 2260
                sendText(str);                                                                                         // 2261
            }                                                                                                          // 2262
        });                                                                                                            // 2263
        inputHandler = function compositionInputHandler(str) {                                                         // 2264
            if (timer)                                                                                                 // 2265
                clearTimeout(timer);                                                                                   // 2266
            str = str.replace(/\x01/g, "");                                                                            // 2267
            if (str == c.lastValue)                                                                                    // 2268
                return "";                                                                                             // 2269
            if (c.lastValue && timer)                                                                                  // 2270
                host.undo();                                                                                           // 2271
            return str;                                                                                                // 2272
        };                                                                                                             // 2273
        host.onCompositionEnd();                                                                                       // 2274
        host.removeListener("mousedown", onCompositionEnd);                                                            // 2275
        if (e.type == "compositionend" && c.range) {                                                                   // 2276
            host.selection.setRange(c.range);                                                                          // 2277
        }                                                                                                              // 2278
    };                                                                                                                 // 2279
                                                                                                                       // 2280
                                                                                                                       // 2281
                                                                                                                       // 2282
    var syncComposition = lang.delayedCall(onCompositionUpdate, 50);                                                   // 2283
                                                                                                                       // 2284
    event.addListener(text, "compositionstart", onCompositionStart);                                                   // 2285
    if (useragent.isGecko) {                                                                                           // 2286
        event.addListener(text, "text", function(){syncComposition.schedule()});                                       // 2287
    } else {                                                                                                           // 2288
        event.addListener(text, "keyup", function(){syncComposition.schedule()});                                      // 2289
        event.addListener(text, "keydown", function(){syncComposition.schedule()});                                    // 2290
    }                                                                                                                  // 2291
    event.addListener(text, "compositionend", onCompositionEnd);                                                       // 2292
                                                                                                                       // 2293
    this.getElement = function() {                                                                                     // 2294
        return text;                                                                                                   // 2295
    };                                                                                                                 // 2296
                                                                                                                       // 2297
    this.setReadOnly = function(readOnly) {                                                                            // 2298
       text.readOnly = readOnly;                                                                                       // 2299
    };                                                                                                                 // 2300
                                                                                                                       // 2301
    this.onContextMenu = function(e) {                                                                                 // 2302
        afterContextMenu = true;                                                                                       // 2303
        resetSelection(host.selection.isEmpty());                                                                      // 2304
        host._emit("nativecontextmenu", {target: host, domEvent: e});                                                  // 2305
        this.moveToMouse(e, true);                                                                                     // 2306
    };                                                                                                                 // 2307
                                                                                                                       // 2308
    this.moveToMouse = function(e, bringToFront) {                                                                     // 2309
        if (!bringToFront && useragent.isOldIE)                                                                        // 2310
            return;                                                                                                    // 2311
        if (!tempStyle)                                                                                                // 2312
            tempStyle = text.style.cssText;                                                                            // 2313
        text.style.cssText = (bringToFront ? "z-index:100000;" : "")                                                   // 2314
            + "height:" + text.style.height + ";"                                                                      // 2315
            + (useragent.isIE ? "opacity:0.1;" : "");                                                                  // 2316
                                                                                                                       // 2317
        var rect = host.container.getBoundingClientRect();                                                             // 2318
        var style = dom.computedStyle(host.container);                                                                 // 2319
        var top = rect.top + (parseInt(style.borderTopWidth) || 0);                                                    // 2320
        var left = rect.left + (parseInt(rect.borderLeftWidth) || 0);                                                  // 2321
        var maxTop = rect.bottom - top - text.clientHeight -2;                                                         // 2322
        var move = function(e) {                                                                                       // 2323
            text.style.left = e.clientX - left - 2 + "px";                                                             // 2324
            text.style.top = Math.min(e.clientY - top - 2, maxTop) + "px";                                             // 2325
        };                                                                                                             // 2326
        move(e);                                                                                                       // 2327
                                                                                                                       // 2328
        if (e.type != "mousedown")                                                                                     // 2329
            return;                                                                                                    // 2330
                                                                                                                       // 2331
        if (host.renderer.$keepTextAreaAtCursor)                                                                       // 2332
            host.renderer.$keepTextAreaAtCursor = null;                                                                // 2333
        if (useragent.isWin && !useragent.isOldIE)                                                                     // 2334
            event.capture(host.container, move, onContextMenuClose);                                                   // 2335
    };                                                                                                                 // 2336
                                                                                                                       // 2337
    this.onContextMenuClose = onContextMenuClose;                                                                      // 2338
    var closeTimeout;                                                                                                  // 2339
    function onContextMenuClose() {                                                                                    // 2340
        clearTimeout(closeTimeout);                                                                                    // 2341
        closeTimeout = setTimeout(function () {                                                                        // 2342
            if (tempStyle) {                                                                                           // 2343
                text.style.cssText = tempStyle;                                                                        // 2344
                tempStyle = '';                                                                                        // 2345
            }                                                                                                          // 2346
            if (host.renderer.$keepTextAreaAtCursor == null) {                                                         // 2347
                host.renderer.$keepTextAreaAtCursor = true;                                                            // 2348
                host.renderer.$moveTextAreaToCursor();                                                                 // 2349
            }                                                                                                          // 2350
        }, useragent.isOldIE ? 200 : 0);                                                                               // 2351
    }                                                                                                                  // 2352
                                                                                                                       // 2353
    var onContextMenu = function(e) {                                                                                  // 2354
        host.textInput.onContextMenu(e);                                                                               // 2355
        onContextMenuClose();                                                                                          // 2356
    };                                                                                                                 // 2357
    event.addListener(host.renderer.scroller, "contextmenu", onContextMenu);                                           // 2358
    event.addListener(text, "contextmenu", onContextMenu);                                                             // 2359
};                                                                                                                     // 2360
                                                                                                                       // 2361
exports.TextInput = TextInput;                                                                                         // 2362
});                                                                                                                    // 2363
                                                                                                                       // 2364
define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"], function(require, exports, module) {
"use strict";                                                                                                          // 2366
                                                                                                                       // 2367
var dom = require("../lib/dom");                                                                                       // 2368
var event = require("../lib/event");                                                                                   // 2369
var useragent = require("../lib/useragent");                                                                           // 2370
                                                                                                                       // 2371
var DRAG_OFFSET = 0; // pixels                                                                                         // 2372
                                                                                                                       // 2373
function DefaultHandlers(mouseHandler) {                                                                               // 2374
    mouseHandler.$clickSelection = null;                                                                               // 2375
                                                                                                                       // 2376
    var editor = mouseHandler.editor;                                                                                  // 2377
    editor.setDefaultHandler("mousedown", this.onMouseDown.bind(mouseHandler));                                        // 2378
    editor.setDefaultHandler("dblclick", this.onDoubleClick.bind(mouseHandler));                                       // 2379
    editor.setDefaultHandler("tripleclick", this.onTripleClick.bind(mouseHandler));                                    // 2380
    editor.setDefaultHandler("quadclick", this.onQuadClick.bind(mouseHandler));                                        // 2381
    editor.setDefaultHandler("mousewheel", this.onMouseWheel.bind(mouseHandler));                                      // 2382
    editor.setDefaultHandler("touchmove", this.onTouchMove.bind(mouseHandler));                                        // 2383
                                                                                                                       // 2384
    var exports = ["select", "startSelect", "selectEnd", "selectAllEnd", "selectByWordsEnd",                           // 2385
        "selectByLinesEnd", "dragWait", "dragWaitEnd", "focusWait"];                                                   // 2386
                                                                                                                       // 2387
    exports.forEach(function(x) {                                                                                      // 2388
        mouseHandler[x] = this[x];                                                                                     // 2389
    }, this);                                                                                                          // 2390
                                                                                                                       // 2391
    mouseHandler.selectByLines = this.extendSelectionBy.bind(mouseHandler, "getLineRange");                            // 2392
    mouseHandler.selectByWords = this.extendSelectionBy.bind(mouseHandler, "getWordRange");                            // 2393
}                                                                                                                      // 2394
                                                                                                                       // 2395
(function() {                                                                                                          // 2396
                                                                                                                       // 2397
    this.onMouseDown = function(ev) {                                                                                  // 2398
        var inSelection = ev.inSelection();                                                                            // 2399
        var pos = ev.getDocumentPosition();                                                                            // 2400
        this.mousedownEvent = ev;                                                                                      // 2401
        var editor = this.editor;                                                                                      // 2402
                                                                                                                       // 2403
        var button = ev.getButton();                                                                                   // 2404
        if (button !== 0) {                                                                                            // 2405
            var selectionRange = editor.getSelectionRange();                                                           // 2406
            var selectionEmpty = selectionRange.isEmpty();                                                             // 2407
            editor.$blockScrolling++;                                                                                  // 2408
            if (selectionEmpty)                                                                                        // 2409
                editor.selection.moveToPosition(pos);                                                                  // 2410
            editor.$blockScrolling--;                                                                                  // 2411
            editor.textInput.onContextMenu(ev.domEvent);                                                               // 2412
            return; // stopping event here breaks contextmenu on ff mac                                                // 2413
        }                                                                                                              // 2414
                                                                                                                       // 2415
        this.mousedownEvent.time = Date.now();                                                                         // 2416
        if (inSelection && !editor.isFocused()) {                                                                      // 2417
            editor.focus();                                                                                            // 2418
            if (this.$focusTimout && !this.$clickSelection && !editor.inMultiSelectMode) {                             // 2419
                this.setState("focusWait");                                                                            // 2420
                this.captureMouse(ev);                                                                                 // 2421
                return;                                                                                                // 2422
            }                                                                                                          // 2423
        }                                                                                                              // 2424
                                                                                                                       // 2425
        this.captureMouse(ev);                                                                                         // 2426
        this.startSelect(pos, ev.domEvent._clicks > 1);                                                                // 2427
        return ev.preventDefault();                                                                                    // 2428
    };                                                                                                                 // 2429
                                                                                                                       // 2430
    this.startSelect = function(pos, waitForClickSelection) {                                                          // 2431
        pos = pos || this.editor.renderer.screenToTextCoordinates(this.x, this.y);                                     // 2432
        var editor = this.editor;                                                                                      // 2433
        editor.$blockScrolling++;                                                                                      // 2434
        if (this.mousedownEvent.getShiftKey())                                                                         // 2435
            editor.selection.selectToPosition(pos);                                                                    // 2436
        else if (!waitForClickSelection)                                                                               // 2437
            editor.selection.moveToPosition(pos);                                                                      // 2438
        if (!waitForClickSelection)                                                                                    // 2439
            this.select();                                                                                             // 2440
        if (editor.renderer.scroller.setCapture) {                                                                     // 2441
            editor.renderer.scroller.setCapture();                                                                     // 2442
        }                                                                                                              // 2443
        editor.setStyle("ace_selecting");                                                                              // 2444
        this.setState("select");                                                                                       // 2445
        editor.$blockScrolling--;                                                                                      // 2446
    };                                                                                                                 // 2447
                                                                                                                       // 2448
    this.select = function() {                                                                                         // 2449
        var anchor, editor = this.editor;                                                                              // 2450
        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);                                          // 2451
        editor.$blockScrolling++;                                                                                      // 2452
        if (this.$clickSelection) {                                                                                    // 2453
            var cmp = this.$clickSelection.comparePoint(cursor);                                                       // 2454
                                                                                                                       // 2455
            if (cmp == -1) {                                                                                           // 2456
                anchor = this.$clickSelection.end;                                                                     // 2457
            } else if (cmp == 1) {                                                                                     // 2458
                anchor = this.$clickSelection.start;                                                                   // 2459
            } else {                                                                                                   // 2460
                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);                                // 2461
                cursor = orientedRange.cursor;                                                                         // 2462
                anchor = orientedRange.anchor;                                                                         // 2463
            }                                                                                                          // 2464
            editor.selection.setSelectionAnchor(anchor.row, anchor.column);                                            // 2465
        }                                                                                                              // 2466
        editor.selection.selectToPosition(cursor);                                                                     // 2467
        editor.$blockScrolling--;                                                                                      // 2468
        editor.renderer.scrollCursorIntoView();                                                                        // 2469
    };                                                                                                                 // 2470
                                                                                                                       // 2471
    this.extendSelectionBy = function(unitName) {                                                                      // 2472
        var anchor, editor = this.editor;                                                                              // 2473
        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);                                          // 2474
        var range = editor.selection[unitName](cursor.row, cursor.column);                                             // 2475
        editor.$blockScrolling++;                                                                                      // 2476
        if (this.$clickSelection) {                                                                                    // 2477
            var cmpStart = this.$clickSelection.comparePoint(range.start);                                             // 2478
            var cmpEnd = this.$clickSelection.comparePoint(range.end);                                                 // 2479
                                                                                                                       // 2480
            if (cmpStart == -1 && cmpEnd <= 0) {                                                                       // 2481
                anchor = this.$clickSelection.end;                                                                     // 2482
                if (range.end.row != cursor.row || range.end.column != cursor.column)                                  // 2483
                    cursor = range.start;                                                                              // 2484
            } else if (cmpEnd == 1 && cmpStart >= 0) {                                                                 // 2485
                anchor = this.$clickSelection.start;                                                                   // 2486
                if (range.start.row != cursor.row || range.start.column != cursor.column)                              // 2487
                    cursor = range.end;                                                                                // 2488
            } else if (cmpStart == -1 && cmpEnd == 1) {                                                                // 2489
                cursor = range.end;                                                                                    // 2490
                anchor = range.start;                                                                                  // 2491
            } else {                                                                                                   // 2492
                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);                                // 2493
                cursor = orientedRange.cursor;                                                                         // 2494
                anchor = orientedRange.anchor;                                                                         // 2495
            }                                                                                                          // 2496
            editor.selection.setSelectionAnchor(anchor.row, anchor.column);                                            // 2497
        }                                                                                                              // 2498
        editor.selection.selectToPosition(cursor);                                                                     // 2499
        editor.$blockScrolling--;                                                                                      // 2500
        editor.renderer.scrollCursorIntoView();                                                                        // 2501
    };                                                                                                                 // 2502
                                                                                                                       // 2503
    this.selectEnd =                                                                                                   // 2504
    this.selectAllEnd =                                                                                                // 2505
    this.selectByWordsEnd =                                                                                            // 2506
    this.selectByLinesEnd = function() {                                                                               // 2507
        this.$clickSelection = null;                                                                                   // 2508
        this.editor.unsetStyle("ace_selecting");                                                                       // 2509
        if (this.editor.renderer.scroller.releaseCapture) {                                                            // 2510
            this.editor.renderer.scroller.releaseCapture();                                                            // 2511
        }                                                                                                              // 2512
    };                                                                                                                 // 2513
                                                                                                                       // 2514
    this.focusWait = function() {                                                                                      // 2515
        var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);                     // 2516
        var time = Date.now();                                                                                         // 2517
                                                                                                                       // 2518
        if (distance > DRAG_OFFSET || time - this.mousedownEvent.time > this.$focusTimout)                             // 2519
            this.startSelect(this.mousedownEvent.getDocumentPosition());                                               // 2520
    };                                                                                                                 // 2521
                                                                                                                       // 2522
    this.onDoubleClick = function(ev) {                                                                                // 2523
        var pos = ev.getDocumentPosition();                                                                            // 2524
        var editor = this.editor;                                                                                      // 2525
        var session = editor.session;                                                                                  // 2526
                                                                                                                       // 2527
        var range = session.getBracketRange(pos);                                                                      // 2528
        if (range) {                                                                                                   // 2529
            if (range.isEmpty()) {                                                                                     // 2530
                range.start.column--;                                                                                  // 2531
                range.end.column++;                                                                                    // 2532
            }                                                                                                          // 2533
            this.setState("select");                                                                                   // 2534
        } else {                                                                                                       // 2535
            range = editor.selection.getWordRange(pos.row, pos.column);                                                // 2536
            this.setState("selectByWords");                                                                            // 2537
        }                                                                                                              // 2538
        this.$clickSelection = range;                                                                                  // 2539
        this.select();                                                                                                 // 2540
    };                                                                                                                 // 2541
                                                                                                                       // 2542
    this.onTripleClick = function(ev) {                                                                                // 2543
        var pos = ev.getDocumentPosition();                                                                            // 2544
        var editor = this.editor;                                                                                      // 2545
                                                                                                                       // 2546
        this.setState("selectByLines");                                                                                // 2547
        var range = editor.getSelectionRange();                                                                        // 2548
        if (range.isMultiLine() && range.contains(pos.row, pos.column)) {                                              // 2549
            this.$clickSelection = editor.selection.getLineRange(range.start.row);                                     // 2550
            this.$clickSelection.end = editor.selection.getLineRange(range.end.row).end;                               // 2551
        } else {                                                                                                       // 2552
            this.$clickSelection = editor.selection.getLineRange(pos.row);                                             // 2553
        }                                                                                                              // 2554
        this.select();                                                                                                 // 2555
    };                                                                                                                 // 2556
                                                                                                                       // 2557
    this.onQuadClick = function(ev) {                                                                                  // 2558
        var editor = this.editor;                                                                                      // 2559
                                                                                                                       // 2560
        editor.selectAll();                                                                                            // 2561
        this.$clickSelection = editor.getSelectionRange();                                                             // 2562
        this.setState("selectAll");                                                                                    // 2563
    };                                                                                                                 // 2564
                                                                                                                       // 2565
    this.onMouseWheel = function(ev) {                                                                                 // 2566
        if (ev.getAccelKey())                                                                                          // 2567
            return;                                                                                                    // 2568
        if (ev.getShiftKey() && ev.wheelY && !ev.wheelX) {                                                             // 2569
            ev.wheelX = ev.wheelY;                                                                                     // 2570
            ev.wheelY = 0;                                                                                             // 2571
        }                                                                                                              // 2572
                                                                                                                       // 2573
        var t = ev.domEvent.timeStamp;                                                                                 // 2574
        var dt = t - (this.$lastScrollTime||0);                                                                        // 2575
                                                                                                                       // 2576
        var editor = this.editor;                                                                                      // 2577
        var isScrolable = editor.renderer.isScrollableBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);                  // 2578
        if (isScrolable || dt < 200) {                                                                                 // 2579
            this.$lastScrollTime = t;                                                                                  // 2580
            editor.renderer.scrollBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);                                      // 2581
            return ev.stop();                                                                                          // 2582
        }                                                                                                              // 2583
    };                                                                                                                 // 2584
                                                                                                                       // 2585
    this.onTouchMove = function (ev) {                                                                                 // 2586
        var t = ev.domEvent.timeStamp;                                                                                 // 2587
        var dt = t - (this.$lastScrollTime || 0);                                                                      // 2588
                                                                                                                       // 2589
        var editor = this.editor;                                                                                      // 2590
        var isScrolable = editor.renderer.isScrollableBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);                  // 2591
        if (isScrolable || dt < 200) {                                                                                 // 2592
            this.$lastScrollTime = t;                                                                                  // 2593
            editor.renderer.scrollBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);                                      // 2594
            return ev.stop();                                                                                          // 2595
        }                                                                                                              // 2596
    };                                                                                                                 // 2597
                                                                                                                       // 2598
}).call(DefaultHandlers.prototype);                                                                                    // 2599
                                                                                                                       // 2600
exports.DefaultHandlers = DefaultHandlers;                                                                             // 2601
                                                                                                                       // 2602
function calcDistance(ax, ay, bx, by) {                                                                                // 2603
    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));                                                     // 2604
}                                                                                                                      // 2605
                                                                                                                       // 2606
function calcRangeOrientation(range, cursor) {                                                                         // 2607
    if (range.start.row == range.end.row)                                                                              // 2608
        var cmp = 2 * cursor.column - range.start.column - range.end.column;                                           // 2609
    else if (range.start.row == range.end.row - 1 && !range.start.column && !range.end.column)                         // 2610
        var cmp = cursor.column - 4;                                                                                   // 2611
    else                                                                                                               // 2612
        var cmp = 2 * cursor.row - range.start.row - range.end.row;                                                    // 2613
                                                                                                                       // 2614
    if (cmp < 0)                                                                                                       // 2615
        return {cursor: range.start, anchor: range.end};                                                               // 2616
    else                                                                                                               // 2617
        return {cursor: range.end, anchor: range.start};                                                               // 2618
}                                                                                                                      // 2619
                                                                                                                       // 2620
});                                                                                                                    // 2621
                                                                                                                       // 2622
define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"], function(require, exports, module) {  // 2623
"use strict";                                                                                                          // 2624
                                                                                                                       // 2625
var oop = require("./lib/oop");                                                                                        // 2626
var dom = require("./lib/dom");                                                                                        // 2627
function Tooltip (parentNode) {                                                                                        // 2628
    this.isOpen = false;                                                                                               // 2629
    this.$element = null;                                                                                              // 2630
    this.$parentNode = parentNode;                                                                                     // 2631
}                                                                                                                      // 2632
                                                                                                                       // 2633
(function() {                                                                                                          // 2634
    this.$init = function() {                                                                                          // 2635
        this.$element = dom.createElement("div");                                                                      // 2636
        this.$element.className = "ace_tooltip";                                                                       // 2637
        this.$element.style.display = "none";                                                                          // 2638
        this.$parentNode.appendChild(this.$element);                                                                   // 2639
        return this.$element;                                                                                          // 2640
    };                                                                                                                 // 2641
    this.getElement = function() {                                                                                     // 2642
        return this.$element || this.$init();                                                                          // 2643
    };                                                                                                                 // 2644
    this.setText = function(text) {                                                                                    // 2645
        dom.setInnerText(this.getElement(), text);                                                                     // 2646
    };                                                                                                                 // 2647
    this.setHtml = function(html) {                                                                                    // 2648
        this.getElement().innerHTML = html;                                                                            // 2649
    };                                                                                                                 // 2650
    this.setPosition = function(x, y) {                                                                                // 2651
        this.getElement().style.left = x + "px";                                                                       // 2652
        this.getElement().style.top = y + "px";                                                                        // 2653
    };                                                                                                                 // 2654
    this.setClassName = function(className) {                                                                          // 2655
        dom.addCssClass(this.getElement(), className);                                                                 // 2656
    };                                                                                                                 // 2657
    this.show = function(text, x, y) {                                                                                 // 2658
        if (text != null)                                                                                              // 2659
            this.setText(text);                                                                                        // 2660
        if (x != null && y != null)                                                                                    // 2661
            this.setPosition(x, y);                                                                                    // 2662
        if (!this.isOpen) {                                                                                            // 2663
            this.getElement().style.display = "block";                                                                 // 2664
            this.isOpen = true;                                                                                        // 2665
        }                                                                                                              // 2666
    };                                                                                                                 // 2667
                                                                                                                       // 2668
    this.hide = function() {                                                                                           // 2669
        if (this.isOpen) {                                                                                             // 2670
            this.getElement().style.display = "none";                                                                  // 2671
            this.isOpen = false;                                                                                       // 2672
        }                                                                                                              // 2673
    };                                                                                                                 // 2674
    this.getHeight = function() {                                                                                      // 2675
        return this.getElement().offsetHeight;                                                                         // 2676
    };                                                                                                                 // 2677
    this.getWidth = function() {                                                                                       // 2678
        return this.getElement().offsetWidth;                                                                          // 2679
    };                                                                                                                 // 2680
                                                                                                                       // 2681
}).call(Tooltip.prototype);                                                                                            // 2682
                                                                                                                       // 2683
exports.Tooltip = Tooltip;                                                                                             // 2684
});                                                                                                                    // 2685
                                                                                                                       // 2686
define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"], function(require, exports, module) {
"use strict";                                                                                                          // 2688
var dom = require("../lib/dom");                                                                                       // 2689
var oop = require("../lib/oop");                                                                                       // 2690
var event = require("../lib/event");                                                                                   // 2691
var Tooltip = require("../tooltip").Tooltip;                                                                           // 2692
                                                                                                                       // 2693
function GutterHandler(mouseHandler) {                                                                                 // 2694
    var editor = mouseHandler.editor;                                                                                  // 2695
    var gutter = editor.renderer.$gutterLayer;                                                                         // 2696
    var tooltip = new GutterTooltip(editor.container);                                                                 // 2697
                                                                                                                       // 2698
    mouseHandler.editor.setDefaultHandler("guttermousedown", function(e) {                                             // 2699
        if (!editor.isFocused() || e.getButton() != 0)                                                                 // 2700
            return;                                                                                                    // 2701
        var gutterRegion = gutter.getRegion(e);                                                                        // 2702
                                                                                                                       // 2703
        if (gutterRegion == "foldWidgets")                                                                             // 2704
            return;                                                                                                    // 2705
                                                                                                                       // 2706
        var row = e.getDocumentPosition().row;                                                                         // 2707
        var selection = editor.session.selection;                                                                      // 2708
                                                                                                                       // 2709
        if (e.getShiftKey())                                                                                           // 2710
            selection.selectTo(row, 0);                                                                                // 2711
        else {                                                                                                         // 2712
            if (e.domEvent.detail == 2) {                                                                              // 2713
                editor.selectAll();                                                                                    // 2714
                return e.preventDefault();                                                                             // 2715
            }                                                                                                          // 2716
            mouseHandler.$clickSelection = editor.selection.getLineRange(row);                                         // 2717
        }                                                                                                              // 2718
        mouseHandler.setState("selectByLines");                                                                        // 2719
        mouseHandler.captureMouse(e);                                                                                  // 2720
        return e.preventDefault();                                                                                     // 2721
    });                                                                                                                // 2722
                                                                                                                       // 2723
                                                                                                                       // 2724
    var tooltipTimeout, mouseEvent, tooltipAnnotation;                                                                 // 2725
                                                                                                                       // 2726
    function showTooltip() {                                                                                           // 2727
        var row = mouseEvent.getDocumentPosition().row;                                                                // 2728
        var annotation = gutter.$annotations[row];                                                                     // 2729
        if (!annotation)                                                                                               // 2730
            return hideTooltip();                                                                                      // 2731
                                                                                                                       // 2732
        var maxRow = editor.session.getLength();                                                                       // 2733
        if (row == maxRow) {                                                                                           // 2734
            var screenRow = editor.renderer.pixelToScreenCoordinates(0, mouseEvent.y).row;                             // 2735
            var pos = mouseEvent.$pos;                                                                                 // 2736
            if (screenRow > editor.session.documentToScreenRow(pos.row, pos.column))                                   // 2737
                return hideTooltip();                                                                                  // 2738
        }                                                                                                              // 2739
                                                                                                                       // 2740
        if (tooltipAnnotation == annotation)                                                                           // 2741
            return;                                                                                                    // 2742
        tooltipAnnotation = annotation.text.join("<br/>");                                                             // 2743
                                                                                                                       // 2744
        tooltip.setHtml(tooltipAnnotation);                                                                            // 2745
        tooltip.show();                                                                                                // 2746
        editor.on("mousewheel", hideTooltip);                                                                          // 2747
                                                                                                                       // 2748
        if (mouseHandler.$tooltipFollowsMouse) {                                                                       // 2749
            moveTooltip(mouseEvent);                                                                                   // 2750
        } else {                                                                                                       // 2751
            var gutterElement = gutter.$cells[editor.session.documentToScreenRow(row, 0)].element;                     // 2752
            var rect = gutterElement.getBoundingClientRect();                                                          // 2753
            var style = tooltip.getElement().style;                                                                    // 2754
            style.left = rect.right + "px";                                                                            // 2755
            style.top = rect.bottom + "px";                                                                            // 2756
        }                                                                                                              // 2757
    }                                                                                                                  // 2758
                                                                                                                       // 2759
    function hideTooltip() {                                                                                           // 2760
        if (tooltipTimeout)                                                                                            // 2761
            tooltipTimeout = clearTimeout(tooltipTimeout);                                                             // 2762
        if (tooltipAnnotation) {                                                                                       // 2763
            tooltip.hide();                                                                                            // 2764
            tooltipAnnotation = null;                                                                                  // 2765
            editor.removeEventListener("mousewheel", hideTooltip);                                                     // 2766
        }                                                                                                              // 2767
    }                                                                                                                  // 2768
                                                                                                                       // 2769
    function moveTooltip(e) {                                                                                          // 2770
        tooltip.setPosition(e.x, e.y);                                                                                 // 2771
    }                                                                                                                  // 2772
                                                                                                                       // 2773
    mouseHandler.editor.setDefaultHandler("guttermousemove", function(e) {                                             // 2774
        var target = e.domEvent.target || e.domEvent.srcElement;                                                       // 2775
        if (dom.hasCssClass(target, "ace_fold-widget"))                                                                // 2776
            return hideTooltip();                                                                                      // 2777
                                                                                                                       // 2778
        if (tooltipAnnotation && mouseHandler.$tooltipFollowsMouse)                                                    // 2779
            moveTooltip(e);                                                                                            // 2780
                                                                                                                       // 2781
        mouseEvent = e;                                                                                                // 2782
        if (tooltipTimeout)                                                                                            // 2783
            return;                                                                                                    // 2784
        tooltipTimeout = setTimeout(function() {                                                                       // 2785
            tooltipTimeout = null;                                                                                     // 2786
            if (mouseEvent && !mouseHandler.isMousePressed)                                                            // 2787
                showTooltip();                                                                                         // 2788
            else                                                                                                       // 2789
                hideTooltip();                                                                                         // 2790
        }, 50);                                                                                                        // 2791
    });                                                                                                                // 2792
                                                                                                                       // 2793
    event.addListener(editor.renderer.$gutter, "mouseout", function(e) {                                               // 2794
        mouseEvent = null;                                                                                             // 2795
        if (!tooltipAnnotation || tooltipTimeout)                                                                      // 2796
            return;                                                                                                    // 2797
                                                                                                                       // 2798
        tooltipTimeout = setTimeout(function() {                                                                       // 2799
            tooltipTimeout = null;                                                                                     // 2800
            hideTooltip();                                                                                             // 2801
        }, 50);                                                                                                        // 2802
    });                                                                                                                // 2803
                                                                                                                       // 2804
    editor.on("changeSession", hideTooltip);                                                                           // 2805
}                                                                                                                      // 2806
                                                                                                                       // 2807
function GutterTooltip(parentNode) {                                                                                   // 2808
    Tooltip.call(this, parentNode);                                                                                    // 2809
}                                                                                                                      // 2810
                                                                                                                       // 2811
oop.inherits(GutterTooltip, Tooltip);                                                                                  // 2812
                                                                                                                       // 2813
(function(){                                                                                                           // 2814
    this.setPosition = function(x, y) {                                                                                // 2815
        var windowWidth = window.innerWidth || document.documentElement.clientWidth;                                   // 2816
        var windowHeight = window.innerHeight || document.documentElement.clientHeight;                                // 2817
        var width = this.getWidth();                                                                                   // 2818
        var height = this.getHeight();                                                                                 // 2819
        x += 15;                                                                                                       // 2820
        y += 15;                                                                                                       // 2821
        if (x + width > windowWidth) {                                                                                 // 2822
            x -= (x + width) - windowWidth;                                                                            // 2823
        }                                                                                                              // 2824
        if (y + height > windowHeight) {                                                                               // 2825
            y -= 20 + height;                                                                                          // 2826
        }                                                                                                              // 2827
        Tooltip.prototype.setPosition.call(this, x, y);                                                                // 2828
    };                                                                                                                 // 2829
                                                                                                                       // 2830
}).call(GutterTooltip.prototype);                                                                                      // 2831
                                                                                                                       // 2832
                                                                                                                       // 2833
                                                                                                                       // 2834
exports.GutterHandler = GutterHandler;                                                                                 // 2835
                                                                                                                       // 2836
});                                                                                                                    // 2837
                                                                                                                       // 2838
define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"], function(require, exports, module) {
"use strict";                                                                                                          // 2840
                                                                                                                       // 2841
var event = require("../lib/event");                                                                                   // 2842
var useragent = require("../lib/useragent");                                                                           // 2843
var MouseEvent = exports.MouseEvent = function(domEvent, editor) {                                                     // 2844
    this.domEvent = domEvent;                                                                                          // 2845
    this.editor = editor;                                                                                              // 2846
                                                                                                                       // 2847
    this.x = this.clientX = domEvent.clientX;                                                                          // 2848
    this.y = this.clientY = domEvent.clientY;                                                                          // 2849
                                                                                                                       // 2850
    this.$pos = null;                                                                                                  // 2851
    this.$inSelection = null;                                                                                          // 2852
                                                                                                                       // 2853
    this.propagationStopped = false;                                                                                   // 2854
    this.defaultPrevented = false;                                                                                     // 2855
};                                                                                                                     // 2856
                                                                                                                       // 2857
(function() {                                                                                                          // 2858
                                                                                                                       // 2859
    this.stopPropagation = function() {                                                                                // 2860
        event.stopPropagation(this.domEvent);                                                                          // 2861
        this.propagationStopped = true;                                                                                // 2862
    };                                                                                                                 // 2863
                                                                                                                       // 2864
    this.preventDefault = function() {                                                                                 // 2865
        event.preventDefault(this.domEvent);                                                                           // 2866
        this.defaultPrevented = true;                                                                                  // 2867
    };                                                                                                                 // 2868
                                                                                                                       // 2869
    this.stop = function() {                                                                                           // 2870
        this.stopPropagation();                                                                                        // 2871
        this.preventDefault();                                                                                         // 2872
    };                                                                                                                 // 2873
    this.getDocumentPosition = function() {                                                                            // 2874
        if (this.$pos)                                                                                                 // 2875
            return this.$pos;                                                                                          // 2876
                                                                                                                       // 2877
        this.$pos = this.editor.renderer.screenToTextCoordinates(this.clientX, this.clientY);                          // 2878
        return this.$pos;                                                                                              // 2879
    };                                                                                                                 // 2880
    this.inSelection = function() {                                                                                    // 2881
        if (this.$inSelection !== null)                                                                                // 2882
            return this.$inSelection;                                                                                  // 2883
                                                                                                                       // 2884
        var editor = this.editor;                                                                                      // 2885
                                                                                                                       // 2886
                                                                                                                       // 2887
        var selectionRange = editor.getSelectionRange();                                                               // 2888
        if (selectionRange.isEmpty())                                                                                  // 2889
            this.$inSelection = false;                                                                                 // 2890
        else {                                                                                                         // 2891
            var pos = this.getDocumentPosition();                                                                      // 2892
            this.$inSelection = selectionRange.contains(pos.row, pos.column);                                          // 2893
        }                                                                                                              // 2894
                                                                                                                       // 2895
        return this.$inSelection;                                                                                      // 2896
    };                                                                                                                 // 2897
    this.getButton = function() {                                                                                      // 2898
        return event.getButton(this.domEvent);                                                                         // 2899
    };                                                                                                                 // 2900
    this.getShiftKey = function() {                                                                                    // 2901
        return this.domEvent.shiftKey;                                                                                 // 2902
    };                                                                                                                 // 2903
                                                                                                                       // 2904
    this.getAccelKey = useragent.isMac                                                                                 // 2905
        ? function() { return this.domEvent.metaKey; }                                                                 // 2906
        : function() { return this.domEvent.ctrlKey; };                                                                // 2907
                                                                                                                       // 2908
}).call(MouseEvent.prototype);                                                                                         // 2909
                                                                                                                       // 2910
});                                                                                                                    // 2911
                                                                                                                       // 2912
define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"], function(require, exports, module) {
"use strict";                                                                                                          // 2914
                                                                                                                       // 2915
var dom = require("../lib/dom");                                                                                       // 2916
var event = require("../lib/event");                                                                                   // 2917
var useragent = require("../lib/useragent");                                                                           // 2918
                                                                                                                       // 2919
var AUTOSCROLL_DELAY = 200;                                                                                            // 2920
var SCROLL_CURSOR_DELAY = 200;                                                                                         // 2921
var SCROLL_CURSOR_HYSTERESIS = 5;                                                                                      // 2922
                                                                                                                       // 2923
function DragdropHandler(mouseHandler) {                                                                               // 2924
                                                                                                                       // 2925
    var editor = mouseHandler.editor;                                                                                  // 2926
                                                                                                                       // 2927
    var blankImage = dom.createElement("img");                                                                         // 2928
    blankImage.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";                     // 2929
    if (useragent.isOpera)                                                                                             // 2930
        blankImage.style.cssText = "width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;";   // 2931
                                                                                                                       // 2932
    var exports = ["dragWait", "dragWaitEnd", "startDrag", "dragReadyEnd", "onMouseDrag"];                             // 2933
                                                                                                                       // 2934
     exports.forEach(function(x) {                                                                                     // 2935
         mouseHandler[x] = this[x];                                                                                    // 2936
    }, this);                                                                                                          // 2937
    editor.addEventListener("mousedown", this.onMouseDown.bind(mouseHandler));                                         // 2938
                                                                                                                       // 2939
                                                                                                                       // 2940
    var mouseTarget = editor.container;                                                                                // 2941
    var dragSelectionMarker, x, y;                                                                                     // 2942
    var timerId, range;                                                                                                // 2943
    var dragCursor, counter = 0;                                                                                       // 2944
    var dragOperation;                                                                                                 // 2945
    var isInternal;                                                                                                    // 2946
    var autoScrollStartTime;                                                                                           // 2947
    var cursorMovedTime;                                                                                               // 2948
    var cursorPointOnCaretMoved;                                                                                       // 2949
                                                                                                                       // 2950
    this.onDragStart = function(e) {                                                                                   // 2951
        if (this.cancelDrag || !mouseTarget.draggable) {                                                               // 2952
            var self = this;                                                                                           // 2953
            setTimeout(function(){                                                                                     // 2954
                self.startSelect();                                                                                    // 2955
                self.captureMouse(e);                                                                                  // 2956
            }, 0);                                                                                                     // 2957
            return e.preventDefault();                                                                                 // 2958
        }                                                                                                              // 2959
        range = editor.getSelectionRange();                                                                            // 2960
                                                                                                                       // 2961
        var dataTransfer = e.dataTransfer;                                                                             // 2962
        dataTransfer.effectAllowed = editor.getReadOnly() ? "copy" : "copyMove";                                       // 2963
        if (useragent.isOpera) {                                                                                       // 2964
            editor.container.appendChild(blankImage);                                                                  // 2965
            blankImage.scrollTop = 0;                                                                                  // 2966
        }                                                                                                              // 2967
        dataTransfer.setDragImage && dataTransfer.setDragImage(blankImage, 0, 0);                                      // 2968
        if (useragent.isOpera) {                                                                                       // 2969
            editor.container.removeChild(blankImage);                                                                  // 2970
        }                                                                                                              // 2971
        dataTransfer.clearData();                                                                                      // 2972
        dataTransfer.setData("Text", editor.session.getTextRange());                                                   // 2973
                                                                                                                       // 2974
        isInternal = true;                                                                                             // 2975
        this.setState("drag");                                                                                         // 2976
    };                                                                                                                 // 2977
                                                                                                                       // 2978
    this.onDragEnd = function(e) {                                                                                     // 2979
        mouseTarget.draggable = false;                                                                                 // 2980
        isInternal = false;                                                                                            // 2981
        this.setState(null);                                                                                           // 2982
        if (!editor.getReadOnly()) {                                                                                   // 2983
            var dropEffect = e.dataTransfer.dropEffect;                                                                // 2984
            if (!dragOperation && dropEffect == "move")                                                                // 2985
                editor.session.remove(editor.getSelectionRange());                                                     // 2986
            editor.renderer.$cursorLayer.setBlinking(true);                                                            // 2987
        }                                                                                                              // 2988
        this.editor.unsetStyle("ace_dragging");                                                                        // 2989
        this.editor.renderer.setCursorStyle("");                                                                       // 2990
    };                                                                                                                 // 2991
                                                                                                                       // 2992
    this.onDragEnter = function(e) {                                                                                   // 2993
        if (editor.getReadOnly() || !canAccept(e.dataTransfer))                                                        // 2994
            return;                                                                                                    // 2995
        x = e.clientX;                                                                                                 // 2996
        y = e.clientY;                                                                                                 // 2997
        if (!dragSelectionMarker)                                                                                      // 2998
            addDragMarker();                                                                                           // 2999
        counter++;                                                                                                     // 3000
        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);                                                  // 3001
        return event.preventDefault(e);                                                                                // 3002
    };                                                                                                                 // 3003
                                                                                                                       // 3004
    this.onDragOver = function(e) {                                                                                    // 3005
        if (editor.getReadOnly() || !canAccept(e.dataTransfer))                                                        // 3006
            return;                                                                                                    // 3007
        x = e.clientX;                                                                                                 // 3008
        y = e.clientY;                                                                                                 // 3009
        if (!dragSelectionMarker) {                                                                                    // 3010
            addDragMarker();                                                                                           // 3011
            counter++;                                                                                                 // 3012
        }                                                                                                              // 3013
        if (onMouseMoveTimer !== null)                                                                                 // 3014
            onMouseMoveTimer = null;                                                                                   // 3015
                                                                                                                       // 3016
        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);                                                  // 3017
        return event.preventDefault(e);                                                                                // 3018
    };                                                                                                                 // 3019
                                                                                                                       // 3020
    this.onDragLeave = function(e) {                                                                                   // 3021
        counter--;                                                                                                     // 3022
        if (counter <= 0 && dragSelectionMarker) {                                                                     // 3023
            clearDragMarker();                                                                                         // 3024
            dragOperation = null;                                                                                      // 3025
            return event.preventDefault(e);                                                                            // 3026
        }                                                                                                              // 3027
    };                                                                                                                 // 3028
                                                                                                                       // 3029
    this.onDrop = function(e) {                                                                                        // 3030
        if (!dragCursor)                                                                                               // 3031
            return;                                                                                                    // 3032
        var dataTransfer = e.dataTransfer;                                                                             // 3033
        if (isInternal) {                                                                                              // 3034
            switch (dragOperation) {                                                                                   // 3035
                case "move":                                                                                           // 3036
                    if (range.contains(dragCursor.row, dragCursor.column)) {                                           // 3037
                        range = {                                                                                      // 3038
                            start: dragCursor,                                                                         // 3039
                            end: dragCursor                                                                            // 3040
                        };                                                                                             // 3041
                    } else {                                                                                           // 3042
                        range = editor.moveText(range, dragCursor);                                                    // 3043
                    }                                                                                                  // 3044
                    break;                                                                                             // 3045
                case "copy":                                                                                           // 3046
                    range = editor.moveText(range, dragCursor, true);                                                  // 3047
                    break;                                                                                             // 3048
            }                                                                                                          // 3049
        } else {                                                                                                       // 3050
            var dropData = dataTransfer.getData('Text');                                                               // 3051
            range = {                                                                                                  // 3052
                start: dragCursor,                                                                                     // 3053
                end: editor.session.insert(dragCursor, dropData)                                                       // 3054
            };                                                                                                         // 3055
            editor.focus();                                                                                            // 3056
            dragOperation = null;                                                                                      // 3057
        }                                                                                                              // 3058
        clearDragMarker();                                                                                             // 3059
        return event.preventDefault(e);                                                                                // 3060
    };                                                                                                                 // 3061
                                                                                                                       // 3062
    event.addListener(mouseTarget, "dragstart", this.onDragStart.bind(mouseHandler));                                  // 3063
    event.addListener(mouseTarget, "dragend", this.onDragEnd.bind(mouseHandler));                                      // 3064
    event.addListener(mouseTarget, "dragenter", this.onDragEnter.bind(mouseHandler));                                  // 3065
    event.addListener(mouseTarget, "dragover", this.onDragOver.bind(mouseHandler));                                    // 3066
    event.addListener(mouseTarget, "dragleave", this.onDragLeave.bind(mouseHandler));                                  // 3067
    event.addListener(mouseTarget, "drop", this.onDrop.bind(mouseHandler));                                            // 3068
                                                                                                                       // 3069
    function scrollCursorIntoView(cursor, prevCursor) {                                                                // 3070
        var now = Date.now();                                                                                          // 3071
        var vMovement = !prevCursor || cursor.row != prevCursor.row;                                                   // 3072
        var hMovement = !prevCursor || cursor.column != prevCursor.column;                                             // 3073
        if (!cursorMovedTime || vMovement || hMovement) {                                                              // 3074
            editor.$blockScrolling += 1;                                                                               // 3075
            editor.moveCursorToPosition(cursor);                                                                       // 3076
            editor.$blockScrolling -= 1;                                                                               // 3077
            cursorMovedTime = now;                                                                                     // 3078
            cursorPointOnCaretMoved = {x: x, y: y};                                                                    // 3079
        } else {                                                                                                       // 3080
            var distance = calcDistance(cursorPointOnCaretMoved.x, cursorPointOnCaretMoved.y, x, y);                   // 3081
            if (distance > SCROLL_CURSOR_HYSTERESIS) {                                                                 // 3082
                cursorMovedTime = null;                                                                                // 3083
            } else if (now - cursorMovedTime >= SCROLL_CURSOR_DELAY) {                                                 // 3084
                editor.renderer.scrollCursorIntoView();                                                                // 3085
                cursorMovedTime = null;                                                                                // 3086
            }                                                                                                          // 3087
        }                                                                                                              // 3088
    }                                                                                                                  // 3089
                                                                                                                       // 3090
    function autoScroll(cursor, prevCursor) {                                                                          // 3091
        var now = Date.now();                                                                                          // 3092
        var lineHeight = editor.renderer.layerConfig.lineHeight;                                                       // 3093
        var characterWidth = editor.renderer.layerConfig.characterWidth;                                               // 3094
        var editorRect = editor.renderer.scroller.getBoundingClientRect();                                             // 3095
        var offsets = {                                                                                                // 3096
           x: {                                                                                                        // 3097
               left: x - editorRect.left,                                                                              // 3098
               right: editorRect.right - x                                                                             // 3099
           },                                                                                                          // 3100
           y: {                                                                                                        // 3101
               top: y - editorRect.top,                                                                                // 3102
               bottom: editorRect.bottom - y                                                                           // 3103
           }                                                                                                           // 3104
        };                                                                                                             // 3105
        var nearestXOffset = Math.min(offsets.x.left, offsets.x.right);                                                // 3106
        var nearestYOffset = Math.min(offsets.y.top, offsets.y.bottom);                                                // 3107
        var scrollCursor = {row: cursor.row, column: cursor.column};                                                   // 3108
        if (nearestXOffset / characterWidth <= 2) {                                                                    // 3109
            scrollCursor.column += (offsets.x.left < offsets.x.right ? -3 : +2);                                       // 3110
        }                                                                                                              // 3111
        if (nearestYOffset / lineHeight <= 1) {                                                                        // 3112
            scrollCursor.row += (offsets.y.top < offsets.y.bottom ? -1 : +1);                                          // 3113
        }                                                                                                              // 3114
        var vScroll = cursor.row != scrollCursor.row;                                                                  // 3115
        var hScroll = cursor.column != scrollCursor.column;                                                            // 3116
        var vMovement = !prevCursor || cursor.row != prevCursor.row;                                                   // 3117
        if (vScroll || (hScroll && !vMovement)) {                                                                      // 3118
            if (!autoScrollStartTime)                                                                                  // 3119
                autoScrollStartTime = now;                                                                             // 3120
            else if (now - autoScrollStartTime >= AUTOSCROLL_DELAY)                                                    // 3121
                editor.renderer.scrollCursorIntoView(scrollCursor);                                                    // 3122
        } else {                                                                                                       // 3123
            autoScrollStartTime = null;                                                                                // 3124
        }                                                                                                              // 3125
    }                                                                                                                  // 3126
                                                                                                                       // 3127
    function onDragInterval() {                                                                                        // 3128
        var prevCursor = dragCursor;                                                                                   // 3129
        dragCursor = editor.renderer.screenToTextCoordinates(x, y);                                                    // 3130
        scrollCursorIntoView(dragCursor, prevCursor);                                                                  // 3131
        autoScroll(dragCursor, prevCursor);                                                                            // 3132
    }                                                                                                                  // 3133
                                                                                                                       // 3134
    function addDragMarker() {                                                                                         // 3135
        range = editor.selection.toOrientedRange();                                                                    // 3136
        dragSelectionMarker = editor.session.addMarker(range, "ace_selection", editor.getSelectionStyle());            // 3137
        editor.clearSelection();                                                                                       // 3138
        if (editor.isFocused())                                                                                        // 3139
            editor.renderer.$cursorLayer.setBlinking(false);                                                           // 3140
        clearInterval(timerId);                                                                                        // 3141
        onDragInterval();                                                                                              // 3142
        timerId = setInterval(onDragInterval, 20);                                                                     // 3143
        counter = 0;                                                                                                   // 3144
        event.addListener(document, "mousemove", onMouseMove);                                                         // 3145
    }                                                                                                                  // 3146
                                                                                                                       // 3147
    function clearDragMarker() {                                                                                       // 3148
        clearInterval(timerId);                                                                                        // 3149
        editor.session.removeMarker(dragSelectionMarker);                                                              // 3150
        dragSelectionMarker = null;                                                                                    // 3151
        editor.$blockScrolling += 1;                                                                                   // 3152
        editor.selection.fromOrientedRange(range);                                                                     // 3153
        editor.$blockScrolling -= 1;                                                                                   // 3154
        if (editor.isFocused() && !isInternal)                                                                         // 3155
            editor.renderer.$cursorLayer.setBlinking(!editor.getReadOnly());                                           // 3156
        range = null;                                                                                                  // 3157
        dragCursor = null;                                                                                             // 3158
        counter = 0;                                                                                                   // 3159
        autoScrollStartTime = null;                                                                                    // 3160
        cursorMovedTime = null;                                                                                        // 3161
        event.removeListener(document, "mousemove", onMouseMove);                                                      // 3162
    }                                                                                                                  // 3163
    var onMouseMoveTimer = null;                                                                                       // 3164
    function onMouseMove() {                                                                                           // 3165
        if (onMouseMoveTimer == null) {                                                                                // 3166
            onMouseMoveTimer = setTimeout(function() {                                                                 // 3167
                if (onMouseMoveTimer != null && dragSelectionMarker)                                                   // 3168
                    clearDragMarker();                                                                                 // 3169
            }, 20);                                                                                                    // 3170
        }                                                                                                              // 3171
    }                                                                                                                  // 3172
                                                                                                                       // 3173
    function canAccept(dataTransfer) {                                                                                 // 3174
        var types = dataTransfer.types;                                                                                // 3175
        return !types || Array.prototype.some.call(types, function(type) {                                             // 3176
            return type == 'text/plain' || type == 'Text';                                                             // 3177
        });                                                                                                            // 3178
    }                                                                                                                  // 3179
                                                                                                                       // 3180
    function getDropEffect(e) {                                                                                        // 3181
        var copyAllowed = ['copy', 'copymove', 'all', 'uninitialized'];                                                // 3182
        var moveAllowed = ['move', 'copymove', 'linkmove', 'all', 'uninitialized'];                                    // 3183
                                                                                                                       // 3184
        var copyModifierState = useragent.isMac ? e.altKey : e.ctrlKey;                                                // 3185
        var effectAllowed = "uninitialized";                                                                           // 3186
        try {                                                                                                          // 3187
            effectAllowed = e.dataTransfer.effectAllowed.toLowerCase();                                                // 3188
        } catch (e) {}                                                                                                 // 3189
        var dropEffect = "none";                                                                                       // 3190
                                                                                                                       // 3191
        if (copyModifierState && copyAllowed.indexOf(effectAllowed) >= 0)                                              // 3192
            dropEffect = "copy";                                                                                       // 3193
        else if (moveAllowed.indexOf(effectAllowed) >= 0)                                                              // 3194
            dropEffect = "move";                                                                                       // 3195
        else if (copyAllowed.indexOf(effectAllowed) >= 0)                                                              // 3196
            dropEffect = "copy";                                                                                       // 3197
                                                                                                                       // 3198
        return dropEffect;                                                                                             // 3199
    }                                                                                                                  // 3200
}                                                                                                                      // 3201
                                                                                                                       // 3202
(function() {                                                                                                          // 3203
                                                                                                                       // 3204
    this.dragWait = function() {                                                                                       // 3205
        var interval = Date.now() - this.mousedownEvent.time;                                                          // 3206
        if (interval > this.editor.getDragDelay())                                                                     // 3207
            this.startDrag();                                                                                          // 3208
    };                                                                                                                 // 3209
                                                                                                                       // 3210
    this.dragWaitEnd = function() {                                                                                    // 3211
        var target = this.editor.container;                                                                            // 3212
        target.draggable = false;                                                                                      // 3213
        this.startSelect(this.mousedownEvent.getDocumentPosition());                                                   // 3214
        this.selectEnd();                                                                                              // 3215
    };                                                                                                                 // 3216
                                                                                                                       // 3217
    this.dragReadyEnd = function(e) {                                                                                  // 3218
        this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly());                                     // 3219
        this.editor.unsetStyle("ace_dragging");                                                                        // 3220
        this.editor.renderer.setCursorStyle("");                                                                       // 3221
        this.dragWaitEnd();                                                                                            // 3222
    };                                                                                                                 // 3223
                                                                                                                       // 3224
    this.startDrag = function(){                                                                                       // 3225
        this.cancelDrag = false;                                                                                       // 3226
        var editor = this.editor;                                                                                      // 3227
        var target = editor.container;                                                                                 // 3228
        target.draggable = true;                                                                                       // 3229
        editor.renderer.$cursorLayer.setBlinking(false);                                                               // 3230
        editor.setStyle("ace_dragging");                                                                               // 3231
        var cursorStyle = useragent.isWin ? "default" : "move";                                                        // 3232
        editor.renderer.setCursorStyle(cursorStyle);                                                                   // 3233
        this.setState("dragReady");                                                                                    // 3234
    };                                                                                                                 // 3235
                                                                                                                       // 3236
    this.onMouseDrag = function(e) {                                                                                   // 3237
        var target = this.editor.container;                                                                            // 3238
        if (useragent.isIE && this.state == "dragReady") {                                                             // 3239
            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);                 // 3240
            if (distance > 3)                                                                                          // 3241
                target.dragDrop();                                                                                     // 3242
        }                                                                                                              // 3243
        if (this.state === "dragWait") {                                                                               // 3244
            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);                 // 3245
            if (distance > 0) {                                                                                        // 3246
                target.draggable = false;                                                                              // 3247
                this.startSelect(this.mousedownEvent.getDocumentPosition());                                           // 3248
            }                                                                                                          // 3249
        }                                                                                                              // 3250
    };                                                                                                                 // 3251
                                                                                                                       // 3252
    this.onMouseDown = function(e) {                                                                                   // 3253
        if (!this.$dragEnabled)                                                                                        // 3254
            return;                                                                                                    // 3255
        this.mousedownEvent = e;                                                                                       // 3256
        var editor = this.editor;                                                                                      // 3257
                                                                                                                       // 3258
        var inSelection = e.inSelection();                                                                             // 3259
        var button = e.getButton();                                                                                    // 3260
        var clickCount = e.domEvent.detail || 1;                                                                       // 3261
        if (clickCount === 1 && button === 0 && inSelection) {                                                         // 3262
            if (e.editor.inMultiSelectMode && (e.getAccelKey() || e.getShiftKey()))                                    // 3263
                return;                                                                                                // 3264
            this.mousedownEvent.time = Date.now();                                                                     // 3265
            var eventTarget = e.domEvent.target || e.domEvent.srcElement;                                              // 3266
            if ("unselectable" in eventTarget)                                                                         // 3267
                eventTarget.unselectable = "on";                                                                       // 3268
            if (editor.getDragDelay()) {                                                                               // 3269
                if (useragent.isWebKit) {                                                                              // 3270
                    this.cancelDrag = true;                                                                            // 3271
                    var mouseTarget = editor.container;                                                                // 3272
                    mouseTarget.draggable = true;                                                                      // 3273
                }                                                                                                      // 3274
                this.setState("dragWait");                                                                             // 3275
            } else {                                                                                                   // 3276
                this.startDrag();                                                                                      // 3277
            }                                                                                                          // 3278
            this.captureMouse(e, this.onMouseDrag.bind(this));                                                         // 3279
            e.defaultPrevented = true;                                                                                 // 3280
        }                                                                                                              // 3281
    };                                                                                                                 // 3282
                                                                                                                       // 3283
}).call(DragdropHandler.prototype);                                                                                    // 3284
                                                                                                                       // 3285
                                                                                                                       // 3286
function calcDistance(ax, ay, bx, by) {                                                                                // 3287
    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));                                                     // 3288
}                                                                                                                      // 3289
                                                                                                                       // 3290
exports.DragdropHandler = DragdropHandler;                                                                             // 3291
                                                                                                                       // 3292
});                                                                                                                    // 3293
                                                                                                                       // 3294
define("ace/lib/net",["require","exports","module","ace/lib/dom"], function(require, exports, module) {                // 3295
"use strict";                                                                                                          // 3296
var dom = require("./dom");                                                                                            // 3297
                                                                                                                       // 3298
exports.get = function (url, callback) {                                                                               // 3299
    var xhr = new XMLHttpRequest();                                                                                    // 3300
    xhr.open('GET', url, true);                                                                                        // 3301
    xhr.onreadystatechange = function () {                                                                             // 3302
        if (xhr.readyState === 4) {                                                                                    // 3303
            callback(xhr.responseText);                                                                                // 3304
        }                                                                                                              // 3305
    };                                                                                                                 // 3306
    xhr.send(null);                                                                                                    // 3307
};                                                                                                                     // 3308
                                                                                                                       // 3309
exports.loadScript = function(path, callback) {                                                                        // 3310
    var head = dom.getDocumentHead();                                                                                  // 3311
    var s = document.createElement('script');                                                                          // 3312
                                                                                                                       // 3313
    s.src = path;                                                                                                      // 3314
    head.appendChild(s);                                                                                               // 3315
                                                                                                                       // 3316
    s.onload = s.onreadystatechange = function(_, isAbort) {                                                           // 3317
        if (isAbort || !s.readyState || s.readyState == "loaded" || s.readyState == "complete") {                      // 3318
            s = s.onload = s.onreadystatechange = null;                                                                // 3319
            if (!isAbort)                                                                                              // 3320
                callback();                                                                                            // 3321
        }                                                                                                              // 3322
    };                                                                                                                 // 3323
};                                                                                                                     // 3324
exports.qualifyURL = function(url) {                                                                                   // 3325
    var a = document.createElement('a');                                                                               // 3326
    a.href = url;                                                                                                      // 3327
    return a.href;                                                                                                     // 3328
}                                                                                                                      // 3329
                                                                                                                       // 3330
});                                                                                                                    // 3331
                                                                                                                       // 3332
define("ace/lib/event_emitter",["require","exports","module"], function(require, exports, module) {                    // 3333
"use strict";                                                                                                          // 3334
                                                                                                                       // 3335
var EventEmitter = {};                                                                                                 // 3336
var stopPropagation = function() { this.propagationStopped = true; };                                                  // 3337
var preventDefault = function() { this.defaultPrevented = true; };                                                     // 3338
                                                                                                                       // 3339
EventEmitter._emit =                                                                                                   // 3340
EventEmitter._dispatchEvent = function(eventName, e) {                                                                 // 3341
    this._eventRegistry || (this._eventRegistry = {});                                                                 // 3342
    this._defaultHandlers || (this._defaultHandlers = {});                                                             // 3343
                                                                                                                       // 3344
    var listeners = this._eventRegistry[eventName] || [];                                                              // 3345
    var defaultHandler = this._defaultHandlers[eventName];                                                             // 3346
    if (!listeners.length && !defaultHandler)                                                                          // 3347
        return;                                                                                                        // 3348
                                                                                                                       // 3349
    if (typeof e != "object" || !e)                                                                                    // 3350
        e = {};                                                                                                        // 3351
                                                                                                                       // 3352
    if (!e.type)                                                                                                       // 3353
        e.type = eventName;                                                                                            // 3354
    if (!e.stopPropagation)                                                                                            // 3355
        e.stopPropagation = stopPropagation;                                                                           // 3356
    if (!e.preventDefault)                                                                                             // 3357
        e.preventDefault = preventDefault;                                                                             // 3358
                                                                                                                       // 3359
    listeners = listeners.slice();                                                                                     // 3360
    for (var i=0; i<listeners.length; i++) {                                                                           // 3361
        listeners[i](e, this);                                                                                         // 3362
        if (e.propagationStopped)                                                                                      // 3363
            break;                                                                                                     // 3364
    }                                                                                                                  // 3365
                                                                                                                       // 3366
    if (defaultHandler && !e.defaultPrevented)                                                                         // 3367
        return defaultHandler(e, this);                                                                                // 3368
};                                                                                                                     // 3369
                                                                                                                       // 3370
                                                                                                                       // 3371
EventEmitter._signal = function(eventName, e) {                                                                        // 3372
    var listeners = (this._eventRegistry || {})[eventName];                                                            // 3373
    if (!listeners)                                                                                                    // 3374
        return;                                                                                                        // 3375
    listeners = listeners.slice();                                                                                     // 3376
    for (var i=0; i<listeners.length; i++)                                                                             // 3377
        listeners[i](e, this);                                                                                         // 3378
};                                                                                                                     // 3379
                                                                                                                       // 3380
EventEmitter.once = function(eventName, callback) {                                                                    // 3381
    var _self = this;                                                                                                  // 3382
    callback && this.addEventListener(eventName, function newCallback() {                                              // 3383
        _self.removeEventListener(eventName, newCallback);                                                             // 3384
        callback.apply(null, arguments);                                                                               // 3385
    });                                                                                                                // 3386
};                                                                                                                     // 3387
                                                                                                                       // 3388
                                                                                                                       // 3389
EventEmitter.setDefaultHandler = function(eventName, callback) {                                                       // 3390
    var handlers = this._defaultHandlers                                                                               // 3391
    if (!handlers)                                                                                                     // 3392
        handlers = this._defaultHandlers = {_disabled_: {}};                                                           // 3393
                                                                                                                       // 3394
    if (handlers[eventName]) {                                                                                         // 3395
        var old = handlers[eventName];                                                                                 // 3396
        var disabled = handlers._disabled_[eventName];                                                                 // 3397
        if (!disabled)                                                                                                 // 3398
            handlers._disabled_[eventName] = disabled = [];                                                            // 3399
        disabled.push(old);                                                                                            // 3400
        var i = disabled.indexOf(callback);                                                                            // 3401
        if (i != -1)                                                                                                   // 3402
            disabled.splice(i, 1);                                                                                     // 3403
    }                                                                                                                  // 3404
    handlers[eventName] = callback;                                                                                    // 3405
};                                                                                                                     // 3406
EventEmitter.removeDefaultHandler = function(eventName, callback) {                                                    // 3407
    var handlers = this._defaultHandlers                                                                               // 3408
    if (!handlers)                                                                                                     // 3409
        return;                                                                                                        // 3410
    var disabled = handlers._disabled_[eventName];                                                                     // 3411
                                                                                                                       // 3412
    if (handlers[eventName] == callback) {                                                                             // 3413
        var old = handlers[eventName];                                                                                 // 3414
        if (disabled)                                                                                                  // 3415
            this.setDefaultHandler(eventName, disabled.pop());                                                         // 3416
    } else if (disabled) {                                                                                             // 3417
        var i = disabled.indexOf(callback);                                                                            // 3418
        if (i != -1)                                                                                                   // 3419
            disabled.splice(i, 1);                                                                                     // 3420
    }                                                                                                                  // 3421
};                                                                                                                     // 3422
                                                                                                                       // 3423
EventEmitter.on =                                                                                                      // 3424
EventEmitter.addEventListener = function(eventName, callback, capturing) {                                             // 3425
    this._eventRegistry = this._eventRegistry || {};                                                                   // 3426
                                                                                                                       // 3427
    var listeners = this._eventRegistry[eventName];                                                                    // 3428
    if (!listeners)                                                                                                    // 3429
        listeners = this._eventRegistry[eventName] = [];                                                               // 3430
                                                                                                                       // 3431
    if (listeners.indexOf(callback) == -1)                                                                             // 3432
        listeners[capturing ? "unshift" : "push"](callback);                                                           // 3433
    return callback;                                                                                                   // 3434
};                                                                                                                     // 3435
                                                                                                                       // 3436
EventEmitter.off =                                                                                                     // 3437
EventEmitter.removeListener =                                                                                          // 3438
EventEmitter.removeEventListener = function(eventName, callback) {                                                     // 3439
    this._eventRegistry = this._eventRegistry || {};                                                                   // 3440
                                                                                                                       // 3441
    var listeners = this._eventRegistry[eventName];                                                                    // 3442
    if (!listeners)                                                                                                    // 3443
        return;                                                                                                        // 3444
                                                                                                                       // 3445
    var index = listeners.indexOf(callback);                                                                           // 3446
    if (index !== -1)                                                                                                  // 3447
        listeners.splice(index, 1);                                                                                    // 3448
};                                                                                                                     // 3449
                                                                                                                       // 3450
EventEmitter.removeAllListeners = function(eventName) {                                                                // 3451
    if (this._eventRegistry) this._eventRegistry[eventName] = [];                                                      // 3452
};                                                                                                                     // 3453
                                                                                                                       // 3454
exports.EventEmitter = EventEmitter;                                                                                   // 3455
                                                                                                                       // 3456
});                                                                                                                    // 3457
                                                                                                                       // 3458
define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"], function(require, exports, module) {
"no use strict";                                                                                                       // 3460
                                                                                                                       // 3461
var oop = require("./oop");                                                                                            // 3462
var EventEmitter = require("./event_emitter").EventEmitter;                                                            // 3463
                                                                                                                       // 3464
var optionsProvider = {                                                                                                // 3465
    setOptions: function(optList) {                                                                                    // 3466
        Object.keys(optList).forEach(function(key) {                                                                   // 3467
            this.setOption(key, optList[key]);                                                                         // 3468
        }, this);                                                                                                      // 3469
    },                                                                                                                 // 3470
    getOptions: function(optionNames) {                                                                                // 3471
        var result = {};                                                                                               // 3472
        if (!optionNames) {                                                                                            // 3473
            optionNames = Object.keys(this.$options);                                                                  // 3474
        } else if (!Array.isArray(optionNames)) {                                                                      // 3475
            result = optionNames;                                                                                      // 3476
            optionNames = Object.keys(result);                                                                         // 3477
        }                                                                                                              // 3478
        optionNames.forEach(function(key) {                                                                            // 3479
            result[key] = this.getOption(key);                                                                         // 3480
        }, this);                                                                                                      // 3481
        return result;                                                                                                 // 3482
    },                                                                                                                 // 3483
    setOption: function(name, value) {                                                                                 // 3484
        if (this["$" + name] === value)                                                                                // 3485
            return;                                                                                                    // 3486
        var opt = this.$options[name];                                                                                 // 3487
        if (!opt) {                                                                                                    // 3488
            return warn('misspelled option "' + name + '"');                                                           // 3489
        }                                                                                                              // 3490
        if (opt.forwardTo)                                                                                             // 3491
            return this[opt.forwardTo] && this[opt.forwardTo].setOption(name, value);                                  // 3492
                                                                                                                       // 3493
        if (!opt.handlesSet)                                                                                           // 3494
            this["$" + name] = value;                                                                                  // 3495
        if (opt && opt.set)                                                                                            // 3496
            opt.set.call(this, value);                                                                                 // 3497
    },                                                                                                                 // 3498
    getOption: function(name) {                                                                                        // 3499
        var opt = this.$options[name];                                                                                 // 3500
        if (!opt) {                                                                                                    // 3501
            return warn('misspelled option "' + name + '"');                                                           // 3502
        }                                                                                                              // 3503
        if (opt.forwardTo)                                                                                             // 3504
            return this[opt.forwardTo] && this[opt.forwardTo].getOption(name);                                         // 3505
        return opt && opt.get ? opt.get.call(this) : this["$" + name];                                                 // 3506
    }                                                                                                                  // 3507
};                                                                                                                     // 3508
                                                                                                                       // 3509
function warn(message) {                                                                                               // 3510
    if (typeof console != "undefined" && console.warn)                                                                 // 3511
        console.warn.apply(console, arguments);                                                                        // 3512
}                                                                                                                      // 3513
                                                                                                                       // 3514
function reportError(msg, data) {                                                                                      // 3515
    var e = new Error(msg);                                                                                            // 3516
    e.data = data;                                                                                                     // 3517
    if (typeof console == "object" && console.error)                                                                   // 3518
        console.error(e);                                                                                              // 3519
    setTimeout(function() { throw e; });                                                                               // 3520
}                                                                                                                      // 3521
                                                                                                                       // 3522
var AppConfig = function() {                                                                                           // 3523
    this.$defaultOptions = {};                                                                                         // 3524
};                                                                                                                     // 3525
                                                                                                                       // 3526
(function() {                                                                                                          // 3527
    oop.implement(this, EventEmitter);                                                                                 // 3528
    this.defineOptions = function(obj, path, options) {                                                                // 3529
        if (!obj.$options)                                                                                             // 3530
            this.$defaultOptions[path] = obj.$options = {};                                                            // 3531
                                                                                                                       // 3532
        Object.keys(options).forEach(function(key) {                                                                   // 3533
            var opt = options[key];                                                                                    // 3534
            if (typeof opt == "string")                                                                                // 3535
                opt = {forwardTo: opt};                                                                                // 3536
                                                                                                                       // 3537
            opt.name || (opt.name = key);                                                                              // 3538
            obj.$options[opt.name] = opt;                                                                              // 3539
            if ("initialValue" in opt)                                                                                 // 3540
                obj["$" + opt.name] = opt.initialValue;                                                                // 3541
        });                                                                                                            // 3542
        oop.implement(obj, optionsProvider);                                                                           // 3543
                                                                                                                       // 3544
        return this;                                                                                                   // 3545
    };                                                                                                                 // 3546
                                                                                                                       // 3547
    this.resetOptions = function(obj) {                                                                                // 3548
        Object.keys(obj.$options).forEach(function(key) {                                                              // 3549
            var opt = obj.$options[key];                                                                               // 3550
            if ("value" in opt)                                                                                        // 3551
                obj.setOption(key, opt.value);                                                                         // 3552
        });                                                                                                            // 3553
    };                                                                                                                 // 3554
                                                                                                                       // 3555
    this.setDefaultValue = function(path, name, value) {                                                               // 3556
        var opts = this.$defaultOptions[path] || (this.$defaultOptions[path] = {});                                    // 3557
        if (opts[name]) {                                                                                              // 3558
            if (opts.forwardTo)                                                                                        // 3559
                this.setDefaultValue(opts.forwardTo, name, value);                                                     // 3560
            else                                                                                                       // 3561
                opts[name].value = value;                                                                              // 3562
        }                                                                                                              // 3563
    };                                                                                                                 // 3564
                                                                                                                       // 3565
    this.setDefaultValues = function(path, optionHash) {                                                               // 3566
        Object.keys(optionHash).forEach(function(key) {                                                                // 3567
            this.setDefaultValue(path, key, optionHash[key]);                                                          // 3568
        }, this);                                                                                                      // 3569
    };                                                                                                                 // 3570
                                                                                                                       // 3571
    this.warn = warn;                                                                                                  // 3572
    this.reportError = reportError;                                                                                    // 3573
                                                                                                                       // 3574
}).call(AppConfig.prototype);                                                                                          // 3575
                                                                                                                       // 3576
exports.AppConfig = AppConfig;                                                                                         // 3577
                                                                                                                       // 3578
});                                                                                                                    // 3579
                                                                                                                       // 3580
define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"], function(require, exports, module) {
"no use strict";                                                                                                       // 3582
                                                                                                                       // 3583
var lang = require("./lib/lang");                                                                                      // 3584
var oop = require("./lib/oop");                                                                                        // 3585
var net = require("./lib/net");                                                                                        // 3586
var AppConfig = require("./lib/app_config").AppConfig;                                                                 // 3587
                                                                                                                       // 3588
module.exports = exports = new AppConfig();                                                                            // 3589
                                                                                                                       // 3590
var global = (function() {                                                                                             // 3591
    return this || typeof window != "undefined" && window;                                                             // 3592
})();                                                                                                                  // 3593
                                                                                                                       // 3594
var options = {                                                                                                        // 3595
    packaged: false,                                                                                                   // 3596
    workerPath: null,                                                                                                  // 3597
    modePath: null,                                                                                                    // 3598
    themePath: null,                                                                                                   // 3599
    basePath: "",                                                                                                      // 3600
    suffix: ".js",                                                                                                     // 3601
    $moduleUrls: {}                                                                                                    // 3602
};                                                                                                                     // 3603
                                                                                                                       // 3604
exports.get = function(key) {                                                                                          // 3605
    if (!options.hasOwnProperty(key))                                                                                  // 3606
        throw new Error("Unknown config key: " + key);                                                                 // 3607
                                                                                                                       // 3608
    return options[key];                                                                                               // 3609
};                                                                                                                     // 3610
                                                                                                                       // 3611
exports.set = function(key, value) {                                                                                   // 3612
    if (!options.hasOwnProperty(key))                                                                                  // 3613
        throw new Error("Unknown config key: " + key);                                                                 // 3614
                                                                                                                       // 3615
    options[key] = value;                                                                                              // 3616
};                                                                                                                     // 3617
                                                                                                                       // 3618
exports.all = function() {                                                                                             // 3619
    return lang.copyObject(options);                                                                                   // 3620
};                                                                                                                     // 3621
exports.moduleUrl = function(name, component) {                                                                        // 3622
    if (options.$moduleUrls[name])                                                                                     // 3623
        return options.$moduleUrls[name];                                                                              // 3624
                                                                                                                       // 3625
    var parts = name.split("/");                                                                                       // 3626
    component = component || parts[parts.length - 2] || "";                                                            // 3627
    var sep = component == "snippets" ? "/" : "-";                                                                     // 3628
    var base = parts[parts.length - 1];                                                                                // 3629
    if (component == "worker" && sep == "-") {                                                                         // 3630
        var re = new RegExp("^" + component + "[\\-_]|[\\-_]" + component + "$", "g");                                 // 3631
        base = base.replace(re, "");                                                                                   // 3632
    }                                                                                                                  // 3633
                                                                                                                       // 3634
    if ((!base || base == component) && parts.length > 1)                                                              // 3635
        base = parts[parts.length - 2];                                                                                // 3636
    var path = options[component + "Path"];                                                                            // 3637
    if (path == null) {                                                                                                // 3638
        path = options.basePath;                                                                                       // 3639
    } else if (sep == "/") {                                                                                           // 3640
        component = sep = "";                                                                                          // 3641
    }                                                                                                                  // 3642
    if (path && path.slice(-1) != "/")                                                                                 // 3643
        path += "/";                                                                                                   // 3644
    return path + component + sep + base + this.get("suffix");                                                         // 3645
};                                                                                                                     // 3646
                                                                                                                       // 3647
exports.setModuleUrl = function(name, subst) {                                                                         // 3648
    return options.$moduleUrls[name] = subst;                                                                          // 3649
};                                                                                                                     // 3650
                                                                                                                       // 3651
exports.$loading = {};                                                                                                 // 3652
exports.loadModule = function(moduleName, onLoad) {                                                                    // 3653
    var module, moduleType;                                                                                            // 3654
    if (Array.isArray(moduleName)) {                                                                                   // 3655
        moduleType = moduleName[0];                                                                                    // 3656
        moduleName = moduleName[1];                                                                                    // 3657
    }                                                                                                                  // 3658
                                                                                                                       // 3659
    try {                                                                                                              // 3660
        module = require(moduleName);                                                                                  // 3661
    } catch (e) {}                                                                                                     // 3662
    if (module && !exports.$loading[moduleName])                                                                       // 3663
        return onLoad && onLoad(module);                                                                               // 3664
                                                                                                                       // 3665
    if (!exports.$loading[moduleName])                                                                                 // 3666
        exports.$loading[moduleName] = [];                                                                             // 3667
                                                                                                                       // 3668
    exports.$loading[moduleName].push(onLoad);                                                                         // 3669
                                                                                                                       // 3670
    if (exports.$loading[moduleName].length > 1)                                                                       // 3671
        return;                                                                                                        // 3672
                                                                                                                       // 3673
    var afterLoad = function() {                                                                                       // 3674
        require([moduleName], function(module) {                                                                       // 3675
            exports._emit("load.module", {name: moduleName, module: module});                                          // 3676
            var listeners = exports.$loading[moduleName];                                                              // 3677
            exports.$loading[moduleName] = null;                                                                       // 3678
            listeners.forEach(function(onLoad) {                                                                       // 3679
                onLoad && onLoad(module);                                                                              // 3680
            });                                                                                                        // 3681
        });                                                                                                            // 3682
    };                                                                                                                 // 3683
                                                                                                                       // 3684
    if (!exports.get("packaged"))                                                                                      // 3685
        return afterLoad();                                                                                            // 3686
    net.loadScript(exports.moduleUrl(moduleName, moduleType), afterLoad);                                              // 3687
};                                                                                                                     // 3688
init(true);function init(packaged) {                                                                                   // 3689
                                                                                                                       // 3690
    options.packaged = packaged || require.packaged || module.packaged || (global.define && define.packaged);          // 3691
                                                                                                                       // 3692
    if (!global.document)                                                                                              // 3693
        return "";                                                                                                     // 3694
                                                                                                                       // 3695
    var scriptOptions = {};                                                                                            // 3696
    var scriptUrl = "";                                                                                                // 3697
    var currentScript = (document.currentScript || document._currentScript ); // native or polyfill                    // 3698
    var currentDocument = currentScript && currentScript.ownerDocument || document;                                    // 3699
                                                                                                                       // 3700
    var scripts = currentDocument.getElementsByTagName("script");                                                      // 3701
    for (var i=0; i<scripts.length; i++) {                                                                             // 3702
        var script = scripts[i];                                                                                       // 3703
                                                                                                                       // 3704
        var src = script.src || script.getAttribute("src");                                                            // 3705
        if (!src)                                                                                                      // 3706
            continue;                                                                                                  // 3707
                                                                                                                       // 3708
        var attributes = script.attributes;                                                                            // 3709
        for (var j=0, l=attributes.length; j < l; j++) {                                                               // 3710
            var attr = attributes[j];                                                                                  // 3711
            if (attr.name.indexOf("data-ace-") === 0) {                                                                // 3712
                scriptOptions[deHyphenate(attr.name.replace(/^data-ace-/, ""))] = attr.value;                          // 3713
            }                                                                                                          // 3714
        }                                                                                                              // 3715
                                                                                                                       // 3716
        var m = src.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);                                                             // 3717
        if (m)                                                                                                         // 3718
            scriptUrl = m[1];                                                                                          // 3719
    }                                                                                                                  // 3720
                                                                                                                       // 3721
    if (scriptUrl) {                                                                                                   // 3722
        scriptOptions.base = scriptOptions.base || scriptUrl;                                                          // 3723
        scriptOptions.packaged = true;                                                                                 // 3724
    }                                                                                                                  // 3725
                                                                                                                       // 3726
    scriptOptions.basePath = scriptOptions.base;                                                                       // 3727
    scriptOptions.workerPath = scriptOptions.workerPath || scriptOptions.base;                                         // 3728
    scriptOptions.modePath = scriptOptions.modePath || scriptOptions.base;                                             // 3729
    scriptOptions.themePath = scriptOptions.themePath || scriptOptions.base;                                           // 3730
    delete scriptOptions.base;                                                                                         // 3731
                                                                                                                       // 3732
    for (var key in scriptOptions)                                                                                     // 3733
        if (typeof scriptOptions[key] !== "undefined")                                                                 // 3734
            exports.set(key, scriptOptions[key]);                                                                      // 3735
};                                                                                                                     // 3736
                                                                                                                       // 3737
exports.init = init;                                                                                                   // 3738
                                                                                                                       // 3739
function deHyphenate(str) {                                                                                            // 3740
    return str.replace(/-(.)/g, function(m, m1) { return m1.toUpperCase(); });                                         // 3741
}                                                                                                                      // 3742
                                                                                                                       // 3743
});                                                                                                                    // 3744
                                                                                                                       // 3745
define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"], function(require, exports, module) {
"use strict";                                                                                                          // 3747
                                                                                                                       // 3748
var event = require("../lib/event");                                                                                   // 3749
var useragent = require("../lib/useragent");                                                                           // 3750
var DefaultHandlers = require("./default_handlers").DefaultHandlers;                                                   // 3751
var DefaultGutterHandler = require("./default_gutter_handler").GutterHandler;                                          // 3752
var MouseEvent = require("./mouse_event").MouseEvent;                                                                  // 3753
var DragdropHandler = require("./dragdrop_handler").DragdropHandler;                                                   // 3754
var config = require("../config");                                                                                     // 3755
                                                                                                                       // 3756
var MouseHandler = function(editor) {                                                                                  // 3757
    var _self = this;                                                                                                  // 3758
    this.editor = editor;                                                                                              // 3759
                                                                                                                       // 3760
    new DefaultHandlers(this);                                                                                         // 3761
    new DefaultGutterHandler(this);                                                                                    // 3762
    new DragdropHandler(this);                                                                                         // 3763
                                                                                                                       // 3764
    var focusEditor = function(e) {                                                                                    // 3765
        if (!document.hasFocus || !document.hasFocus())                                                                // 3766
            window.focus();                                                                                            // 3767
        editor.focus();                                                                                                // 3768
    };                                                                                                                 // 3769
                                                                                                                       // 3770
    var mouseTarget = editor.renderer.getMouseEventTarget();                                                           // 3771
    event.addListener(mouseTarget, "click", this.onMouseEvent.bind(this, "click"));                                    // 3772
    event.addListener(mouseTarget, "mousemove", this.onMouseMove.bind(this, "mousemove"));                             // 3773
    event.addMultiMouseDownListener(mouseTarget, [400, 300, 250], this, "onMouseEvent");                               // 3774
    if (editor.renderer.scrollBarV) {                                                                                  // 3775
        event.addMultiMouseDownListener(editor.renderer.scrollBarV.inner, [400, 300, 250], this, "onMouseEvent");      // 3776
        event.addMultiMouseDownListener(editor.renderer.scrollBarH.inner, [400, 300, 250], this, "onMouseEvent");      // 3777
        if (useragent.isIE) {                                                                                          // 3778
            event.addListener(editor.renderer.scrollBarV.element, "mousedown", focusEditor);                           // 3779
            event.addListener(editor.renderer.scrollBarH.element, "mousedown", focusEditor);                           // 3780
        }                                                                                                              // 3781
    }                                                                                                                  // 3782
    event.addMouseWheelListener(editor.container, this.onMouseWheel.bind(this, "mousewheel"));                         // 3783
    event.addTouchMoveListener(editor.container, this.onTouchMove.bind(this, "touchmove"));                            // 3784
                                                                                                                       // 3785
    var gutterEl = editor.renderer.$gutter;                                                                            // 3786
    event.addListener(gutterEl, "mousedown", this.onMouseEvent.bind(this, "guttermousedown"));                         // 3787
    event.addListener(gutterEl, "click", this.onMouseEvent.bind(this, "gutterclick"));                                 // 3788
    event.addListener(gutterEl, "dblclick", this.onMouseEvent.bind(this, "gutterdblclick"));                           // 3789
    event.addListener(gutterEl, "mousemove", this.onMouseEvent.bind(this, "guttermousemove"));                         // 3790
                                                                                                                       // 3791
    event.addListener(mouseTarget, "mousedown", focusEditor);                                                          // 3792
                                                                                                                       // 3793
    event.addListener(gutterEl, "mousedown", function(e) {                                                             // 3794
        editor.focus();                                                                                                // 3795
        return event.preventDefault(e);                                                                                // 3796
    });                                                                                                                // 3797
                                                                                                                       // 3798
    editor.on("mousemove", function(e){                                                                                // 3799
        if (_self.state || _self.$dragDelay || !_self.$dragEnabled)                                                    // 3800
            return;                                                                                                    // 3801
                                                                                                                       // 3802
        var character = editor.renderer.screenToTextCoordinates(e.x, e.y);                                             // 3803
        var range = editor.session.selection.getRange();                                                               // 3804
        var renderer = editor.renderer;                                                                                // 3805
                                                                                                                       // 3806
        if (!range.isEmpty() && range.insideStart(character.row, character.column)) {                                  // 3807
            renderer.setCursorStyle("default");                                                                        // 3808
        } else {                                                                                                       // 3809
            renderer.setCursorStyle("");                                                                               // 3810
        }                                                                                                              // 3811
    });                                                                                                                // 3812
};                                                                                                                     // 3813
                                                                                                                       // 3814
(function() {                                                                                                          // 3815
    this.onMouseEvent = function(name, e) {                                                                            // 3816
        this.editor._emit(name, new MouseEvent(e, this.editor));                                                       // 3817
    };                                                                                                                 // 3818
                                                                                                                       // 3819
    this.onMouseMove = function(name, e) {                                                                             // 3820
        var listeners = this.editor._eventRegistry && this.editor._eventRegistry.mousemove;                            // 3821
        if (!listeners || !listeners.length)                                                                           // 3822
            return;                                                                                                    // 3823
                                                                                                                       // 3824
        this.editor._emit(name, new MouseEvent(e, this.editor));                                                       // 3825
    };                                                                                                                 // 3826
                                                                                                                       // 3827
    this.onMouseWheel = function(name, e) {                                                                            // 3828
        var mouseEvent = new MouseEvent(e, this.editor);                                                               // 3829
        mouseEvent.speed = this.$scrollSpeed * 2;                                                                      // 3830
        mouseEvent.wheelX = e.wheelX;                                                                                  // 3831
        mouseEvent.wheelY = e.wheelY;                                                                                  // 3832
                                                                                                                       // 3833
        this.editor._emit(name, mouseEvent);                                                                           // 3834
    };                                                                                                                 // 3835
                                                                                                                       // 3836
    this.onTouchMove = function (name, e) {                                                                            // 3837
        var mouseEvent = new MouseEvent(e, this.editor);                                                               // 3838
        mouseEvent.speed = 1;//this.$scrollSpeed * 2;                                                                  // 3839
        mouseEvent.wheelX = e.wheelX;                                                                                  // 3840
        mouseEvent.wheelY = e.wheelY;                                                                                  // 3841
        this.editor._emit(name, mouseEvent);                                                                           // 3842
    };                                                                                                                 // 3843
                                                                                                                       // 3844
    this.setState = function(state) {                                                                                  // 3845
        this.state = state;                                                                                            // 3846
    };                                                                                                                 // 3847
                                                                                                                       // 3848
    this.captureMouse = function(ev, mouseMoveHandler) {                                                               // 3849
        this.x = ev.x;                                                                                                 // 3850
        this.y = ev.y;                                                                                                 // 3851
                                                                                                                       // 3852
        this.isMousePressed = true;                                                                                    // 3853
        var renderer = this.editor.renderer;                                                                           // 3854
        if (renderer.$keepTextAreaAtCursor)                                                                            // 3855
            renderer.$keepTextAreaAtCursor = null;                                                                     // 3856
                                                                                                                       // 3857
        var self = this;                                                                                               // 3858
        var onMouseMove = function(e) {                                                                                // 3859
            if (!e) return;                                                                                            // 3860
            if (useragent.isWebKit && !e.which && self.releaseMouse)                                                   // 3861
                return self.releaseMouse();                                                                            // 3862
                                                                                                                       // 3863
            self.x = e.clientX;                                                                                        // 3864
            self.y = e.clientY;                                                                                        // 3865
            mouseMoveHandler && mouseMoveHandler(e);                                                                   // 3866
            self.mouseEvent = new MouseEvent(e, self.editor);                                                          // 3867
            self.$mouseMoved = true;                                                                                   // 3868
        };                                                                                                             // 3869
                                                                                                                       // 3870
        var onCaptureEnd = function(e) {                                                                               // 3871
            clearInterval(timerId);                                                                                    // 3872
            onCaptureInterval();                                                                                       // 3873
            self[self.state + "End"] && self[self.state + "End"](e);                                                   // 3874
            self.state = "";                                                                                           // 3875
            if (renderer.$keepTextAreaAtCursor == null) {                                                              // 3876
                renderer.$keepTextAreaAtCursor = true;                                                                 // 3877
                renderer.$moveTextAreaToCursor();                                                                      // 3878
            }                                                                                                          // 3879
            self.isMousePressed = false;                                                                               // 3880
            self.$onCaptureMouseMove = self.releaseMouse = null;                                                       // 3881
            e && self.onMouseEvent("mouseup", e);                                                                      // 3882
        };                                                                                                             // 3883
                                                                                                                       // 3884
        var onCaptureInterval = function() {                                                                           // 3885
            self[self.state] && self[self.state]();                                                                    // 3886
            self.$mouseMoved = false;                                                                                  // 3887
        };                                                                                                             // 3888
                                                                                                                       // 3889
        if (useragent.isOldIE && ev.domEvent.type == "dblclick") {                                                     // 3890
            return setTimeout(function() {onCaptureEnd(ev);});                                                         // 3891
        }                                                                                                              // 3892
                                                                                                                       // 3893
        self.$onCaptureMouseMove = onMouseMove;                                                                        // 3894
        self.releaseMouse = event.capture(this.editor.container, onMouseMove, onCaptureEnd);                           // 3895
        var timerId = setInterval(onCaptureInterval, 20);                                                              // 3896
    };                                                                                                                 // 3897
    this.releaseMouse = null;                                                                                          // 3898
    this.cancelContextMenu = function() {                                                                              // 3899
        var stop = function(e) {                                                                                       // 3900
            if (e && e.domEvent && e.domEvent.type != "contextmenu")                                                   // 3901
                return;                                                                                                // 3902
            this.editor.off("nativecontextmenu", stop);                                                                // 3903
            if (e && e.domEvent)                                                                                       // 3904
                event.stopEvent(e.domEvent);                                                                           // 3905
        }.bind(this);                                                                                                  // 3906
        setTimeout(stop, 10);                                                                                          // 3907
        this.editor.on("nativecontextmenu", stop);                                                                     // 3908
    };                                                                                                                 // 3909
}).call(MouseHandler.prototype);                                                                                       // 3910
                                                                                                                       // 3911
config.defineOptions(MouseHandler.prototype, "mouseHandler", {                                                         // 3912
    scrollSpeed: {initialValue: 2},                                                                                    // 3913
    dragDelay: {initialValue: (useragent.isMac ? 150 : 0)},                                                            // 3914
    dragEnabled: {initialValue: true},                                                                                 // 3915
    focusTimout: {initialValue: 0},                                                                                    // 3916
    tooltipFollowsMouse: {initialValue: true}                                                                          // 3917
});                                                                                                                    // 3918
                                                                                                                       // 3919
                                                                                                                       // 3920
exports.MouseHandler = MouseHandler;                                                                                   // 3921
});                                                                                                                    // 3922
                                                                                                                       // 3923
define("ace/mouse/fold_handler",["require","exports","module"], function(require, exports, module) {                   // 3924
"use strict";                                                                                                          // 3925
                                                                                                                       // 3926
function FoldHandler(editor) {                                                                                         // 3927
                                                                                                                       // 3928
    editor.on("click", function(e) {                                                                                   // 3929
        var position = e.getDocumentPosition();                                                                        // 3930
        var session = editor.session;                                                                                  // 3931
        var fold = session.getFoldAt(position.row, position.column, 1);                                                // 3932
        if (fold) {                                                                                                    // 3933
            if (e.getAccelKey())                                                                                       // 3934
                session.removeFold(fold);                                                                              // 3935
            else                                                                                                       // 3936
                session.expandFold(fold);                                                                              // 3937
                                                                                                                       // 3938
            e.stop();                                                                                                  // 3939
        }                                                                                                              // 3940
    });                                                                                                                // 3941
                                                                                                                       // 3942
    editor.on("gutterclick", function(e) {                                                                             // 3943
        var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);                                                  // 3944
                                                                                                                       // 3945
        if (gutterRegion == "foldWidgets") {                                                                           // 3946
            var row = e.getDocumentPosition().row;                                                                     // 3947
            var session = editor.session;                                                                              // 3948
            if (session.foldWidgets && session.foldWidgets[row])                                                       // 3949
                editor.session.onFoldWidgetClick(row, e);                                                              // 3950
            if (!editor.isFocused())                                                                                   // 3951
                editor.focus();                                                                                        // 3952
            e.stop();                                                                                                  // 3953
        }                                                                                                              // 3954
    });                                                                                                                // 3955
                                                                                                                       // 3956
    editor.on("gutterdblclick", function(e) {                                                                          // 3957
        var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);                                                  // 3958
                                                                                                                       // 3959
        if (gutterRegion == "foldWidgets") {                                                                           // 3960
            var row = e.getDocumentPosition().row;                                                                     // 3961
            var session = editor.session;                                                                              // 3962
            var data = session.getParentFoldRangeData(row, true);                                                      // 3963
            var range = data.range || data.firstRange;                                                                 // 3964
                                                                                                                       // 3965
            if (range) {                                                                                               // 3966
                row = range.start.row;                                                                                 // 3967
                var fold = session.getFoldAt(row, session.getLine(row).length, 1);                                     // 3968
                                                                                                                       // 3969
                if (fold) {                                                                                            // 3970
                    session.removeFold(fold);                                                                          // 3971
                } else {                                                                                               // 3972
                    session.addFold("...", range);                                                                     // 3973
                    editor.renderer.scrollCursorIntoView({row: range.start.row, column: 0});                           // 3974
                }                                                                                                      // 3975
            }                                                                                                          // 3976
            e.stop();                                                                                                  // 3977
        }                                                                                                              // 3978
    });                                                                                                                // 3979
}                                                                                                                      // 3980
                                                                                                                       // 3981
exports.FoldHandler = FoldHandler;                                                                                     // 3982
                                                                                                                       // 3983
});                                                                                                                    // 3984
                                                                                                                       // 3985
define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"], function(require, exports, module) {
"use strict";                                                                                                          // 3987
                                                                                                                       // 3988
var keyUtil  = require("../lib/keys");                                                                                 // 3989
var event = require("../lib/event");                                                                                   // 3990
                                                                                                                       // 3991
var KeyBinding = function(editor) {                                                                                    // 3992
    this.$editor = editor;                                                                                             // 3993
    this.$data = {editor: editor};                                                                                     // 3994
    this.$handlers = [];                                                                                               // 3995
    this.setDefaultHandler(editor.commands);                                                                           // 3996
};                                                                                                                     // 3997
                                                                                                                       // 3998
(function() {                                                                                                          // 3999
    this.setDefaultHandler = function(kb) {                                                                            // 4000
        this.removeKeyboardHandler(this.$defaultHandler);                                                              // 4001
        this.$defaultHandler = kb;                                                                                     // 4002
        this.addKeyboardHandler(kb, 0);                                                                                // 4003
    };                                                                                                                 // 4004
                                                                                                                       // 4005
    this.setKeyboardHandler = function(kb) {                                                                           // 4006
        var h = this.$handlers;                                                                                        // 4007
        if (h[h.length - 1] == kb)                                                                                     // 4008
            return;                                                                                                    // 4009
                                                                                                                       // 4010
        while (h[h.length - 1] && h[h.length - 1] != this.$defaultHandler)                                             // 4011
            this.removeKeyboardHandler(h[h.length - 1]);                                                               // 4012
                                                                                                                       // 4013
        this.addKeyboardHandler(kb, 1);                                                                                // 4014
    };                                                                                                                 // 4015
                                                                                                                       // 4016
    this.addKeyboardHandler = function(kb, pos) {                                                                      // 4017
        if (!kb)                                                                                                       // 4018
            return;                                                                                                    // 4019
        if (typeof kb == "function" && !kb.handleKeyboard)                                                             // 4020
            kb.handleKeyboard = kb;                                                                                    // 4021
        var i = this.$handlers.indexOf(kb);                                                                            // 4022
        if (i != -1)                                                                                                   // 4023
            this.$handlers.splice(i, 1);                                                                               // 4024
                                                                                                                       // 4025
        if (pos == undefined)                                                                                          // 4026
            this.$handlers.push(kb);                                                                                   // 4027
        else                                                                                                           // 4028
            this.$handlers.splice(pos, 0, kb);                                                                         // 4029
                                                                                                                       // 4030
        if (i == -1 && kb.attach)                                                                                      // 4031
            kb.attach(this.$editor);                                                                                   // 4032
    };                                                                                                                 // 4033
                                                                                                                       // 4034
    this.removeKeyboardHandler = function(kb) {                                                                        // 4035
        var i = this.$handlers.indexOf(kb);                                                                            // 4036
        if (i == -1)                                                                                                   // 4037
            return false;                                                                                              // 4038
        this.$handlers.splice(i, 1);                                                                                   // 4039
        kb.detach && kb.detach(this.$editor);                                                                          // 4040
        return true;                                                                                                   // 4041
    };                                                                                                                 // 4042
                                                                                                                       // 4043
    this.getKeyboardHandler = function() {                                                                             // 4044
        return this.$handlers[this.$handlers.length - 1];                                                              // 4045
    };                                                                                                                 // 4046
                                                                                                                       // 4047
    this.getStatusText = function() {                                                                                  // 4048
        var data = this.$data;                                                                                         // 4049
        var editor = data.editor;                                                                                      // 4050
        return this.$handlers.map(function(h) {                                                                        // 4051
            return h.getStatusText && h.getStatusText(editor, data) || "";                                             // 4052
        }).filter(Boolean).join(" ");                                                                                  // 4053
    };                                                                                                                 // 4054
                                                                                                                       // 4055
    this.$callKeyboardHandlers = function(hashId, keyString, keyCode, e) {                                             // 4056
        var toExecute;                                                                                                 // 4057
        var success = false;                                                                                           // 4058
        var commands = this.$editor.commands;                                                                          // 4059
                                                                                                                       // 4060
        for (var i = this.$handlers.length; i--;) {                                                                    // 4061
            toExecute = this.$handlers[i].handleKeyboard(                                                              // 4062
                this.$data, hashId, keyString, keyCode, e                                                              // 4063
            );                                                                                                         // 4064
            if (!toExecute || !toExecute.command)                                                                      // 4065
                continue;                                                                                              // 4066
            if (toExecute.command == "null") {                                                                         // 4067
                success = true;                                                                                        // 4068
            } else {                                                                                                   // 4069
                success = commands.exec(toExecute.command, this.$editor, toExecute.args, e);                           // 4070
            }                                                                                                          // 4071
            if (success && e && hashId != -1 &&                                                                        // 4072
                toExecute.passEvent != true && toExecute.command.passEvent != true                                     // 4073
            ) {                                                                                                        // 4074
                event.stopEvent(e);                                                                                    // 4075
            }                                                                                                          // 4076
            if (success)                                                                                               // 4077
                break;                                                                                                 // 4078
        }                                                                                                              // 4079
        return success;                                                                                                // 4080
    };                                                                                                                 // 4081
                                                                                                                       // 4082
    this.onCommandKey = function(e, hashId, keyCode) {                                                                 // 4083
        var keyString = keyUtil.keyCodeToString(keyCode);                                                              // 4084
        this.$callKeyboardHandlers(hashId, keyString, keyCode, e);                                                     // 4085
    };                                                                                                                 // 4086
                                                                                                                       // 4087
    this.onTextInput = function(text) {                                                                                // 4088
        var success = this.$callKeyboardHandlers(-1, text);                                                            // 4089
        if (!success)                                                                                                  // 4090
            this.$editor.commands.exec("insertstring", this.$editor, text);                                            // 4091
    };                                                                                                                 // 4092
                                                                                                                       // 4093
}).call(KeyBinding.prototype);                                                                                         // 4094
                                                                                                                       // 4095
exports.KeyBinding = KeyBinding;                                                                                       // 4096
});                                                                                                                    // 4097
                                                                                                                       // 4098
define("ace/range",["require","exports","module"], function(require, exports, module) {                                // 4099
"use strict";                                                                                                          // 4100
var comparePoints = function(p1, p2) {                                                                                 // 4101
    return p1.row - p2.row || p1.column - p2.column;                                                                   // 4102
};                                                                                                                     // 4103
var Range = function(startRow, startColumn, endRow, endColumn) {                                                       // 4104
    this.start = {                                                                                                     // 4105
        row: startRow,                                                                                                 // 4106
        column: startColumn                                                                                            // 4107
    };                                                                                                                 // 4108
                                                                                                                       // 4109
    this.end = {                                                                                                       // 4110
        row: endRow,                                                                                                   // 4111
        column: endColumn                                                                                              // 4112
    };                                                                                                                 // 4113
};                                                                                                                     // 4114
                                                                                                                       // 4115
(function() {                                                                                                          // 4116
    this.isEqual = function(range) {                                                                                   // 4117
        return this.start.row === range.start.row &&                                                                   // 4118
            this.end.row === range.end.row &&                                                                          // 4119
            this.start.column === range.start.column &&                                                                // 4120
            this.end.column === range.end.column;                                                                      // 4121
    };                                                                                                                 // 4122
    this.toString = function() {                                                                                       // 4123
        return ("Range: [" + this.start.row + "/" + this.start.column +                                                // 4124
            "] -> [" + this.end.row + "/" + this.end.column + "]");                                                    // 4125
    };                                                                                                                 // 4126
                                                                                                                       // 4127
    this.contains = function(row, column) {                                                                            // 4128
        return this.compare(row, column) == 0;                                                                         // 4129
    };                                                                                                                 // 4130
    this.compareRange = function(range) {                                                                              // 4131
        var cmp,                                                                                                       // 4132
            end = range.end,                                                                                           // 4133
            start = range.start;                                                                                       // 4134
                                                                                                                       // 4135
        cmp = this.compare(end.row, end.column);                                                                       // 4136
        if (cmp == 1) {                                                                                                // 4137
            cmp = this.compare(start.row, start.column);                                                               // 4138
            if (cmp == 1) {                                                                                            // 4139
                return 2;                                                                                              // 4140
            } else if (cmp == 0) {                                                                                     // 4141
                return 1;                                                                                              // 4142
            } else {                                                                                                   // 4143
                return 0;                                                                                              // 4144
            }                                                                                                          // 4145
        } else if (cmp == -1) {                                                                                        // 4146
            return -2;                                                                                                 // 4147
        } else {                                                                                                       // 4148
            cmp = this.compare(start.row, start.column);                                                               // 4149
            if (cmp == -1) {                                                                                           // 4150
                return -1;                                                                                             // 4151
            } else if (cmp == 1) {                                                                                     // 4152
                return 42;                                                                                             // 4153
            } else {                                                                                                   // 4154
                return 0;                                                                                              // 4155
            }                                                                                                          // 4156
        }                                                                                                              // 4157
    };                                                                                                                 // 4158
    this.comparePoint = function(p) {                                                                                  // 4159
        return this.compare(p.row, p.column);                                                                          // 4160
    };                                                                                                                 // 4161
    this.containsRange = function(range) {                                                                             // 4162
        return this.comparePoint(range.start) == 0 && this.comparePoint(range.end) == 0;                               // 4163
    };                                                                                                                 // 4164
    this.intersects = function(range) {                                                                                // 4165
        var cmp = this.compareRange(range);                                                                            // 4166
        return (cmp == -1 || cmp == 0 || cmp == 1);                                                                    // 4167
    };                                                                                                                 // 4168
    this.isEnd = function(row, column) {                                                                               // 4169
        return this.end.row == row && this.end.column == column;                                                       // 4170
    };                                                                                                                 // 4171
    this.isStart = function(row, column) {                                                                             // 4172
        return this.start.row == row && this.start.column == column;                                                   // 4173
    };                                                                                                                 // 4174
    this.setStart = function(row, column) {                                                                            // 4175
        if (typeof row == "object") {                                                                                  // 4176
            this.start.column = row.column;                                                                            // 4177
            this.start.row = row.row;                                                                                  // 4178
        } else {                                                                                                       // 4179
            this.start.row = row;                                                                                      // 4180
            this.start.column = column;                                                                                // 4181
        }                                                                                                              // 4182
    };                                                                                                                 // 4183
    this.setEnd = function(row, column) {                                                                              // 4184
        if (typeof row == "object") {                                                                                  // 4185
            this.end.column = row.column;                                                                              // 4186
            this.end.row = row.row;                                                                                    // 4187
        } else {                                                                                                       // 4188
            this.end.row = row;                                                                                        // 4189
            this.end.column = column;                                                                                  // 4190
        }                                                                                                              // 4191
    };                                                                                                                 // 4192
    this.inside = function(row, column) {                                                                              // 4193
        if (this.compare(row, column) == 0) {                                                                          // 4194
            if (this.isEnd(row, column) || this.isStart(row, column)) {                                                // 4195
                return false;                                                                                          // 4196
            } else {                                                                                                   // 4197
                return true;                                                                                           // 4198
            }                                                                                                          // 4199
        }                                                                                                              // 4200
        return false;                                                                                                  // 4201
    };                                                                                                                 // 4202
    this.insideStart = function(row, column) {                                                                         // 4203
        if (this.compare(row, column) == 0) {                                                                          // 4204
            if (this.isEnd(row, column)) {                                                                             // 4205
                return false;                                                                                          // 4206
            } else {                                                                                                   // 4207
                return true;                                                                                           // 4208
            }                                                                                                          // 4209
        }                                                                                                              // 4210
        return false;                                                                                                  // 4211
    };                                                                                                                 // 4212
    this.insideEnd = function(row, column) {                                                                           // 4213
        if (this.compare(row, column) == 0) {                                                                          // 4214
            if (this.isStart(row, column)) {                                                                           // 4215
                return false;                                                                                          // 4216
            } else {                                                                                                   // 4217
                return true;                                                                                           // 4218
            }                                                                                                          // 4219
        }                                                                                                              // 4220
        return false;                                                                                                  // 4221
    };                                                                                                                 // 4222
    this.compare = function(row, column) {                                                                             // 4223
        if (!this.isMultiLine()) {                                                                                     // 4224
            if (row === this.start.row) {                                                                              // 4225
                return column < this.start.column ? -1 : (column > this.end.column ? 1 : 0);                           // 4226
            };                                                                                                         // 4227
        }                                                                                                              // 4228
                                                                                                                       // 4229
        if (row < this.start.row)                                                                                      // 4230
            return -1;                                                                                                 // 4231
                                                                                                                       // 4232
        if (row > this.end.row)                                                                                        // 4233
            return 1;                                                                                                  // 4234
                                                                                                                       // 4235
        if (this.start.row === row)                                                                                    // 4236
            return column >= this.start.column ? 0 : -1;                                                               // 4237
                                                                                                                       // 4238
        if (this.end.row === row)                                                                                      // 4239
            return column <= this.end.column ? 0 : 1;                                                                  // 4240
                                                                                                                       // 4241
        return 0;                                                                                                      // 4242
    };                                                                                                                 // 4243
    this.compareStart = function(row, column) {                                                                        // 4244
        if (this.start.row == row && this.start.column == column) {                                                    // 4245
            return -1;                                                                                                 // 4246
        } else {                                                                                                       // 4247
            return this.compare(row, column);                                                                          // 4248
        }                                                                                                              // 4249
    };                                                                                                                 // 4250
    this.compareEnd = function(row, column) {                                                                          // 4251
        if (this.end.row == row && this.end.column == column) {                                                        // 4252
            return 1;                                                                                                  // 4253
        } else {                                                                                                       // 4254
            return this.compare(row, column);                                                                          // 4255
        }                                                                                                              // 4256
    };                                                                                                                 // 4257
    this.compareInside = function(row, column) {                                                                       // 4258
        if (this.end.row == row && this.end.column == column) {                                                        // 4259
            return 1;                                                                                                  // 4260
        } else if (this.start.row == row && this.start.column == column) {                                             // 4261
            return -1;                                                                                                 // 4262
        } else {                                                                                                       // 4263
            return this.compare(row, column);                                                                          // 4264
        }                                                                                                              // 4265
    };                                                                                                                 // 4266
    this.clipRows = function(firstRow, lastRow) {                                                                      // 4267
        if (this.end.row > lastRow)                                                                                    // 4268
            var end = {row: lastRow + 1, column: 0};                                                                   // 4269
        else if (this.end.row < firstRow)                                                                              // 4270
            var end = {row: firstRow, column: 0};                                                                      // 4271
                                                                                                                       // 4272
        if (this.start.row > lastRow)                                                                                  // 4273
            var start = {row: lastRow + 1, column: 0};                                                                 // 4274
        else if (this.start.row < firstRow)                                                                            // 4275
            var start = {row: firstRow, column: 0};                                                                    // 4276
                                                                                                                       // 4277
        return Range.fromPoints(start || this.start, end || this.end);                                                 // 4278
    };                                                                                                                 // 4279
    this.extend = function(row, column) {                                                                              // 4280
        var cmp = this.compare(row, column);                                                                           // 4281
                                                                                                                       // 4282
        if (cmp == 0)                                                                                                  // 4283
            return this;                                                                                               // 4284
        else if (cmp == -1)                                                                                            // 4285
            var start = {row: row, column: column};                                                                    // 4286
        else                                                                                                           // 4287
            var end = {row: row, column: column};                                                                      // 4288
                                                                                                                       // 4289
        return Range.fromPoints(start || this.start, end || this.end);                                                 // 4290
    };                                                                                                                 // 4291
                                                                                                                       // 4292
    this.isEmpty = function() {                                                                                        // 4293
        return (this.start.row === this.end.row && this.start.column === this.end.column);                             // 4294
    };                                                                                                                 // 4295
    this.isMultiLine = function() {                                                                                    // 4296
        return (this.start.row !== this.end.row);                                                                      // 4297
    };                                                                                                                 // 4298
    this.clone = function() {                                                                                          // 4299
        return Range.fromPoints(this.start, this.end);                                                                 // 4300
    };                                                                                                                 // 4301
    this.collapseRows = function() {                                                                                   // 4302
        if (this.end.column == 0)                                                                                      // 4303
            return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row-1), 0)                           // 4304
        else                                                                                                           // 4305
            return new Range(this.start.row, 0, this.end.row, 0)                                                       // 4306
    };                                                                                                                 // 4307
    this.toScreenRange = function(session) {                                                                           // 4308
        var screenPosStart = session.documentToScreenPosition(this.start);                                             // 4309
        var screenPosEnd = session.documentToScreenPosition(this.end);                                                 // 4310
                                                                                                                       // 4311
        return new Range(                                                                                              // 4312
            screenPosStart.row, screenPosStart.column,                                                                 // 4313
            screenPosEnd.row, screenPosEnd.column                                                                      // 4314
        );                                                                                                             // 4315
    };                                                                                                                 // 4316
    this.moveBy = function(row, column) {                                                                              // 4317
        this.start.row += row;                                                                                         // 4318
        this.start.column += column;                                                                                   // 4319
        this.end.row += row;                                                                                           // 4320
        this.end.column += column;                                                                                     // 4321
    };                                                                                                                 // 4322
                                                                                                                       // 4323
}).call(Range.prototype);                                                                                              // 4324
Range.fromPoints = function(start, end) {                                                                              // 4325
    return new Range(start.row, start.column, end.row, end.column);                                                    // 4326
};                                                                                                                     // 4327
Range.comparePoints = comparePoints;                                                                                   // 4328
                                                                                                                       // 4329
Range.comparePoints = function(p1, p2) {                                                                               // 4330
    return p1.row - p2.row || p1.column - p2.column;                                                                   // 4331
};                                                                                                                     // 4332
                                                                                                                       // 4333
                                                                                                                       // 4334
exports.Range = Range;                                                                                                 // 4335
});                                                                                                                    // 4336
                                                                                                                       // 4337
define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 4339
                                                                                                                       // 4340
var oop = require("./lib/oop");                                                                                        // 4341
var lang = require("./lib/lang");                                                                                      // 4342
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 4343
var Range = require("./range").Range;                                                                                  // 4344
var Selection = function(session) {                                                                                    // 4345
    this.session = session;                                                                                            // 4346
    this.doc = session.getDocument();                                                                                  // 4347
                                                                                                                       // 4348
    this.clearSelection();                                                                                             // 4349
    this.lead = this.selectionLead = this.doc.createAnchor(0, 0);                                                      // 4350
    this.anchor = this.selectionAnchor = this.doc.createAnchor(0, 0);                                                  // 4351
                                                                                                                       // 4352
    var self = this;                                                                                                   // 4353
    this.lead.on("change", function(e) {                                                                               // 4354
        self._emit("changeCursor");                                                                                    // 4355
        if (!self.$isEmpty)                                                                                            // 4356
            self._emit("changeSelection");                                                                             // 4357
        if (!self.$keepDesiredColumnOnChange && e.old.column != e.value.column)                                        // 4358
            self.$desiredColumn = null;                                                                                // 4359
    });                                                                                                                // 4360
                                                                                                                       // 4361
    this.selectionAnchor.on("change", function() {                                                                     // 4362
        if (!self.$isEmpty)                                                                                            // 4363
            self._emit("changeSelection");                                                                             // 4364
    });                                                                                                                // 4365
};                                                                                                                     // 4366
                                                                                                                       // 4367
(function() {                                                                                                          // 4368
                                                                                                                       // 4369
    oop.implement(this, EventEmitter);                                                                                 // 4370
    this.isEmpty = function() {                                                                                        // 4371
        return (this.$isEmpty || (                                                                                     // 4372
            this.anchor.row == this.lead.row &&                                                                        // 4373
            this.anchor.column == this.lead.column                                                                     // 4374
        ));                                                                                                            // 4375
    };                                                                                                                 // 4376
    this.isMultiLine = function() {                                                                                    // 4377
        if (this.isEmpty()) {                                                                                          // 4378
            return false;                                                                                              // 4379
        }                                                                                                              // 4380
                                                                                                                       // 4381
        return this.getRange().isMultiLine();                                                                          // 4382
    };                                                                                                                 // 4383
    this.getCursor = function() {                                                                                      // 4384
        return this.lead.getPosition();                                                                                // 4385
    };                                                                                                                 // 4386
    this.setSelectionAnchor = function(row, column) {                                                                  // 4387
        this.anchor.setPosition(row, column);                                                                          // 4388
                                                                                                                       // 4389
        if (this.$isEmpty) {                                                                                           // 4390
            this.$isEmpty = false;                                                                                     // 4391
            this._emit("changeSelection");                                                                             // 4392
        }                                                                                                              // 4393
    };                                                                                                                 // 4394
    this.getSelectionAnchor = function() {                                                                             // 4395
        if (this.$isEmpty)                                                                                             // 4396
            return this.getSelectionLead();                                                                            // 4397
        else                                                                                                           // 4398
            return this.anchor.getPosition();                                                                          // 4399
    };                                                                                                                 // 4400
    this.getSelectionLead = function() {                                                                               // 4401
        return this.lead.getPosition();                                                                                // 4402
    };                                                                                                                 // 4403
    this.shiftSelection = function(columns) {                                                                          // 4404
        if (this.$isEmpty) {                                                                                           // 4405
            this.moveCursorTo(this.lead.row, this.lead.column + columns);                                              // 4406
            return;                                                                                                    // 4407
        }                                                                                                              // 4408
                                                                                                                       // 4409
        var anchor = this.getSelectionAnchor();                                                                        // 4410
        var lead = this.getSelectionLead();                                                                            // 4411
                                                                                                                       // 4412
        var isBackwards = this.isBackwards();                                                                          // 4413
                                                                                                                       // 4414
        if (!isBackwards || anchor.column !== 0)                                                                       // 4415
            this.setSelectionAnchor(anchor.row, anchor.column + columns);                                              // 4416
                                                                                                                       // 4417
        if (isBackwards || lead.column !== 0) {                                                                        // 4418
            this.$moveSelection(function() {                                                                           // 4419
                this.moveCursorTo(lead.row, lead.column + columns);                                                    // 4420
            });                                                                                                        // 4421
        }                                                                                                              // 4422
    };                                                                                                                 // 4423
    this.isBackwards = function() {                                                                                    // 4424
        var anchor = this.anchor;                                                                                      // 4425
        var lead = this.lead;                                                                                          // 4426
        return (anchor.row > lead.row || (anchor.row == lead.row && anchor.column > lead.column));                     // 4427
    };                                                                                                                 // 4428
    this.getRange = function() {                                                                                       // 4429
        var anchor = this.anchor;                                                                                      // 4430
        var lead = this.lead;                                                                                          // 4431
                                                                                                                       // 4432
        if (this.isEmpty())                                                                                            // 4433
            return Range.fromPoints(lead, lead);                                                                       // 4434
                                                                                                                       // 4435
        if (this.isBackwards()) {                                                                                      // 4436
            return Range.fromPoints(lead, anchor);                                                                     // 4437
        }                                                                                                              // 4438
        else {                                                                                                         // 4439
            return Range.fromPoints(anchor, lead);                                                                     // 4440
        }                                                                                                              // 4441
    };                                                                                                                 // 4442
    this.clearSelection = function() {                                                                                 // 4443
        if (!this.$isEmpty) {                                                                                          // 4444
            this.$isEmpty = true;                                                                                      // 4445
            this._emit("changeSelection");                                                                             // 4446
        }                                                                                                              // 4447
    };                                                                                                                 // 4448
    this.selectAll = function() {                                                                                      // 4449
        var lastRow = this.doc.getLength() - 1;                                                                        // 4450
        this.setSelectionAnchor(0, 0);                                                                                 // 4451
        this.moveCursorTo(lastRow, this.doc.getLine(lastRow).length);                                                  // 4452
    };                                                                                                                 // 4453
    this.setRange =                                                                                                    // 4454
    this.setSelectionRange = function(range, reverse) {                                                                // 4455
        if (reverse) {                                                                                                 // 4456
            this.setSelectionAnchor(range.end.row, range.end.column);                                                  // 4457
            this.selectTo(range.start.row, range.start.column);                                                        // 4458
        } else {                                                                                                       // 4459
            this.setSelectionAnchor(range.start.row, range.start.column);                                              // 4460
            this.selectTo(range.end.row, range.end.column);                                                            // 4461
        }                                                                                                              // 4462
        if (this.getRange().isEmpty())                                                                                 // 4463
            this.$isEmpty = true;                                                                                      // 4464
        this.$desiredColumn = null;                                                                                    // 4465
    };                                                                                                                 // 4466
                                                                                                                       // 4467
    this.$moveSelection = function(mover) {                                                                            // 4468
        var lead = this.lead;                                                                                          // 4469
        if (this.$isEmpty)                                                                                             // 4470
            this.setSelectionAnchor(lead.row, lead.column);                                                            // 4471
                                                                                                                       // 4472
        mover.call(this);                                                                                              // 4473
    };                                                                                                                 // 4474
    this.selectTo = function(row, column) {                                                                            // 4475
        this.$moveSelection(function() {                                                                               // 4476
            this.moveCursorTo(row, column);                                                                            // 4477
        });                                                                                                            // 4478
    };                                                                                                                 // 4479
    this.selectToPosition = function(pos) {                                                                            // 4480
        this.$moveSelection(function() {                                                                               // 4481
            this.moveCursorToPosition(pos);                                                                            // 4482
        });                                                                                                            // 4483
    };                                                                                                                 // 4484
    this.moveTo = function(row, column) {                                                                              // 4485
        this.clearSelection();                                                                                         // 4486
        this.moveCursorTo(row, column);                                                                                // 4487
    };                                                                                                                 // 4488
    this.moveToPosition = function(pos) {                                                                              // 4489
        this.clearSelection();                                                                                         // 4490
        this.moveCursorToPosition(pos);                                                                                // 4491
    };                                                                                                                 // 4492
    this.selectUp = function() {                                                                                       // 4493
        this.$moveSelection(this.moveCursorUp);                                                                        // 4494
    };                                                                                                                 // 4495
    this.selectDown = function() {                                                                                     // 4496
        this.$moveSelection(this.moveCursorDown);                                                                      // 4497
    };                                                                                                                 // 4498
    this.selectRight = function() {                                                                                    // 4499
        this.$moveSelection(this.moveCursorRight);                                                                     // 4500
    };                                                                                                                 // 4501
    this.selectLeft = function() {                                                                                     // 4502
        this.$moveSelection(this.moveCursorLeft);                                                                      // 4503
    };                                                                                                                 // 4504
    this.selectLineStart = function() {                                                                                // 4505
        this.$moveSelection(this.moveCursorLineStart);                                                                 // 4506
    };                                                                                                                 // 4507
    this.selectLineEnd = function() {                                                                                  // 4508
        this.$moveSelection(this.moveCursorLineEnd);                                                                   // 4509
    };                                                                                                                 // 4510
    this.selectFileEnd = function() {                                                                                  // 4511
        this.$moveSelection(this.moveCursorFileEnd);                                                                   // 4512
    };                                                                                                                 // 4513
    this.selectFileStart = function() {                                                                                // 4514
        this.$moveSelection(this.moveCursorFileStart);                                                                 // 4515
    };                                                                                                                 // 4516
    this.selectWordRight = function() {                                                                                // 4517
        this.$moveSelection(this.moveCursorWordRight);                                                                 // 4518
    };                                                                                                                 // 4519
    this.selectWordLeft = function() {                                                                                 // 4520
        this.$moveSelection(this.moveCursorWordLeft);                                                                  // 4521
    };                                                                                                                 // 4522
    this.getWordRange = function(row, column) {                                                                        // 4523
        if (typeof column == "undefined") {                                                                            // 4524
            var cursor = row || this.lead;                                                                             // 4525
            row = cursor.row;                                                                                          // 4526
            column = cursor.column;                                                                                    // 4527
        }                                                                                                              // 4528
        return this.session.getWordRange(row, column);                                                                 // 4529
    };                                                                                                                 // 4530
    this.selectWord = function() {                                                                                     // 4531
        this.setSelectionRange(this.getWordRange());                                                                   // 4532
    };                                                                                                                 // 4533
    this.selectAWord = function() {                                                                                    // 4534
        var cursor = this.getCursor();                                                                                 // 4535
        var range = this.session.getAWordRange(cursor.row, cursor.column);                                             // 4536
        this.setSelectionRange(range);                                                                                 // 4537
    };                                                                                                                 // 4538
                                                                                                                       // 4539
    this.getLineRange = function(row, excludeLastChar) {                                                               // 4540
        var rowStart = typeof row == "number" ? row : this.lead.row;                                                   // 4541
        var rowEnd;                                                                                                    // 4542
                                                                                                                       // 4543
        var foldLine = this.session.getFoldLine(rowStart);                                                             // 4544
        if (foldLine) {                                                                                                // 4545
            rowStart = foldLine.start.row;                                                                             // 4546
            rowEnd = foldLine.end.row;                                                                                 // 4547
        } else {                                                                                                       // 4548
            rowEnd = rowStart;                                                                                         // 4549
        }                                                                                                              // 4550
        if (excludeLastChar === true)                                                                                  // 4551
            return new Range(rowStart, 0, rowEnd, this.session.getLine(rowEnd).length);                                // 4552
        else                                                                                                           // 4553
            return new Range(rowStart, 0, rowEnd + 1, 0);                                                              // 4554
    };                                                                                                                 // 4555
    this.selectLine = function() {                                                                                     // 4556
        this.setSelectionRange(this.getLineRange());                                                                   // 4557
    };                                                                                                                 // 4558
    this.moveCursorUp = function() {                                                                                   // 4559
        this.moveCursorBy(-1, 0);                                                                                      // 4560
    };                                                                                                                 // 4561
    this.moveCursorDown = function() {                                                                                 // 4562
        this.moveCursorBy(1, 0);                                                                                       // 4563
    };                                                                                                                 // 4564
    this.moveCursorLeft = function() {                                                                                 // 4565
        var cursor = this.lead.getPosition(),                                                                          // 4566
            fold;                                                                                                      // 4567
                                                                                                                       // 4568
        if (fold = this.session.getFoldAt(cursor.row, cursor.column, -1)) {                                            // 4569
            this.moveCursorTo(fold.start.row, fold.start.column);                                                      // 4570
        } else if (cursor.column === 0) {                                                                              // 4571
            if (cursor.row > 0) {                                                                                      // 4572
                this.moveCursorTo(cursor.row - 1, this.doc.getLine(cursor.row - 1).length);                            // 4573
            }                                                                                                          // 4574
        }                                                                                                              // 4575
        else {                                                                                                         // 4576
            var tabSize = this.session.getTabSize();                                                                   // 4577
            if (this.session.isTabStop(cursor) && this.doc.getLine(cursor.row).slice(cursor.column-tabSize, cursor.column).split(" ").length-1 == tabSize)
                this.moveCursorBy(0, -tabSize);                                                                        // 4579
            else                                                                                                       // 4580
                this.moveCursorBy(0, -1);                                                                              // 4581
        }                                                                                                              // 4582
    };                                                                                                                 // 4583
    this.moveCursorRight = function() {                                                                                // 4584
        var cursor = this.lead.getPosition(),                                                                          // 4585
            fold;                                                                                                      // 4586
        if (fold = this.session.getFoldAt(cursor.row, cursor.column, 1)) {                                             // 4587
            this.moveCursorTo(fold.end.row, fold.end.column);                                                          // 4588
        }                                                                                                              // 4589
        else if (this.lead.column == this.doc.getLine(this.lead.row).length) {                                         // 4590
            if (this.lead.row < this.doc.getLength() - 1) {                                                            // 4591
                this.moveCursorTo(this.lead.row + 1, 0);                                                               // 4592
            }                                                                                                          // 4593
        }                                                                                                              // 4594
        else {                                                                                                         // 4595
            var tabSize = this.session.getTabSize();                                                                   // 4596
            var cursor = this.lead;                                                                                    // 4597
            if (this.session.isTabStop(cursor) && this.doc.getLine(cursor.row).slice(cursor.column, cursor.column+tabSize).split(" ").length-1 == tabSize)
                this.moveCursorBy(0, tabSize);                                                                         // 4599
            else                                                                                                       // 4600
                this.moveCursorBy(0, 1);                                                                               // 4601
        }                                                                                                              // 4602
    };                                                                                                                 // 4603
    this.moveCursorLineStart = function() {                                                                            // 4604
        var row = this.lead.row;                                                                                       // 4605
        var column = this.lead.column;                                                                                 // 4606
        var screenRow = this.session.documentToScreenRow(row, column);                                                 // 4607
        var firstColumnPosition = this.session.screenToDocumentPosition(screenRow, 0);                                 // 4608
        var beforeCursor = this.session.getDisplayLine(                                                                // 4609
            row, null, firstColumnPosition.row,                                                                        // 4610
            firstColumnPosition.column                                                                                 // 4611
        );                                                                                                             // 4612
                                                                                                                       // 4613
        var leadingSpace = beforeCursor.match(/^\s*/);                                                                 // 4614
        if (leadingSpace[0].length != column && !this.session.$useEmacsStyleLineStart)                                 // 4615
            firstColumnPosition.column += leadingSpace[0].length;                                                      // 4616
        this.moveCursorToPosition(firstColumnPosition);                                                                // 4617
    };                                                                                                                 // 4618
    this.moveCursorLineEnd = function() {                                                                              // 4619
        var lead = this.lead;                                                                                          // 4620
        var lineEnd = this.session.getDocumentLastRowColumnPosition(lead.row, lead.column);                            // 4621
        if (this.lead.column == lineEnd.column) {                                                                      // 4622
            var line = this.session.getLine(lineEnd.row);                                                              // 4623
            if (lineEnd.column == line.length) {                                                                       // 4624
                var textEnd = line.search(/\s+$/);                                                                     // 4625
                if (textEnd > 0)                                                                                       // 4626
                    lineEnd.column = textEnd;                                                                          // 4627
            }                                                                                                          // 4628
        }                                                                                                              // 4629
                                                                                                                       // 4630
        this.moveCursorTo(lineEnd.row, lineEnd.column);                                                                // 4631
    };                                                                                                                 // 4632
    this.moveCursorFileEnd = function() {                                                                              // 4633
        var row = this.doc.getLength() - 1;                                                                            // 4634
        var column = this.doc.getLine(row).length;                                                                     // 4635
        this.moveCursorTo(row, column);                                                                                // 4636
    };                                                                                                                 // 4637
    this.moveCursorFileStart = function() {                                                                            // 4638
        this.moveCursorTo(0, 0);                                                                                       // 4639
    };                                                                                                                 // 4640
    this.moveCursorLongWordRight = function() {                                                                        // 4641
        var row = this.lead.row;                                                                                       // 4642
        var column = this.lead.column;                                                                                 // 4643
        var line = this.doc.getLine(row);                                                                              // 4644
        var rightOfCursor = line.substring(column);                                                                    // 4645
                                                                                                                       // 4646
        var match;                                                                                                     // 4647
        this.session.nonTokenRe.lastIndex = 0;                                                                         // 4648
        this.session.tokenRe.lastIndex = 0;                                                                            // 4649
        var fold = this.session.getFoldAt(row, column, 1);                                                             // 4650
        if (fold) {                                                                                                    // 4651
            this.moveCursorTo(fold.end.row, fold.end.column);                                                          // 4652
            return;                                                                                                    // 4653
        }                                                                                                              // 4654
        if (match = this.session.nonTokenRe.exec(rightOfCursor)) {                                                     // 4655
            column += this.session.nonTokenRe.lastIndex;                                                               // 4656
            this.session.nonTokenRe.lastIndex = 0;                                                                     // 4657
            rightOfCursor = line.substring(column);                                                                    // 4658
        }                                                                                                              // 4659
        if (column >= line.length) {                                                                                   // 4660
            this.moveCursorTo(row, line.length);                                                                       // 4661
            this.moveCursorRight();                                                                                    // 4662
            if (row < this.doc.getLength() - 1)                                                                        // 4663
                this.moveCursorWordRight();                                                                            // 4664
            return;                                                                                                    // 4665
        }                                                                                                              // 4666
        if (match = this.session.tokenRe.exec(rightOfCursor)) {                                                        // 4667
            column += this.session.tokenRe.lastIndex;                                                                  // 4668
            this.session.tokenRe.lastIndex = 0;                                                                        // 4669
        }                                                                                                              // 4670
                                                                                                                       // 4671
        this.moveCursorTo(row, column);                                                                                // 4672
    };                                                                                                                 // 4673
    this.moveCursorLongWordLeft = function() {                                                                         // 4674
        var row = this.lead.row;                                                                                       // 4675
        var column = this.lead.column;                                                                                 // 4676
        var fold;                                                                                                      // 4677
        if (fold = this.session.getFoldAt(row, column, -1)) {                                                          // 4678
            this.moveCursorTo(fold.start.row, fold.start.column);                                                      // 4679
            return;                                                                                                    // 4680
        }                                                                                                              // 4681
                                                                                                                       // 4682
        var str = this.session.getFoldStringAt(row, column, -1);                                                       // 4683
        if (str == null) {                                                                                             // 4684
            str = this.doc.getLine(row).substring(0, column);                                                          // 4685
        }                                                                                                              // 4686
                                                                                                                       // 4687
        var leftOfCursor = lang.stringReverse(str);                                                                    // 4688
        var match;                                                                                                     // 4689
        this.session.nonTokenRe.lastIndex = 0;                                                                         // 4690
        this.session.tokenRe.lastIndex = 0;                                                                            // 4691
        if (match = this.session.nonTokenRe.exec(leftOfCursor)) {                                                      // 4692
            column -= this.session.nonTokenRe.lastIndex;                                                               // 4693
            leftOfCursor = leftOfCursor.slice(this.session.nonTokenRe.lastIndex);                                      // 4694
            this.session.nonTokenRe.lastIndex = 0;                                                                     // 4695
        }                                                                                                              // 4696
        if (column <= 0) {                                                                                             // 4697
            this.moveCursorTo(row, 0);                                                                                 // 4698
            this.moveCursorLeft();                                                                                     // 4699
            if (row > 0)                                                                                               // 4700
                this.moveCursorWordLeft();                                                                             // 4701
            return;                                                                                                    // 4702
        }                                                                                                              // 4703
        if (match = this.session.tokenRe.exec(leftOfCursor)) {                                                         // 4704
            column -= this.session.tokenRe.lastIndex;                                                                  // 4705
            this.session.tokenRe.lastIndex = 0;                                                                        // 4706
        }                                                                                                              // 4707
                                                                                                                       // 4708
        this.moveCursorTo(row, column);                                                                                // 4709
    };                                                                                                                 // 4710
                                                                                                                       // 4711
    this.$shortWordEndIndex = function(rightOfCursor) {                                                                // 4712
        var match, index = 0, ch;                                                                                      // 4713
        var whitespaceRe = /\s/;                                                                                       // 4714
        var tokenRe = this.session.tokenRe;                                                                            // 4715
                                                                                                                       // 4716
        tokenRe.lastIndex = 0;                                                                                         // 4717
        if (match = this.session.tokenRe.exec(rightOfCursor)) {                                                        // 4718
            index = this.session.tokenRe.lastIndex;                                                                    // 4719
        } else {                                                                                                       // 4720
            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))                                               // 4721
                index ++;                                                                                              // 4722
                                                                                                                       // 4723
            if (index < 1) {                                                                                           // 4724
                tokenRe.lastIndex = 0;                                                                                 // 4725
                 while ((ch = rightOfCursor[index]) && !tokenRe.test(ch)) {                                            // 4726
                    tokenRe.lastIndex = 0;                                                                             // 4727
                    index ++;                                                                                          // 4728
                    if (whitespaceRe.test(ch)) {                                                                       // 4729
                        if (index > 2) {                                                                               // 4730
                            index--;                                                                                   // 4731
                            break;                                                                                     // 4732
                        } else {                                                                                       // 4733
                            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))                               // 4734
                                index ++;                                                                              // 4735
                            if (index > 2)                                                                             // 4736
                                break;                                                                                 // 4737
                        }                                                                                              // 4738
                    }                                                                                                  // 4739
                }                                                                                                      // 4740
            }                                                                                                          // 4741
        }                                                                                                              // 4742
        tokenRe.lastIndex = 0;                                                                                         // 4743
                                                                                                                       // 4744
        return index;                                                                                                  // 4745
    };                                                                                                                 // 4746
                                                                                                                       // 4747
    this.moveCursorShortWordRight = function() {                                                                       // 4748
        var row = this.lead.row;                                                                                       // 4749
        var column = this.lead.column;                                                                                 // 4750
        var line = this.doc.getLine(row);                                                                              // 4751
        var rightOfCursor = line.substring(column);                                                                    // 4752
                                                                                                                       // 4753
        var fold = this.session.getFoldAt(row, column, 1);                                                             // 4754
        if (fold)                                                                                                      // 4755
            return this.moveCursorTo(fold.end.row, fold.end.column);                                                   // 4756
                                                                                                                       // 4757
        if (column == line.length) {                                                                                   // 4758
            var l = this.doc.getLength();                                                                              // 4759
            do {                                                                                                       // 4760
                row++;                                                                                                 // 4761
                rightOfCursor = this.doc.getLine(row);                                                                 // 4762
            } while (row < l && /^\s*$/.test(rightOfCursor));                                                          // 4763
                                                                                                                       // 4764
            if (!/^\s+/.test(rightOfCursor))                                                                           // 4765
                rightOfCursor = "";                                                                                    // 4766
            column = 0;                                                                                                // 4767
        }                                                                                                              // 4768
                                                                                                                       // 4769
        var index = this.$shortWordEndIndex(rightOfCursor);                                                            // 4770
                                                                                                                       // 4771
        this.moveCursorTo(row, column + index);                                                                        // 4772
    };                                                                                                                 // 4773
                                                                                                                       // 4774
    this.moveCursorShortWordLeft = function() {                                                                        // 4775
        var row = this.lead.row;                                                                                       // 4776
        var column = this.lead.column;                                                                                 // 4777
                                                                                                                       // 4778
        var fold;                                                                                                      // 4779
        if (fold = this.session.getFoldAt(row, column, -1))                                                            // 4780
            return this.moveCursorTo(fold.start.row, fold.start.column);                                               // 4781
                                                                                                                       // 4782
        var line = this.session.getLine(row).substring(0, column);                                                     // 4783
        if (column === 0) {                                                                                            // 4784
            do {                                                                                                       // 4785
                row--;                                                                                                 // 4786
                line = this.doc.getLine(row);                                                                          // 4787
            } while (row > 0 && /^\s*$/.test(line));                                                                   // 4788
                                                                                                                       // 4789
            column = line.length;                                                                                      // 4790
            if (!/\s+$/.test(line))                                                                                    // 4791
                line = "";                                                                                             // 4792
        }                                                                                                              // 4793
                                                                                                                       // 4794
        var leftOfCursor = lang.stringReverse(line);                                                                   // 4795
        var index = this.$shortWordEndIndex(leftOfCursor);                                                             // 4796
                                                                                                                       // 4797
        return this.moveCursorTo(row, column - index);                                                                 // 4798
    };                                                                                                                 // 4799
                                                                                                                       // 4800
    this.moveCursorWordRight = function() {                                                                            // 4801
        if (this.session.$selectLongWords)                                                                             // 4802
            this.moveCursorLongWordRight();                                                                            // 4803
        else                                                                                                           // 4804
            this.moveCursorShortWordRight();                                                                           // 4805
    };                                                                                                                 // 4806
                                                                                                                       // 4807
    this.moveCursorWordLeft = function() {                                                                             // 4808
        if (this.session.$selectLongWords)                                                                             // 4809
            this.moveCursorLongWordLeft();                                                                             // 4810
        else                                                                                                           // 4811
            this.moveCursorShortWordLeft();                                                                            // 4812
    };                                                                                                                 // 4813
    this.moveCursorBy = function(rows, chars) {                                                                        // 4814
        var screenPos = this.session.documentToScreenPosition(                                                         // 4815
            this.lead.row,                                                                                             // 4816
            this.lead.column                                                                                           // 4817
        );                                                                                                             // 4818
                                                                                                                       // 4819
        if (chars === 0) {                                                                                             // 4820
            if (this.$desiredColumn)                                                                                   // 4821
                screenPos.column = this.$desiredColumn;                                                                // 4822
            else                                                                                                       // 4823
                this.$desiredColumn = screenPos.column;                                                                // 4824
        }                                                                                                              // 4825
                                                                                                                       // 4826
        var docPos = this.session.screenToDocumentPosition(screenPos.row + rows, screenPos.column);                    // 4827
                                                                                                                       // 4828
        if (rows !== 0 && chars === 0 && docPos.row === this.lead.row && docPos.column === this.lead.column) {         // 4829
            if (this.session.lineWidgets && this.session.lineWidgets[docPos.row])                                      // 4830
                docPos.row++;                                                                                          // 4831
        }                                                                                                              // 4832
        this.moveCursorTo(docPos.row, docPos.column + chars, chars === 0);                                             // 4833
    };                                                                                                                 // 4834
    this.moveCursorToPosition = function(position) {                                                                   // 4835
        this.moveCursorTo(position.row, position.column);                                                              // 4836
    };                                                                                                                 // 4837
    this.moveCursorTo = function(row, column, keepDesiredColumn) {                                                     // 4838
        var fold = this.session.getFoldAt(row, column, 1);                                                             // 4839
        if (fold) {                                                                                                    // 4840
            row = fold.start.row;                                                                                      // 4841
            column = fold.start.column;                                                                                // 4842
        }                                                                                                              // 4843
                                                                                                                       // 4844
        this.$keepDesiredColumnOnChange = true;                                                                        // 4845
        this.lead.setPosition(row, column);                                                                            // 4846
        this.$keepDesiredColumnOnChange = false;                                                                       // 4847
                                                                                                                       // 4848
        if (!keepDesiredColumn)                                                                                        // 4849
            this.$desiredColumn = null;                                                                                // 4850
    };                                                                                                                 // 4851
    this.moveCursorToScreen = function(row, column, keepDesiredColumn) {                                               // 4852
        var pos = this.session.screenToDocumentPosition(row, column);                                                  // 4853
        this.moveCursorTo(pos.row, pos.column, keepDesiredColumn);                                                     // 4854
    };                                                                                                                 // 4855
    this.detach = function() {                                                                                         // 4856
        this.lead.detach();                                                                                            // 4857
        this.anchor.detach();                                                                                          // 4858
        this.session = this.doc = null;                                                                                // 4859
    };                                                                                                                 // 4860
                                                                                                                       // 4861
    this.fromOrientedRange = function(range) {                                                                         // 4862
        this.setSelectionRange(range, range.cursor == range.start);                                                    // 4863
        this.$desiredColumn = range.desiredColumn || this.$desiredColumn;                                              // 4864
    };                                                                                                                 // 4865
                                                                                                                       // 4866
    this.toOrientedRange = function(range) {                                                                           // 4867
        var r = this.getRange();                                                                                       // 4868
        if (range) {                                                                                                   // 4869
            range.start.column = r.start.column;                                                                       // 4870
            range.start.row = r.start.row;                                                                             // 4871
            range.end.column = r.end.column;                                                                           // 4872
            range.end.row = r.end.row;                                                                                 // 4873
        } else {                                                                                                       // 4874
            range = r;                                                                                                 // 4875
        }                                                                                                              // 4876
                                                                                                                       // 4877
        range.cursor = this.isBackwards() ? range.start : range.end;                                                   // 4878
        range.desiredColumn = this.$desiredColumn;                                                                     // 4879
        return range;                                                                                                  // 4880
    };                                                                                                                 // 4881
    this.getRangeOfMovements = function(func) {                                                                        // 4882
        var start = this.getCursor();                                                                                  // 4883
        try {                                                                                                          // 4884
            func.call(null, this);                                                                                     // 4885
            var end = this.getCursor();                                                                                // 4886
            return Range.fromPoints(start,end);                                                                        // 4887
        } catch(e) {                                                                                                   // 4888
            return Range.fromPoints(start,start);                                                                      // 4889
        } finally {                                                                                                    // 4890
            this.moveCursorToPosition(start);                                                                          // 4891
        }                                                                                                              // 4892
    };                                                                                                                 // 4893
                                                                                                                       // 4894
    this.toJSON = function() {                                                                                         // 4895
        if (this.rangeCount) {                                                                                         // 4896
            var data = this.ranges.map(function(r) {                                                                   // 4897
                var r1 = r.clone();                                                                                    // 4898
                r1.isBackwards = r.cursor == r.start;                                                                  // 4899
                return r1;                                                                                             // 4900
            });                                                                                                        // 4901
        } else {                                                                                                       // 4902
            var data = this.getRange();                                                                                // 4903
            data.isBackwards = this.isBackwards();                                                                     // 4904
        }                                                                                                              // 4905
        return data;                                                                                                   // 4906
    };                                                                                                                 // 4907
                                                                                                                       // 4908
    this.fromJSON = function(data) {                                                                                   // 4909
        if (data.start == undefined) {                                                                                 // 4910
            if (this.rangeList) {                                                                                      // 4911
                this.toSingleRange(data[0]);                                                                           // 4912
                for (var i = data.length; i--; ) {                                                                     // 4913
                    var r = Range.fromPoints(data[i].start, data[i].end);                                              // 4914
                    if (data[i].isBackwards)                                                                           // 4915
                        r.cursor = r.start;                                                                            // 4916
                    this.addRange(r, true);                                                                            // 4917
                }                                                                                                      // 4918
                return;                                                                                                // 4919
            } else                                                                                                     // 4920
                data = data[0];                                                                                        // 4921
        }                                                                                                              // 4922
        if (this.rangeList)                                                                                            // 4923
            this.toSingleRange(data);                                                                                  // 4924
        this.setSelectionRange(data, data.isBackwards);                                                                // 4925
    };                                                                                                                 // 4926
                                                                                                                       // 4927
    this.isEqual = function(data) {                                                                                    // 4928
        if ((data.length || this.rangeCount) && data.length != this.rangeCount)                                        // 4929
            return false;                                                                                              // 4930
        if (!data.length || !this.ranges)                                                                              // 4931
            return this.getRange().isEqual(data);                                                                      // 4932
                                                                                                                       // 4933
        for (var i = this.ranges.length; i--; ) {                                                                      // 4934
            if (!this.ranges[i].isEqual(data[i]))                                                                      // 4935
                return false;                                                                                          // 4936
        }                                                                                                              // 4937
        return true;                                                                                                   // 4938
    };                                                                                                                 // 4939
                                                                                                                       // 4940
}).call(Selection.prototype);                                                                                          // 4941
                                                                                                                       // 4942
exports.Selection = Selection;                                                                                         // 4943
});                                                                                                                    // 4944
                                                                                                                       // 4945
define("ace/tokenizer",["require","exports","module","ace/config"], function(require, exports, module) {               // 4946
"use strict";                                                                                                          // 4947
                                                                                                                       // 4948
var config = require("./config");                                                                                      // 4949
var MAX_TOKEN_COUNT = 2000;                                                                                            // 4950
var Tokenizer = function(rules) {                                                                                      // 4951
    this.states = rules;                                                                                               // 4952
                                                                                                                       // 4953
    this.regExps = {};                                                                                                 // 4954
    this.matchMappings = {};                                                                                           // 4955
    for (var key in this.states) {                                                                                     // 4956
        var state = this.states[key];                                                                                  // 4957
        var ruleRegExps = [];                                                                                          // 4958
        var matchTotal = 0;                                                                                            // 4959
        var mapping = this.matchMappings[key] = {defaultToken: "text"};                                                // 4960
        var flag = "g";                                                                                                // 4961
                                                                                                                       // 4962
        var splitterRurles = [];                                                                                       // 4963
        for (var i = 0; i < state.length; i++) {                                                                       // 4964
            var rule = state[i];                                                                                       // 4965
            if (rule.defaultToken)                                                                                     // 4966
                mapping.defaultToken = rule.defaultToken;                                                              // 4967
            if (rule.caseInsensitive)                                                                                  // 4968
                flag = "gi";                                                                                           // 4969
            if (rule.regex == null)                                                                                    // 4970
                continue;                                                                                              // 4971
                                                                                                                       // 4972
            if (rule.regex instanceof RegExp)                                                                          // 4973
                rule.regex = rule.regex.toString().slice(1, -1);                                                       // 4974
            var adjustedregex = rule.regex;                                                                            // 4975
            var matchcount = new RegExp("(?:(" + adjustedregex + ")|(.))").exec("a").length - 2;                       // 4976
            if (Array.isArray(rule.token)) {                                                                           // 4977
                if (rule.token.length == 1 || matchcount == 1) {                                                       // 4978
                    rule.token = rule.token[0];                                                                        // 4979
                } else if (matchcount - 1 != rule.token.length) {                                                      // 4980
                    this.reportError("number of classes and regexp groups doesn't match", {                            // 4981
                        rule: rule,                                                                                    // 4982
                        groupCount: matchcount - 1                                                                     // 4983
                    });                                                                                                // 4984
                    rule.token = rule.token[0];                                                                        // 4985
                } else {                                                                                               // 4986
                    rule.tokenArray = rule.token;                                                                      // 4987
                    rule.token = null;                                                                                 // 4988
                    rule.onMatch = this.$arrayTokens;                                                                  // 4989
                }                                                                                                      // 4990
            } else if (typeof rule.token == "function" && !rule.onMatch) {                                             // 4991
                if (matchcount > 1)                                                                                    // 4992
                    rule.onMatch = this.$applyToken;                                                                   // 4993
                else                                                                                                   // 4994
                    rule.onMatch = rule.token;                                                                         // 4995
            }                                                                                                          // 4996
                                                                                                                       // 4997
            if (matchcount > 1) {                                                                                      // 4998
                if (/\\\d/.test(rule.regex)) {                                                                         // 4999
                    adjustedregex = rule.regex.replace(/\\([0-9]+)/g, function(match, digit) {                         // 5000
                        return "\\" + (parseInt(digit, 10) + matchTotal + 1);                                          // 5001
                    });                                                                                                // 5002
                } else {                                                                                               // 5003
                    matchcount = 1;                                                                                    // 5004
                    adjustedregex = this.removeCapturingGroups(rule.regex);                                            // 5005
                }                                                                                                      // 5006
                if (!rule.splitRegex && typeof rule.token != "string")                                                 // 5007
                    splitterRurles.push(rule); // flag will be known only at the very end                              // 5008
            }                                                                                                          // 5009
                                                                                                                       // 5010
            mapping[matchTotal] = i;                                                                                   // 5011
            matchTotal += matchcount;                                                                                  // 5012
                                                                                                                       // 5013
            ruleRegExps.push(adjustedregex);                                                                           // 5014
            if (!rule.onMatch)                                                                                         // 5015
                rule.onMatch = null;                                                                                   // 5016
        }                                                                                                              // 5017
                                                                                                                       // 5018
        if (!ruleRegExps.length) {                                                                                     // 5019
            mapping[0] = 0;                                                                                            // 5020
            ruleRegExps.push("$");                                                                                     // 5021
        }                                                                                                              // 5022
                                                                                                                       // 5023
        splitterRurles.forEach(function(rule) {                                                                        // 5024
            rule.splitRegex = this.createSplitterRegexp(rule.regex, flag);                                             // 5025
        }, this);                                                                                                      // 5026
                                                                                                                       // 5027
        this.regExps[key] = new RegExp("(" + ruleRegExps.join(")|(") + ")|($)", flag);                                 // 5028
    }                                                                                                                  // 5029
};                                                                                                                     // 5030
                                                                                                                       // 5031
(function() {                                                                                                          // 5032
    this.$setMaxTokenCount = function(m) {                                                                             // 5033
        MAX_TOKEN_COUNT = m | 0;                                                                                       // 5034
    };                                                                                                                 // 5035
                                                                                                                       // 5036
    this.$applyToken = function(str) {                                                                                 // 5037
        var values = this.splitRegex.exec(str).slice(1);                                                               // 5038
        var types = this.token.apply(this, values);                                                                    // 5039
        if (typeof types === "string")                                                                                 // 5040
            return [{type: types, value: str}];                                                                        // 5041
                                                                                                                       // 5042
        var tokens = [];                                                                                               // 5043
        for (var i = 0, l = types.length; i < l; i++) {                                                                // 5044
            if (values[i])                                                                                             // 5045
                tokens[tokens.length] = {                                                                              // 5046
                    type: types[i],                                                                                    // 5047
                    value: values[i]                                                                                   // 5048
                };                                                                                                     // 5049
        }                                                                                                              // 5050
        return tokens;                                                                                                 // 5051
    },                                                                                                                 // 5052
                                                                                                                       // 5053
    this.$arrayTokens = function(str) {                                                                                // 5054
        if (!str)                                                                                                      // 5055
            return [];                                                                                                 // 5056
        var values = this.splitRegex.exec(str);                                                                        // 5057
        if (!values)                                                                                                   // 5058
            return "text";                                                                                             // 5059
        var tokens = [];                                                                                               // 5060
        var types = this.tokenArray;                                                                                   // 5061
        for (var i = 0, l = types.length; i < l; i++) {                                                                // 5062
            if (values[i + 1])                                                                                         // 5063
                tokens[tokens.length] = {                                                                              // 5064
                    type: types[i],                                                                                    // 5065
                    value: values[i + 1]                                                                               // 5066
                };                                                                                                     // 5067
        }                                                                                                              // 5068
        return tokens;                                                                                                 // 5069
    };                                                                                                                 // 5070
                                                                                                                       // 5071
    this.removeCapturingGroups = function(src) {                                                                       // 5072
        var r = src.replace(                                                                                           // 5073
            /\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,                                                                 // 5074
            function(x, y) {return y ? "(?:" : x;}                                                                     // 5075
        );                                                                                                             // 5076
        return r;                                                                                                      // 5077
    };                                                                                                                 // 5078
                                                                                                                       // 5079
    this.createSplitterRegexp = function(src, flag) {                                                                  // 5080
        if (src.indexOf("(?=") != -1) {                                                                                // 5081
            var stack = 0;                                                                                             // 5082
            var inChClass = false;                                                                                     // 5083
            var lastCapture = {};                                                                                      // 5084
            src.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g, function(                                              // 5085
                m, esc, parenOpen, parenClose, square, index                                                           // 5086
            ) {                                                                                                        // 5087
                if (inChClass) {                                                                                       // 5088
                    inChClass = square != "]";                                                                         // 5089
                } else if (square) {                                                                                   // 5090
                    inChClass = true;                                                                                  // 5091
                } else if (parenClose) {                                                                               // 5092
                    if (stack == lastCapture.stack) {                                                                  // 5093
                        lastCapture.end = index+1;                                                                     // 5094
                        lastCapture.stack = -1;                                                                        // 5095
                    }                                                                                                  // 5096
                    stack--;                                                                                           // 5097
                } else if (parenOpen) {                                                                                // 5098
                    stack++;                                                                                           // 5099
                    if (parenOpen.length != 1) {                                                                       // 5100
                        lastCapture.stack = stack                                                                      // 5101
                        lastCapture.start = index;                                                                     // 5102
                    }                                                                                                  // 5103
                }                                                                                                      // 5104
                return m;                                                                                              // 5105
            });                                                                                                        // 5106
                                                                                                                       // 5107
            if (lastCapture.end != null && /^\)*$/.test(src.substr(lastCapture.end)))                                  // 5108
                src = src.substring(0, lastCapture.start) + src.substr(lastCapture.end);                               // 5109
        }                                                                                                              // 5110
        return new RegExp(src, (flag||"").replace("g", ""));                                                           // 5111
    };                                                                                                                 // 5112
    this.getLineTokens = function(line, startState) {                                                                  // 5113
        if (startState && typeof startState != "string") {                                                             // 5114
            var stack = startState.slice(0);                                                                           // 5115
            startState = stack[0];                                                                                     // 5116
            if (startState === "#tmp") {                                                                               // 5117
                stack.shift()                                                                                          // 5118
                startState = stack.shift()                                                                             // 5119
            }                                                                                                          // 5120
        } else                                                                                                         // 5121
            var stack = [];                                                                                            // 5122
                                                                                                                       // 5123
        var currentState = startState || "start";                                                                      // 5124
        var state = this.states[currentState];                                                                         // 5125
        if (!state) {                                                                                                  // 5126
            currentState = "start";                                                                                    // 5127
            state = this.states[currentState];                                                                         // 5128
        }                                                                                                              // 5129
        var mapping = this.matchMappings[currentState];                                                                // 5130
        var re = this.regExps[currentState];                                                                           // 5131
        re.lastIndex = 0;                                                                                              // 5132
                                                                                                                       // 5133
        var match, tokens = [];                                                                                        // 5134
        var lastIndex = 0;                                                                                             // 5135
        var matchAttempts = 0;                                                                                         // 5136
                                                                                                                       // 5137
        var token = {type: null, value: ""};                                                                           // 5138
                                                                                                                       // 5139
        while (match = re.exec(line)) {                                                                                // 5140
            var type = mapping.defaultToken;                                                                           // 5141
            var rule = null;                                                                                           // 5142
            var value = match[0];                                                                                      // 5143
            var index = re.lastIndex;                                                                                  // 5144
                                                                                                                       // 5145
            if (index - value.length > lastIndex) {                                                                    // 5146
                var skipped = line.substring(lastIndex, index - value.length);                                         // 5147
                if (token.type == type) {                                                                              // 5148
                    token.value += skipped;                                                                            // 5149
                } else {                                                                                               // 5150
                    if (token.type)                                                                                    // 5151
                        tokens.push(token);                                                                            // 5152
                    token = {type: type, value: skipped};                                                              // 5153
                }                                                                                                      // 5154
            }                                                                                                          // 5155
                                                                                                                       // 5156
            for (var i = 0; i < match.length-2; i++) {                                                                 // 5157
                if (match[i + 1] === undefined)                                                                        // 5158
                    continue;                                                                                          // 5159
                                                                                                                       // 5160
                rule = state[mapping[i]];                                                                              // 5161
                                                                                                                       // 5162
                if (rule.onMatch)                                                                                      // 5163
                    type = rule.onMatch(value, currentState, stack);                                                   // 5164
                else                                                                                                   // 5165
                    type = rule.token;                                                                                 // 5166
                                                                                                                       // 5167
                if (rule.next) {                                                                                       // 5168
                    if (typeof rule.next == "string") {                                                                // 5169
                        currentState = rule.next;                                                                      // 5170
                    } else {                                                                                           // 5171
                        currentState = rule.next(currentState, stack);                                                 // 5172
                    }                                                                                                  // 5173
                                                                                                                       // 5174
                    state = this.states[currentState];                                                                 // 5175
                    if (!state) {                                                                                      // 5176
                        this.reportError("state doesn't exist", currentState);                                         // 5177
                        currentState = "start";                                                                        // 5178
                        state = this.states[currentState];                                                             // 5179
                    }                                                                                                  // 5180
                    mapping = this.matchMappings[currentState];                                                        // 5181
                    lastIndex = index;                                                                                 // 5182
                    re = this.regExps[currentState];                                                                   // 5183
                    re.lastIndex = index;                                                                              // 5184
                }                                                                                                      // 5185
                break;                                                                                                 // 5186
            }                                                                                                          // 5187
                                                                                                                       // 5188
            if (value) {                                                                                               // 5189
                if (typeof type === "string") {                                                                        // 5190
                    if ((!rule || rule.merge !== false) && token.type === type) {                                      // 5191
                        token.value += value;                                                                          // 5192
                    } else {                                                                                           // 5193
                        if (token.type)                                                                                // 5194
                            tokens.push(token);                                                                        // 5195
                        token = {type: type, value: value};                                                            // 5196
                    }                                                                                                  // 5197
                } else if (type) {                                                                                     // 5198
                    if (token.type)                                                                                    // 5199
                        tokens.push(token);                                                                            // 5200
                    token = {type: null, value: ""};                                                                   // 5201
                    for (var i = 0; i < type.length; i++)                                                              // 5202
                        tokens.push(type[i]);                                                                          // 5203
                }                                                                                                      // 5204
            }                                                                                                          // 5205
                                                                                                                       // 5206
            if (lastIndex == line.length)                                                                              // 5207
                break;                                                                                                 // 5208
                                                                                                                       // 5209
            lastIndex = index;                                                                                         // 5210
                                                                                                                       // 5211
            if (matchAttempts++ > MAX_TOKEN_COUNT) {                                                                   // 5212
                if (matchAttempts > 2 * line.length) {                                                                 // 5213
                    this.reportError("infinite loop with in ace tokenizer", {                                          // 5214
                        startState: startState,                                                                        // 5215
                        line: line                                                                                     // 5216
                    });                                                                                                // 5217
                }                                                                                                      // 5218
                while (lastIndex < line.length) {                                                                      // 5219
                    if (token.type)                                                                                    // 5220
                        tokens.push(token);                                                                            // 5221
                    token = {                                                                                          // 5222
                        value: line.substring(lastIndex, lastIndex += 2000),                                           // 5223
                        type: "overflow"                                                                               // 5224
                    };                                                                                                 // 5225
                }                                                                                                      // 5226
                currentState = "start";                                                                                // 5227
                stack = [];                                                                                            // 5228
                break;                                                                                                 // 5229
            }                                                                                                          // 5230
        }                                                                                                              // 5231
                                                                                                                       // 5232
        if (token.type)                                                                                                // 5233
            tokens.push(token);                                                                                        // 5234
                                                                                                                       // 5235
        if (stack.length > 1) {                                                                                        // 5236
            if (stack[0] !== currentState)                                                                             // 5237
                stack.unshift("#tmp", currentState);                                                                   // 5238
        }                                                                                                              // 5239
        return {                                                                                                       // 5240
            tokens : tokens,                                                                                           // 5241
            state : stack.length ? stack : currentState                                                                // 5242
        };                                                                                                             // 5243
    };                                                                                                                 // 5244
                                                                                                                       // 5245
    this.reportError = config.reportError;                                                                             // 5246
                                                                                                                       // 5247
}).call(Tokenizer.prototype);                                                                                          // 5248
                                                                                                                       // 5249
exports.Tokenizer = Tokenizer;                                                                                         // 5250
});                                                                                                                    // 5251
                                                                                                                       // 5252
define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"], function(require, exports, module) {
"use strict";                                                                                                          // 5254
                                                                                                                       // 5255
var lang = require("../lib/lang");                                                                                     // 5256
                                                                                                                       // 5257
var TextHighlightRules = function() {                                                                                  // 5258
                                                                                                                       // 5259
    this.$rules = {                                                                                                    // 5260
        "start" : [{                                                                                                   // 5261
            token : "empty_line",                                                                                      // 5262
            regex : '^$'                                                                                               // 5263
        }, {                                                                                                           // 5264
            defaultToken : "text"                                                                                      // 5265
        }]                                                                                                             // 5266
    };                                                                                                                 // 5267
};                                                                                                                     // 5268
                                                                                                                       // 5269
(function() {                                                                                                          // 5270
                                                                                                                       // 5271
    this.addRules = function(rules, prefix) {                                                                          // 5272
        if (!prefix) {                                                                                                 // 5273
            for (var key in rules)                                                                                     // 5274
                this.$rules[key] = rules[key];                                                                         // 5275
            return;                                                                                                    // 5276
        }                                                                                                              // 5277
        for (var key in rules) {                                                                                       // 5278
            var state = rules[key];                                                                                    // 5279
            for (var i = 0; i < state.length; i++) {                                                                   // 5280
                var rule = state[i];                                                                                   // 5281
                if (rule.next || rule.onMatch) {                                                                       // 5282
                    if (typeof rule.next != "string") {                                                                // 5283
                        if (rule.nextState && rule.nextState.indexOf(prefix) !== 0)                                    // 5284
                            rule.nextState = prefix + rule.nextState;                                                  // 5285
                    } else {                                                                                           // 5286
                        if (rule.next.indexOf(prefix) !== 0)                                                           // 5287
                            rule.next = prefix + rule.next;                                                            // 5288
                    }                                                                                                  // 5289
                }                                                                                                      // 5290
            }                                                                                                          // 5291
            this.$rules[prefix + key] = state;                                                                         // 5292
        }                                                                                                              // 5293
    };                                                                                                                 // 5294
                                                                                                                       // 5295
    this.getRules = function() {                                                                                       // 5296
        return this.$rules;                                                                                            // 5297
    };                                                                                                                 // 5298
                                                                                                                       // 5299
    this.embedRules = function (HighlightRules, prefix, escapeRules, states, append) {                                 // 5300
        var embedRules = typeof HighlightRules == "function"                                                           // 5301
            ? new HighlightRules().getRules()                                                                          // 5302
            : HighlightRules;                                                                                          // 5303
        if (states) {                                                                                                  // 5304
            for (var i = 0; i < states.length; i++)                                                                    // 5305
                states[i] = prefix + states[i];                                                                        // 5306
        } else {                                                                                                       // 5307
            states = [];                                                                                               // 5308
            for (var key in embedRules)                                                                                // 5309
                states.push(prefix + key);                                                                             // 5310
        }                                                                                                              // 5311
                                                                                                                       // 5312
        this.addRules(embedRules, prefix);                                                                             // 5313
                                                                                                                       // 5314
        if (escapeRules) {                                                                                             // 5315
            var addRules = Array.prototype[append ? "push" : "unshift"];                                               // 5316
            for (var i = 0; i < states.length; i++)                                                                    // 5317
                addRules.apply(this.$rules[states[i]], lang.deepCopy(escapeRules));                                    // 5318
        }                                                                                                              // 5319
                                                                                                                       // 5320
        if (!this.$embeds)                                                                                             // 5321
            this.$embeds = [];                                                                                         // 5322
        this.$embeds.push(prefix);                                                                                     // 5323
    };                                                                                                                 // 5324
                                                                                                                       // 5325
    this.getEmbeds = function() {                                                                                      // 5326
        return this.$embeds;                                                                                           // 5327
    };                                                                                                                 // 5328
                                                                                                                       // 5329
    var pushState = function(currentState, stack) {                                                                    // 5330
        if (currentState != "start" || stack.length)                                                                   // 5331
            stack.unshift(this.nextState, currentState);                                                               // 5332
        return this.nextState;                                                                                         // 5333
    };                                                                                                                 // 5334
    var popState = function(currentState, stack) {                                                                     // 5335
        stack.shift();                                                                                                 // 5336
        return stack.shift() || "start";                                                                               // 5337
    };                                                                                                                 // 5338
                                                                                                                       // 5339
    this.normalizeRules = function() {                                                                                 // 5340
        var id = 0;                                                                                                    // 5341
        var rules = this.$rules;                                                                                       // 5342
        function processState(key) {                                                                                   // 5343
            var state = rules[key];                                                                                    // 5344
            state.processed = true;                                                                                    // 5345
            for (var i = 0; i < state.length; i++) {                                                                   // 5346
                var rule = state[i];                                                                                   // 5347
                if (!rule.regex && rule.start) {                                                                       // 5348
                    rule.regex = rule.start;                                                                           // 5349
                    if (!rule.next)                                                                                    // 5350
                        rule.next = [];                                                                                // 5351
                    rule.next.push({                                                                                   // 5352
                        defaultToken: rule.token                                                                       // 5353
                    }, {                                                                                               // 5354
                        token: rule.token + ".end",                                                                    // 5355
                        regex: rule.end || rule.start,                                                                 // 5356
                        next: "pop"                                                                                    // 5357
                    });                                                                                                // 5358
                    rule.token = rule.token + ".start";                                                                // 5359
                    rule.push = true;                                                                                  // 5360
                }                                                                                                      // 5361
                var next = rule.next || rule.push;                                                                     // 5362
                if (next && Array.isArray(next)) {                                                                     // 5363
                    var stateName = rule.stateName;                                                                    // 5364
                    if (!stateName)  {                                                                                 // 5365
                        stateName = rule.token;                                                                        // 5366
                        if (typeof stateName != "string")                                                              // 5367
                            stateName = stateName[0] || "";                                                            // 5368
                        if (rules[stateName])                                                                          // 5369
                            stateName += id++;                                                                         // 5370
                    }                                                                                                  // 5371
                    rules[stateName] = next;                                                                           // 5372
                    rule.next = stateName;                                                                             // 5373
                    processState(stateName);                                                                           // 5374
                } else if (next == "pop") {                                                                            // 5375
                    rule.next = popState;                                                                              // 5376
                }                                                                                                      // 5377
                                                                                                                       // 5378
                if (rule.push) {                                                                                       // 5379
                    rule.nextState = rule.next || rule.push;                                                           // 5380
                    rule.next = pushState;                                                                             // 5381
                    delete rule.push;                                                                                  // 5382
                }                                                                                                      // 5383
                                                                                                                       // 5384
                if (rule.rules) {                                                                                      // 5385
                    for (var r in rule.rules) {                                                                        // 5386
                        if (rules[r]) {                                                                                // 5387
                            if (rules[r].push)                                                                         // 5388
                                rules[r].push.apply(rules[r], rule.rules[r]);                                          // 5389
                        } else {                                                                                       // 5390
                            rules[r] = rule.rules[r];                                                                  // 5391
                        }                                                                                              // 5392
                    }                                                                                                  // 5393
                }                                                                                                      // 5394
                if (rule.include || typeof rule == "string") {                                                         // 5395
                    var includeName = rule.include || rule;                                                            // 5396
                    var toInsert = rules[includeName];                                                                 // 5397
                } else if (Array.isArray(rule))                                                                        // 5398
                    toInsert = rule;                                                                                   // 5399
                                                                                                                       // 5400
                if (toInsert) {                                                                                        // 5401
                    var args = [i, 1].concat(toInsert);                                                                // 5402
                    if (rule.noEscape)                                                                                 // 5403
                        args = args.filter(function(x) {return !x.next;});                                             // 5404
                    state.splice.apply(state, args);                                                                   // 5405
                    i--;                                                                                               // 5406
                    toInsert = null;                                                                                   // 5407
                }                                                                                                      // 5408
                                                                                                                       // 5409
                if (rule.keywordMap) {                                                                                 // 5410
                    rule.token = this.createKeywordMapper(                                                             // 5411
                        rule.keywordMap, rule.defaultToken || "text", rule.caseInsensitive                             // 5412
                    );                                                                                                 // 5413
                    delete rule.defaultToken;                                                                          // 5414
                }                                                                                                      // 5415
            }                                                                                                          // 5416
        }                                                                                                              // 5417
        Object.keys(rules).forEach(processState, this);                                                                // 5418
    };                                                                                                                 // 5419
                                                                                                                       // 5420
    this.createKeywordMapper = function(map, defaultToken, ignoreCase, splitChar) {                                    // 5421
        var keywords = Object.create(null);                                                                            // 5422
        Object.keys(map).forEach(function(className) {                                                                 // 5423
            var a = map[className];                                                                                    // 5424
            if (ignoreCase)                                                                                            // 5425
                a = a.toLowerCase();                                                                                   // 5426
            var list = a.split(splitChar || "|");                                                                      // 5427
            for (var i = list.length; i--; )                                                                           // 5428
                keywords[list[i]] = className;                                                                         // 5429
        });                                                                                                            // 5430
        if (Object.getPrototypeOf(keywords)) {                                                                         // 5431
            keywords.__proto__ = null;                                                                                 // 5432
        }                                                                                                              // 5433
        this.$keywordList = Object.keys(keywords);                                                                     // 5434
        map = null;                                                                                                    // 5435
        return ignoreCase                                                                                              // 5436
            ? function(value) {return keywords[value.toLowerCase()] || defaultToken }                                  // 5437
            : function(value) {return keywords[value] || defaultToken };                                               // 5438
    };                                                                                                                 // 5439
                                                                                                                       // 5440
    this.getKeywords = function() {                                                                                    // 5441
        return this.$keywords;                                                                                         // 5442
    };                                                                                                                 // 5443
                                                                                                                       // 5444
}).call(TextHighlightRules.prototype);                                                                                 // 5445
                                                                                                                       // 5446
exports.TextHighlightRules = TextHighlightRules;                                                                       // 5447
});                                                                                                                    // 5448
                                                                                                                       // 5449
define("ace/mode/behaviour",["require","exports","module"], function(require, exports, module) {                       // 5450
"use strict";                                                                                                          // 5451
                                                                                                                       // 5452
var Behaviour = function() {                                                                                           // 5453
   this.$behaviours = {};                                                                                              // 5454
};                                                                                                                     // 5455
                                                                                                                       // 5456
(function () {                                                                                                         // 5457
                                                                                                                       // 5458
    this.add = function (name, action, callback) {                                                                     // 5459
        switch (undefined) {                                                                                           // 5460
          case this.$behaviours:                                                                                       // 5461
              this.$behaviours = {};                                                                                   // 5462
          case this.$behaviours[name]:                                                                                 // 5463
              this.$behaviours[name] = {};                                                                             // 5464
        }                                                                                                              // 5465
        this.$behaviours[name][action] = callback;                                                                     // 5466
    }                                                                                                                  // 5467
                                                                                                                       // 5468
    this.addBehaviours = function (behaviours) {                                                                       // 5469
        for (var key in behaviours) {                                                                                  // 5470
            for (var action in behaviours[key]) {                                                                      // 5471
                this.add(key, action, behaviours[key][action]);                                                        // 5472
            }                                                                                                          // 5473
        }                                                                                                              // 5474
    }                                                                                                                  // 5475
                                                                                                                       // 5476
    this.remove = function (name) {                                                                                    // 5477
        if (this.$behaviours && this.$behaviours[name]) {                                                              // 5478
            delete this.$behaviours[name];                                                                             // 5479
        }                                                                                                              // 5480
    }                                                                                                                  // 5481
                                                                                                                       // 5482
    this.inherit = function (mode, filter) {                                                                           // 5483
        if (typeof mode === "function") {                                                                              // 5484
            var behaviours = new mode().getBehaviours(filter);                                                         // 5485
        } else {                                                                                                       // 5486
            var behaviours = mode.getBehaviours(filter);                                                               // 5487
        }                                                                                                              // 5488
        this.addBehaviours(behaviours);                                                                                // 5489
    }                                                                                                                  // 5490
                                                                                                                       // 5491
    this.getBehaviours = function (filter) {                                                                           // 5492
        if (!filter) {                                                                                                 // 5493
            return this.$behaviours;                                                                                   // 5494
        } else {                                                                                                       // 5495
            var ret = {}                                                                                               // 5496
            for (var i = 0; i < filter.length; i++) {                                                                  // 5497
                if (this.$behaviours[filter[i]]) {                                                                     // 5498
                    ret[filter[i]] = this.$behaviours[filter[i]];                                                      // 5499
                }                                                                                                      // 5500
            }                                                                                                          // 5501
            return ret;                                                                                                // 5502
        }                                                                                                              // 5503
    }                                                                                                                  // 5504
                                                                                                                       // 5505
}).call(Behaviour.prototype);                                                                                          // 5506
                                                                                                                       // 5507
exports.Behaviour = Behaviour;                                                                                         // 5508
});                                                                                                                    // 5509
                                                                                                                       // 5510
define("ace/unicode",["require","exports","module"], function(require, exports, module) {                              // 5511
"use strict";                                                                                                          // 5512
exports.packages = {};                                                                                                 // 5513
                                                                                                                       // 5514
addUnicodePackage({                                                                                                    // 5515
    L:  "0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",
    Ll: "0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",
    Lu: "0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",
    Lt: "01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",                                                     // 5519
    Lm: "02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",
    Lo: "01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",
    M:  "0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",
    Mn: "0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",
    Mc: "0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",
    Me: "0488048906DE20DD-20E020E2-20E4A670-A672",                                                                     // 5525
    N:  "0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",
    Nd: "0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",
    Nl: "16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",                                                  // 5528
    No: "00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",
    P:  "0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",
    Pd: "002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",                                       // 5531
    Ps: "0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",
    Pe: "0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",
    Pi: "00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",                                                            // 5534
    Pf: "00BB2019201D203A2E032E052E0A2E0D2E1D2E21",                                                                    // 5535
    Pc: "005F203F20402054FE33FE34FE4D-FE4FFF3F",                                                                       // 5536
    Po: "0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",
    S:  "0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",
    Sm: "002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",
    Sc: "002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",                      // 5540
    Sk: "005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",
    So: "00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",
    Z:  "002000A01680180E2000-200A20282029202F205F3000",                                                               // 5543
    Zs: "002000A01680180E2000-200A202F205F3000",                                                                       // 5544
    Zl: "2028",                                                                                                        // 5545
    Zp: "2029",                                                                                                        // 5546
    C:  "0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",
    Cc: "0000-001F007F-009F",                                                                                          // 5548
    Cf: "00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",                              // 5549
    Co: "E000-F8FF",                                                                                                   // 5550
    Cs: "D800-DFFF",                                                                                                   // 5551
    Cn: "03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"
});                                                                                                                    // 5553
                                                                                                                       // 5554
function addUnicodePackage (pack) {                                                                                    // 5555
    var codePoint = /\w{4}/g;                                                                                          // 5556
    for (var name in pack)                                                                                             // 5557
        exports.packages[name] = pack[name].replace(codePoint, "\\u$&");                                               // 5558
};                                                                                                                     // 5559
                                                                                                                       // 5560
});                                                                                                                    // 5561
                                                                                                                       // 5562
define("ace/token_iterator",["require","exports","module"], function(require, exports, module) {                       // 5563
"use strict";                                                                                                          // 5564
var TokenIterator = function(session, initialRow, initialColumn) {                                                     // 5565
    this.$session = session;                                                                                           // 5566
    this.$row = initialRow;                                                                                            // 5567
    this.$rowTokens = session.getTokens(initialRow);                                                                   // 5568
                                                                                                                       // 5569
    var token = session.getTokenAt(initialRow, initialColumn);                                                         // 5570
    this.$tokenIndex = token ? token.index : -1;                                                                       // 5571
};                                                                                                                     // 5572
                                                                                                                       // 5573
(function() {                                                                                                          // 5574
    this.stepBackward = function() {                                                                                   // 5575
        this.$tokenIndex -= 1;                                                                                         // 5576
                                                                                                                       // 5577
        while (this.$tokenIndex < 0) {                                                                                 // 5578
            this.$row -= 1;                                                                                            // 5579
            if (this.$row < 0) {                                                                                       // 5580
                this.$row = 0;                                                                                         // 5581
                return null;                                                                                           // 5582
            }                                                                                                          // 5583
                                                                                                                       // 5584
            this.$rowTokens = this.$session.getTokens(this.$row);                                                      // 5585
            this.$tokenIndex = this.$rowTokens.length - 1;                                                             // 5586
        }                                                                                                              // 5587
                                                                                                                       // 5588
        return this.$rowTokens[this.$tokenIndex];                                                                      // 5589
    };                                                                                                                 // 5590
    this.stepForward = function() {                                                                                    // 5591
        this.$tokenIndex += 1;                                                                                         // 5592
        var rowCount;                                                                                                  // 5593
        while (this.$tokenIndex >= this.$rowTokens.length) {                                                           // 5594
            this.$row += 1;                                                                                            // 5595
            if (!rowCount)                                                                                             // 5596
                rowCount = this.$session.getLength();                                                                  // 5597
            if (this.$row >= rowCount) {                                                                               // 5598
                this.$row = rowCount - 1;                                                                              // 5599
                return null;                                                                                           // 5600
            }                                                                                                          // 5601
                                                                                                                       // 5602
            this.$rowTokens = this.$session.getTokens(this.$row);                                                      // 5603
            this.$tokenIndex = 0;                                                                                      // 5604
        }                                                                                                              // 5605
                                                                                                                       // 5606
        return this.$rowTokens[this.$tokenIndex];                                                                      // 5607
    };                                                                                                                 // 5608
    this.getCurrentToken = function () {                                                                               // 5609
        return this.$rowTokens[this.$tokenIndex];                                                                      // 5610
    };                                                                                                                 // 5611
    this.getCurrentTokenRow = function () {                                                                            // 5612
        return this.$row;                                                                                              // 5613
    };                                                                                                                 // 5614
    this.getCurrentTokenColumn = function() {                                                                          // 5615
        var rowTokens = this.$rowTokens;                                                                               // 5616
        var tokenIndex = this.$tokenIndex;                                                                             // 5617
        var column = rowTokens[tokenIndex].start;                                                                      // 5618
        if (column !== undefined)                                                                                      // 5619
            return column;                                                                                             // 5620
                                                                                                                       // 5621
        column = 0;                                                                                                    // 5622
        while (tokenIndex > 0) {                                                                                       // 5623
            tokenIndex -= 1;                                                                                           // 5624
            column += rowTokens[tokenIndex].value.length;                                                              // 5625
        }                                                                                                              // 5626
                                                                                                                       // 5627
        return column;                                                                                                 // 5628
    };                                                                                                                 // 5629
    this.getCurrentTokenPosition = function() {                                                                        // 5630
        return {row: this.$row, column: this.getCurrentTokenColumn()};                                                 // 5631
    };                                                                                                                 // 5632
                                                                                                                       // 5633
}).call(TokenIterator.prototype);                                                                                      // 5634
                                                                                                                       // 5635
exports.TokenIterator = TokenIterator;                                                                                 // 5636
});                                                                                                                    // 5637
                                                                                                                       // 5638
define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 5640
                                                                                                                       // 5641
var Tokenizer = require("../tokenizer").Tokenizer;                                                                     // 5642
var TextHighlightRules = require("./text_highlight_rules").TextHighlightRules;                                         // 5643
var Behaviour = require("./behaviour").Behaviour;                                                                      // 5644
var unicode = require("../unicode");                                                                                   // 5645
var lang = require("../lib/lang");                                                                                     // 5646
var TokenIterator = require("../token_iterator").TokenIterator;                                                        // 5647
var Range = require("../range").Range;                                                                                 // 5648
                                                                                                                       // 5649
var Mode = function() {                                                                                                // 5650
    this.HighlightRules = TextHighlightRules;                                                                          // 5651
    this.$behaviour = new Behaviour();                                                                                 // 5652
};                                                                                                                     // 5653
                                                                                                                       // 5654
(function() {                                                                                                          // 5655
                                                                                                                       // 5656
    this.tokenRe = new RegExp("^["                                                                                     // 5657
        + unicode.packages.L                                                                                           // 5658
        + unicode.packages.Mn + unicode.packages.Mc                                                                    // 5659
        + unicode.packages.Nd                                                                                          // 5660
        + unicode.packages.Pc + "\\$_]+", "g"                                                                          // 5661
    );                                                                                                                 // 5662
                                                                                                                       // 5663
    this.nonTokenRe = new RegExp("^(?:[^"                                                                              // 5664
        + unicode.packages.L                                                                                           // 5665
        + unicode.packages.Mn + unicode.packages.Mc                                                                    // 5666
        + unicode.packages.Nd                                                                                          // 5667
        + unicode.packages.Pc + "\\$_]|\\s])+", "g"                                                                    // 5668
    );                                                                                                                 // 5669
                                                                                                                       // 5670
    this.getTokenizer = function() {                                                                                   // 5671
        if (!this.$tokenizer) {                                                                                        // 5672
            this.$highlightRules = this.$highlightRules || new this.HighlightRules();                                  // 5673
            this.$tokenizer = new Tokenizer(this.$highlightRules.getRules());                                          // 5674
        }                                                                                                              // 5675
        return this.$tokenizer;                                                                                        // 5676
    };                                                                                                                 // 5677
                                                                                                                       // 5678
    this.lineCommentStart = "";                                                                                        // 5679
    this.blockComment = "";                                                                                            // 5680
                                                                                                                       // 5681
    this.toggleCommentLines = function(state, session, startRow, endRow) {                                             // 5682
        var doc = session.doc;                                                                                         // 5683
                                                                                                                       // 5684
        var ignoreBlankLines = true;                                                                                   // 5685
        var shouldRemove = true;                                                                                       // 5686
        var minIndent = Infinity;                                                                                      // 5687
        var tabSize = session.getTabSize();                                                                            // 5688
        var insertAtTabStop = false;                                                                                   // 5689
                                                                                                                       // 5690
        if (!this.lineCommentStart) {                                                                                  // 5691
            if (!this.blockComment)                                                                                    // 5692
                return false;                                                                                          // 5693
            var lineCommentStart = this.blockComment.start;                                                            // 5694
            var lineCommentEnd = this.blockComment.end;                                                                // 5695
            var regexpStart = new RegExp("^(\\s*)(?:" + lang.escapeRegExp(lineCommentStart) + ")");                    // 5696
            var regexpEnd = new RegExp("(?:" + lang.escapeRegExp(lineCommentEnd) + ")\\s*$");                          // 5697
                                                                                                                       // 5698
            var comment = function(line, i) {                                                                          // 5699
                if (testRemove(line, i))                                                                               // 5700
                    return;                                                                                            // 5701
                if (!ignoreBlankLines || /\S/.test(line)) {                                                            // 5702
                    doc.insertInLine({row: i, column: line.length}, lineCommentEnd);                                   // 5703
                    doc.insertInLine({row: i, column: minIndent}, lineCommentStart);                                   // 5704
                }                                                                                                      // 5705
            };                                                                                                         // 5706
                                                                                                                       // 5707
            var uncomment = function(line, i) {                                                                        // 5708
                var m;                                                                                                 // 5709
                if (m = line.match(regexpEnd))                                                                         // 5710
                    doc.removeInLine(i, line.length - m[0].length, line.length);                                       // 5711
                if (m = line.match(regexpStart))                                                                       // 5712
                    doc.removeInLine(i, m[1].length, m[0].length);                                                     // 5713
            };                                                                                                         // 5714
                                                                                                                       // 5715
            var testRemove = function(line, row) {                                                                     // 5716
                if (regexpStart.test(line))                                                                            // 5717
                    return true;                                                                                       // 5718
                var tokens = session.getTokens(row);                                                                   // 5719
                for (var i = 0; i < tokens.length; i++) {                                                              // 5720
                    if (tokens[i].type === 'comment')                                                                  // 5721
                        return true;                                                                                   // 5722
                }                                                                                                      // 5723
            };                                                                                                         // 5724
        } else {                                                                                                       // 5725
            if (Array.isArray(this.lineCommentStart)) {                                                                // 5726
                var regexpStart = this.lineCommentStart.map(lang.escapeRegExp).join("|");                              // 5727
                var lineCommentStart = this.lineCommentStart[0];                                                       // 5728
            } else {                                                                                                   // 5729
                var regexpStart = lang.escapeRegExp(this.lineCommentStart);                                            // 5730
                var lineCommentStart = this.lineCommentStart;                                                          // 5731
            }                                                                                                          // 5732
            regexpStart = new RegExp("^(\\s*)(?:" + regexpStart + ") ?");                                              // 5733
                                                                                                                       // 5734
            insertAtTabStop = session.getUseSoftTabs();                                                                // 5735
                                                                                                                       // 5736
            var uncomment = function(line, i) {                                                                        // 5737
                var m = line.match(regexpStart);                                                                       // 5738
                if (!m) return;                                                                                        // 5739
                var start = m[1].length, end = m[0].length;                                                            // 5740
                if (!shouldInsertSpace(line, start, end) && m[0][end - 1] == " ")                                      // 5741
                    end--;                                                                                             // 5742
                doc.removeInLine(i, start, end);                                                                       // 5743
            };                                                                                                         // 5744
            var commentWithSpace = lineCommentStart + " ";                                                             // 5745
            var comment = function(line, i) {                                                                          // 5746
                if (!ignoreBlankLines || /\S/.test(line)) {                                                            // 5747
                    if (shouldInsertSpace(line, minIndent, minIndent))                                                 // 5748
                        doc.insertInLine({row: i, column: minIndent}, commentWithSpace);                               // 5749
                    else                                                                                               // 5750
                        doc.insertInLine({row: i, column: minIndent}, lineCommentStart);                               // 5751
                }                                                                                                      // 5752
            };                                                                                                         // 5753
            var testRemove = function(line, i) {                                                                       // 5754
                return regexpStart.test(line);                                                                         // 5755
            };                                                                                                         // 5756
                                                                                                                       // 5757
            var shouldInsertSpace = function(line, before, after) {                                                    // 5758
                var spaces = 0;                                                                                        // 5759
                while (before-- && line.charAt(before) == " ")                                                         // 5760
                    spaces++;                                                                                          // 5761
                if (spaces % tabSize != 0)                                                                             // 5762
                    return false;                                                                                      // 5763
                var spaces = 0;                                                                                        // 5764
                while (line.charAt(after++) == " ")                                                                    // 5765
                    spaces++;                                                                                          // 5766
                if (tabSize > 2)                                                                                       // 5767
                    return spaces % tabSize != tabSize - 1;                                                            // 5768
                else                                                                                                   // 5769
                    return spaces % tabSize == 0;                                                                      // 5770
                return true;                                                                                           // 5771
            };                                                                                                         // 5772
        }                                                                                                              // 5773
                                                                                                                       // 5774
        function iter(fun) {                                                                                           // 5775
            for (var i = startRow; i <= endRow; i++)                                                                   // 5776
                fun(doc.getLine(i), i);                                                                                // 5777
        }                                                                                                              // 5778
                                                                                                                       // 5779
                                                                                                                       // 5780
        var minEmptyLength = Infinity;                                                                                 // 5781
        iter(function(line, i) {                                                                                       // 5782
            var indent = line.search(/\S/);                                                                            // 5783
            if (indent !== -1) {                                                                                       // 5784
                if (indent < minIndent)                                                                                // 5785
                    minIndent = indent;                                                                                // 5786
                if (shouldRemove && !testRemove(line, i))                                                              // 5787
                    shouldRemove = false;                                                                              // 5788
            } else if (minEmptyLength > line.length) {                                                                 // 5789
                minEmptyLength = line.length;                                                                          // 5790
            }                                                                                                          // 5791
        });                                                                                                            // 5792
                                                                                                                       // 5793
        if (minIndent == Infinity) {                                                                                   // 5794
            minIndent = minEmptyLength;                                                                                // 5795
            ignoreBlankLines = false;                                                                                  // 5796
            shouldRemove = false;                                                                                      // 5797
        }                                                                                                              // 5798
                                                                                                                       // 5799
        if (insertAtTabStop && minIndent % tabSize != 0)                                                               // 5800
            minIndent = Math.floor(minIndent / tabSize) * tabSize;                                                     // 5801
                                                                                                                       // 5802
        iter(shouldRemove ? uncomment : comment);                                                                      // 5803
    };                                                                                                                 // 5804
                                                                                                                       // 5805
    this.toggleBlockComment = function(state, session, range, cursor) {                                                // 5806
        var comment = this.blockComment;                                                                               // 5807
        if (!comment)                                                                                                  // 5808
            return;                                                                                                    // 5809
        if (!comment.start && comment[0])                                                                              // 5810
            comment = comment[0];                                                                                      // 5811
                                                                                                                       // 5812
        var iterator = new TokenIterator(session, cursor.row, cursor.column);                                          // 5813
        var token = iterator.getCurrentToken();                                                                        // 5814
                                                                                                                       // 5815
        var sel = session.selection;                                                                                   // 5816
        var initialRange = session.selection.toOrientedRange();                                                        // 5817
        var startRow, colDiff;                                                                                         // 5818
                                                                                                                       // 5819
        if (token && /comment/.test(token.type)) {                                                                     // 5820
            var startRange, endRange;                                                                                  // 5821
            while (token && /comment/.test(token.type)) {                                                              // 5822
                var i = token.value.indexOf(comment.start);                                                            // 5823
                if (i != -1) {                                                                                         // 5824
                    var row = iterator.getCurrentTokenRow();                                                           // 5825
                    var column = iterator.getCurrentTokenColumn() + i;                                                 // 5826
                    startRange = new Range(row, column, row, column + comment.start.length);                           // 5827
                    break;                                                                                             // 5828
                }                                                                                                      // 5829
                token = iterator.stepBackward();                                                                       // 5830
            }                                                                                                          // 5831
                                                                                                                       // 5832
            var iterator = new TokenIterator(session, cursor.row, cursor.column);                                      // 5833
            var token = iterator.getCurrentToken();                                                                    // 5834
            while (token && /comment/.test(token.type)) {                                                              // 5835
                var i = token.value.indexOf(comment.end);                                                              // 5836
                if (i != -1) {                                                                                         // 5837
                    var row = iterator.getCurrentTokenRow();                                                           // 5838
                    var column = iterator.getCurrentTokenColumn() + i;                                                 // 5839
                    endRange = new Range(row, column, row, column + comment.end.length);                               // 5840
                    break;                                                                                             // 5841
                }                                                                                                      // 5842
                token = iterator.stepForward();                                                                        // 5843
            }                                                                                                          // 5844
            if (endRange)                                                                                              // 5845
                session.remove(endRange);                                                                              // 5846
            if (startRange) {                                                                                          // 5847
                session.remove(startRange);                                                                            // 5848
                startRow = startRange.start.row;                                                                       // 5849
                colDiff = -comment.start.length;                                                                       // 5850
            }                                                                                                          // 5851
        } else {                                                                                                       // 5852
            colDiff = comment.start.length;                                                                            // 5853
            startRow = range.start.row;                                                                                // 5854
            session.insert(range.end, comment.end);                                                                    // 5855
            session.insert(range.start, comment.start);                                                                // 5856
        }                                                                                                              // 5857
        if (initialRange.start.row == startRow)                                                                        // 5858
            initialRange.start.column += colDiff;                                                                      // 5859
        if (initialRange.end.row == startRow)                                                                          // 5860
            initialRange.end.column += colDiff;                                                                        // 5861
        session.selection.fromOrientedRange(initialRange);                                                             // 5862
    };                                                                                                                 // 5863
                                                                                                                       // 5864
    this.getNextLineIndent = function(state, line, tab) {                                                              // 5865
        return this.$getIndent(line);                                                                                  // 5866
    };                                                                                                                 // 5867
                                                                                                                       // 5868
    this.checkOutdent = function(state, line, input) {                                                                 // 5869
        return false;                                                                                                  // 5870
    };                                                                                                                 // 5871
                                                                                                                       // 5872
    this.autoOutdent = function(state, doc, row) {                                                                     // 5873
    };                                                                                                                 // 5874
                                                                                                                       // 5875
    this.$getIndent = function(line) {                                                                                 // 5876
        return line.match(/^\s*/)[0];                                                                                  // 5877
    };                                                                                                                 // 5878
                                                                                                                       // 5879
    this.createWorker = function(session) {                                                                            // 5880
        return null;                                                                                                   // 5881
    };                                                                                                                 // 5882
                                                                                                                       // 5883
    this.createModeDelegates = function (mapping) {                                                                    // 5884
        this.$embeds = [];                                                                                             // 5885
        this.$modes = {};                                                                                              // 5886
        for (var i in mapping) {                                                                                       // 5887
            if (mapping[i]) {                                                                                          // 5888
                this.$embeds.push(i);                                                                                  // 5889
                this.$modes[i] = new mapping[i]();                                                                     // 5890
            }                                                                                                          // 5891
        }                                                                                                              // 5892
                                                                                                                       // 5893
        var delegations = ['toggleBlockComment', 'toggleCommentLines', 'getNextLineIndent',                            // 5894
            'checkOutdent', 'autoOutdent', 'transformAction', 'getCompletions'];                                       // 5895
                                                                                                                       // 5896
        for (var i = 0; i < delegations.length; i++) {                                                                 // 5897
            (function(scope) {                                                                                         // 5898
              var functionName = delegations[i];                                                                       // 5899
              var defaultHandler = scope[functionName];                                                                // 5900
              scope[delegations[i]] = function() {                                                                     // 5901
                  return this.$delegator(functionName, arguments, defaultHandler);                                     // 5902
              };                                                                                                       // 5903
            } (this));                                                                                                 // 5904
        }                                                                                                              // 5905
    };                                                                                                                 // 5906
                                                                                                                       // 5907
    this.$delegator = function(method, args, defaultHandler) {                                                         // 5908
        var state = args[0];                                                                                           // 5909
        if (typeof state != "string")                                                                                  // 5910
            state = state[0];                                                                                          // 5911
        for (var i = 0; i < this.$embeds.length; i++) {                                                                // 5912
            if (!this.$modes[this.$embeds[i]]) continue;                                                               // 5913
                                                                                                                       // 5914
            var split = state.split(this.$embeds[i]);                                                                  // 5915
            if (!split[0] && split[1]) {                                                                               // 5916
                args[0] = split[1];                                                                                    // 5917
                var mode = this.$modes[this.$embeds[i]];                                                               // 5918
                return mode[method].apply(mode, args);                                                                 // 5919
            }                                                                                                          // 5920
        }                                                                                                              // 5921
        var ret = defaultHandler.apply(this, args);                                                                    // 5922
        return defaultHandler ? ret : undefined;                                                                       // 5923
    };                                                                                                                 // 5924
                                                                                                                       // 5925
    this.transformAction = function(state, action, editor, session, param) {                                           // 5926
        if (this.$behaviour) {                                                                                         // 5927
            var behaviours = this.$behaviour.getBehaviours();                                                          // 5928
            for (var key in behaviours) {                                                                              // 5929
                if (behaviours[key][action]) {                                                                         // 5930
                    var ret = behaviours[key][action].apply(this, arguments);                                          // 5931
                    if (ret) {                                                                                         // 5932
                        return ret;                                                                                    // 5933
                    }                                                                                                  // 5934
                }                                                                                                      // 5935
            }                                                                                                          // 5936
        }                                                                                                              // 5937
    };                                                                                                                 // 5938
                                                                                                                       // 5939
    this.getKeywords = function(append) {                                                                              // 5940
        if (!this.completionKeywords) {                                                                                // 5941
            var rules = this.$tokenizer.rules;                                                                         // 5942
            var completionKeywords = [];                                                                               // 5943
            for (var rule in rules) {                                                                                  // 5944
                var ruleItr = rules[rule];                                                                             // 5945
                for (var r = 0, l = ruleItr.length; r < l; r++) {                                                      // 5946
                    if (typeof ruleItr[r].token === "string") {                                                        // 5947
                        if (/keyword|support|storage/.test(ruleItr[r].token))                                          // 5948
                            completionKeywords.push(ruleItr[r].regex);                                                 // 5949
                    }                                                                                                  // 5950
                    else if (typeof ruleItr[r].token === "object") {                                                   // 5951
                        for (var a = 0, aLength = ruleItr[r].token.length; a < aLength; a++) {                         // 5952
                            if (/keyword|support|storage/.test(ruleItr[r].token[a])) {                                 // 5953
                                var rule = ruleItr[r].regex.match(/\(.+?\)/g)[a];                                      // 5954
                                completionKeywords.push(rule.substr(1, rule.length - 2));                              // 5955
                            }                                                                                          // 5956
                        }                                                                                              // 5957
                    }                                                                                                  // 5958
                }                                                                                                      // 5959
            }                                                                                                          // 5960
            this.completionKeywords = completionKeywords;                                                              // 5961
        }                                                                                                              // 5962
        if (!append)                                                                                                   // 5963
            return this.$keywordList;                                                                                  // 5964
        return completionKeywords.concat(this.$keywordList || []);                                                     // 5965
    };                                                                                                                 // 5966
                                                                                                                       // 5967
    this.$createKeywordList = function() {                                                                             // 5968
        if (!this.$highlightRules)                                                                                     // 5969
            this.getTokenizer();                                                                                       // 5970
        return this.$keywordList = this.$highlightRules.$keywordList || [];                                            // 5971
    };                                                                                                                 // 5972
                                                                                                                       // 5973
    this.getCompletions = function(state, session, pos, prefix) {                                                      // 5974
        var keywords = this.$keywordList || this.$createKeywordList();                                                 // 5975
        return keywords.map(function(word) {                                                                           // 5976
            return {                                                                                                   // 5977
                name: word,                                                                                            // 5978
                value: word,                                                                                           // 5979
                score: 0,                                                                                              // 5980
                meta: "keyword"                                                                                        // 5981
            };                                                                                                         // 5982
        });                                                                                                            // 5983
    };                                                                                                                 // 5984
                                                                                                                       // 5985
    this.$id = "ace/mode/text";                                                                                        // 5986
}).call(Mode.prototype);                                                                                               // 5987
                                                                                                                       // 5988
exports.Mode = Mode;                                                                                                   // 5989
});                                                                                                                    // 5990
                                                                                                                       // 5991
define("ace/apply_delta",["require","exports","module"], function(require, exports, module) {                          // 5992
"use strict";                                                                                                          // 5993
                                                                                                                       // 5994
function throwDeltaError(delta, errorText){                                                                            // 5995
    console.log("Invalid Delta:", delta);                                                                              // 5996
    throw "Invalid Delta: " + errorText;                                                                               // 5997
}                                                                                                                      // 5998
                                                                                                                       // 5999
function positionInDocument(docLines, position) {                                                                      // 6000
    return position.row    >= 0 && position.row    <  docLines.length &&                                               // 6001
           position.column >= 0 && position.column <= docLines[position.row].length;                                   // 6002
}                                                                                                                      // 6003
                                                                                                                       // 6004
function validateDelta(docLines, delta) {                                                                              // 6005
    if (delta.action != "insert" && delta.action != "remove")                                                          // 6006
        throwDeltaError(delta, "delta.action must be 'insert' or 'remove'");                                           // 6007
    if (!(delta.lines instanceof Array))                                                                               // 6008
        throwDeltaError(delta, "delta.lines must be an Array");                                                        // 6009
    if (!delta.start || !delta.end)                                                                                    // 6010
       throwDeltaError(delta, "delta.start/end must be an present");                                                   // 6011
    var start = delta.start;                                                                                           // 6012
    if (!positionInDocument(docLines, delta.start))                                                                    // 6013
        throwDeltaError(delta, "delta.start must be contained in document");                                           // 6014
    var end = delta.end;                                                                                               // 6015
    if (delta.action == "remove" && !positionInDocument(docLines, end))                                                // 6016
        throwDeltaError(delta, "delta.end must contained in document for 'remove' actions");                           // 6017
    var numRangeRows = end.row - start.row;                                                                            // 6018
    var numRangeLastLineChars = (end.column - (numRangeRows == 0 ? start.column : 0));                                 // 6019
    if (numRangeRows != delta.lines.length - 1 || delta.lines[numRangeRows].length != numRangeLastLineChars)           // 6020
        throwDeltaError(delta, "delta.range must match delta lines");                                                  // 6021
}                                                                                                                      // 6022
                                                                                                                       // 6023
exports.applyDelta = function(docLines, delta, doNotValidate) {                                                        // 6024
                                                                                                                       // 6025
    var row = delta.start.row;                                                                                         // 6026
    var startColumn = delta.start.column;                                                                              // 6027
    var line = docLines[row] || "";                                                                                    // 6028
    switch (delta.action) {                                                                                            // 6029
        case "insert":                                                                                                 // 6030
            var lines = delta.lines;                                                                                   // 6031
            if (lines.length === 1) {                                                                                  // 6032
                docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);         // 6033
            } else {                                                                                                   // 6034
                var args = [row, 1].concat(delta.lines);                                                               // 6035
                docLines.splice.apply(docLines, args);                                                                 // 6036
                docLines[row] = line.substring(0, startColumn) + docLines[row];                                        // 6037
                docLines[row + delta.lines.length - 1] += line.substring(startColumn);                                 // 6038
            }                                                                                                          // 6039
            break;                                                                                                     // 6040
        case "remove":                                                                                                 // 6041
            var endColumn = delta.end.column;                                                                          // 6042
            var endRow = delta.end.row;                                                                                // 6043
            if (row === endRow) {                                                                                      // 6044
                docLines[row] = line.substring(0, startColumn) + line.substring(endColumn);                            // 6045
            } else {                                                                                                   // 6046
                docLines.splice(                                                                                       // 6047
                    row, endRow - row + 1,                                                                             // 6048
                    line.substring(0, startColumn) + docLines[endRow].substring(endColumn)                             // 6049
                );                                                                                                     // 6050
            }                                                                                                          // 6051
            break;                                                                                                     // 6052
    }                                                                                                                  // 6053
}                                                                                                                      // 6054
});                                                                                                                    // 6055
                                                                                                                       // 6056
define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"], function(require, exports, module) {
"use strict";                                                                                                          // 6058
                                                                                                                       // 6059
var oop = require("./lib/oop");                                                                                        // 6060
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 6061
                                                                                                                       // 6062
var Anchor = exports.Anchor = function(doc, row, column) {                                                             // 6063
    this.$onChange = this.onChange.bind(this);                                                                         // 6064
    this.attach(doc);                                                                                                  // 6065
                                                                                                                       // 6066
    if (typeof column == "undefined")                                                                                  // 6067
        this.setPosition(row.row, row.column);                                                                         // 6068
    else                                                                                                               // 6069
        this.setPosition(row, column);                                                                                 // 6070
};                                                                                                                     // 6071
                                                                                                                       // 6072
(function() {                                                                                                          // 6073
                                                                                                                       // 6074
    oop.implement(this, EventEmitter);                                                                                 // 6075
    this.getPosition = function() {                                                                                    // 6076
        return this.$clipPositionToDocument(this.row, this.column);                                                    // 6077
    };                                                                                                                 // 6078
    this.getDocument = function() {                                                                                    // 6079
        return this.document;                                                                                          // 6080
    };                                                                                                                 // 6081
    this.$insertRight = false;                                                                                         // 6082
    this.onChange = function(delta) {                                                                                  // 6083
        if (delta.start.row == delta.end.row && delta.start.row != this.row)                                           // 6084
            return;                                                                                                    // 6085
                                                                                                                       // 6086
        if (delta.start.row > this.row)                                                                                // 6087
            return;                                                                                                    // 6088
                                                                                                                       // 6089
        var point = $getTransformedPoint(delta, {row: this.row, column: this.column}, this.$insertRight);              // 6090
        this.setPosition(point.row, point.column, true);                                                               // 6091
    };                                                                                                                 // 6092
                                                                                                                       // 6093
    function $pointsInOrder(point1, point2, equalPointsInOrder) {                                                      // 6094
        var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;         // 6095
        return (point1.row < point2.row) || (point1.row == point2.row && bColIsAfter);                                 // 6096
    }                                                                                                                  // 6097
                                                                                                                       // 6098
    function $getTransformedPoint(delta, point, moveIfEqual) {                                                         // 6099
        var deltaIsInsert = delta.action == "insert";                                                                  // 6100
        var deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row    - delta.start.row);                           // 6101
        var deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column);                        // 6102
        var deltaStart = delta.start;                                                                                  // 6103
        var deltaEnd = deltaIsInsert ? deltaStart : delta.end; // Collapse insert range.                               // 6104
        if ($pointsInOrder(point, deltaStart, moveIfEqual)) {                                                          // 6105
            return {                                                                                                   // 6106
                row: point.row,                                                                                        // 6107
                column: point.column                                                                                   // 6108
            };                                                                                                         // 6109
        }                                                                                                              // 6110
        if ($pointsInOrder(deltaEnd, point, !moveIfEqual)) {                                                           // 6111
            return {                                                                                                   // 6112
                row: point.row + deltaRowShift,                                                                        // 6113
                column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)                                 // 6114
            };                                                                                                         // 6115
        }                                                                                                              // 6116
                                                                                                                       // 6117
        return {                                                                                                       // 6118
            row: deltaStart.row,                                                                                       // 6119
            column: deltaStart.column                                                                                  // 6120
        };                                                                                                             // 6121
    }                                                                                                                  // 6122
    this.setPosition = function(row, column, noClip) {                                                                 // 6123
        var pos;                                                                                                       // 6124
        if (noClip) {                                                                                                  // 6125
            pos = {                                                                                                    // 6126
                row: row,                                                                                              // 6127
                column: column                                                                                         // 6128
            };                                                                                                         // 6129
        } else {                                                                                                       // 6130
            pos = this.$clipPositionToDocument(row, column);                                                           // 6131
        }                                                                                                              // 6132
                                                                                                                       // 6133
        if (this.row == pos.row && this.column == pos.column)                                                          // 6134
            return;                                                                                                    // 6135
                                                                                                                       // 6136
        var old = {                                                                                                    // 6137
            row: this.row,                                                                                             // 6138
            column: this.column                                                                                        // 6139
        };                                                                                                             // 6140
                                                                                                                       // 6141
        this.row = pos.row;                                                                                            // 6142
        this.column = pos.column;                                                                                      // 6143
        this._signal("change", {                                                                                       // 6144
            old: old,                                                                                                  // 6145
            value: pos                                                                                                 // 6146
        });                                                                                                            // 6147
    };                                                                                                                 // 6148
    this.detach = function() {                                                                                         // 6149
        this.document.removeEventListener("change", this.$onChange);                                                   // 6150
    };                                                                                                                 // 6151
    this.attach = function(doc) {                                                                                      // 6152
        this.document = doc || this.document;                                                                          // 6153
        this.document.on("change", this.$onChange);                                                                    // 6154
    };                                                                                                                 // 6155
    this.$clipPositionToDocument = function(row, column) {                                                             // 6156
        var pos = {};                                                                                                  // 6157
                                                                                                                       // 6158
        if (row >= this.document.getLength()) {                                                                        // 6159
            pos.row = Math.max(0, this.document.getLength() - 1);                                                      // 6160
            pos.column = this.document.getLine(pos.row).length;                                                        // 6161
        }                                                                                                              // 6162
        else if (row < 0) {                                                                                            // 6163
            pos.row = 0;                                                                                               // 6164
            pos.column = 0;                                                                                            // 6165
        }                                                                                                              // 6166
        else {                                                                                                         // 6167
            pos.row = row;                                                                                             // 6168
            pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column));                         // 6169
        }                                                                                                              // 6170
                                                                                                                       // 6171
        if (column < 0)                                                                                                // 6172
            pos.column = 0;                                                                                            // 6173
                                                                                                                       // 6174
        return pos;                                                                                                    // 6175
    };                                                                                                                 // 6176
                                                                                                                       // 6177
}).call(Anchor.prototype);                                                                                             // 6178
                                                                                                                       // 6179
});                                                                                                                    // 6180
                                                                                                                       // 6181
define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"], function(require, exports, module) {
"use strict";                                                                                                          // 6183
                                                                                                                       // 6184
var oop = require("./lib/oop");                                                                                        // 6185
var applyDelta = require("./apply_delta").applyDelta;                                                                  // 6186
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 6187
var Range = require("./range").Range;                                                                                  // 6188
var Anchor = require("./anchor").Anchor;                                                                               // 6189
                                                                                                                       // 6190
var Document = function(textOrLines) {                                                                                 // 6191
    this.$lines = [""];                                                                                                // 6192
    if (textOrLines.length === 0) {                                                                                    // 6193
        this.$lines = [""];                                                                                            // 6194
    } else if (Array.isArray(textOrLines)) {                                                                           // 6195
        this.insertMergedLines({row: 0, column: 0}, textOrLines);                                                      // 6196
    } else {                                                                                                           // 6197
        this.insert({row: 0, column:0}, textOrLines);                                                                  // 6198
    }                                                                                                                  // 6199
};                                                                                                                     // 6200
                                                                                                                       // 6201
(function() {                                                                                                          // 6202
                                                                                                                       // 6203
    oop.implement(this, EventEmitter);                                                                                 // 6204
    this.setValue = function(text) {                                                                                   // 6205
        var len = this.getLength() - 1;                                                                                // 6206
        this.remove(new Range(0, 0, len, this.getLine(len).length));                                                   // 6207
        this.insert({row: 0, column: 0}, text);                                                                        // 6208
    };                                                                                                                 // 6209
    this.getValue = function() {                                                                                       // 6210
        return this.getAllLines().join(this.getNewLineCharacter());                                                    // 6211
    };                                                                                                                 // 6212
    this.createAnchor = function(row, column) {                                                                        // 6213
        return new Anchor(this, row, column);                                                                          // 6214
    };                                                                                                                 // 6215
    if ("aaa".split(/a/).length === 0) {                                                                               // 6216
        this.$split = function(text) {                                                                                 // 6217
            return text.replace(/\r\n|\r/g, "\n").split("\n");                                                         // 6218
        };                                                                                                             // 6219
    } else {                                                                                                           // 6220
        this.$split = function(text) {                                                                                 // 6221
            return text.split(/\r\n|\r|\n/);                                                                           // 6222
        };                                                                                                             // 6223
    }                                                                                                                  // 6224
                                                                                                                       // 6225
                                                                                                                       // 6226
    this.$detectNewLine = function(text) {                                                                             // 6227
        var match = text.match(/^.*?(\r\n|\r|\n)/m);                                                                   // 6228
        this.$autoNewLine = match ? match[1] : "\n";                                                                   // 6229
        this._signal("changeNewLineMode");                                                                             // 6230
    };                                                                                                                 // 6231
    this.getNewLineCharacter = function() {                                                                            // 6232
        switch (this.$newLineMode) {                                                                                   // 6233
          case "windows":                                                                                              // 6234
            return "\r\n";                                                                                             // 6235
          case "unix":                                                                                                 // 6236
            return "\n";                                                                                               // 6237
          default:                                                                                                     // 6238
            return this.$autoNewLine || "\n";                                                                          // 6239
        }                                                                                                              // 6240
    };                                                                                                                 // 6241
                                                                                                                       // 6242
    this.$autoNewLine = "";                                                                                            // 6243
    this.$newLineMode = "auto";                                                                                        // 6244
    this.setNewLineMode = function(newLineMode) {                                                                      // 6245
        if (this.$newLineMode === newLineMode)                                                                         // 6246
            return;                                                                                                    // 6247
                                                                                                                       // 6248
        this.$newLineMode = newLineMode;                                                                               // 6249
        this._signal("changeNewLineMode");                                                                             // 6250
    };                                                                                                                 // 6251
    this.getNewLineMode = function() {                                                                                 // 6252
        return this.$newLineMode;                                                                                      // 6253
    };                                                                                                                 // 6254
    this.isNewLine = function(text) {                                                                                  // 6255
        return (text == "\r\n" || text == "\r" || text == "\n");                                                       // 6256
    };                                                                                                                 // 6257
    this.getLine = function(row) {                                                                                     // 6258
        return this.$lines[row] || "";                                                                                 // 6259
    };                                                                                                                 // 6260
    this.getLines = function(firstRow, lastRow) {                                                                      // 6261
        return this.$lines.slice(firstRow, lastRow + 1);                                                               // 6262
    };                                                                                                                 // 6263
    this.getAllLines = function() {                                                                                    // 6264
        return this.getLines(0, this.getLength());                                                                     // 6265
    };                                                                                                                 // 6266
    this.getLength = function() {                                                                                      // 6267
        return this.$lines.length;                                                                                     // 6268
    };                                                                                                                 // 6269
    this.getTextRange = function(range) {                                                                              // 6270
        return this.getLinesForRange(range).join(this.getNewLineCharacter());                                          // 6271
    };                                                                                                                 // 6272
    this.getLinesForRange = function(range) {                                                                          // 6273
        var lines;                                                                                                     // 6274
        if (range.start.row === range.end.row) {                                                                       // 6275
            lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];                   // 6276
        } else {                                                                                                       // 6277
            lines = this.getLines(range.start.row, range.end.row);                                                     // 6278
            lines[0] = (lines[0] || "").substring(range.start.column);                                                 // 6279
            var l = lines.length - 1;                                                                                  // 6280
            if (range.end.row - range.start.row == l)                                                                  // 6281
                lines[l] = lines[l].substring(0, range.end.column);                                                    // 6282
        }                                                                                                              // 6283
        return lines;                                                                                                  // 6284
    };                                                                                                                 // 6285
    this.insertLines = function(row, lines) {                                                                          // 6286
        console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead.");            // 6287
        return this.insertFullLines(row, lines);                                                                       // 6288
    };                                                                                                                 // 6289
    this.removeLines = function(firstRow, lastRow) {                                                                   // 6290
        console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead.");            // 6291
        return this.removeFullLines(firstRow, lastRow);                                                                // 6292
    };                                                                                                                 // 6293
    this.insertNewLine = function(position) {                                                                          // 6294
        console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead.");
        return this.insertMergedLines(position, ["", ""]);                                                             // 6296
    };                                                                                                                 // 6297
    this.insert = function(position, text) {                                                                           // 6298
        if (this.getLength() <= 1)                                                                                     // 6299
            this.$detectNewLine(text);                                                                                 // 6300
                                                                                                                       // 6301
        return this.insertMergedLines(position, this.$split(text));                                                    // 6302
    };                                                                                                                 // 6303
    this.insertInLine = function(position, text) {                                                                     // 6304
        var start = this.clippedPos(position.row, position.column);                                                    // 6305
        var end = this.pos(position.row, position.column + text.length);                                               // 6306
                                                                                                                       // 6307
        this.applyDelta({                                                                                              // 6308
            start: start,                                                                                              // 6309
            end: end,                                                                                                  // 6310
            action: "insert",                                                                                          // 6311
            lines: [text]                                                                                              // 6312
        }, true);                                                                                                      // 6313
                                                                                                                       // 6314
        return this.clonePos(end);                                                                                     // 6315
    };                                                                                                                 // 6316
                                                                                                                       // 6317
    this.clippedPos = function(row, column) {                                                                          // 6318
        var length = this.getLength();                                                                                 // 6319
        if (row === undefined) {                                                                                       // 6320
            row = length;                                                                                              // 6321
        } else if (row < 0) {                                                                                          // 6322
            row = 0;                                                                                                   // 6323
        } else if (row >= length) {                                                                                    // 6324
            row = length - 1;                                                                                          // 6325
            column = undefined;                                                                                        // 6326
        }                                                                                                              // 6327
        var line = this.getLine(row);                                                                                  // 6328
        if (column == undefined)                                                                                       // 6329
            column = line.length;                                                                                      // 6330
        column = Math.min(Math.max(column, 0), line.length);                                                           // 6331
        return {row: row, column: column};                                                                             // 6332
    };                                                                                                                 // 6333
                                                                                                                       // 6334
    this.clonePos = function(pos) {                                                                                    // 6335
        return {row: pos.row, column: pos.column};                                                                     // 6336
    };                                                                                                                 // 6337
                                                                                                                       // 6338
    this.pos = function(row, column) {                                                                                 // 6339
        return {row: row, column: column};                                                                             // 6340
    };                                                                                                                 // 6341
                                                                                                                       // 6342
    this.$clipPosition = function(position) {                                                                          // 6343
        var length = this.getLength();                                                                                 // 6344
        if (position.row >= length) {                                                                                  // 6345
            position.row = Math.max(0, length - 1);                                                                    // 6346
            position.column = this.getLine(length - 1).length;                                                         // 6347
        } else {                                                                                                       // 6348
            position.row = Math.max(0, position.row);                                                                  // 6349
            position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length);               // 6350
        }                                                                                                              // 6351
        return position;                                                                                               // 6352
    };                                                                                                                 // 6353
    this.insertFullLines = function(row, lines) {                                                                      // 6354
        row = Math.min(Math.max(row, 0), this.getLength());                                                            // 6355
        var column = 0;                                                                                                // 6356
        if (row < this.getLength()) {                                                                                  // 6357
            lines = lines.concat([""]);                                                                                // 6358
            column = 0;                                                                                                // 6359
        } else {                                                                                                       // 6360
            lines = [""].concat(lines);                                                                                // 6361
            row--;                                                                                                     // 6362
            column = this.$lines[row].length;                                                                          // 6363
        }                                                                                                              // 6364
        this.insertMergedLines({row: row, column: column}, lines);                                                     // 6365
    };                                                                                                                 // 6366
    this.insertMergedLines = function(position, lines) {                                                               // 6367
        var start = this.clippedPos(position.row, position.column);                                                    // 6368
        var end = {                                                                                                    // 6369
            row: start.row + lines.length - 1,                                                                         // 6370
            column: (lines.length == 1 ? start.column : 0) + lines[lines.length - 1].length                            // 6371
        };                                                                                                             // 6372
                                                                                                                       // 6373
        this.applyDelta({                                                                                              // 6374
            start: start,                                                                                              // 6375
            end: end,                                                                                                  // 6376
            action: "insert",                                                                                          // 6377
            lines: lines                                                                                               // 6378
        });                                                                                                            // 6379
                                                                                                                       // 6380
        return this.clonePos(end);                                                                                     // 6381
    };                                                                                                                 // 6382
    this.remove = function(range) {                                                                                    // 6383
        var start = this.clippedPos(range.start.row, range.start.column);                                              // 6384
        var end = this.clippedPos(range.end.row, range.end.column);                                                    // 6385
        this.applyDelta({                                                                                              // 6386
            start: start,                                                                                              // 6387
            end: end,                                                                                                  // 6388
            action: "remove",                                                                                          // 6389
            lines: this.getLinesForRange({start: start, end: end})                                                     // 6390
        });                                                                                                            // 6391
        return this.clonePos(start);                                                                                   // 6392
    };                                                                                                                 // 6393
    this.removeInLine = function(row, startColumn, endColumn) {                                                        // 6394
        var start = this.clippedPos(row, startColumn);                                                                 // 6395
        var end = this.clippedPos(row, endColumn);                                                                     // 6396
                                                                                                                       // 6397
        this.applyDelta({                                                                                              // 6398
            start: start,                                                                                              // 6399
            end: end,                                                                                                  // 6400
            action: "remove",                                                                                          // 6401
            lines: this.getLinesForRange({start: start, end: end})                                                     // 6402
        }, true);                                                                                                      // 6403
                                                                                                                       // 6404
        return this.clonePos(start);                                                                                   // 6405
    };                                                                                                                 // 6406
    this.removeFullLines = function(firstRow, lastRow) {                                                               // 6407
        firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1);                                              // 6408
        lastRow  = Math.min(Math.max(0, lastRow ), this.getLength() - 1);                                              // 6409
        var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0;                                      // 6410
        var deleteLastNewLine  = lastRow  < this.getLength() - 1;                                                      // 6411
        var startRow = ( deleteFirstNewLine ? firstRow - 1                  : firstRow                    );           // 6412
        var startCol = ( deleteFirstNewLine ? this.getLine(startRow).length : 0                           );           // 6413
        var endRow   = ( deleteLastNewLine  ? lastRow + 1                   : lastRow                     );           // 6414
        var endCol   = ( deleteLastNewLine  ? 0                             : this.getLine(endRow).length );           // 6415
        var range = new Range(startRow, startCol, endRow, endCol);                                                     // 6416
        var deletedLines = this.$lines.slice(firstRow, lastRow + 1);                                                   // 6417
                                                                                                                       // 6418
        this.applyDelta({                                                                                              // 6419
            start: range.start,                                                                                        // 6420
            end: range.end,                                                                                            // 6421
            action: "remove",                                                                                          // 6422
            lines: this.getLinesForRange(range)                                                                        // 6423
        });                                                                                                            // 6424
        return deletedLines;                                                                                           // 6425
    };                                                                                                                 // 6426
    this.removeNewLine = function(row) {                                                                               // 6427
        if (row < this.getLength() - 1 && row >= 0) {                                                                  // 6428
            this.applyDelta({                                                                                          // 6429
                start: this.pos(row, this.getLine(row).length),                                                        // 6430
                end: this.pos(row + 1, 0),                                                                             // 6431
                action: "remove",                                                                                      // 6432
                lines: ["", ""]                                                                                        // 6433
            });                                                                                                        // 6434
        }                                                                                                              // 6435
    };                                                                                                                 // 6436
    this.replace = function(range, text) {                                                                             // 6437
        if (!range instanceof Range)                                                                                   // 6438
            range = Range.fromPoints(range.start, range.end);                                                          // 6439
        if (text.length === 0 && range.isEmpty())                                                                      // 6440
            return range.start;                                                                                        // 6441
        if (text == this.getTextRange(range))                                                                          // 6442
            return range.end;                                                                                          // 6443
                                                                                                                       // 6444
        this.remove(range);                                                                                            // 6445
        var end;                                                                                                       // 6446
        if (text) {                                                                                                    // 6447
            end = this.insert(range.start, text);                                                                      // 6448
        }                                                                                                              // 6449
        else {                                                                                                         // 6450
            end = range.start;                                                                                         // 6451
        }                                                                                                              // 6452
                                                                                                                       // 6453
        return end;                                                                                                    // 6454
    };                                                                                                                 // 6455
    this.applyDeltas = function(deltas) {                                                                              // 6456
        for (var i=0; i<deltas.length; i++) {                                                                          // 6457
            this.applyDelta(deltas[i]);                                                                                // 6458
        }                                                                                                              // 6459
    };                                                                                                                 // 6460
    this.revertDeltas = function(deltas) {                                                                             // 6461
        for (var i=deltas.length-1; i>=0; i--) {                                                                       // 6462
            this.revertDelta(deltas[i]);                                                                               // 6463
        }                                                                                                              // 6464
    };                                                                                                                 // 6465
    this.applyDelta = function(delta, doNotValidate) {                                                                 // 6466
        var isInsert = delta.action == "insert";                                                                       // 6467
        if (isInsert ? delta.lines.length <= 1 && !delta.lines[0]                                                      // 6468
            : !Range.comparePoints(delta.start, delta.end)) {                                                          // 6469
            return;                                                                                                    // 6470
        }                                                                                                              // 6471
                                                                                                                       // 6472
        if (isInsert && delta.lines.length > 20000)                                                                    // 6473
            this.$splitAndapplyLargeDelta(delta, 20000);                                                               // 6474
        applyDelta(this.$lines, delta, doNotValidate);                                                                 // 6475
        this._signal("change", delta);                                                                                 // 6476
    };                                                                                                                 // 6477
                                                                                                                       // 6478
    this.$splitAndapplyLargeDelta = function(delta, MAX) {                                                             // 6479
        var lines = delta.lines;                                                                                       // 6480
        var l = lines.length;                                                                                          // 6481
        var row = delta.start.row;                                                                                     // 6482
        var column = delta.start.column;                                                                               // 6483
        var from = 0, to = 0;                                                                                          // 6484
        do {                                                                                                           // 6485
            from = to;                                                                                                 // 6486
            to += MAX - 1;                                                                                             // 6487
            var chunk = lines.slice(from, to);                                                                         // 6488
            if (to > l) {                                                                                              // 6489
                delta.lines = chunk;                                                                                   // 6490
                delta.start.row = row + from;                                                                          // 6491
                delta.start.column = column;                                                                           // 6492
                break;                                                                                                 // 6493
            }                                                                                                          // 6494
            chunk.push("");                                                                                            // 6495
            this.applyDelta({                                                                                          // 6496
                start: this.pos(row + from, column),                                                                   // 6497
                end: this.pos(row + to, column = 0),                                                                   // 6498
                action: delta.action,                                                                                  // 6499
                lines: chunk                                                                                           // 6500
            }, true);                                                                                                  // 6501
        } while(true);                                                                                                 // 6502
    };                                                                                                                 // 6503
    this.revertDelta = function(delta) {                                                                               // 6504
        this.applyDelta({                                                                                              // 6505
            start: this.clonePos(delta.start),                                                                         // 6506
            end: this.clonePos(delta.end),                                                                             // 6507
            action: (delta.action == "insert" ? "remove" : "insert"),                                                  // 6508
            lines: delta.lines.slice()                                                                                 // 6509
        });                                                                                                            // 6510
    };                                                                                                                 // 6511
    this.indexToPosition = function(index, startRow) {                                                                 // 6512
        var lines = this.$lines || this.getAllLines();                                                                 // 6513
        var newlineLength = this.getNewLineCharacter().length;                                                         // 6514
        for (var i = startRow || 0, l = lines.length; i < l; i++) {                                                    // 6515
            index -= lines[i].length + newlineLength;                                                                  // 6516
            if (index < 0)                                                                                             // 6517
                return {row: i, column: index + lines[i].length + newlineLength};                                      // 6518
        }                                                                                                              // 6519
        return {row: l-1, column: lines[l-1].length};                                                                  // 6520
    };                                                                                                                 // 6521
    this.positionToIndex = function(pos, startRow) {                                                                   // 6522
        var lines = this.$lines || this.getAllLines();                                                                 // 6523
        var newlineLength = this.getNewLineCharacter().length;                                                         // 6524
        var index = 0;                                                                                                 // 6525
        var row = Math.min(pos.row, lines.length);                                                                     // 6526
        for (var i = startRow || 0; i < row; ++i)                                                                      // 6527
            index += lines[i].length + newlineLength;                                                                  // 6528
                                                                                                                       // 6529
        return index + pos.column;                                                                                     // 6530
    };                                                                                                                 // 6531
                                                                                                                       // 6532
}).call(Document.prototype);                                                                                           // 6533
                                                                                                                       // 6534
exports.Document = Document;                                                                                           // 6535
});                                                                                                                    // 6536
                                                                                                                       // 6537
define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"], function(require, exports, module) {
"use strict";                                                                                                          // 6539
                                                                                                                       // 6540
var oop = require("./lib/oop");                                                                                        // 6541
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 6542
                                                                                                                       // 6543
var BackgroundTokenizer = function(tokenizer, editor) {                                                                // 6544
    this.running = false;                                                                                              // 6545
    this.lines = [];                                                                                                   // 6546
    this.states = [];                                                                                                  // 6547
    this.currentLine = 0;                                                                                              // 6548
    this.tokenizer = tokenizer;                                                                                        // 6549
                                                                                                                       // 6550
    var self = this;                                                                                                   // 6551
                                                                                                                       // 6552
    this.$worker = function() {                                                                                        // 6553
        if (!self.running) { return; }                                                                                 // 6554
                                                                                                                       // 6555
        var workerStart = new Date();                                                                                  // 6556
        var currentLine = self.currentLine;                                                                            // 6557
        var endLine = -1;                                                                                              // 6558
        var doc = self.doc;                                                                                            // 6559
                                                                                                                       // 6560
        var startLine = currentLine;                                                                                   // 6561
        while (self.lines[currentLine])                                                                                // 6562
            currentLine++;                                                                                             // 6563
                                                                                                                       // 6564
        var len = doc.getLength();                                                                                     // 6565
        var processedLines = 0;                                                                                        // 6566
        self.running = false;                                                                                          // 6567
        while (currentLine < len) {                                                                                    // 6568
            self.$tokenizeRow(currentLine);                                                                            // 6569
            endLine = currentLine;                                                                                     // 6570
            do {                                                                                                       // 6571
                currentLine++;                                                                                         // 6572
            } while (self.lines[currentLine]);                                                                         // 6573
            processedLines ++;                                                                                         // 6574
            if ((processedLines % 5 === 0) && (new Date() - workerStart) > 20) {                                       // 6575
                self.running = setTimeout(self.$worker, 20);                                                           // 6576
                break;                                                                                                 // 6577
            }                                                                                                          // 6578
        }                                                                                                              // 6579
        self.currentLine = currentLine;                                                                                // 6580
                                                                                                                       // 6581
        if (startLine <= endLine)                                                                                      // 6582
            self.fireUpdateEvent(startLine, endLine);                                                                  // 6583
    };                                                                                                                 // 6584
};                                                                                                                     // 6585
                                                                                                                       // 6586
(function(){                                                                                                           // 6587
                                                                                                                       // 6588
    oop.implement(this, EventEmitter);                                                                                 // 6589
    this.setTokenizer = function(tokenizer) {                                                                          // 6590
        this.tokenizer = tokenizer;                                                                                    // 6591
        this.lines = [];                                                                                               // 6592
        this.states = [];                                                                                              // 6593
                                                                                                                       // 6594
        this.start(0);                                                                                                 // 6595
    };                                                                                                                 // 6596
    this.setDocument = function(doc) {                                                                                 // 6597
        this.doc = doc;                                                                                                // 6598
        this.lines = [];                                                                                               // 6599
        this.states = [];                                                                                              // 6600
                                                                                                                       // 6601
        this.stop();                                                                                                   // 6602
    };                                                                                                                 // 6603
    this.fireUpdateEvent = function(firstRow, lastRow) {                                                               // 6604
        var data = {                                                                                                   // 6605
            first: firstRow,                                                                                           // 6606
            last: lastRow                                                                                              // 6607
        };                                                                                                             // 6608
        this._signal("update", {data: data});                                                                          // 6609
    };                                                                                                                 // 6610
    this.start = function(startRow) {                                                                                  // 6611
        this.currentLine = Math.min(startRow || 0, this.currentLine, this.doc.getLength());                            // 6612
        this.lines.splice(this.currentLine, this.lines.length);                                                        // 6613
        this.states.splice(this.currentLine, this.states.length);                                                      // 6614
                                                                                                                       // 6615
        this.stop();                                                                                                   // 6616
        this.running = setTimeout(this.$worker, 700);                                                                  // 6617
    };                                                                                                                 // 6618
                                                                                                                       // 6619
    this.scheduleStart = function() {                                                                                  // 6620
        if (!this.running)                                                                                             // 6621
            this.running = setTimeout(this.$worker, 700);                                                              // 6622
    }                                                                                                                  // 6623
                                                                                                                       // 6624
    this.$updateOnChange = function(delta) {                                                                           // 6625
        var startRow = delta.start.row;                                                                                // 6626
        var len = delta.end.row - startRow;                                                                            // 6627
                                                                                                                       // 6628
        if (len === 0) {                                                                                               // 6629
            this.lines[startRow] = null;                                                                               // 6630
        } else if (delta.action == "remove") {                                                                         // 6631
            this.lines.splice(startRow, len + 1, null);                                                                // 6632
            this.states.splice(startRow, len + 1, null);                                                               // 6633
        } else {                                                                                                       // 6634
            var args = Array(len + 1);                                                                                 // 6635
            args.unshift(startRow, 1);                                                                                 // 6636
            this.lines.splice.apply(this.lines, args);                                                                 // 6637
            this.states.splice.apply(this.states, args);                                                               // 6638
        }                                                                                                              // 6639
                                                                                                                       // 6640
        this.currentLine = Math.min(startRow, this.currentLine, this.doc.getLength());                                 // 6641
                                                                                                                       // 6642
        this.stop();                                                                                                   // 6643
    };                                                                                                                 // 6644
    this.stop = function() {                                                                                           // 6645
        if (this.running)                                                                                              // 6646
            clearTimeout(this.running);                                                                                // 6647
        this.running = false;                                                                                          // 6648
    };                                                                                                                 // 6649
    this.getTokens = function(row) {                                                                                   // 6650
        return this.lines[row] || this.$tokenizeRow(row);                                                              // 6651
    };                                                                                                                 // 6652
    this.getState = function(row) {                                                                                    // 6653
        if (this.currentLine == row)                                                                                   // 6654
            this.$tokenizeRow(row);                                                                                    // 6655
        return this.states[row] || "start";                                                                            // 6656
    };                                                                                                                 // 6657
                                                                                                                       // 6658
    this.$tokenizeRow = function(row) {                                                                                // 6659
        var line = this.doc.getLine(row);                                                                              // 6660
        var state = this.states[row - 1];                                                                              // 6661
                                                                                                                       // 6662
        var data = this.tokenizer.getLineTokens(line, state, row);                                                     // 6663
                                                                                                                       // 6664
        if (this.states[row] + "" !== data.state + "") {                                                               // 6665
            this.states[row] = data.state;                                                                             // 6666
            this.lines[row + 1] = null;                                                                                // 6667
            if (this.currentLine > row + 1)                                                                            // 6668
                this.currentLine = row + 1;                                                                            // 6669
        } else if (this.currentLine == row) {                                                                          // 6670
            this.currentLine = row + 1;                                                                                // 6671
        }                                                                                                              // 6672
                                                                                                                       // 6673
        return this.lines[row] = data.tokens;                                                                          // 6674
    };                                                                                                                 // 6675
                                                                                                                       // 6676
}).call(BackgroundTokenizer.prototype);                                                                                // 6677
                                                                                                                       // 6678
exports.BackgroundTokenizer = BackgroundTokenizer;                                                                     // 6679
});                                                                                                                    // 6680
                                                                                                                       // 6681
define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 6683
                                                                                                                       // 6684
var lang = require("./lib/lang");                                                                                      // 6685
var oop = require("./lib/oop");                                                                                        // 6686
var Range = require("./range").Range;                                                                                  // 6687
                                                                                                                       // 6688
var SearchHighlight = function(regExp, clazz, type) {                                                                  // 6689
    this.setRegexp(regExp);                                                                                            // 6690
    this.clazz = clazz;                                                                                                // 6691
    this.type = type || "text";                                                                                        // 6692
};                                                                                                                     // 6693
                                                                                                                       // 6694
(function() {                                                                                                          // 6695
    this.MAX_RANGES = 500;                                                                                             // 6696
                                                                                                                       // 6697
    this.setRegexp = function(regExp) {                                                                                // 6698
        if (this.regExp+"" == regExp+"")                                                                               // 6699
            return;                                                                                                    // 6700
        this.regExp = regExp;                                                                                          // 6701
        this.cache = [];                                                                                               // 6702
    };                                                                                                                 // 6703
                                                                                                                       // 6704
    this.update = function(html, markerLayer, session, config) {                                                       // 6705
        if (!this.regExp)                                                                                              // 6706
            return;                                                                                                    // 6707
        var start = config.firstRow, end = config.lastRow;                                                             // 6708
                                                                                                                       // 6709
        for (var i = start; i <= end; i++) {                                                                           // 6710
            var ranges = this.cache[i];                                                                                // 6711
            if (ranges == null) {                                                                                      // 6712
                ranges = lang.getMatchOffsets(session.getLine(i), this.regExp);                                        // 6713
                if (ranges.length > this.MAX_RANGES)                                                                   // 6714
                    ranges = ranges.slice(0, this.MAX_RANGES);                                                         // 6715
                ranges = ranges.map(function(match) {                                                                  // 6716
                    return new Range(i, match.offset, i, match.offset + match.length);                                 // 6717
                });                                                                                                    // 6718
                this.cache[i] = ranges.length ? ranges : "";                                                           // 6719
            }                                                                                                          // 6720
                                                                                                                       // 6721
            for (var j = ranges.length; j --; ) {                                                                      // 6722
                markerLayer.drawSingleLineMarker(                                                                      // 6723
                    html, ranges[j].toScreenRange(session), this.clazz, config);                                       // 6724
            }                                                                                                          // 6725
        }                                                                                                              // 6726
    };                                                                                                                 // 6727
                                                                                                                       // 6728
}).call(SearchHighlight.prototype);                                                                                    // 6729
                                                                                                                       // 6730
exports.SearchHighlight = SearchHighlight;                                                                             // 6731
});                                                                                                                    // 6732
                                                                                                                       // 6733
define("ace/edit_session/fold_line",["require","exports","module","ace/range"], function(require, exports, module) {   // 6734
"use strict";                                                                                                          // 6735
                                                                                                                       // 6736
var Range = require("../range").Range;                                                                                 // 6737
function FoldLine(foldData, folds) {                                                                                   // 6738
    this.foldData = foldData;                                                                                          // 6739
    if (Array.isArray(folds)) {                                                                                        // 6740
        this.folds = folds;                                                                                            // 6741
    } else {                                                                                                           // 6742
        folds = this.folds = [ folds ];                                                                                // 6743
    }                                                                                                                  // 6744
                                                                                                                       // 6745
    var last = folds[folds.length - 1];                                                                                // 6746
    this.range = new Range(folds[0].start.row, folds[0].start.column,                                                  // 6747
                           last.end.row, last.end.column);                                                             // 6748
    this.start = this.range.start;                                                                                     // 6749
    this.end   = this.range.end;                                                                                       // 6750
                                                                                                                       // 6751
    this.folds.forEach(function(fold) {                                                                                // 6752
        fold.setFoldLine(this);                                                                                        // 6753
    }, this);                                                                                                          // 6754
}                                                                                                                      // 6755
                                                                                                                       // 6756
(function() {                                                                                                          // 6757
    this.shiftRow = function(shift) {                                                                                  // 6758
        this.start.row += shift;                                                                                       // 6759
        this.end.row += shift;                                                                                         // 6760
        this.folds.forEach(function(fold) {                                                                            // 6761
            fold.start.row += shift;                                                                                   // 6762
            fold.end.row += shift;                                                                                     // 6763
        });                                                                                                            // 6764
    };                                                                                                                 // 6765
                                                                                                                       // 6766
    this.addFold = function(fold) {                                                                                    // 6767
        if (fold.sameRow) {                                                                                            // 6768
            if (fold.start.row < this.startRow || fold.endRow > this.endRow) {                                         // 6769
                throw new Error("Can't add a fold to this FoldLine as it has no connection");                          // 6770
            }                                                                                                          // 6771
            this.folds.push(fold);                                                                                     // 6772
            this.folds.sort(function(a, b) {                                                                           // 6773
                return -a.range.compareEnd(b.start.row, b.start.column);                                               // 6774
            });                                                                                                        // 6775
            if (this.range.compareEnd(fold.start.row, fold.start.column) > 0) {                                        // 6776
                this.end.row = fold.end.row;                                                                           // 6777
                this.end.column =  fold.end.column;                                                                    // 6778
            } else if (this.range.compareStart(fold.end.row, fold.end.column) < 0) {                                   // 6779
                this.start.row = fold.start.row;                                                                       // 6780
                this.start.column = fold.start.column;                                                                 // 6781
            }                                                                                                          // 6782
        } else if (fold.start.row == this.end.row) {                                                                   // 6783
            this.folds.push(fold);                                                                                     // 6784
            this.end.row = fold.end.row;                                                                               // 6785
            this.end.column = fold.end.column;                                                                         // 6786
        } else if (fold.end.row == this.start.row) {                                                                   // 6787
            this.folds.unshift(fold);                                                                                  // 6788
            this.start.row = fold.start.row;                                                                           // 6789
            this.start.column = fold.start.column;                                                                     // 6790
        } else {                                                                                                       // 6791
            throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");                         // 6792
        }                                                                                                              // 6793
        fold.foldLine = this;                                                                                          // 6794
    };                                                                                                                 // 6795
                                                                                                                       // 6796
    this.containsRow = function(row) {                                                                                 // 6797
        return row >= this.start.row && row <= this.end.row;                                                           // 6798
    };                                                                                                                 // 6799
                                                                                                                       // 6800
    this.walk = function(callback, endRow, endColumn) {                                                                // 6801
        var lastEnd = 0,                                                                                               // 6802
            folds = this.folds,                                                                                        // 6803
            fold,                                                                                                      // 6804
            cmp, stop, isNewRow = true;                                                                                // 6805
                                                                                                                       // 6806
        if (endRow == null) {                                                                                          // 6807
            endRow = this.end.row;                                                                                     // 6808
            endColumn = this.end.column;                                                                               // 6809
        }                                                                                                              // 6810
                                                                                                                       // 6811
        for (var i = 0; i < folds.length; i++) {                                                                       // 6812
            fold = folds[i];                                                                                           // 6813
                                                                                                                       // 6814
            cmp = fold.range.compareStart(endRow, endColumn);                                                          // 6815
            if (cmp == -1) {                                                                                           // 6816
                callback(null, endRow, endColumn, lastEnd, isNewRow);                                                  // 6817
                return;                                                                                                // 6818
            }                                                                                                          // 6819
                                                                                                                       // 6820
            stop = callback(null, fold.start.row, fold.start.column, lastEnd, isNewRow);                               // 6821
            stop = !stop && callback(fold.placeholder, fold.start.row, fold.start.column, lastEnd);                    // 6822
            if (stop || cmp === 0) {                                                                                   // 6823
                return;                                                                                                // 6824
            }                                                                                                          // 6825
            isNewRow = !fold.sameRow;                                                                                  // 6826
            lastEnd = fold.end.column;                                                                                 // 6827
        }                                                                                                              // 6828
        callback(null, endRow, endColumn, lastEnd, isNewRow);                                                          // 6829
    };                                                                                                                 // 6830
                                                                                                                       // 6831
    this.getNextFoldTo = function(row, column) {                                                                       // 6832
        var fold, cmp;                                                                                                 // 6833
        for (var i = 0; i < this.folds.length; i++) {                                                                  // 6834
            fold = this.folds[i];                                                                                      // 6835
            cmp = fold.range.compareEnd(row, column);                                                                  // 6836
            if (cmp == -1) {                                                                                           // 6837
                return {                                                                                               // 6838
                    fold: fold,                                                                                        // 6839
                    kind: "after"                                                                                      // 6840
                };                                                                                                     // 6841
            } else if (cmp === 0) {                                                                                    // 6842
                return {                                                                                               // 6843
                    fold: fold,                                                                                        // 6844
                    kind: "inside"                                                                                     // 6845
                };                                                                                                     // 6846
            }                                                                                                          // 6847
        }                                                                                                              // 6848
        return null;                                                                                                   // 6849
    };                                                                                                                 // 6850
                                                                                                                       // 6851
    this.addRemoveChars = function(row, column, len) {                                                                 // 6852
        var ret = this.getNextFoldTo(row, column),                                                                     // 6853
            fold, folds;                                                                                               // 6854
        if (ret) {                                                                                                     // 6855
            fold = ret.fold;                                                                                           // 6856
            if (ret.kind == "inside"                                                                                   // 6857
                && fold.start.column != column                                                                         // 6858
                && fold.start.row != row)                                                                              // 6859
            {                                                                                                          // 6860
                window.console && window.console.log(row, column, fold);                                               // 6861
            } else if (fold.start.row == row) {                                                                        // 6862
                folds = this.folds;                                                                                    // 6863
                var i = folds.indexOf(fold);                                                                           // 6864
                if (i === 0) {                                                                                         // 6865
                    this.start.column += len;                                                                          // 6866
                }                                                                                                      // 6867
                for (i; i < folds.length; i++) {                                                                       // 6868
                    fold = folds[i];                                                                                   // 6869
                    fold.start.column += len;                                                                          // 6870
                    if (!fold.sameRow) {                                                                               // 6871
                        return;                                                                                        // 6872
                    }                                                                                                  // 6873
                    fold.end.column += len;                                                                            // 6874
                }                                                                                                      // 6875
                this.end.column += len;                                                                                // 6876
            }                                                                                                          // 6877
        }                                                                                                              // 6878
    };                                                                                                                 // 6879
                                                                                                                       // 6880
    this.split = function(row, column) {                                                                               // 6881
        var pos = this.getNextFoldTo(row, column);                                                                     // 6882
                                                                                                                       // 6883
        if (!pos || pos.kind == "inside")                                                                              // 6884
            return null;                                                                                               // 6885
                                                                                                                       // 6886
        var fold = pos.fold;                                                                                           // 6887
        var folds = this.folds;                                                                                        // 6888
        var foldData = this.foldData;                                                                                  // 6889
                                                                                                                       // 6890
        var i = folds.indexOf(fold);                                                                                   // 6891
        var foldBefore = folds[i - 1];                                                                                 // 6892
        this.end.row = foldBefore.end.row;                                                                             // 6893
        this.end.column = foldBefore.end.column;                                                                       // 6894
        folds = folds.splice(i, folds.length - i);                                                                     // 6895
                                                                                                                       // 6896
        var newFoldLine = new FoldLine(foldData, folds);                                                               // 6897
        foldData.splice(foldData.indexOf(this) + 1, 0, newFoldLine);                                                   // 6898
        return newFoldLine;                                                                                            // 6899
    };                                                                                                                 // 6900
                                                                                                                       // 6901
    this.merge = function(foldLineNext) {                                                                              // 6902
        var folds = foldLineNext.folds;                                                                                // 6903
        for (var i = 0; i < folds.length; i++) {                                                                       // 6904
            this.addFold(folds[i]);                                                                                    // 6905
        }                                                                                                              // 6906
        var foldData = this.foldData;                                                                                  // 6907
        foldData.splice(foldData.indexOf(foldLineNext), 1);                                                            // 6908
    };                                                                                                                 // 6909
                                                                                                                       // 6910
    this.toString = function() {                                                                                       // 6911
        var ret = [this.range.toString() + ": [" ];                                                                    // 6912
                                                                                                                       // 6913
        this.folds.forEach(function(fold) {                                                                            // 6914
            ret.push("  " + fold.toString());                                                                          // 6915
        });                                                                                                            // 6916
        ret.push("]");                                                                                                 // 6917
        return ret.join("\n");                                                                                         // 6918
    };                                                                                                                 // 6919
                                                                                                                       // 6920
    this.idxToPosition = function(idx) {                                                                               // 6921
        var lastFoldEndColumn = 0;                                                                                     // 6922
                                                                                                                       // 6923
        for (var i = 0; i < this.folds.length; i++) {                                                                  // 6924
            var fold = this.folds[i];                                                                                  // 6925
                                                                                                                       // 6926
            idx -= fold.start.column - lastFoldEndColumn;                                                              // 6927
            if (idx < 0) {                                                                                             // 6928
                return {                                                                                               // 6929
                    row: fold.start.row,                                                                               // 6930
                    column: fold.start.column + idx                                                                    // 6931
                };                                                                                                     // 6932
            }                                                                                                          // 6933
                                                                                                                       // 6934
            idx -= fold.placeholder.length;                                                                            // 6935
            if (idx < 0) {                                                                                             // 6936
                return fold.start;                                                                                     // 6937
            }                                                                                                          // 6938
                                                                                                                       // 6939
            lastFoldEndColumn = fold.end.column;                                                                       // 6940
        }                                                                                                              // 6941
                                                                                                                       // 6942
        return {                                                                                                       // 6943
            row: this.end.row,                                                                                         // 6944
            column: this.end.column + idx                                                                              // 6945
        };                                                                                                             // 6946
    };                                                                                                                 // 6947
}).call(FoldLine.prototype);                                                                                           // 6948
                                                                                                                       // 6949
exports.FoldLine = FoldLine;                                                                                           // 6950
});                                                                                                                    // 6951
                                                                                                                       // 6952
define("ace/range_list",["require","exports","module","ace/range"], function(require, exports, module) {               // 6953
"use strict";                                                                                                          // 6954
var Range = require("./range").Range;                                                                                  // 6955
var comparePoints = Range.comparePoints;                                                                               // 6956
                                                                                                                       // 6957
var RangeList = function() {                                                                                           // 6958
    this.ranges = [];                                                                                                  // 6959
};                                                                                                                     // 6960
                                                                                                                       // 6961
(function() {                                                                                                          // 6962
    this.comparePoints = comparePoints;                                                                                // 6963
                                                                                                                       // 6964
    this.pointIndex = function(pos, excludeEdges, startIndex) {                                                        // 6965
        var list = this.ranges;                                                                                        // 6966
                                                                                                                       // 6967
        for (var i = startIndex || 0; i < list.length; i++) {                                                          // 6968
            var range = list[i];                                                                                       // 6969
            var cmpEnd = comparePoints(pos, range.end);                                                                // 6970
            if (cmpEnd > 0)                                                                                            // 6971
                continue;                                                                                              // 6972
            var cmpStart = comparePoints(pos, range.start);                                                            // 6973
            if (cmpEnd === 0)                                                                                          // 6974
                return excludeEdges && cmpStart !== 0 ? -i-2 : i;                                                      // 6975
            if (cmpStart > 0 || (cmpStart === 0 && !excludeEdges))                                                     // 6976
                return i;                                                                                              // 6977
                                                                                                                       // 6978
            return -i-1;                                                                                               // 6979
        }                                                                                                              // 6980
        return -i - 1;                                                                                                 // 6981
    };                                                                                                                 // 6982
                                                                                                                       // 6983
    this.add = function(range) {                                                                                       // 6984
        var excludeEdges = !range.isEmpty();                                                                           // 6985
        var startIndex = this.pointIndex(range.start, excludeEdges);                                                   // 6986
        if (startIndex < 0)                                                                                            // 6987
            startIndex = -startIndex - 1;                                                                              // 6988
                                                                                                                       // 6989
        var endIndex = this.pointIndex(range.end, excludeEdges, startIndex);                                           // 6990
                                                                                                                       // 6991
        if (endIndex < 0)                                                                                              // 6992
            endIndex = -endIndex - 1;                                                                                  // 6993
        else                                                                                                           // 6994
            endIndex++;                                                                                                // 6995
        return this.ranges.splice(startIndex, endIndex - startIndex, range);                                           // 6996
    };                                                                                                                 // 6997
                                                                                                                       // 6998
    this.addList = function(list) {                                                                                    // 6999
        var removed = [];                                                                                              // 7000
        for (var i = list.length; i--; ) {                                                                             // 7001
            removed.push.call(removed, this.add(list[i]));                                                             // 7002
        }                                                                                                              // 7003
        return removed;                                                                                                // 7004
    };                                                                                                                 // 7005
                                                                                                                       // 7006
    this.substractPoint = function(pos) {                                                                              // 7007
        var i = this.pointIndex(pos);                                                                                  // 7008
                                                                                                                       // 7009
        if (i >= 0)                                                                                                    // 7010
            return this.ranges.splice(i, 1);                                                                           // 7011
    };                                                                                                                 // 7012
    this.merge = function() {                                                                                          // 7013
        var removed = [];                                                                                              // 7014
        var list = this.ranges;                                                                                        // 7015
                                                                                                                       // 7016
        list = list.sort(function(a, b) {                                                                              // 7017
            return comparePoints(a.start, b.start);                                                                    // 7018
        });                                                                                                            // 7019
                                                                                                                       // 7020
        var next = list[0], range;                                                                                     // 7021
        for (var i = 1; i < list.length; i++) {                                                                        // 7022
            range = next;                                                                                              // 7023
            next = list[i];                                                                                            // 7024
            var cmp = comparePoints(range.end, next.start);                                                            // 7025
            if (cmp < 0)                                                                                               // 7026
                continue;                                                                                              // 7027
                                                                                                                       // 7028
            if (cmp == 0 && !range.isEmpty() && !next.isEmpty())                                                       // 7029
                continue;                                                                                              // 7030
                                                                                                                       // 7031
            if (comparePoints(range.end, next.end) < 0) {                                                              // 7032
                range.end.row = next.end.row;                                                                          // 7033
                range.end.column = next.end.column;                                                                    // 7034
            }                                                                                                          // 7035
                                                                                                                       // 7036
            list.splice(i, 1);                                                                                         // 7037
            removed.push(next);                                                                                        // 7038
            next = range;                                                                                              // 7039
            i--;                                                                                                       // 7040
        }                                                                                                              // 7041
                                                                                                                       // 7042
        this.ranges = list;                                                                                            // 7043
                                                                                                                       // 7044
        return removed;                                                                                                // 7045
    };                                                                                                                 // 7046
                                                                                                                       // 7047
    this.contains = function(row, column) {                                                                            // 7048
        return this.pointIndex({row: row, column: column}) >= 0;                                                       // 7049
    };                                                                                                                 // 7050
                                                                                                                       // 7051
    this.containsPoint = function(pos) {                                                                               // 7052
        return this.pointIndex(pos) >= 0;                                                                              // 7053
    };                                                                                                                 // 7054
                                                                                                                       // 7055
    this.rangeAtPoint = function(pos) {                                                                                // 7056
        var i = this.pointIndex(pos);                                                                                  // 7057
        if (i >= 0)                                                                                                    // 7058
            return this.ranges[i];                                                                                     // 7059
    };                                                                                                                 // 7060
                                                                                                                       // 7061
                                                                                                                       // 7062
    this.clipRows = function(startRow, endRow) {                                                                       // 7063
        var list = this.ranges;                                                                                        // 7064
        if (list[0].start.row > endRow || list[list.length - 1].start.row < startRow)                                  // 7065
            return [];                                                                                                 // 7066
                                                                                                                       // 7067
        var startIndex = this.pointIndex({row: startRow, column: 0});                                                  // 7068
        if (startIndex < 0)                                                                                            // 7069
            startIndex = -startIndex - 1;                                                                              // 7070
        var endIndex = this.pointIndex({row: endRow, column: 0}, startIndex);                                          // 7071
        if (endIndex < 0)                                                                                              // 7072
            endIndex = -endIndex - 1;                                                                                  // 7073
                                                                                                                       // 7074
        var clipped = [];                                                                                              // 7075
        for (var i = startIndex; i < endIndex; i++) {                                                                  // 7076
            clipped.push(list[i]);                                                                                     // 7077
        }                                                                                                              // 7078
        return clipped;                                                                                                // 7079
    };                                                                                                                 // 7080
                                                                                                                       // 7081
    this.removeAll = function() {                                                                                      // 7082
        return this.ranges.splice(0, this.ranges.length);                                                              // 7083
    };                                                                                                                 // 7084
                                                                                                                       // 7085
    this.attach = function(session) {                                                                                  // 7086
        if (this.session)                                                                                              // 7087
            this.detach();                                                                                             // 7088
                                                                                                                       // 7089
        this.session = session;                                                                                        // 7090
        this.onChange = this.$onChange.bind(this);                                                                     // 7091
                                                                                                                       // 7092
        this.session.on('change', this.onChange);                                                                      // 7093
    };                                                                                                                 // 7094
                                                                                                                       // 7095
    this.detach = function() {                                                                                         // 7096
        if (!this.session)                                                                                             // 7097
            return;                                                                                                    // 7098
        this.session.removeListener('change', this.onChange);                                                          // 7099
        this.session = null;                                                                                           // 7100
    };                                                                                                                 // 7101
                                                                                                                       // 7102
    this.$onChange = function(delta) {                                                                                 // 7103
        if (delta.action == "insert"){                                                                                 // 7104
            var start = delta.start;                                                                                   // 7105
            var end = delta.end;                                                                                       // 7106
        } else {                                                                                                       // 7107
            var end = delta.start;                                                                                     // 7108
            var start = delta.end;                                                                                     // 7109
        }                                                                                                              // 7110
        var startRow = start.row;                                                                                      // 7111
        var endRow = end.row;                                                                                          // 7112
        var lineDif = endRow - startRow;                                                                               // 7113
                                                                                                                       // 7114
        var colDiff = -start.column + end.column;                                                                      // 7115
        var ranges = this.ranges;                                                                                      // 7116
                                                                                                                       // 7117
        for (var i = 0, n = ranges.length; i < n; i++) {                                                               // 7118
            var r = ranges[i];                                                                                         // 7119
            if (r.end.row < startRow)                                                                                  // 7120
                continue;                                                                                              // 7121
            if (r.start.row > startRow)                                                                                // 7122
                break;                                                                                                 // 7123
                                                                                                                       // 7124
            if (r.start.row == startRow && r.start.column >= start.column ) {                                          // 7125
                if (r.start.column == start.column && this.$insertRight) {                                             // 7126
                } else {                                                                                               // 7127
                    r.start.column += colDiff;                                                                         // 7128
                    r.start.row += lineDif;                                                                            // 7129
                }                                                                                                      // 7130
            }                                                                                                          // 7131
            if (r.end.row == startRow && r.end.column >= start.column) {                                               // 7132
                if (r.end.column == start.column && this.$insertRight) {                                               // 7133
                    continue;                                                                                          // 7134
                }                                                                                                      // 7135
                if (r.end.column == start.column && colDiff > 0 && i < n - 1) {                                        // 7136
                    if (r.end.column > r.start.column && r.end.column == ranges[i+1].start.column)                     // 7137
                        r.end.column -= colDiff;                                                                       // 7138
                }                                                                                                      // 7139
                r.end.column += colDiff;                                                                               // 7140
                r.end.row += lineDif;                                                                                  // 7141
            }                                                                                                          // 7142
        }                                                                                                              // 7143
                                                                                                                       // 7144
        if (lineDif != 0 && i < n) {                                                                                   // 7145
            for (; i < n; i++) {                                                                                       // 7146
                var r = ranges[i];                                                                                     // 7147
                r.start.row += lineDif;                                                                                // 7148
                r.end.row += lineDif;                                                                                  // 7149
            }                                                                                                          // 7150
        }                                                                                                              // 7151
    };                                                                                                                 // 7152
                                                                                                                       // 7153
}).call(RangeList.prototype);                                                                                          // 7154
                                                                                                                       // 7155
exports.RangeList = RangeList;                                                                                         // 7156
});                                                                                                                    // 7157
                                                                                                                       // 7158
define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"], function(require, exports, module) {
"use strict";                                                                                                          // 7160
                                                                                                                       // 7161
var Range = require("../range").Range;                                                                                 // 7162
var RangeList = require("../range_list").RangeList;                                                                    // 7163
var oop = require("../lib/oop")                                                                                        // 7164
var Fold = exports.Fold = function(range, placeholder) {                                                               // 7165
    this.foldLine = null;                                                                                              // 7166
    this.placeholder = placeholder;                                                                                    // 7167
    this.range = range;                                                                                                // 7168
    this.start = range.start;                                                                                          // 7169
    this.end = range.end;                                                                                              // 7170
                                                                                                                       // 7171
    this.sameRow = range.start.row == range.end.row;                                                                   // 7172
    this.subFolds = this.ranges = [];                                                                                  // 7173
};                                                                                                                     // 7174
                                                                                                                       // 7175
oop.inherits(Fold, RangeList);                                                                                         // 7176
                                                                                                                       // 7177
(function() {                                                                                                          // 7178
                                                                                                                       // 7179
    this.toString = function() {                                                                                       // 7180
        return '"' + this.placeholder + '" ' + this.range.toString();                                                  // 7181
    };                                                                                                                 // 7182
                                                                                                                       // 7183
    this.setFoldLine = function(foldLine) {                                                                            // 7184
        this.foldLine = foldLine;                                                                                      // 7185
        this.subFolds.forEach(function(fold) {                                                                         // 7186
            fold.setFoldLine(foldLine);                                                                                // 7187
        });                                                                                                            // 7188
    };                                                                                                                 // 7189
                                                                                                                       // 7190
    this.clone = function() {                                                                                          // 7191
        var range = this.range.clone();                                                                                // 7192
        var fold = new Fold(range, this.placeholder);                                                                  // 7193
        this.subFolds.forEach(function(subFold) {                                                                      // 7194
            fold.subFolds.push(subFold.clone());                                                                       // 7195
        });                                                                                                            // 7196
        fold.collapseChildren = this.collapseChildren;                                                                 // 7197
        return fold;                                                                                                   // 7198
    };                                                                                                                 // 7199
                                                                                                                       // 7200
    this.addSubFold = function(fold) {                                                                                 // 7201
        if (this.range.isEqual(fold))                                                                                  // 7202
            return;                                                                                                    // 7203
                                                                                                                       // 7204
        if (!this.range.containsRange(fold))                                                                           // 7205
            throw new Error("A fold can't intersect already existing fold" + fold.range + this.range);                 // 7206
        consumeRange(fold, this.start);                                                                                // 7207
                                                                                                                       // 7208
        var row = fold.start.row, column = fold.start.column;                                                          // 7209
        for (var i = 0, cmp = -1; i < this.subFolds.length; i++) {                                                     // 7210
            cmp = this.subFolds[i].range.compare(row, column);                                                         // 7211
            if (cmp != 1)                                                                                              // 7212
                break;                                                                                                 // 7213
        }                                                                                                              // 7214
        var afterStart = this.subFolds[i];                                                                             // 7215
                                                                                                                       // 7216
        if (cmp == 0)                                                                                                  // 7217
            return afterStart.addSubFold(fold);                                                                        // 7218
        var row = fold.range.end.row, column = fold.range.end.column;                                                  // 7219
        for (var j = i, cmp = -1; j < this.subFolds.length; j++) {                                                     // 7220
            cmp = this.subFolds[j].range.compare(row, column);                                                         // 7221
            if (cmp != 1)                                                                                              // 7222
                break;                                                                                                 // 7223
        }                                                                                                              // 7224
        var afterEnd = this.subFolds[j];                                                                               // 7225
                                                                                                                       // 7226
        if (cmp == 0)                                                                                                  // 7227
            throw new Error("A fold can't intersect already existing fold" + fold.range + this.range);                 // 7228
                                                                                                                       // 7229
        var consumedFolds = this.subFolds.splice(i, j - i, fold);                                                      // 7230
        fold.setFoldLine(this.foldLine);                                                                               // 7231
                                                                                                                       // 7232
        return fold;                                                                                                   // 7233
    };                                                                                                                 // 7234
                                                                                                                       // 7235
    this.restoreRange = function(range) {                                                                              // 7236
        return restoreRange(range, this.start);                                                                        // 7237
    };                                                                                                                 // 7238
                                                                                                                       // 7239
}).call(Fold.prototype);                                                                                               // 7240
                                                                                                                       // 7241
function consumePoint(point, anchor) {                                                                                 // 7242
    point.row -= anchor.row;                                                                                           // 7243
    if (point.row == 0)                                                                                                // 7244
        point.column -= anchor.column;                                                                                 // 7245
}                                                                                                                      // 7246
function consumeRange(range, anchor) {                                                                                 // 7247
    consumePoint(range.start, anchor);                                                                                 // 7248
    consumePoint(range.end, anchor);                                                                                   // 7249
}                                                                                                                      // 7250
function restorePoint(point, anchor) {                                                                                 // 7251
    if (point.row == 0)                                                                                                // 7252
        point.column += anchor.column;                                                                                 // 7253
    point.row += anchor.row;                                                                                           // 7254
}                                                                                                                      // 7255
function restoreRange(range, anchor) {                                                                                 // 7256
    restorePoint(range.start, anchor);                                                                                 // 7257
    restorePoint(range.end, anchor);                                                                                   // 7258
}                                                                                                                      // 7259
                                                                                                                       // 7260
});                                                                                                                    // 7261
                                                                                                                       // 7262
define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"], function(require, exports, module) {
"use strict";                                                                                                          // 7264
                                                                                                                       // 7265
var Range = require("../range").Range;                                                                                 // 7266
var FoldLine = require("./fold_line").FoldLine;                                                                        // 7267
var Fold = require("./fold").Fold;                                                                                     // 7268
var TokenIterator = require("../token_iterator").TokenIterator;                                                        // 7269
                                                                                                                       // 7270
function Folding() {                                                                                                   // 7271
    this.getFoldAt = function(row, column, side) {                                                                     // 7272
        var foldLine = this.getFoldLine(row);                                                                          // 7273
        if (!foldLine)                                                                                                 // 7274
            return null;                                                                                               // 7275
                                                                                                                       // 7276
        var folds = foldLine.folds;                                                                                    // 7277
        for (var i = 0; i < folds.length; i++) {                                                                       // 7278
            var fold = folds[i];                                                                                       // 7279
            if (fold.range.contains(row, column)) {                                                                    // 7280
                if (side == 1 && fold.range.isEnd(row, column)) {                                                      // 7281
                    continue;                                                                                          // 7282
                } else if (side == -1 && fold.range.isStart(row, column)) {                                            // 7283
                    continue;                                                                                          // 7284
                }                                                                                                      // 7285
                return fold;                                                                                           // 7286
            }                                                                                                          // 7287
        }                                                                                                              // 7288
    };                                                                                                                 // 7289
    this.getFoldsInRange = function(range) {                                                                           // 7290
        var start = range.start;                                                                                       // 7291
        var end = range.end;                                                                                           // 7292
        var foldLines = this.$foldData;                                                                                // 7293
        var foundFolds = [];                                                                                           // 7294
                                                                                                                       // 7295
        start.column += 1;                                                                                             // 7296
        end.column -= 1;                                                                                               // 7297
                                                                                                                       // 7298
        for (var i = 0; i < foldLines.length; i++) {                                                                   // 7299
            var cmp = foldLines[i].range.compareRange(range);                                                          // 7300
            if (cmp == 2) {                                                                                            // 7301
                continue;                                                                                              // 7302
            }                                                                                                          // 7303
            else if (cmp == -2) {                                                                                      // 7304
                break;                                                                                                 // 7305
            }                                                                                                          // 7306
                                                                                                                       // 7307
            var folds = foldLines[i].folds;                                                                            // 7308
            for (var j = 0; j < folds.length; j++) {                                                                   // 7309
                var fold = folds[j];                                                                                   // 7310
                cmp = fold.range.compareRange(range);                                                                  // 7311
                if (cmp == -2) {                                                                                       // 7312
                    break;                                                                                             // 7313
                } else if (cmp == 2) {                                                                                 // 7314
                    continue;                                                                                          // 7315
                } else                                                                                                 // 7316
                if (cmp == 42) {                                                                                       // 7317
                    break;                                                                                             // 7318
                }                                                                                                      // 7319
                foundFolds.push(fold);                                                                                 // 7320
            }                                                                                                          // 7321
        }                                                                                                              // 7322
        start.column -= 1;                                                                                             // 7323
        end.column += 1;                                                                                               // 7324
                                                                                                                       // 7325
        return foundFolds;                                                                                             // 7326
    };                                                                                                                 // 7327
                                                                                                                       // 7328
    this.getFoldsInRangeList = function(ranges) {                                                                      // 7329
        if (Array.isArray(ranges)) {                                                                                   // 7330
            var folds = [];                                                                                            // 7331
            ranges.forEach(function(range) {                                                                           // 7332
                folds = folds.concat(this.getFoldsInRange(range));                                                     // 7333
            }, this);                                                                                                  // 7334
        } else {                                                                                                       // 7335
            var folds = this.getFoldsInRange(ranges);                                                                  // 7336
        }                                                                                                              // 7337
        return folds;                                                                                                  // 7338
    }                                                                                                                  // 7339
    this.getAllFolds = function() {                                                                                    // 7340
        var folds = [];                                                                                                // 7341
        var foldLines = this.$foldData;                                                                                // 7342
                                                                                                                       // 7343
        for (var i = 0; i < foldLines.length; i++)                                                                     // 7344
            for (var j = 0; j < foldLines[i].folds.length; j++)                                                        // 7345
                folds.push(foldLines[i].folds[j]);                                                                     // 7346
                                                                                                                       // 7347
        return folds;                                                                                                  // 7348
    };                                                                                                                 // 7349
    this.getFoldStringAt = function(row, column, trim, foldLine) {                                                     // 7350
        foldLine = foldLine || this.getFoldLine(row);                                                                  // 7351
        if (!foldLine)                                                                                                 // 7352
            return null;                                                                                               // 7353
                                                                                                                       // 7354
        var lastFold = {                                                                                               // 7355
            end: { column: 0 }                                                                                         // 7356
        };                                                                                                             // 7357
        var str, fold;                                                                                                 // 7358
        for (var i = 0; i < foldLine.folds.length; i++) {                                                              // 7359
            fold = foldLine.folds[i];                                                                                  // 7360
            var cmp = fold.range.compareEnd(row, column);                                                              // 7361
            if (cmp == -1) {                                                                                           // 7362
                str = this                                                                                             // 7363
                    .getLine(fold.start.row)                                                                           // 7364
                    .substring(lastFold.end.column, fold.start.column);                                                // 7365
                break;                                                                                                 // 7366
            }                                                                                                          // 7367
            else if (cmp === 0) {                                                                                      // 7368
                return null;                                                                                           // 7369
            }                                                                                                          // 7370
            lastFold = fold;                                                                                           // 7371
        }                                                                                                              // 7372
        if (!str)                                                                                                      // 7373
            str = this.getLine(fold.start.row).substring(lastFold.end.column);                                         // 7374
                                                                                                                       // 7375
        if (trim == -1)                                                                                                // 7376
            return str.substring(0, column - lastFold.end.column);                                                     // 7377
        else if (trim == 1)                                                                                            // 7378
            return str.substring(column - lastFold.end.column);                                                        // 7379
        else                                                                                                           // 7380
            return str;                                                                                                // 7381
    };                                                                                                                 // 7382
                                                                                                                       // 7383
    this.getFoldLine = function(docRow, startFoldLine) {                                                               // 7384
        var foldData = this.$foldData;                                                                                 // 7385
        var i = 0;                                                                                                     // 7386
        if (startFoldLine)                                                                                             // 7387
            i = foldData.indexOf(startFoldLine);                                                                       // 7388
        if (i == -1)                                                                                                   // 7389
            i = 0;                                                                                                     // 7390
        for (i; i < foldData.length; i++) {                                                                            // 7391
            var foldLine = foldData[i];                                                                                // 7392
            if (foldLine.start.row <= docRow && foldLine.end.row >= docRow) {                                          // 7393
                return foldLine;                                                                                       // 7394
            } else if (foldLine.end.row > docRow) {                                                                    // 7395
                return null;                                                                                           // 7396
            }                                                                                                          // 7397
        }                                                                                                              // 7398
        return null;                                                                                                   // 7399
    };                                                                                                                 // 7400
    this.getNextFoldLine = function(docRow, startFoldLine) {                                                           // 7401
        var foldData = this.$foldData;                                                                                 // 7402
        var i = 0;                                                                                                     // 7403
        if (startFoldLine)                                                                                             // 7404
            i = foldData.indexOf(startFoldLine);                                                                       // 7405
        if (i == -1)                                                                                                   // 7406
            i = 0;                                                                                                     // 7407
        for (i; i < foldData.length; i++) {                                                                            // 7408
            var foldLine = foldData[i];                                                                                // 7409
            if (foldLine.end.row >= docRow) {                                                                          // 7410
                return foldLine;                                                                                       // 7411
            }                                                                                                          // 7412
        }                                                                                                              // 7413
        return null;                                                                                                   // 7414
    };                                                                                                                 // 7415
                                                                                                                       // 7416
    this.getFoldedRowCount = function(first, last) {                                                                   // 7417
        var foldData = this.$foldData, rowCount = last-first+1;                                                        // 7418
        for (var i = 0; i < foldData.length; i++) {                                                                    // 7419
            var foldLine = foldData[i],                                                                                // 7420
                end = foldLine.end.row,                                                                                // 7421
                start = foldLine.start.row;                                                                            // 7422
            if (end >= last) {                                                                                         // 7423
                if(start < last) {                                                                                     // 7424
                    if(start >= first)                                                                                 // 7425
                        rowCount -= last-start;                                                                        // 7426
                    else                                                                                               // 7427
                        rowCount = 0;//in one fold                                                                     // 7428
                }                                                                                                      // 7429
                break;                                                                                                 // 7430
            } else if(end >= first){                                                                                   // 7431
                if (start >= first) //fold inside range                                                                // 7432
                    rowCount -=  end-start;                                                                            // 7433
                else                                                                                                   // 7434
                    rowCount -=  end-first+1;                                                                          // 7435
            }                                                                                                          // 7436
        }                                                                                                              // 7437
        return rowCount;                                                                                               // 7438
    };                                                                                                                 // 7439
                                                                                                                       // 7440
    this.$addFoldLine = function(foldLine) {                                                                           // 7441
        this.$foldData.push(foldLine);                                                                                 // 7442
        this.$foldData.sort(function(a, b) {                                                                           // 7443
            return a.start.row - b.start.row;                                                                          // 7444
        });                                                                                                            // 7445
        return foldLine;                                                                                               // 7446
    };                                                                                                                 // 7447
    this.addFold = function(placeholder, range) {                                                                      // 7448
        var foldData = this.$foldData;                                                                                 // 7449
        var added = false;                                                                                             // 7450
        var fold;                                                                                                      // 7451
                                                                                                                       // 7452
        if (placeholder instanceof Fold)                                                                               // 7453
            fold = placeholder;                                                                                        // 7454
        else {                                                                                                         // 7455
            fold = new Fold(range, placeholder);                                                                       // 7456
            fold.collapseChildren = range.collapseChildren;                                                            // 7457
        }                                                                                                              // 7458
        this.$clipRangeToDocument(fold.range);                                                                         // 7459
                                                                                                                       // 7460
        var startRow = fold.start.row;                                                                                 // 7461
        var startColumn = fold.start.column;                                                                           // 7462
        var endRow = fold.end.row;                                                                                     // 7463
        var endColumn = fold.end.column;                                                                               // 7464
        if (!(startRow < endRow ||                                                                                     // 7465
            startRow == endRow && startColumn <= endColumn - 2))                                                       // 7466
            throw new Error("The range has to be at least 2 characters width");                                        // 7467
                                                                                                                       // 7468
        var startFold = this.getFoldAt(startRow, startColumn, 1);                                                      // 7469
        var endFold = this.getFoldAt(endRow, endColumn, -1);                                                           // 7470
        if (startFold && endFold == startFold)                                                                         // 7471
            return startFold.addSubFold(fold);                                                                         // 7472
                                                                                                                       // 7473
        if (startFold && !startFold.range.isStart(startRow, startColumn))                                              // 7474
            this.removeFold(startFold);                                                                                // 7475
                                                                                                                       // 7476
        if (endFold && !endFold.range.isEnd(endRow, endColumn))                                                        // 7477
            this.removeFold(endFold);                                                                                  // 7478
        var folds = this.getFoldsInRange(fold.range);                                                                  // 7479
        if (folds.length > 0) {                                                                                        // 7480
            this.removeFolds(folds);                                                                                   // 7481
            folds.forEach(function(subFold) {                                                                          // 7482
                fold.addSubFold(subFold);                                                                              // 7483
            });                                                                                                        // 7484
        }                                                                                                              // 7485
                                                                                                                       // 7486
        for (var i = 0; i < foldData.length; i++) {                                                                    // 7487
            var foldLine = foldData[i];                                                                                // 7488
            if (endRow == foldLine.start.row) {                                                                        // 7489
                foldLine.addFold(fold);                                                                                // 7490
                added = true;                                                                                          // 7491
                break;                                                                                                 // 7492
            } else if (startRow == foldLine.end.row) {                                                                 // 7493
                foldLine.addFold(fold);                                                                                // 7494
                added = true;                                                                                          // 7495
                if (!fold.sameRow) {                                                                                   // 7496
                    var foldLineNext = foldData[i + 1];                                                                // 7497
                    if (foldLineNext && foldLineNext.start.row == endRow) {                                            // 7498
                        foldLine.merge(foldLineNext);                                                                  // 7499
                        break;                                                                                         // 7500
                    }                                                                                                  // 7501
                }                                                                                                      // 7502
                break;                                                                                                 // 7503
            } else if (endRow <= foldLine.start.row) {                                                                 // 7504
                break;                                                                                                 // 7505
            }                                                                                                          // 7506
        }                                                                                                              // 7507
                                                                                                                       // 7508
        if (!added)                                                                                                    // 7509
            foldLine = this.$addFoldLine(new FoldLine(this.$foldData, fold));                                          // 7510
                                                                                                                       // 7511
        if (this.$useWrapMode)                                                                                         // 7512
            this.$updateWrapData(foldLine.start.row, foldLine.start.row);                                              // 7513
        else                                                                                                           // 7514
            this.$updateRowLengthCache(foldLine.start.row, foldLine.start.row);                                        // 7515
        this.$modified = true;                                                                                         // 7516
        this._emit("changeFold", { data: fold, action: "add" });                                                       // 7517
                                                                                                                       // 7518
        return fold;                                                                                                   // 7519
    };                                                                                                                 // 7520
                                                                                                                       // 7521
    this.addFolds = function(folds) {                                                                                  // 7522
        folds.forEach(function(fold) {                                                                                 // 7523
            this.addFold(fold);                                                                                        // 7524
        }, this);                                                                                                      // 7525
    };                                                                                                                 // 7526
                                                                                                                       // 7527
    this.removeFold = function(fold) {                                                                                 // 7528
        var foldLine = fold.foldLine;                                                                                  // 7529
        var startRow = foldLine.start.row;                                                                             // 7530
        var endRow = foldLine.end.row;                                                                                 // 7531
                                                                                                                       // 7532
        var foldLines = this.$foldData;                                                                                // 7533
        var folds = foldLine.folds;                                                                                    // 7534
        if (folds.length == 1) {                                                                                       // 7535
            foldLines.splice(foldLines.indexOf(foldLine), 1);                                                          // 7536
        } else                                                                                                         // 7537
        if (foldLine.range.isEnd(fold.end.row, fold.end.column)) {                                                     // 7538
            folds.pop();                                                                                               // 7539
            foldLine.end.row = folds[folds.length - 1].end.row;                                                        // 7540
            foldLine.end.column = folds[folds.length - 1].end.column;                                                  // 7541
        } else                                                                                                         // 7542
        if (foldLine.range.isStart(fold.start.row, fold.start.column)) {                                               // 7543
            folds.shift();                                                                                             // 7544
            foldLine.start.row = folds[0].start.row;                                                                   // 7545
            foldLine.start.column = folds[0].start.column;                                                             // 7546
        } else                                                                                                         // 7547
        if (fold.sameRow) {                                                                                            // 7548
            folds.splice(folds.indexOf(fold), 1);                                                                      // 7549
        } else                                                                                                         // 7550
        {                                                                                                              // 7551
            var newFoldLine = foldLine.split(fold.start.row, fold.start.column);                                       // 7552
            folds = newFoldLine.folds;                                                                                 // 7553
            folds.shift();                                                                                             // 7554
            newFoldLine.start.row = folds[0].start.row;                                                                // 7555
            newFoldLine.start.column = folds[0].start.column;                                                          // 7556
        }                                                                                                              // 7557
                                                                                                                       // 7558
        if (!this.$updating) {                                                                                         // 7559
            if (this.$useWrapMode)                                                                                     // 7560
                this.$updateWrapData(startRow, endRow);                                                                // 7561
            else                                                                                                       // 7562
                this.$updateRowLengthCache(startRow, endRow);                                                          // 7563
        }                                                                                                              // 7564
        this.$modified = true;                                                                                         // 7565
        this._emit("changeFold", { data: fold, action: "remove" });                                                    // 7566
    };                                                                                                                 // 7567
                                                                                                                       // 7568
    this.removeFolds = function(folds) {                                                                               // 7569
        var cloneFolds = [];                                                                                           // 7570
        for (var i = 0; i < folds.length; i++) {                                                                       // 7571
            cloneFolds.push(folds[i]);                                                                                 // 7572
        }                                                                                                              // 7573
                                                                                                                       // 7574
        cloneFolds.forEach(function(fold) {                                                                            // 7575
            this.removeFold(fold);                                                                                     // 7576
        }, this);                                                                                                      // 7577
        this.$modified = true;                                                                                         // 7578
    };                                                                                                                 // 7579
                                                                                                                       // 7580
    this.expandFold = function(fold) {                                                                                 // 7581
        this.removeFold(fold);                                                                                         // 7582
        fold.subFolds.forEach(function(subFold) {                                                                      // 7583
            fold.restoreRange(subFold);                                                                                // 7584
            this.addFold(subFold);                                                                                     // 7585
        }, this);                                                                                                      // 7586
        if (fold.collapseChildren > 0) {                                                                               // 7587
            this.foldAll(fold.start.row+1, fold.end.row, fold.collapseChildren-1);                                     // 7588
        }                                                                                                              // 7589
        fold.subFolds = [];                                                                                            // 7590
    };                                                                                                                 // 7591
                                                                                                                       // 7592
    this.expandFolds = function(folds) {                                                                               // 7593
        folds.forEach(function(fold) {                                                                                 // 7594
            this.expandFold(fold);                                                                                     // 7595
        }, this);                                                                                                      // 7596
    };                                                                                                                 // 7597
                                                                                                                       // 7598
    this.unfold = function(location, expandInner) {                                                                    // 7599
        var range, folds;                                                                                              // 7600
        if (location == null) {                                                                                        // 7601
            range = new Range(0, 0, this.getLength(), 0);                                                              // 7602
            expandInner = true;                                                                                        // 7603
        } else if (typeof location == "number")                                                                        // 7604
            range = new Range(location, 0, location, this.getLine(location).length);                                   // 7605
        else if ("row" in location)                                                                                    // 7606
            range = Range.fromPoints(location, location);                                                              // 7607
        else                                                                                                           // 7608
            range = location;                                                                                          // 7609
                                                                                                                       // 7610
        folds = this.getFoldsInRangeList(range);                                                                       // 7611
        if (expandInner) {                                                                                             // 7612
            this.removeFolds(folds);                                                                                   // 7613
        } else {                                                                                                       // 7614
            var subFolds = folds;                                                                                      // 7615
            while (subFolds.length) {                                                                                  // 7616
                this.expandFolds(subFolds);                                                                            // 7617
                subFolds = this.getFoldsInRangeList(range);                                                            // 7618
            }                                                                                                          // 7619
        }                                                                                                              // 7620
        if (folds.length)                                                                                              // 7621
            return folds;                                                                                              // 7622
    };                                                                                                                 // 7623
    this.isRowFolded = function(docRow, startFoldRow) {                                                                // 7624
        return !!this.getFoldLine(docRow, startFoldRow);                                                               // 7625
    };                                                                                                                 // 7626
                                                                                                                       // 7627
    this.getRowFoldEnd = function(docRow, startFoldRow) {                                                              // 7628
        var foldLine = this.getFoldLine(docRow, startFoldRow);                                                         // 7629
        return foldLine ? foldLine.end.row : docRow;                                                                   // 7630
    };                                                                                                                 // 7631
                                                                                                                       // 7632
    this.getRowFoldStart = function(docRow, startFoldRow) {                                                            // 7633
        var foldLine = this.getFoldLine(docRow, startFoldRow);                                                         // 7634
        return foldLine ? foldLine.start.row : docRow;                                                                 // 7635
    };                                                                                                                 // 7636
                                                                                                                       // 7637
    this.getFoldDisplayLine = function(foldLine, endRow, endColumn, startRow, startColumn) {                           // 7638
        if (startRow == null)                                                                                          // 7639
            startRow = foldLine.start.row;                                                                             // 7640
        if (startColumn == null)                                                                                       // 7641
            startColumn = 0;                                                                                           // 7642
        if (endRow == null)                                                                                            // 7643
            endRow = foldLine.end.row;                                                                                 // 7644
        if (endColumn == null)                                                                                         // 7645
            endColumn = this.getLine(endRow).length;                                                                   // 7646
        var doc = this.doc;                                                                                            // 7647
        var textLine = "";                                                                                             // 7648
                                                                                                                       // 7649
        foldLine.walk(function(placeholder, row, column, lastColumn) {                                                 // 7650
            if (row < startRow)                                                                                        // 7651
                return;                                                                                                // 7652
            if (row == startRow) {                                                                                     // 7653
                if (column < startColumn)                                                                              // 7654
                    return;                                                                                            // 7655
                lastColumn = Math.max(startColumn, lastColumn);                                                        // 7656
            }                                                                                                          // 7657
                                                                                                                       // 7658
            if (placeholder != null) {                                                                                 // 7659
                textLine += placeholder;                                                                               // 7660
            } else {                                                                                                   // 7661
                textLine += doc.getLine(row).substring(lastColumn, column);                                            // 7662
            }                                                                                                          // 7663
        }, endRow, endColumn);                                                                                         // 7664
        return textLine;                                                                                               // 7665
    };                                                                                                                 // 7666
                                                                                                                       // 7667
    this.getDisplayLine = function(row, endColumn, startRow, startColumn) {                                            // 7668
        var foldLine = this.getFoldLine(row);                                                                          // 7669
                                                                                                                       // 7670
        if (!foldLine) {                                                                                               // 7671
            var line;                                                                                                  // 7672
            line = this.doc.getLine(row);                                                                              // 7673
            return line.substring(startColumn || 0, endColumn || line.length);                                         // 7674
        } else {                                                                                                       // 7675
            return this.getFoldDisplayLine(                                                                            // 7676
                foldLine, row, endColumn, startRow, startColumn);                                                      // 7677
        }                                                                                                              // 7678
    };                                                                                                                 // 7679
                                                                                                                       // 7680
    this.$cloneFoldData = function() {                                                                                 // 7681
        var fd = [];                                                                                                   // 7682
        fd = this.$foldData.map(function(foldLine) {                                                                   // 7683
            var folds = foldLine.folds.map(function(fold) {                                                            // 7684
                return fold.clone();                                                                                   // 7685
            });                                                                                                        // 7686
            return new FoldLine(fd, folds);                                                                            // 7687
        });                                                                                                            // 7688
                                                                                                                       // 7689
        return fd;                                                                                                     // 7690
    };                                                                                                                 // 7691
                                                                                                                       // 7692
    this.toggleFold = function(tryToUnfold) {                                                                          // 7693
        var selection = this.selection;                                                                                // 7694
        var range = selection.getRange();                                                                              // 7695
        var fold;                                                                                                      // 7696
        var bracketPos;                                                                                                // 7697
                                                                                                                       // 7698
        if (range.isEmpty()) {                                                                                         // 7699
            var cursor = range.start;                                                                                  // 7700
            fold = this.getFoldAt(cursor.row, cursor.column);                                                          // 7701
                                                                                                                       // 7702
            if (fold) {                                                                                                // 7703
                this.expandFold(fold);                                                                                 // 7704
                return;                                                                                                // 7705
            } else if (bracketPos = this.findMatchingBracket(cursor)) {                                                // 7706
                if (range.comparePoint(bracketPos) == 1) {                                                             // 7707
                    range.end = bracketPos;                                                                            // 7708
                } else {                                                                                               // 7709
                    range.start = bracketPos;                                                                          // 7710
                    range.start.column++;                                                                              // 7711
                    range.end.column--;                                                                                // 7712
                }                                                                                                      // 7713
            } else if (bracketPos = this.findMatchingBracket({row: cursor.row, column: cursor.column + 1})) {          // 7714
                if (range.comparePoint(bracketPos) == 1)                                                               // 7715
                    range.end = bracketPos;                                                                            // 7716
                else                                                                                                   // 7717
                    range.start = bracketPos;                                                                          // 7718
                                                                                                                       // 7719
                range.start.column++;                                                                                  // 7720
            } else {                                                                                                   // 7721
                range = this.getCommentFoldRange(cursor.row, cursor.column) || range;                                  // 7722
            }                                                                                                          // 7723
        } else {                                                                                                       // 7724
            var folds = this.getFoldsInRange(range);                                                                   // 7725
            if (tryToUnfold && folds.length) {                                                                         // 7726
                this.expandFolds(folds);                                                                               // 7727
                return;                                                                                                // 7728
            } else if (folds.length == 1 ) {                                                                           // 7729
                fold = folds[0];                                                                                       // 7730
            }                                                                                                          // 7731
        }                                                                                                              // 7732
                                                                                                                       // 7733
        if (!fold)                                                                                                     // 7734
            fold = this.getFoldAt(range.start.row, range.start.column);                                                // 7735
                                                                                                                       // 7736
        if (fold && fold.range.toString() == range.toString()) {                                                       // 7737
            this.expandFold(fold);                                                                                     // 7738
            return;                                                                                                    // 7739
        }                                                                                                              // 7740
                                                                                                                       // 7741
        var placeholder = "...";                                                                                       // 7742
        if (!range.isMultiLine()) {                                                                                    // 7743
            placeholder = this.getTextRange(range);                                                                    // 7744
            if(placeholder.length < 4)                                                                                 // 7745
                return;                                                                                                // 7746
            placeholder = placeholder.trim().substring(0, 2) + "..";                                                   // 7747
        }                                                                                                              // 7748
                                                                                                                       // 7749
        this.addFold(placeholder, range);                                                                              // 7750
    };                                                                                                                 // 7751
                                                                                                                       // 7752
    this.getCommentFoldRange = function(row, column, dir) {                                                            // 7753
        var iterator = new TokenIterator(this, row, column);                                                           // 7754
        var token = iterator.getCurrentToken();                                                                        // 7755
        if (token && /^comment|string/.test(token.type)) {                                                             // 7756
            var range = new Range();                                                                                   // 7757
            var re = new RegExp(token.type.replace(/\..*/, "\\."));                                                    // 7758
            if (dir != 1) {                                                                                            // 7759
                do {                                                                                                   // 7760
                    token = iterator.stepBackward();                                                                   // 7761
                } while(token && re.test(token.type));                                                                 // 7762
                iterator.stepForward();                                                                                // 7763
            }                                                                                                          // 7764
                                                                                                                       // 7765
            range.start.row = iterator.getCurrentTokenRow();                                                           // 7766
            range.start.column = iterator.getCurrentTokenColumn() + 2;                                                 // 7767
                                                                                                                       // 7768
            iterator = new TokenIterator(this, row, column);                                                           // 7769
                                                                                                                       // 7770
            if (dir != -1) {                                                                                           // 7771
                do {                                                                                                   // 7772
                    token = iterator.stepForward();                                                                    // 7773
                } while(token && re.test(token.type));                                                                 // 7774
                token = iterator.stepBackward();                                                                       // 7775
            } else                                                                                                     // 7776
                token = iterator.getCurrentToken();                                                                    // 7777
                                                                                                                       // 7778
            range.end.row = iterator.getCurrentTokenRow();                                                             // 7779
            range.end.column = iterator.getCurrentTokenColumn() + token.value.length - 2;                              // 7780
            return range;                                                                                              // 7781
        }                                                                                                              // 7782
    };                                                                                                                 // 7783
                                                                                                                       // 7784
    this.foldAll = function(startRow, endRow, depth) {                                                                 // 7785
        if (depth == undefined)                                                                                        // 7786
            depth = 100000; // JSON.stringify doesn't hanle Infinity                                                   // 7787
        var foldWidgets = this.foldWidgets;                                                                            // 7788
        if (!foldWidgets)                                                                                              // 7789
            return; // mode doesn't support folding                                                                    // 7790
        endRow = endRow || this.getLength();                                                                           // 7791
        startRow = startRow || 0;                                                                                      // 7792
        for (var row = startRow; row < endRow; row++) {                                                                // 7793
            if (foldWidgets[row] == null)                                                                              // 7794
                foldWidgets[row] = this.getFoldWidget(row);                                                            // 7795
            if (foldWidgets[row] != "start")                                                                           // 7796
                continue;                                                                                              // 7797
                                                                                                                       // 7798
            var range = this.getFoldWidgetRange(row);                                                                  // 7799
            if (range && range.isMultiLine()                                                                           // 7800
                && range.end.row <= endRow                                                                             // 7801
                && range.start.row >= startRow                                                                         // 7802
            ) {                                                                                                        // 7803
                row = range.end.row;                                                                                   // 7804
                try {                                                                                                  // 7805
                    var fold = this.addFold("...", range);                                                             // 7806
                    if (fold)                                                                                          // 7807
                        fold.collapseChildren = depth;                                                                 // 7808
                } catch(e) {}                                                                                          // 7809
            }                                                                                                          // 7810
        }                                                                                                              // 7811
    };                                                                                                                 // 7812
    this.$foldStyles = {                                                                                               // 7813
        "manual": 1,                                                                                                   // 7814
        "markbegin": 1,                                                                                                // 7815
        "markbeginend": 1                                                                                              // 7816
    };                                                                                                                 // 7817
    this.$foldStyle = "markbegin";                                                                                     // 7818
    this.setFoldStyle = function(style) {                                                                              // 7819
        if (!this.$foldStyles[style])                                                                                  // 7820
            throw new Error("invalid fold style: " + style + "[" + Object.keys(this.$foldStyles).join(", ") + "]");    // 7821
                                                                                                                       // 7822
        if (this.$foldStyle == style)                                                                                  // 7823
            return;                                                                                                    // 7824
                                                                                                                       // 7825
        this.$foldStyle = style;                                                                                       // 7826
                                                                                                                       // 7827
        if (style == "manual")                                                                                         // 7828
            this.unfold();                                                                                             // 7829
        var mode = this.$foldMode;                                                                                     // 7830
        this.$setFolding(null);                                                                                        // 7831
        this.$setFolding(mode);                                                                                        // 7832
    };                                                                                                                 // 7833
                                                                                                                       // 7834
    this.$setFolding = function(foldMode) {                                                                            // 7835
        if (this.$foldMode == foldMode)                                                                                // 7836
            return;                                                                                                    // 7837
                                                                                                                       // 7838
        this.$foldMode = foldMode;                                                                                     // 7839
                                                                                                                       // 7840
        this.off('change', this.$updateFoldWidgets);                                                                   // 7841
        this.off('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);                                                 // 7842
        this._emit("changeAnnotation");                                                                                // 7843
                                                                                                                       // 7844
        if (!foldMode || this.$foldStyle == "manual") {                                                                // 7845
            this.foldWidgets = null;                                                                                   // 7846
            return;                                                                                                    // 7847
        }                                                                                                              // 7848
                                                                                                                       // 7849
        this.foldWidgets = [];                                                                                         // 7850
        this.getFoldWidget = foldMode.getFoldWidget.bind(foldMode, this, this.$foldStyle);                             // 7851
        this.getFoldWidgetRange = foldMode.getFoldWidgetRange.bind(foldMode, this, this.$foldStyle);                   // 7852
                                                                                                                       // 7853
        this.$updateFoldWidgets = this.updateFoldWidgets.bind(this);                                                   // 7854
        this.$tokenizerUpdateFoldWidgets = this.tokenizerUpdateFoldWidgets.bind(this);                                 // 7855
        this.on('change', this.$updateFoldWidgets);                                                                    // 7856
        this.on('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);                                                  // 7857
    };                                                                                                                 // 7858
                                                                                                                       // 7859
    this.getParentFoldRangeData = function (row, ignoreCurrent) {                                                      // 7860
        var fw = this.foldWidgets;                                                                                     // 7861
        if (!fw || (ignoreCurrent && fw[row]))                                                                         // 7862
            return {};                                                                                                 // 7863
                                                                                                                       // 7864
        var i = row - 1, firstRange;                                                                                   // 7865
        while (i >= 0) {                                                                                               // 7866
            var c = fw[i];                                                                                             // 7867
            if (c == null)                                                                                             // 7868
                c = fw[i] = this.getFoldWidget(i);                                                                     // 7869
                                                                                                                       // 7870
            if (c == "start") {                                                                                        // 7871
                var range = this.getFoldWidgetRange(i);                                                                // 7872
                if (!firstRange)                                                                                       // 7873
                    firstRange = range;                                                                                // 7874
                if (range && range.end.row >= row)                                                                     // 7875
                    break;                                                                                             // 7876
            }                                                                                                          // 7877
            i--;                                                                                                       // 7878
        }                                                                                                              // 7879
                                                                                                                       // 7880
        return {                                                                                                       // 7881
            range: i !== -1 && range,                                                                                  // 7882
            firstRange: firstRange                                                                                     // 7883
        };                                                                                                             // 7884
    }                                                                                                                  // 7885
                                                                                                                       // 7886
    this.onFoldWidgetClick = function(row, e) {                                                                        // 7887
        e = e.domEvent;                                                                                                // 7888
        var options = {                                                                                                // 7889
            children: e.shiftKey,                                                                                      // 7890
            all: e.ctrlKey || e.metaKey,                                                                               // 7891
            siblings: e.altKey                                                                                         // 7892
        };                                                                                                             // 7893
                                                                                                                       // 7894
        var range = this.$toggleFoldWidget(row, options);                                                              // 7895
        if (!range) {                                                                                                  // 7896
            var el = (e.target || e.srcElement)                                                                        // 7897
            if (el && /ace_fold-widget/.test(el.className))                                                            // 7898
                el.className += " ace_invalid";                                                                        // 7899
        }                                                                                                              // 7900
    };                                                                                                                 // 7901
                                                                                                                       // 7902
    this.$toggleFoldWidget = function(row, options) {                                                                  // 7903
        if (!this.getFoldWidget)                                                                                       // 7904
            return;                                                                                                    // 7905
        var type = this.getFoldWidget(row);                                                                            // 7906
        var line = this.getLine(row);                                                                                  // 7907
                                                                                                                       // 7908
        var dir = type === "end" ? -1 : 1;                                                                             // 7909
        var fold = this.getFoldAt(row, dir === -1 ? 0 : line.length, dir);                                             // 7910
                                                                                                                       // 7911
        if (fold) {                                                                                                    // 7912
            if (options.children || options.all)                                                                       // 7913
                this.removeFold(fold);                                                                                 // 7914
            else                                                                                                       // 7915
                this.expandFold(fold);                                                                                 // 7916
            return;                                                                                                    // 7917
        }                                                                                                              // 7918
                                                                                                                       // 7919
        var range = this.getFoldWidgetRange(row, true);                                                                // 7920
        if (range && !range.isMultiLine()) {                                                                           // 7921
            fold = this.getFoldAt(range.start.row, range.start.column, 1);                                             // 7922
            if (fold && range.isEqual(fold.range)) {                                                                   // 7923
                this.removeFold(fold);                                                                                 // 7924
                return;                                                                                                // 7925
            }                                                                                                          // 7926
        }                                                                                                              // 7927
                                                                                                                       // 7928
        if (options.siblings) {                                                                                        // 7929
            var data = this.getParentFoldRangeData(row);                                                               // 7930
            if (data.range) {                                                                                          // 7931
                var startRow = data.range.start.row + 1;                                                               // 7932
                var endRow = data.range.end.row;                                                                       // 7933
            }                                                                                                          // 7934
            this.foldAll(startRow, endRow, options.all ? 10000 : 0);                                                   // 7935
        } else if (options.children) {                                                                                 // 7936
            endRow = range ? range.end.row : this.getLength();                                                         // 7937
            this.foldAll(row + 1, endRow, options.all ? 10000 : 0);                                                    // 7938
        } else if (range) {                                                                                            // 7939
            if (options.all)                                                                                           // 7940
                range.collapseChildren = 10000;                                                                        // 7941
            this.addFold("...", range);                                                                                // 7942
        }                                                                                                              // 7943
                                                                                                                       // 7944
        return range;                                                                                                  // 7945
    };                                                                                                                 // 7946
                                                                                                                       // 7947
                                                                                                                       // 7948
                                                                                                                       // 7949
    this.toggleFoldWidget = function(toggleParent) {                                                                   // 7950
        var row = this.selection.getCursor().row;                                                                      // 7951
        row = this.getRowFoldStart(row);                                                                               // 7952
        var range = this.$toggleFoldWidget(row, {});                                                                   // 7953
                                                                                                                       // 7954
        if (range)                                                                                                     // 7955
            return;                                                                                                    // 7956
        var data = this.getParentFoldRangeData(row, true);                                                             // 7957
        range = data.range || data.firstRange;                                                                         // 7958
                                                                                                                       // 7959
        if (range) {                                                                                                   // 7960
            row = range.start.row;                                                                                     // 7961
            var fold = this.getFoldAt(row, this.getLine(row).length, 1);                                               // 7962
                                                                                                                       // 7963
            if (fold) {                                                                                                // 7964
                this.removeFold(fold);                                                                                 // 7965
            } else {                                                                                                   // 7966
                this.addFold("...", range);                                                                            // 7967
            }                                                                                                          // 7968
        }                                                                                                              // 7969
    };                                                                                                                 // 7970
                                                                                                                       // 7971
    this.updateFoldWidgets = function(delta) {                                                                         // 7972
        var firstRow = delta.start.row;                                                                                // 7973
        var len = delta.end.row - firstRow;                                                                            // 7974
                                                                                                                       // 7975
        if (len === 0) {                                                                                               // 7976
            this.foldWidgets[firstRow] = null;                                                                         // 7977
        } else if (delta.action == 'remove') {                                                                         // 7978
            this.foldWidgets.splice(firstRow, len + 1, null);                                                          // 7979
        } else {                                                                                                       // 7980
            var args = Array(len + 1);                                                                                 // 7981
            args.unshift(firstRow, 1);                                                                                 // 7982
            this.foldWidgets.splice.apply(this.foldWidgets, args);                                                     // 7983
        }                                                                                                              // 7984
    };                                                                                                                 // 7985
    this.tokenizerUpdateFoldWidgets = function(e) {                                                                    // 7986
        var rows = e.data;                                                                                             // 7987
        if (rows.first != rows.last) {                                                                                 // 7988
            if (this.foldWidgets.length > rows.first)                                                                  // 7989
                this.foldWidgets.splice(rows.first, this.foldWidgets.length);                                          // 7990
        }                                                                                                              // 7991
    }                                                                                                                  // 7992
}                                                                                                                      // 7993
                                                                                                                       // 7994
exports.Folding = Folding;                                                                                             // 7995
                                                                                                                       // 7996
});                                                                                                                    // 7997
                                                                                                                       // 7998
define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 8000
                                                                                                                       // 8001
var TokenIterator = require("../token_iterator").TokenIterator;                                                        // 8002
var Range = require("../range").Range;                                                                                 // 8003
                                                                                                                       // 8004
                                                                                                                       // 8005
function BracketMatch() {                                                                                              // 8006
                                                                                                                       // 8007
    this.findMatchingBracket = function(position, chr) {                                                               // 8008
        if (position.column == 0) return null;                                                                         // 8009
                                                                                                                       // 8010
        var charBeforeCursor = chr || this.getLine(position.row).charAt(position.column-1);                            // 8011
        if (charBeforeCursor == "") return null;                                                                       // 8012
                                                                                                                       // 8013
        var match = charBeforeCursor.match(/([\(\[\{])|([\)\]\}])/);                                                   // 8014
        if (!match)                                                                                                    // 8015
            return null;                                                                                               // 8016
                                                                                                                       // 8017
        if (match[1])                                                                                                  // 8018
            return this.$findClosingBracket(match[1], position);                                                       // 8019
        else                                                                                                           // 8020
            return this.$findOpeningBracket(match[2], position);                                                       // 8021
    };                                                                                                                 // 8022
                                                                                                                       // 8023
    this.getBracketRange = function(pos) {                                                                             // 8024
        var line = this.getLine(pos.row);                                                                              // 8025
        var before = true, range;                                                                                      // 8026
                                                                                                                       // 8027
        var chr = line.charAt(pos.column-1);                                                                           // 8028
        var match = chr && chr.match(/([\(\[\{])|([\)\]\}])/);                                                         // 8029
        if (!match) {                                                                                                  // 8030
            chr = line.charAt(pos.column);                                                                             // 8031
            pos = {row: pos.row, column: pos.column + 1};                                                              // 8032
            match = chr && chr.match(/([\(\[\{])|([\)\]\}])/);                                                         // 8033
            before = false;                                                                                            // 8034
        }                                                                                                              // 8035
        if (!match)                                                                                                    // 8036
            return null;                                                                                               // 8037
                                                                                                                       // 8038
        if (match[1]) {                                                                                                // 8039
            var bracketPos = this.$findClosingBracket(match[1], pos);                                                  // 8040
            if (!bracketPos)                                                                                           // 8041
                return null;                                                                                           // 8042
            range = Range.fromPoints(pos, bracketPos);                                                                 // 8043
            if (!before) {                                                                                             // 8044
                range.end.column++;                                                                                    // 8045
                range.start.column--;                                                                                  // 8046
            }                                                                                                          // 8047
            range.cursor = range.end;                                                                                  // 8048
        } else {                                                                                                       // 8049
            var bracketPos = this.$findOpeningBracket(match[2], pos);                                                  // 8050
            if (!bracketPos)                                                                                           // 8051
                return null;                                                                                           // 8052
            range = Range.fromPoints(bracketPos, pos);                                                                 // 8053
            if (!before) {                                                                                             // 8054
                range.start.column++;                                                                                  // 8055
                range.end.column--;                                                                                    // 8056
            }                                                                                                          // 8057
            range.cursor = range.start;                                                                                // 8058
        }                                                                                                              // 8059
                                                                                                                       // 8060
        return range;                                                                                                  // 8061
    };                                                                                                                 // 8062
                                                                                                                       // 8063
    this.$brackets = {                                                                                                 // 8064
        ")": "(",                                                                                                      // 8065
        "(": ")",                                                                                                      // 8066
        "]": "[",                                                                                                      // 8067
        "[": "]",                                                                                                      // 8068
        "{": "}",                                                                                                      // 8069
        "}": "{"                                                                                                       // 8070
    };                                                                                                                 // 8071
                                                                                                                       // 8072
    this.$findOpeningBracket = function(bracket, position, typeRe) {                                                   // 8073
        var openBracket = this.$brackets[bracket];                                                                     // 8074
        var depth = 1;                                                                                                 // 8075
                                                                                                                       // 8076
        var iterator = new TokenIterator(this, position.row, position.column);                                         // 8077
        var token = iterator.getCurrentToken();                                                                        // 8078
        if (!token)                                                                                                    // 8079
            token = iterator.stepForward();                                                                            // 8080
        if (!token)                                                                                                    // 8081
            return;                                                                                                    // 8082
                                                                                                                       // 8083
         if (!typeRe){                                                                                                 // 8084
            typeRe = new RegExp(                                                                                       // 8085
                "(\\.?" +                                                                                              // 8086
                token.type.replace(".", "\\.").replace("rparen", ".paren")                                             // 8087
                    .replace(/\b(?:end)\b/, "(?:start|begin|end)")                                                     // 8088
                + ")+"                                                                                                 // 8089
            );                                                                                                         // 8090
        }                                                                                                              // 8091
        var valueIndex = position.column - iterator.getCurrentTokenColumn() - 2;                                       // 8092
        var value = token.value;                                                                                       // 8093
                                                                                                                       // 8094
        while (true) {                                                                                                 // 8095
                                                                                                                       // 8096
            while (valueIndex >= 0) {                                                                                  // 8097
                var chr = value.charAt(valueIndex);                                                                    // 8098
                if (chr == openBracket) {                                                                              // 8099
                    depth -= 1;                                                                                        // 8100
                    if (depth == 0) {                                                                                  // 8101
                        return {row: iterator.getCurrentTokenRow(),                                                    // 8102
                            column: valueIndex + iterator.getCurrentTokenColumn()};                                    // 8103
                    }                                                                                                  // 8104
                }                                                                                                      // 8105
                else if (chr == bracket) {                                                                             // 8106
                    depth += 1;                                                                                        // 8107
                }                                                                                                      // 8108
                valueIndex -= 1;                                                                                       // 8109
            }                                                                                                          // 8110
            do {                                                                                                       // 8111
                token = iterator.stepBackward();                                                                       // 8112
            } while (token && !typeRe.test(token.type));                                                               // 8113
                                                                                                                       // 8114
            if (token == null)                                                                                         // 8115
                break;                                                                                                 // 8116
                                                                                                                       // 8117
            value = token.value;                                                                                       // 8118
            valueIndex = value.length - 1;                                                                             // 8119
        }                                                                                                              // 8120
                                                                                                                       // 8121
        return null;                                                                                                   // 8122
    };                                                                                                                 // 8123
                                                                                                                       // 8124
    this.$findClosingBracket = function(bracket, position, typeRe) {                                                   // 8125
        var closingBracket = this.$brackets[bracket];                                                                  // 8126
        var depth = 1;                                                                                                 // 8127
                                                                                                                       // 8128
        var iterator = new TokenIterator(this, position.row, position.column);                                         // 8129
        var token = iterator.getCurrentToken();                                                                        // 8130
        if (!token)                                                                                                    // 8131
            token = iterator.stepForward();                                                                            // 8132
        if (!token)                                                                                                    // 8133
            return;                                                                                                    // 8134
                                                                                                                       // 8135
        if (!typeRe){                                                                                                  // 8136
            typeRe = new RegExp(                                                                                       // 8137
                "(\\.?" +                                                                                              // 8138
                token.type.replace(".", "\\.").replace("lparen", ".paren")                                             // 8139
                    .replace(/\b(?:start|begin)\b/, "(?:start|begin|end)")                                             // 8140
                + ")+"                                                                                                 // 8141
            );                                                                                                         // 8142
        }                                                                                                              // 8143
        var valueIndex = position.column - iterator.getCurrentTokenColumn();                                           // 8144
                                                                                                                       // 8145
        while (true) {                                                                                                 // 8146
                                                                                                                       // 8147
            var value = token.value;                                                                                   // 8148
            var valueLength = value.length;                                                                            // 8149
            while (valueIndex < valueLength) {                                                                         // 8150
                var chr = value.charAt(valueIndex);                                                                    // 8151
                if (chr == closingBracket) {                                                                           // 8152
                    depth -= 1;                                                                                        // 8153
                    if (depth == 0) {                                                                                  // 8154
                        return {row: iterator.getCurrentTokenRow(),                                                    // 8155
                            column: valueIndex + iterator.getCurrentTokenColumn()};                                    // 8156
                    }                                                                                                  // 8157
                }                                                                                                      // 8158
                else if (chr == bracket) {                                                                             // 8159
                    depth += 1;                                                                                        // 8160
                }                                                                                                      // 8161
                valueIndex += 1;                                                                                       // 8162
            }                                                                                                          // 8163
            do {                                                                                                       // 8164
                token = iterator.stepForward();                                                                        // 8165
            } while (token && !typeRe.test(token.type));                                                               // 8166
                                                                                                                       // 8167
            if (token == null)                                                                                         // 8168
                break;                                                                                                 // 8169
                                                                                                                       // 8170
            valueIndex = 0;                                                                                            // 8171
        }                                                                                                              // 8172
                                                                                                                       // 8173
        return null;                                                                                                   // 8174
    };                                                                                                                 // 8175
}                                                                                                                      // 8176
exports.BracketMatch = BracketMatch;                                                                                   // 8177
                                                                                                                       // 8178
});                                                                                                                    // 8179
                                                                                                                       // 8180
define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"], function(require, exports, module) {
"use strict";                                                                                                          // 8182
                                                                                                                       // 8183
var oop = require("./lib/oop");                                                                                        // 8184
var lang = require("./lib/lang");                                                                                      // 8185
var config = require("./config");                                                                                      // 8186
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 8187
var Selection = require("./selection").Selection;                                                                      // 8188
var TextMode = require("./mode/text").Mode;                                                                            // 8189
var Range = require("./range").Range;                                                                                  // 8190
var Document = require("./document").Document;                                                                         // 8191
var BackgroundTokenizer = require("./background_tokenizer").BackgroundTokenizer;                                       // 8192
var SearchHighlight = require("./search_highlight").SearchHighlight;                                                   // 8193
                                                                                                                       // 8194
var EditSession = function(text, mode) {                                                                               // 8195
    this.$breakpoints = [];                                                                                            // 8196
    this.$decorations = [];                                                                                            // 8197
    this.$frontMarkers = {};                                                                                           // 8198
    this.$backMarkers = {};                                                                                            // 8199
    this.$markerId = 1;                                                                                                // 8200
    this.$undoSelect = true;                                                                                           // 8201
                                                                                                                       // 8202
    this.$foldData = [];                                                                                               // 8203
    this.$foldData.toString = function() {                                                                             // 8204
        return this.join("\n");                                                                                        // 8205
    };                                                                                                                 // 8206
    this.on("changeFold", this.onChangeFold.bind(this));                                                               // 8207
    this.$onChange = this.onChange.bind(this);                                                                         // 8208
                                                                                                                       // 8209
    if (typeof text != "object" || !text.getLine)                                                                      // 8210
        text = new Document(text);                                                                                     // 8211
                                                                                                                       // 8212
    this.setDocument(text);                                                                                            // 8213
    this.selection = new Selection(this);                                                                              // 8214
                                                                                                                       // 8215
    config.resetOptions(this);                                                                                         // 8216
    this.setMode(mode);                                                                                                // 8217
    config._signal("session", this);                                                                                   // 8218
};                                                                                                                     // 8219
                                                                                                                       // 8220
                                                                                                                       // 8221
(function() {                                                                                                          // 8222
                                                                                                                       // 8223
    oop.implement(this, EventEmitter);                                                                                 // 8224
    this.setDocument = function(doc) {                                                                                 // 8225
        if (this.doc)                                                                                                  // 8226
            this.doc.removeListener("change", this.$onChange);                                                         // 8227
                                                                                                                       // 8228
        this.doc = doc;                                                                                                // 8229
        doc.on("change", this.$onChange);                                                                              // 8230
                                                                                                                       // 8231
        if (this.bgTokenizer)                                                                                          // 8232
            this.bgTokenizer.setDocument(this.getDocument());                                                          // 8233
                                                                                                                       // 8234
        this.resetCaches();                                                                                            // 8235
    };                                                                                                                 // 8236
    this.getDocument = function() {                                                                                    // 8237
        return this.doc;                                                                                               // 8238
    };                                                                                                                 // 8239
    this.$resetRowCache = function(docRow) {                                                                           // 8240
        if (!docRow) {                                                                                                 // 8241
            this.$docRowCache = [];                                                                                    // 8242
            this.$screenRowCache = [];                                                                                 // 8243
            return;                                                                                                    // 8244
        }                                                                                                              // 8245
        var l = this.$docRowCache.length;                                                                              // 8246
        var i = this.$getRowCacheIndex(this.$docRowCache, docRow) + 1;                                                 // 8247
        if (l > i) {                                                                                                   // 8248
            this.$docRowCache.splice(i, l);                                                                            // 8249
            this.$screenRowCache.splice(i, l);                                                                         // 8250
        }                                                                                                              // 8251
    };                                                                                                                 // 8252
                                                                                                                       // 8253
    this.$getRowCacheIndex = function(cacheArray, val) {                                                               // 8254
        var low = 0;                                                                                                   // 8255
        var hi = cacheArray.length - 1;                                                                                // 8256
                                                                                                                       // 8257
        while (low <= hi) {                                                                                            // 8258
            var mid = (low + hi) >> 1;                                                                                 // 8259
            var c = cacheArray[mid];                                                                                   // 8260
                                                                                                                       // 8261
            if (val > c)                                                                                               // 8262
                low = mid + 1;                                                                                         // 8263
            else if (val < c)                                                                                          // 8264
                hi = mid - 1;                                                                                          // 8265
            else                                                                                                       // 8266
                return mid;                                                                                            // 8267
        }                                                                                                              // 8268
                                                                                                                       // 8269
        return low -1;                                                                                                 // 8270
    };                                                                                                                 // 8271
                                                                                                                       // 8272
    this.resetCaches = function() {                                                                                    // 8273
        this.$modified = true;                                                                                         // 8274
        this.$wrapData = [];                                                                                           // 8275
        this.$rowLengthCache = [];                                                                                     // 8276
        this.$resetRowCache(0);                                                                                        // 8277
        if (this.bgTokenizer)                                                                                          // 8278
            this.bgTokenizer.start(0);                                                                                 // 8279
    };                                                                                                                 // 8280
                                                                                                                       // 8281
    this.onChangeFold = function(e) {                                                                                  // 8282
        var fold = e.data;                                                                                             // 8283
        this.$resetRowCache(fold.start.row);                                                                           // 8284
    };                                                                                                                 // 8285
                                                                                                                       // 8286
    this.onChange = function(delta) {                                                                                  // 8287
        this.$modified = true;                                                                                         // 8288
                                                                                                                       // 8289
        this.$resetRowCache(delta.start.row);                                                                          // 8290
                                                                                                                       // 8291
        var removedFolds = this.$updateInternalDataOnChange(delta);                                                    // 8292
        if (!this.$fromUndo && this.$undoManager && !delta.ignore) {                                                   // 8293
            this.$deltasDoc.push(delta);                                                                               // 8294
            if (removedFolds && removedFolds.length != 0) {                                                            // 8295
                this.$deltasFold.push({                                                                                // 8296
                    action: "removeFolds",                                                                             // 8297
                    folds:  removedFolds                                                                               // 8298
                });                                                                                                    // 8299
            }                                                                                                          // 8300
                                                                                                                       // 8301
            this.$informUndoManager.schedule();                                                                        // 8302
        }                                                                                                              // 8303
                                                                                                                       // 8304
        this.bgTokenizer && this.bgTokenizer.$updateOnChange(delta);                                                   // 8305
        this._signal("change", delta);                                                                                 // 8306
    };                                                                                                                 // 8307
    this.setValue = function(text) {                                                                                   // 8308
        this.doc.setValue(text);                                                                                       // 8309
        this.selection.moveTo(0, 0);                                                                                   // 8310
                                                                                                                       // 8311
        this.$resetRowCache(0);                                                                                        // 8312
        this.$deltas = [];                                                                                             // 8313
        this.$deltasDoc = [];                                                                                          // 8314
        this.$deltasFold = [];                                                                                         // 8315
        this.setUndoManager(this.$undoManager);                                                                        // 8316
        this.getUndoManager().reset();                                                                                 // 8317
    };                                                                                                                 // 8318
    this.getValue =                                                                                                    // 8319
    this.toString = function() {                                                                                       // 8320
        return this.doc.getValue();                                                                                    // 8321
    };                                                                                                                 // 8322
    this.getSelection = function() {                                                                                   // 8323
        return this.selection;                                                                                         // 8324
    };                                                                                                                 // 8325
    this.getState = function(row) {                                                                                    // 8326
        return this.bgTokenizer.getState(row);                                                                         // 8327
    };                                                                                                                 // 8328
    this.getTokens = function(row) {                                                                                   // 8329
        return this.bgTokenizer.getTokens(row);                                                                        // 8330
    };                                                                                                                 // 8331
    this.getTokenAt = function(row, column) {                                                                          // 8332
        var tokens = this.bgTokenizer.getTokens(row);                                                                  // 8333
        var token, c = 0;                                                                                              // 8334
        if (column == null) {                                                                                          // 8335
            i = tokens.length - 1;                                                                                     // 8336
            c = this.getLine(row).length;                                                                              // 8337
        } else {                                                                                                       // 8338
            for (var i = 0; i < tokens.length; i++) {                                                                  // 8339
                c += tokens[i].value.length;                                                                           // 8340
                if (c >= column)                                                                                       // 8341
                    break;                                                                                             // 8342
            }                                                                                                          // 8343
        }                                                                                                              // 8344
        token = tokens[i];                                                                                             // 8345
        if (!token)                                                                                                    // 8346
            return null;                                                                                               // 8347
        token.index = i;                                                                                               // 8348
        token.start = c - token.value.length;                                                                          // 8349
        return token;                                                                                                  // 8350
    };                                                                                                                 // 8351
    this.setUndoManager = function(undoManager) {                                                                      // 8352
        this.$undoManager = undoManager;                                                                               // 8353
        this.$deltas = [];                                                                                             // 8354
        this.$deltasDoc = [];                                                                                          // 8355
        this.$deltasFold = [];                                                                                         // 8356
                                                                                                                       // 8357
        if (this.$informUndoManager)                                                                                   // 8358
            this.$informUndoManager.cancel();                                                                          // 8359
                                                                                                                       // 8360
        if (undoManager) {                                                                                             // 8361
            var self = this;                                                                                           // 8362
                                                                                                                       // 8363
            this.$syncInformUndoManager = function() {                                                                 // 8364
                self.$informUndoManager.cancel();                                                                      // 8365
                                                                                                                       // 8366
                if (self.$deltasFold.length) {                                                                         // 8367
                    self.$deltas.push({                                                                                // 8368
                        group: "fold",                                                                                 // 8369
                        deltas: self.$deltasFold                                                                       // 8370
                    });                                                                                                // 8371
                    self.$deltasFold = [];                                                                             // 8372
                }                                                                                                      // 8373
                                                                                                                       // 8374
                if (self.$deltasDoc.length) {                                                                          // 8375
                    self.$deltas.push({                                                                                // 8376
                        group: "doc",                                                                                  // 8377
                        deltas: self.$deltasDoc                                                                        // 8378
                    });                                                                                                // 8379
                    self.$deltasDoc = [];                                                                              // 8380
                }                                                                                                      // 8381
                                                                                                                       // 8382
                if (self.$deltas.length > 0) {                                                                         // 8383
                    undoManager.execute({                                                                              // 8384
                        action: "aceupdate",                                                                           // 8385
                        args: [self.$deltas, self],                                                                    // 8386
                        merge: self.mergeUndoDeltas                                                                    // 8387
                    });                                                                                                // 8388
                }                                                                                                      // 8389
                self.mergeUndoDeltas = false;                                                                          // 8390
                self.$deltas = [];                                                                                     // 8391
            };                                                                                                         // 8392
            this.$informUndoManager = lang.delayedCall(this.$syncInformUndoManager);                                   // 8393
        }                                                                                                              // 8394
    };                                                                                                                 // 8395
    this.markUndoGroup = function() {                                                                                  // 8396
        if (this.$syncInformUndoManager)                                                                               // 8397
            this.$syncInformUndoManager();                                                                             // 8398
    };                                                                                                                 // 8399
                                                                                                                       // 8400
    this.$defaultUndoManager = {                                                                                       // 8401
        undo: function() {},                                                                                           // 8402
        redo: function() {},                                                                                           // 8403
        reset: function() {}                                                                                           // 8404
    };                                                                                                                 // 8405
    this.getUndoManager = function() {                                                                                 // 8406
        return this.$undoManager || this.$defaultUndoManager;                                                          // 8407
    };                                                                                                                 // 8408
    this.getTabString = function() {                                                                                   // 8409
        if (this.getUseSoftTabs()) {                                                                                   // 8410
            return lang.stringRepeat(" ", this.getTabSize());                                                          // 8411
        } else {                                                                                                       // 8412
            return "\t";                                                                                               // 8413
        }                                                                                                              // 8414
    };                                                                                                                 // 8415
    this.setUseSoftTabs = function(val) {                                                                              // 8416
        this.setOption("useSoftTabs", val);                                                                            // 8417
    };                                                                                                                 // 8418
    this.getUseSoftTabs = function() {                                                                                 // 8419
        return this.$useSoftTabs && !this.$mode.$indentWithTabs;                                                       // 8420
    };                                                                                                                 // 8421
    this.setTabSize = function(tabSize) {                                                                              // 8422
        this.setOption("tabSize", tabSize);                                                                            // 8423
    };                                                                                                                 // 8424
    this.getTabSize = function() {                                                                                     // 8425
        return this.$tabSize;                                                                                          // 8426
    };                                                                                                                 // 8427
    this.isTabStop = function(position) {                                                                              // 8428
        return this.$useSoftTabs && (position.column % this.$tabSize === 0);                                           // 8429
    };                                                                                                                 // 8430
                                                                                                                       // 8431
    this.$overwrite = false;                                                                                           // 8432
    this.setOverwrite = function(overwrite) {                                                                          // 8433
        this.setOption("overwrite", overwrite);                                                                        // 8434
    };                                                                                                                 // 8435
    this.getOverwrite = function() {                                                                                   // 8436
        return this.$overwrite;                                                                                        // 8437
    };                                                                                                                 // 8438
    this.toggleOverwrite = function() {                                                                                // 8439
        this.setOverwrite(!this.$overwrite);                                                                           // 8440
    };                                                                                                                 // 8441
    this.addGutterDecoration = function(row, className) {                                                              // 8442
        if (!this.$decorations[row])                                                                                   // 8443
            this.$decorations[row] = "";                                                                               // 8444
        this.$decorations[row] += " " + className;                                                                     // 8445
        this._signal("changeBreakpoint", {});                                                                          // 8446
    };                                                                                                                 // 8447
    this.removeGutterDecoration = function(row, className) {                                                           // 8448
        this.$decorations[row] = (this.$decorations[row] || "").replace(" " + className, "");                          // 8449
        this._signal("changeBreakpoint", {});                                                                          // 8450
    };                                                                                                                 // 8451
    this.getBreakpoints = function() {                                                                                 // 8452
        return this.$breakpoints;                                                                                      // 8453
    };                                                                                                                 // 8454
    this.setBreakpoints = function(rows) {                                                                             // 8455
        this.$breakpoints = [];                                                                                        // 8456
        for (var i=0; i<rows.length; i++) {                                                                            // 8457
            this.$breakpoints[rows[i]] = "ace_breakpoint";                                                             // 8458
        }                                                                                                              // 8459
        this._signal("changeBreakpoint", {});                                                                          // 8460
    };                                                                                                                 // 8461
    this.clearBreakpoints = function() {                                                                               // 8462
        this.$breakpoints = [];                                                                                        // 8463
        this._signal("changeBreakpoint", {});                                                                          // 8464
    };                                                                                                                 // 8465
    this.setBreakpoint = function(row, className) {                                                                    // 8466
        if (className === undefined)                                                                                   // 8467
            className = "ace_breakpoint";                                                                              // 8468
        if (className)                                                                                                 // 8469
            this.$breakpoints[row] = className;                                                                        // 8470
        else                                                                                                           // 8471
            delete this.$breakpoints[row];                                                                             // 8472
        this._signal("changeBreakpoint", {});                                                                          // 8473
    };                                                                                                                 // 8474
    this.clearBreakpoint = function(row) {                                                                             // 8475
        delete this.$breakpoints[row];                                                                                 // 8476
        this._signal("changeBreakpoint", {});                                                                          // 8477
    };                                                                                                                 // 8478
    this.addMarker = function(range, clazz, type, inFront) {                                                           // 8479
        var id = this.$markerId++;                                                                                     // 8480
                                                                                                                       // 8481
        var marker = {                                                                                                 // 8482
            range : range,                                                                                             // 8483
            type : type || "line",                                                                                     // 8484
            renderer: typeof type == "function" ? type : null,                                                         // 8485
            clazz : clazz,                                                                                             // 8486
            inFront: !!inFront,                                                                                        // 8487
            id: id                                                                                                     // 8488
        };                                                                                                             // 8489
                                                                                                                       // 8490
        if (inFront) {                                                                                                 // 8491
            this.$frontMarkers[id] = marker;                                                                           // 8492
            this._signal("changeFrontMarker");                                                                         // 8493
        } else {                                                                                                       // 8494
            this.$backMarkers[id] = marker;                                                                            // 8495
            this._signal("changeBackMarker");                                                                          // 8496
        }                                                                                                              // 8497
                                                                                                                       // 8498
        return id;                                                                                                     // 8499
    };                                                                                                                 // 8500
    this.addDynamicMarker = function(marker, inFront) {                                                                // 8501
        if (!marker.update)                                                                                            // 8502
            return;                                                                                                    // 8503
        var id = this.$markerId++;                                                                                     // 8504
        marker.id = id;                                                                                                // 8505
        marker.inFront = !!inFront;                                                                                    // 8506
                                                                                                                       // 8507
        if (inFront) {                                                                                                 // 8508
            this.$frontMarkers[id] = marker;                                                                           // 8509
            this._signal("changeFrontMarker");                                                                         // 8510
        } else {                                                                                                       // 8511
            this.$backMarkers[id] = marker;                                                                            // 8512
            this._signal("changeBackMarker");                                                                          // 8513
        }                                                                                                              // 8514
                                                                                                                       // 8515
        return marker;                                                                                                 // 8516
    };                                                                                                                 // 8517
    this.removeMarker = function(markerId) {                                                                           // 8518
        var marker = this.$frontMarkers[markerId] || this.$backMarkers[markerId];                                      // 8519
        if (!marker)                                                                                                   // 8520
            return;                                                                                                    // 8521
                                                                                                                       // 8522
        var markers = marker.inFront ? this.$frontMarkers : this.$backMarkers;                                         // 8523
        if (marker) {                                                                                                  // 8524
            delete (markers[markerId]);                                                                                // 8525
            this._signal(marker.inFront ? "changeFrontMarker" : "changeBackMarker");                                   // 8526
        }                                                                                                              // 8527
    };                                                                                                                 // 8528
    this.getMarkers = function(inFront) {                                                                              // 8529
        return inFront ? this.$frontMarkers : this.$backMarkers;                                                       // 8530
    };                                                                                                                 // 8531
                                                                                                                       // 8532
    this.highlight = function(re) {                                                                                    // 8533
        if (!this.$searchHighlight) {                                                                                  // 8534
            var highlight = new SearchHighlight(null, "ace_selected-word", "text");                                    // 8535
            this.$searchHighlight = this.addDynamicMarker(highlight);                                                  // 8536
        }                                                                                                              // 8537
        this.$searchHighlight.setRegexp(re);                                                                           // 8538
    };                                                                                                                 // 8539
    this.highlightLines = function(startRow, endRow, clazz, inFront) {                                                 // 8540
        if (typeof endRow != "number") {                                                                               // 8541
            clazz = endRow;                                                                                            // 8542
            endRow = startRow;                                                                                         // 8543
        }                                                                                                              // 8544
        if (!clazz)                                                                                                    // 8545
            clazz = "ace_step";                                                                                        // 8546
                                                                                                                       // 8547
        var range = new Range(startRow, 0, endRow, Infinity);                                                          // 8548
        range.id = this.addMarker(range, clazz, "fullLine", inFront);                                                  // 8549
        return range;                                                                                                  // 8550
    };                                                                                                                 // 8551
    this.setAnnotations = function(annotations) {                                                                      // 8552
        this.$annotations = annotations;                                                                               // 8553
        this._signal("changeAnnotation", {});                                                                          // 8554
    };                                                                                                                 // 8555
    this.getAnnotations = function() {                                                                                 // 8556
        return this.$annotations || [];                                                                                // 8557
    };                                                                                                                 // 8558
    this.clearAnnotations = function() {                                                                               // 8559
        this.setAnnotations([]);                                                                                       // 8560
    };                                                                                                                 // 8561
    this.$detectNewLine = function(text) {                                                                             // 8562
        var match = text.match(/^.*?(\r?\n)/m);                                                                        // 8563
        if (match) {                                                                                                   // 8564
            this.$autoNewLine = match[1];                                                                              // 8565
        } else {                                                                                                       // 8566
            this.$autoNewLine = "\n";                                                                                  // 8567
        }                                                                                                              // 8568
    };                                                                                                                 // 8569
    this.getWordRange = function(row, column) {                                                                        // 8570
        var line = this.getLine(row);                                                                                  // 8571
                                                                                                                       // 8572
        var inToken = false;                                                                                           // 8573
        if (column > 0)                                                                                                // 8574
            inToken = !!line.charAt(column - 1).match(this.tokenRe);                                                   // 8575
                                                                                                                       // 8576
        if (!inToken)                                                                                                  // 8577
            inToken = !!line.charAt(column).match(this.tokenRe);                                                       // 8578
                                                                                                                       // 8579
        if (inToken)                                                                                                   // 8580
            var re = this.tokenRe;                                                                                     // 8581
        else if (/^\s+$/.test(line.slice(column-1, column+1)))                                                         // 8582
            var re = /\s/;                                                                                             // 8583
        else                                                                                                           // 8584
            var re = this.nonTokenRe;                                                                                  // 8585
                                                                                                                       // 8586
        var start = column;                                                                                            // 8587
        if (start > 0) {                                                                                               // 8588
            do {                                                                                                       // 8589
                start--;                                                                                               // 8590
            }                                                                                                          // 8591
            while (start >= 0 && line.charAt(start).match(re));                                                        // 8592
            start++;                                                                                                   // 8593
        }                                                                                                              // 8594
                                                                                                                       // 8595
        var end = column;                                                                                              // 8596
        while (end < line.length && line.charAt(end).match(re)) {                                                      // 8597
            end++;                                                                                                     // 8598
        }                                                                                                              // 8599
                                                                                                                       // 8600
        return new Range(row, start, row, end);                                                                        // 8601
    };                                                                                                                 // 8602
    this.getAWordRange = function(row, column) {                                                                       // 8603
        var wordRange = this.getWordRange(row, column);                                                                // 8604
        var line = this.getLine(wordRange.end.row);                                                                    // 8605
                                                                                                                       // 8606
        while (line.charAt(wordRange.end.column).match(/[ \t]/)) {                                                     // 8607
            wordRange.end.column += 1;                                                                                 // 8608
        }                                                                                                              // 8609
        return wordRange;                                                                                              // 8610
    };                                                                                                                 // 8611
    this.setNewLineMode = function(newLineMode) {                                                                      // 8612
        this.doc.setNewLineMode(newLineMode);                                                                          // 8613
    };                                                                                                                 // 8614
    this.getNewLineMode = function() {                                                                                 // 8615
        return this.doc.getNewLineMode();                                                                              // 8616
    };                                                                                                                 // 8617
    this.setUseWorker = function(useWorker) { this.setOption("useWorker", useWorker); };                               // 8618
    this.getUseWorker = function() { return this.$useWorker; };                                                        // 8619
    this.onReloadTokenizer = function(e) {                                                                             // 8620
        var rows = e.data;                                                                                             // 8621
        this.bgTokenizer.start(rows.first);                                                                            // 8622
        this._signal("tokenizerUpdate", e);                                                                            // 8623
    };                                                                                                                 // 8624
                                                                                                                       // 8625
    this.$modes = {};                                                                                                  // 8626
    this.$mode = null;                                                                                                 // 8627
    this.$modeId = null;                                                                                               // 8628
    this.setMode = function(mode, cb) {                                                                                // 8629
        if (mode && typeof mode === "object") {                                                                        // 8630
            if (mode.getTokenizer)                                                                                     // 8631
                return this.$onChangeMode(mode);                                                                       // 8632
            var options = mode;                                                                                        // 8633
            var path = options.path;                                                                                   // 8634
        } else {                                                                                                       // 8635
            path = mode || "ace/mode/text";                                                                            // 8636
        }                                                                                                              // 8637
        if (!this.$modes["ace/mode/text"])                                                                             // 8638
            this.$modes["ace/mode/text"] = new TextMode();                                                             // 8639
                                                                                                                       // 8640
        if (this.$modes[path] && !options) {                                                                           // 8641
            this.$onChangeMode(this.$modes[path]);                                                                     // 8642
            cb && cb();                                                                                                // 8643
            return;                                                                                                    // 8644
        }                                                                                                              // 8645
        this.$modeId = path;                                                                                           // 8646
        config.loadModule(["mode", path], function(m) {                                                                // 8647
            if (this.$modeId !== path)                                                                                 // 8648
                return cb && cb();                                                                                     // 8649
            if (this.$modes[path] && !options) {                                                                       // 8650
                this.$onChangeMode(this.$modes[path]);                                                                 // 8651
            } else if (m && m.Mode) {                                                                                  // 8652
                m = new m.Mode(options);                                                                               // 8653
                if (!options) {                                                                                        // 8654
                    this.$modes[path] = m;                                                                             // 8655
                    m.$id = path;                                                                                      // 8656
                }                                                                                                      // 8657
                this.$onChangeMode(m);                                                                                 // 8658
            }                                                                                                          // 8659
            cb && cb();                                                                                                // 8660
        }.bind(this));                                                                                                 // 8661
        if (!this.$mode)                                                                                               // 8662
            this.$onChangeMode(this.$modes["ace/mode/text"], true);                                                    // 8663
    };                                                                                                                 // 8664
                                                                                                                       // 8665
    this.$onChangeMode = function(mode, $isPlaceholder) {                                                              // 8666
        if (!$isPlaceholder)                                                                                           // 8667
            this.$modeId = mode.$id;                                                                                   // 8668
        if (this.$mode === mode)                                                                                       // 8669
            return;                                                                                                    // 8670
                                                                                                                       // 8671
        this.$mode = mode;                                                                                             // 8672
                                                                                                                       // 8673
        this.$stopWorker();                                                                                            // 8674
                                                                                                                       // 8675
        if (this.$useWorker)                                                                                           // 8676
            this.$startWorker();                                                                                       // 8677
                                                                                                                       // 8678
        var tokenizer = mode.getTokenizer();                                                                           // 8679
                                                                                                                       // 8680
        if(tokenizer.addEventListener !== undefined) {                                                                 // 8681
            var onReloadTokenizer = this.onReloadTokenizer.bind(this);                                                 // 8682
            tokenizer.addEventListener("update", onReloadTokenizer);                                                   // 8683
        }                                                                                                              // 8684
                                                                                                                       // 8685
        if (!this.bgTokenizer) {                                                                                       // 8686
            this.bgTokenizer = new BackgroundTokenizer(tokenizer);                                                     // 8687
            var _self = this;                                                                                          // 8688
            this.bgTokenizer.addEventListener("update", function(e) {                                                  // 8689
                _self._signal("tokenizerUpdate", e);                                                                   // 8690
            });                                                                                                        // 8691
        } else {                                                                                                       // 8692
            this.bgTokenizer.setTokenizer(tokenizer);                                                                  // 8693
        }                                                                                                              // 8694
                                                                                                                       // 8695
        this.bgTokenizer.setDocument(this.getDocument());                                                              // 8696
                                                                                                                       // 8697
        this.tokenRe = mode.tokenRe;                                                                                   // 8698
        this.nonTokenRe = mode.nonTokenRe;                                                                             // 8699
                                                                                                                       // 8700
                                                                                                                       // 8701
        if (!$isPlaceholder) {                                                                                         // 8702
            if (mode.attachToSession)                                                                                  // 8703
                mode.attachToSession(this);                                                                            // 8704
            this.$options.wrapMethod.set.call(this, this.$wrapMethod);                                                 // 8705
            this.$setFolding(mode.foldingRules);                                                                       // 8706
            this.bgTokenizer.start(0);                                                                                 // 8707
            this._emit("changeMode");                                                                                  // 8708
        }                                                                                                              // 8709
    };                                                                                                                 // 8710
                                                                                                                       // 8711
    this.$stopWorker = function() {                                                                                    // 8712
        if (this.$worker) {                                                                                            // 8713
            this.$worker.terminate();                                                                                  // 8714
            this.$worker = null;                                                                                       // 8715
        }                                                                                                              // 8716
    };                                                                                                                 // 8717
                                                                                                                       // 8718
    this.$startWorker = function() {                                                                                   // 8719
        try {                                                                                                          // 8720
            this.$worker = this.$mode.createWorker(this);                                                              // 8721
        } catch (e) {                                                                                                  // 8722
            config.warn("Could not load worker", e);                                                                   // 8723
            this.$worker = null;                                                                                       // 8724
        }                                                                                                              // 8725
    };                                                                                                                 // 8726
    this.getMode = function() {                                                                                        // 8727
        return this.$mode;                                                                                             // 8728
    };                                                                                                                 // 8729
                                                                                                                       // 8730
    this.$scrollTop = 0;                                                                                               // 8731
    this.setScrollTop = function(scrollTop) {                                                                          // 8732
        if (this.$scrollTop === scrollTop || isNaN(scrollTop))                                                         // 8733
            return;                                                                                                    // 8734
                                                                                                                       // 8735
        this.$scrollTop = scrollTop;                                                                                   // 8736
        this._signal("changeScrollTop", scrollTop);                                                                    // 8737
    };                                                                                                                 // 8738
    this.getScrollTop = function() {                                                                                   // 8739
        return this.$scrollTop;                                                                                        // 8740
    };                                                                                                                 // 8741
                                                                                                                       // 8742
    this.$scrollLeft = 0;                                                                                              // 8743
    this.setScrollLeft = function(scrollLeft) {                                                                        // 8744
        if (this.$scrollLeft === scrollLeft || isNaN(scrollLeft))                                                      // 8745
            return;                                                                                                    // 8746
                                                                                                                       // 8747
        this.$scrollLeft = scrollLeft;                                                                                 // 8748
        this._signal("changeScrollLeft", scrollLeft);                                                                  // 8749
    };                                                                                                                 // 8750
    this.getScrollLeft = function() {                                                                                  // 8751
        return this.$scrollLeft;                                                                                       // 8752
    };                                                                                                                 // 8753
    this.getScreenWidth = function() {                                                                                 // 8754
        this.$computeWidth();                                                                                          // 8755
        if (this.lineWidgets)                                                                                          // 8756
            return Math.max(this.getLineWidgetMaxWidth(), this.screenWidth);                                           // 8757
        return this.screenWidth;                                                                                       // 8758
    };                                                                                                                 // 8759
                                                                                                                       // 8760
    this.getLineWidgetMaxWidth = function() {                                                                          // 8761
        if (this.lineWidgetsWidth != null) return this.lineWidgetsWidth;                                               // 8762
        var width = 0;                                                                                                 // 8763
        this.lineWidgets.forEach(function(w) {                                                                         // 8764
            if (w && w.screenWidth > width)                                                                            // 8765
                width = w.screenWidth;                                                                                 // 8766
        });                                                                                                            // 8767
        return this.lineWidgetWidth = width;                                                                           // 8768
    };                                                                                                                 // 8769
                                                                                                                       // 8770
    this.$computeWidth = function(force) {                                                                             // 8771
        if (this.$modified || force) {                                                                                 // 8772
            this.$modified = false;                                                                                    // 8773
                                                                                                                       // 8774
            if (this.$useWrapMode)                                                                                     // 8775
                return this.screenWidth = this.$wrapLimit;                                                             // 8776
                                                                                                                       // 8777
            var lines = this.doc.getAllLines();                                                                        // 8778
            var cache = this.$rowLengthCache;                                                                          // 8779
            var longestScreenLine = 0;                                                                                 // 8780
            var foldIndex = 0;                                                                                         // 8781
            var foldLine = this.$foldData[foldIndex];                                                                  // 8782
            var foldStart = foldLine ? foldLine.start.row : Infinity;                                                  // 8783
            var len = lines.length;                                                                                    // 8784
                                                                                                                       // 8785
            for (var i = 0; i < len; i++) {                                                                            // 8786
                if (i > foldStart) {                                                                                   // 8787
                    i = foldLine.end.row + 1;                                                                          // 8788
                    if (i >= len)                                                                                      // 8789
                        break;                                                                                         // 8790
                    foldLine = this.$foldData[foldIndex++];                                                            // 8791
                    foldStart = foldLine ? foldLine.start.row : Infinity;                                              // 8792
                }                                                                                                      // 8793
                                                                                                                       // 8794
                if (cache[i] == null)                                                                                  // 8795
                    cache[i] = this.$getStringScreenWidth(lines[i])[0];                                                // 8796
                                                                                                                       // 8797
                if (cache[i] > longestScreenLine)                                                                      // 8798
                    longestScreenLine = cache[i];                                                                      // 8799
            }                                                                                                          // 8800
            this.screenWidth = longestScreenLine;                                                                      // 8801
        }                                                                                                              // 8802
    };                                                                                                                 // 8803
    this.getLine = function(row) {                                                                                     // 8804
        return this.doc.getLine(row);                                                                                  // 8805
    };                                                                                                                 // 8806
    this.getLines = function(firstRow, lastRow) {                                                                      // 8807
        return this.doc.getLines(firstRow, lastRow);                                                                   // 8808
    };                                                                                                                 // 8809
    this.getLength = function() {                                                                                      // 8810
        return this.doc.getLength();                                                                                   // 8811
    };                                                                                                                 // 8812
    this.getTextRange = function(range) {                                                                              // 8813
        return this.doc.getTextRange(range || this.selection.getRange());                                              // 8814
    };                                                                                                                 // 8815
    this.insert = function(position, text) {                                                                           // 8816
        return this.doc.insert(position, text);                                                                        // 8817
    };                                                                                                                 // 8818
    this.remove = function(range) {                                                                                    // 8819
        return this.doc.remove(range);                                                                                 // 8820
    };                                                                                                                 // 8821
    this.removeFullLines = function(firstRow, lastRow){                                                                // 8822
        return this.doc.removeFullLines(firstRow, lastRow);                                                            // 8823
    };                                                                                                                 // 8824
    this.undoChanges = function(deltas, dontSelect) {                                                                  // 8825
        if (!deltas.length)                                                                                            // 8826
            return;                                                                                                    // 8827
                                                                                                                       // 8828
        this.$fromUndo = true;                                                                                         // 8829
        var lastUndoRange = null;                                                                                      // 8830
        for (var i = deltas.length - 1; i != -1; i--) {                                                                // 8831
            var delta = deltas[i];                                                                                     // 8832
            if (delta.group == "doc") {                                                                                // 8833
                this.doc.revertDeltas(delta.deltas);                                                                   // 8834
                lastUndoRange =                                                                                        // 8835
                    this.$getUndoSelection(delta.deltas, true, lastUndoRange);                                         // 8836
            } else {                                                                                                   // 8837
                delta.deltas.forEach(function(foldDelta) {                                                             // 8838
                    this.addFolds(foldDelta.folds);                                                                    // 8839
                }, this);                                                                                              // 8840
            }                                                                                                          // 8841
        }                                                                                                              // 8842
        this.$fromUndo = false;                                                                                        // 8843
        lastUndoRange &&                                                                                               // 8844
            this.$undoSelect &&                                                                                        // 8845
            !dontSelect &&                                                                                             // 8846
            this.selection.setSelectionRange(lastUndoRange);                                                           // 8847
        return lastUndoRange;                                                                                          // 8848
    };                                                                                                                 // 8849
    this.redoChanges = function(deltas, dontSelect) {                                                                  // 8850
        if (!deltas.length)                                                                                            // 8851
            return;                                                                                                    // 8852
                                                                                                                       // 8853
        this.$fromUndo = true;                                                                                         // 8854
        var lastUndoRange = null;                                                                                      // 8855
        for (var i = 0; i < deltas.length; i++) {                                                                      // 8856
            var delta = deltas[i];                                                                                     // 8857
            if (delta.group == "doc") {                                                                                // 8858
                this.doc.applyDeltas(delta.deltas);                                                                    // 8859
                lastUndoRange =                                                                                        // 8860
                    this.$getUndoSelection(delta.deltas, false, lastUndoRange);                                        // 8861
            }                                                                                                          // 8862
        }                                                                                                              // 8863
        this.$fromUndo = false;                                                                                        // 8864
        lastUndoRange &&                                                                                               // 8865
            this.$undoSelect &&                                                                                        // 8866
            !dontSelect &&                                                                                             // 8867
            this.selection.setSelectionRange(lastUndoRange);                                                           // 8868
        return lastUndoRange;                                                                                          // 8869
    };                                                                                                                 // 8870
    this.setUndoSelect = function(enable) {                                                                            // 8871
        this.$undoSelect = enable;                                                                                     // 8872
    };                                                                                                                 // 8873
                                                                                                                       // 8874
    this.$getUndoSelection = function(deltas, isUndo, lastUndoRange) {                                                 // 8875
        function isInsert(delta) {                                                                                     // 8876
            return isUndo ? delta.action !== "insert" : delta.action === "insert";                                     // 8877
        }                                                                                                              // 8878
                                                                                                                       // 8879
        var delta = deltas[0];                                                                                         // 8880
        var range, point;                                                                                              // 8881
        var lastDeltaIsInsert = false;                                                                                 // 8882
        if (isInsert(delta)) {                                                                                         // 8883
            range = Range.fromPoints(delta.start, delta.end);                                                          // 8884
            lastDeltaIsInsert = true;                                                                                  // 8885
        } else {                                                                                                       // 8886
            range = Range.fromPoints(delta.start, delta.start);                                                        // 8887
            lastDeltaIsInsert = false;                                                                                 // 8888
        }                                                                                                              // 8889
                                                                                                                       // 8890
        for (var i = 1; i < deltas.length; i++) {                                                                      // 8891
            delta = deltas[i];                                                                                         // 8892
            if (isInsert(delta)) {                                                                                     // 8893
                point = delta.start;                                                                                   // 8894
                if (range.compare(point.row, point.column) == -1) {                                                    // 8895
                    range.setStart(point);                                                                             // 8896
                }                                                                                                      // 8897
                point = delta.end;                                                                                     // 8898
                if (range.compare(point.row, point.column) == 1) {                                                     // 8899
                    range.setEnd(point);                                                                               // 8900
                }                                                                                                      // 8901
                lastDeltaIsInsert = true;                                                                              // 8902
            } else {                                                                                                   // 8903
                point = delta.start;                                                                                   // 8904
                if (range.compare(point.row, point.column) == -1) {                                                    // 8905
                    range = Range.fromPoints(delta.start, delta.start);                                                // 8906
                }                                                                                                      // 8907
                lastDeltaIsInsert = false;                                                                             // 8908
            }                                                                                                          // 8909
        }                                                                                                              // 8910
        if (lastUndoRange != null) {                                                                                   // 8911
            if (Range.comparePoints(lastUndoRange.start, range.start) === 0) {                                         // 8912
                lastUndoRange.start.column += range.end.column - range.start.column;                                   // 8913
                lastUndoRange.end.column += range.end.column - range.start.column;                                     // 8914
            }                                                                                                          // 8915
                                                                                                                       // 8916
            var cmp = lastUndoRange.compareRange(range);                                                               // 8917
            if (cmp == 1) {                                                                                            // 8918
                range.setStart(lastUndoRange.start);                                                                   // 8919
            } else if (cmp == -1) {                                                                                    // 8920
                range.setEnd(lastUndoRange.end);                                                                       // 8921
            }                                                                                                          // 8922
        }                                                                                                              // 8923
                                                                                                                       // 8924
        return range;                                                                                                  // 8925
    };                                                                                                                 // 8926
    this.replace = function(range, text) {                                                                             // 8927
        return this.doc.replace(range, text);                                                                          // 8928
    };                                                                                                                 // 8929
    this.moveText = function(fromRange, toPosition, copy) {                                                            // 8930
        var text = this.getTextRange(fromRange);                                                                       // 8931
        var folds = this.getFoldsInRange(fromRange);                                                                   // 8932
                                                                                                                       // 8933
        var toRange = Range.fromPoints(toPosition, toPosition);                                                        // 8934
        if (!copy) {                                                                                                   // 8935
            this.remove(fromRange);                                                                                    // 8936
            var rowDiff = fromRange.start.row - fromRange.end.row;                                                     // 8937
            var collDiff = rowDiff ? -fromRange.end.column : fromRange.start.column - fromRange.end.column;            // 8938
            if (collDiff) {                                                                                            // 8939
                if (toRange.start.row == fromRange.end.row && toRange.start.column > fromRange.end.column)             // 8940
                    toRange.start.column += collDiff;                                                                  // 8941
                if (toRange.end.row == fromRange.end.row && toRange.end.column > fromRange.end.column)                 // 8942
                    toRange.end.column += collDiff;                                                                    // 8943
            }                                                                                                          // 8944
            if (rowDiff && toRange.start.row >= fromRange.end.row) {                                                   // 8945
                toRange.start.row += rowDiff;                                                                          // 8946
                toRange.end.row += rowDiff;                                                                            // 8947
            }                                                                                                          // 8948
        }                                                                                                              // 8949
                                                                                                                       // 8950
        toRange.end = this.insert(toRange.start, text);                                                                // 8951
        if (folds.length) {                                                                                            // 8952
            var oldStart = fromRange.start;                                                                            // 8953
            var newStart = toRange.start;                                                                              // 8954
            var rowDiff = newStart.row - oldStart.row;                                                                 // 8955
            var collDiff = newStart.column - oldStart.column;                                                          // 8956
            this.addFolds(folds.map(function(x) {                                                                      // 8957
                x = x.clone();                                                                                         // 8958
                if (x.start.row == oldStart.row)                                                                       // 8959
                    x.start.column += collDiff;                                                                        // 8960
                if (x.end.row == oldStart.row)                                                                         // 8961
                    x.end.column += collDiff;                                                                          // 8962
                x.start.row += rowDiff;                                                                                // 8963
                x.end.row += rowDiff;                                                                                  // 8964
                return x;                                                                                              // 8965
            }));                                                                                                       // 8966
        }                                                                                                              // 8967
                                                                                                                       // 8968
        return toRange;                                                                                                // 8969
    };                                                                                                                 // 8970
    this.indentRows = function(startRow, endRow, indentString) {                                                       // 8971
        indentString = indentString.replace(/\t/g, this.getTabString());                                               // 8972
        for (var row=startRow; row<=endRow; row++)                                                                     // 8973
            this.doc.insertInLine({row: row, column: 0}, indentString);                                                // 8974
    };                                                                                                                 // 8975
    this.outdentRows = function (range) {                                                                              // 8976
        var rowRange = range.collapseRows();                                                                           // 8977
        var deleteRange = new Range(0, 0, 0, 0);                                                                       // 8978
        var size = this.getTabSize();                                                                                  // 8979
                                                                                                                       // 8980
        for (var i = rowRange.start.row; i <= rowRange.end.row; ++i) {                                                 // 8981
            var line = this.getLine(i);                                                                                // 8982
                                                                                                                       // 8983
            deleteRange.start.row = i;                                                                                 // 8984
            deleteRange.end.row = i;                                                                                   // 8985
            for (var j = 0; j < size; ++j)                                                                             // 8986
                if (line.charAt(j) != ' ')                                                                             // 8987
                    break;                                                                                             // 8988
            if (j < size && line.charAt(j) == '\t') {                                                                  // 8989
                deleteRange.start.column = j;                                                                          // 8990
                deleteRange.end.column = j + 1;                                                                        // 8991
            } else {                                                                                                   // 8992
                deleteRange.start.column = 0;                                                                          // 8993
                deleteRange.end.column = j;                                                                            // 8994
            }                                                                                                          // 8995
            this.remove(deleteRange);                                                                                  // 8996
        }                                                                                                              // 8997
    };                                                                                                                 // 8998
                                                                                                                       // 8999
    this.$moveLines = function(firstRow, lastRow, dir) {                                                               // 9000
        firstRow = this.getRowFoldStart(firstRow);                                                                     // 9001
        lastRow = this.getRowFoldEnd(lastRow);                                                                         // 9002
        if (dir < 0) {                                                                                                 // 9003
            var row = this.getRowFoldStart(firstRow + dir);                                                            // 9004
            if (row < 0) return 0;                                                                                     // 9005
            var diff = row-firstRow;                                                                                   // 9006
        } else if (dir > 0) {                                                                                          // 9007
            var row = this.getRowFoldEnd(lastRow + dir);                                                               // 9008
            if (row > this.doc.getLength()-1) return 0;                                                                // 9009
            var diff = row-lastRow;                                                                                    // 9010
        } else {                                                                                                       // 9011
            firstRow = this.$clipRowToDocument(firstRow);                                                              // 9012
            lastRow = this.$clipRowToDocument(lastRow);                                                                // 9013
            var diff = lastRow - firstRow + 1;                                                                         // 9014
        }                                                                                                              // 9015
                                                                                                                       // 9016
        var range = new Range(firstRow, 0, lastRow, Number.MAX_VALUE);                                                 // 9017
        var folds = this.getFoldsInRange(range).map(function(x){                                                       // 9018
            x = x.clone();                                                                                             // 9019
            x.start.row += diff;                                                                                       // 9020
            x.end.row += diff;                                                                                         // 9021
            return x;                                                                                                  // 9022
        });                                                                                                            // 9023
                                                                                                                       // 9024
        var lines = dir == 0                                                                                           // 9025
            ? this.doc.getLines(firstRow, lastRow)                                                                     // 9026
            : this.doc.removeFullLines(firstRow, lastRow);                                                             // 9027
        this.doc.insertFullLines(firstRow+diff, lines);                                                                // 9028
        folds.length && this.addFolds(folds);                                                                          // 9029
        return diff;                                                                                                   // 9030
    };                                                                                                                 // 9031
    this.moveLinesUp = function(firstRow, lastRow) {                                                                   // 9032
        return this.$moveLines(firstRow, lastRow, -1);                                                                 // 9033
    };                                                                                                                 // 9034
    this.moveLinesDown = function(firstRow, lastRow) {                                                                 // 9035
        return this.$moveLines(firstRow, lastRow, 1);                                                                  // 9036
    };                                                                                                                 // 9037
    this.duplicateLines = function(firstRow, lastRow) {                                                                // 9038
        return this.$moveLines(firstRow, lastRow, 0);                                                                  // 9039
    };                                                                                                                 // 9040
                                                                                                                       // 9041
                                                                                                                       // 9042
    this.$clipRowToDocument = function(row) {                                                                          // 9043
        return Math.max(0, Math.min(row, this.doc.getLength()-1));                                                     // 9044
    };                                                                                                                 // 9045
                                                                                                                       // 9046
    this.$clipColumnToRow = function(row, column) {                                                                    // 9047
        if (column < 0)                                                                                                // 9048
            return 0;                                                                                                  // 9049
        return Math.min(this.doc.getLine(row).length, column);                                                         // 9050
    };                                                                                                                 // 9051
                                                                                                                       // 9052
                                                                                                                       // 9053
    this.$clipPositionToDocument = function(row, column) {                                                             // 9054
        column = Math.max(0, column);                                                                                  // 9055
                                                                                                                       // 9056
        if (row < 0) {                                                                                                 // 9057
            row = 0;                                                                                                   // 9058
            column = 0;                                                                                                // 9059
        } else {                                                                                                       // 9060
            var len = this.doc.getLength();                                                                            // 9061
            if (row >= len) {                                                                                          // 9062
                row = len - 1;                                                                                         // 9063
                column = this.doc.getLine(len-1).length;                                                               // 9064
            } else {                                                                                                   // 9065
                column = Math.min(this.doc.getLine(row).length, column);                                               // 9066
            }                                                                                                          // 9067
        }                                                                                                              // 9068
                                                                                                                       // 9069
        return {                                                                                                       // 9070
            row: row,                                                                                                  // 9071
            column: column                                                                                             // 9072
        };                                                                                                             // 9073
    };                                                                                                                 // 9074
                                                                                                                       // 9075
    this.$clipRangeToDocument = function(range) {                                                                      // 9076
        if (range.start.row < 0) {                                                                                     // 9077
            range.start.row = 0;                                                                                       // 9078
            range.start.column = 0;                                                                                    // 9079
        } else {                                                                                                       // 9080
            range.start.column = this.$clipColumnToRow(                                                                // 9081
                range.start.row,                                                                                       // 9082
                range.start.column                                                                                     // 9083
            );                                                                                                         // 9084
        }                                                                                                              // 9085
                                                                                                                       // 9086
        var len = this.doc.getLength() - 1;                                                                            // 9087
        if (range.end.row > len) {                                                                                     // 9088
            range.end.row = len;                                                                                       // 9089
            range.end.column = this.doc.getLine(len).length;                                                           // 9090
        } else {                                                                                                       // 9091
            range.end.column = this.$clipColumnToRow(                                                                  // 9092
                range.end.row,                                                                                         // 9093
                range.end.column                                                                                       // 9094
            );                                                                                                         // 9095
        }                                                                                                              // 9096
        return range;                                                                                                  // 9097
    };                                                                                                                 // 9098
    this.$wrapLimit = 80;                                                                                              // 9099
    this.$useWrapMode = false;                                                                                         // 9100
    this.$wrapLimitRange = {                                                                                           // 9101
        min : null,                                                                                                    // 9102
        max : null                                                                                                     // 9103
    };                                                                                                                 // 9104
    this.setUseWrapMode = function(useWrapMode) {                                                                      // 9105
        if (useWrapMode != this.$useWrapMode) {                                                                        // 9106
            this.$useWrapMode = useWrapMode;                                                                           // 9107
            this.$modified = true;                                                                                     // 9108
            this.$resetRowCache(0);                                                                                    // 9109
            if (useWrapMode) {                                                                                         // 9110
                var len = this.getLength();                                                                            // 9111
                this.$wrapData = Array(len);                                                                           // 9112
                this.$updateWrapData(0, len - 1);                                                                      // 9113
            }                                                                                                          // 9114
                                                                                                                       // 9115
            this._signal("changeWrapMode");                                                                            // 9116
        }                                                                                                              // 9117
    };                                                                                                                 // 9118
    this.getUseWrapMode = function() {                                                                                 // 9119
        return this.$useWrapMode;                                                                                      // 9120
    };                                                                                                                 // 9121
    this.setWrapLimitRange = function(min, max) {                                                                      // 9122
        if (this.$wrapLimitRange.min !== min || this.$wrapLimitRange.max !== max) {                                    // 9123
            this.$wrapLimitRange = { min: min, max: max };                                                             // 9124
            this.$modified = true;                                                                                     // 9125
            if (this.$useWrapMode)                                                                                     // 9126
                this._signal("changeWrapMode");                                                                        // 9127
        }                                                                                                              // 9128
    };                                                                                                                 // 9129
    this.adjustWrapLimit = function(desiredLimit, $printMargin) {                                                      // 9130
        var limits = this.$wrapLimitRange;                                                                             // 9131
        if (limits.max < 0)                                                                                            // 9132
            limits = {min: $printMargin, max: $printMargin};                                                           // 9133
        var wrapLimit = this.$constrainWrapLimit(desiredLimit, limits.min, limits.max);                                // 9134
        if (wrapLimit != this.$wrapLimit && wrapLimit > 1) {                                                           // 9135
            this.$wrapLimit = wrapLimit;                                                                               // 9136
            this.$modified = true;                                                                                     // 9137
            if (this.$useWrapMode) {                                                                                   // 9138
                this.$updateWrapData(0, this.getLength() - 1);                                                         // 9139
                this.$resetRowCache(0);                                                                                // 9140
                this._signal("changeWrapLimit");                                                                       // 9141
            }                                                                                                          // 9142
            return true;                                                                                               // 9143
        }                                                                                                              // 9144
        return false;                                                                                                  // 9145
    };                                                                                                                 // 9146
                                                                                                                       // 9147
    this.$constrainWrapLimit = function(wrapLimit, min, max) {                                                         // 9148
        if (min)                                                                                                       // 9149
            wrapLimit = Math.max(min, wrapLimit);                                                                      // 9150
                                                                                                                       // 9151
        if (max)                                                                                                       // 9152
            wrapLimit = Math.min(max, wrapLimit);                                                                      // 9153
                                                                                                                       // 9154
        return wrapLimit;                                                                                              // 9155
    };                                                                                                                 // 9156
    this.getWrapLimit = function() {                                                                                   // 9157
        return this.$wrapLimit;                                                                                        // 9158
    };                                                                                                                 // 9159
    this.setWrapLimit = function (limit) {                                                                             // 9160
        this.setWrapLimitRange(limit, limit);                                                                          // 9161
    };                                                                                                                 // 9162
    this.getWrapLimitRange = function() {                                                                              // 9163
        return {                                                                                                       // 9164
            min : this.$wrapLimitRange.min,                                                                            // 9165
            max : this.$wrapLimitRange.max                                                                             // 9166
        };                                                                                                             // 9167
    };                                                                                                                 // 9168
                                                                                                                       // 9169
    this.$updateInternalDataOnChange = function(delta) {                                                               // 9170
        var useWrapMode = this.$useWrapMode;                                                                           // 9171
        var action = delta.action;                                                                                     // 9172
        var start = delta.start;                                                                                       // 9173
        var end = delta.end;                                                                                           // 9174
        var firstRow = start.row;                                                                                      // 9175
        var lastRow = end.row;                                                                                         // 9176
        var len = lastRow - firstRow;                                                                                  // 9177
        var removedFolds = null;                                                                                       // 9178
                                                                                                                       // 9179
        this.$updating = true;                                                                                         // 9180
        if (len != 0) {                                                                                                // 9181
            if (action === "remove") {                                                                                 // 9182
                this[useWrapMode ? "$wrapData" : "$rowLengthCache"].splice(firstRow, len);                             // 9183
                                                                                                                       // 9184
                var foldLines = this.$foldData;                                                                        // 9185
                removedFolds = this.getFoldsInRange(delta);                                                            // 9186
                this.removeFolds(removedFolds);                                                                        // 9187
                                                                                                                       // 9188
                var foldLine = this.getFoldLine(end.row);                                                              // 9189
                var idx = 0;                                                                                           // 9190
                if (foldLine) {                                                                                        // 9191
                    foldLine.addRemoveChars(end.row, end.column, start.column - end.column);                           // 9192
                    foldLine.shiftRow(-len);                                                                           // 9193
                                                                                                                       // 9194
                    var foldLineBefore = this.getFoldLine(firstRow);                                                   // 9195
                    if (foldLineBefore && foldLineBefore !== foldLine) {                                               // 9196
                        foldLineBefore.merge(foldLine);                                                                // 9197
                        foldLine = foldLineBefore;                                                                     // 9198
                    }                                                                                                  // 9199
                    idx = foldLines.indexOf(foldLine) + 1;                                                             // 9200
                }                                                                                                      // 9201
                                                                                                                       // 9202
                for (idx; idx < foldLines.length; idx++) {                                                             // 9203
                    var foldLine = foldLines[idx];                                                                     // 9204
                    if (foldLine.start.row >= end.row) {                                                               // 9205
                        foldLine.shiftRow(-len);                                                                       // 9206
                    }                                                                                                  // 9207
                }                                                                                                      // 9208
                                                                                                                       // 9209
                lastRow = firstRow;                                                                                    // 9210
            } else {                                                                                                   // 9211
                var args = Array(len);                                                                                 // 9212
                args.unshift(firstRow, 0);                                                                             // 9213
                var arr = useWrapMode ? this.$wrapData : this.$rowLengthCache                                          // 9214
                arr.splice.apply(arr, args);                                                                           // 9215
                var foldLines = this.$foldData;                                                                        // 9216
                var foldLine = this.getFoldLine(firstRow);                                                             // 9217
                var idx = 0;                                                                                           // 9218
                if (foldLine) {                                                                                        // 9219
                    var cmp = foldLine.range.compareInside(start.row, start.column);                                   // 9220
                    if (cmp == 0) {                                                                                    // 9221
                        foldLine = foldLine.split(start.row, start.column);                                            // 9222
                        if (foldLine) {                                                                                // 9223
                            foldLine.shiftRow(len);                                                                    // 9224
                            foldLine.addRemoveChars(lastRow, 0, end.column - start.column);                            // 9225
                        }                                                                                              // 9226
                    } else                                                                                             // 9227
                    if (cmp == -1) {                                                                                   // 9228
                        foldLine.addRemoveChars(firstRow, 0, end.column - start.column);                               // 9229
                        foldLine.shiftRow(len);                                                                        // 9230
                    }                                                                                                  // 9231
                    idx = foldLines.indexOf(foldLine) + 1;                                                             // 9232
                }                                                                                                      // 9233
                                                                                                                       // 9234
                for (idx; idx < foldLines.length; idx++) {                                                             // 9235
                    var foldLine = foldLines[idx];                                                                     // 9236
                    if (foldLine.start.row >= firstRow) {                                                              // 9237
                        foldLine.shiftRow(len);                                                                        // 9238
                    }                                                                                                  // 9239
                }                                                                                                      // 9240
            }                                                                                                          // 9241
        } else {                                                                                                       // 9242
            len = Math.abs(delta.start.column - delta.end.column);                                                     // 9243
            if (action === "remove") {                                                                                 // 9244
                removedFolds = this.getFoldsInRange(delta);                                                            // 9245
                this.removeFolds(removedFolds);                                                                        // 9246
                                                                                                                       // 9247
                len = -len;                                                                                            // 9248
            }                                                                                                          // 9249
            var foldLine = this.getFoldLine(firstRow);                                                                 // 9250
            if (foldLine) {                                                                                            // 9251
                foldLine.addRemoveChars(firstRow, start.column, len);                                                  // 9252
            }                                                                                                          // 9253
        }                                                                                                              // 9254
                                                                                                                       // 9255
        if (useWrapMode && this.$wrapData.length != this.doc.getLength()) {                                            // 9256
            console.error("doc.getLength() and $wrapData.length have to be the same!");                                // 9257
        }                                                                                                              // 9258
        this.$updating = false;                                                                                        // 9259
                                                                                                                       // 9260
        if (useWrapMode)                                                                                               // 9261
            this.$updateWrapData(firstRow, lastRow);                                                                   // 9262
        else                                                                                                           // 9263
            this.$updateRowLengthCache(firstRow, lastRow);                                                             // 9264
                                                                                                                       // 9265
        return removedFolds;                                                                                           // 9266
    };                                                                                                                 // 9267
                                                                                                                       // 9268
    this.$updateRowLengthCache = function(firstRow, lastRow, b) {                                                      // 9269
        this.$rowLengthCache[firstRow] = null;                                                                         // 9270
        this.$rowLengthCache[lastRow] = null;                                                                          // 9271
    };                                                                                                                 // 9272
                                                                                                                       // 9273
    this.$updateWrapData = function(firstRow, lastRow) {                                                               // 9274
        var lines = this.doc.getAllLines();                                                                            // 9275
        var tabSize = this.getTabSize();                                                                               // 9276
        var wrapData = this.$wrapData;                                                                                 // 9277
        var wrapLimit = this.$wrapLimit;                                                                               // 9278
        var tokens;                                                                                                    // 9279
        var foldLine;                                                                                                  // 9280
                                                                                                                       // 9281
        var row = firstRow;                                                                                            // 9282
        lastRow = Math.min(lastRow, lines.length - 1);                                                                 // 9283
        while (row <= lastRow) {                                                                                       // 9284
            foldLine = this.getFoldLine(row, foldLine);                                                                // 9285
            if (!foldLine) {                                                                                           // 9286
                tokens = this.$getDisplayTokens(lines[row]);                                                           // 9287
                wrapData[row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);                                   // 9288
                row ++;                                                                                                // 9289
            } else {                                                                                                   // 9290
                tokens = [];                                                                                           // 9291
                foldLine.walk(function(placeholder, row, column, lastColumn) {                                         // 9292
                        var walkTokens;                                                                                // 9293
                        if (placeholder != null) {                                                                     // 9294
                            walkTokens = this.$getDisplayTokens(                                                       // 9295
                                            placeholder, tokens.length);                                               // 9296
                            walkTokens[0] = PLACEHOLDER_START;                                                         // 9297
                            for (var i = 1; i < walkTokens.length; i++) {                                              // 9298
                                walkTokens[i] = PLACEHOLDER_BODY;                                                      // 9299
                            }                                                                                          // 9300
                        } else {                                                                                       // 9301
                            walkTokens = this.$getDisplayTokens(                                                       // 9302
                                lines[row].substring(lastColumn, column),                                              // 9303
                                tokens.length);                                                                        // 9304
                        }                                                                                              // 9305
                        tokens = tokens.concat(walkTokens);                                                            // 9306
                    }.bind(this),                                                                                      // 9307
                    foldLine.end.row,                                                                                  // 9308
                    lines[foldLine.end.row].length + 1                                                                 // 9309
                );                                                                                                     // 9310
                                                                                                                       // 9311
                wrapData[foldLine.start.row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);                    // 9312
                row = foldLine.end.row + 1;                                                                            // 9313
            }                                                                                                          // 9314
        }                                                                                                              // 9315
    };                                                                                                                 // 9316
    var CHAR = 1,                                                                                                      // 9317
        CHAR_EXT = 2,                                                                                                  // 9318
        PLACEHOLDER_START = 3,                                                                                         // 9319
        PLACEHOLDER_BODY =  4,                                                                                         // 9320
        PUNCTUATION = 9,                                                                                               // 9321
        SPACE = 10,                                                                                                    // 9322
        TAB = 11,                                                                                                      // 9323
        TAB_SPACE = 12;                                                                                                // 9324
                                                                                                                       // 9325
                                                                                                                       // 9326
    this.$computeWrapSplits = function(tokens, wrapLimit, tabSize) {                                                   // 9327
        if (tokens.length == 0) {                                                                                      // 9328
            return [];                                                                                                 // 9329
        }                                                                                                              // 9330
                                                                                                                       // 9331
        var splits = [];                                                                                               // 9332
        var displayLength = tokens.length;                                                                             // 9333
        var lastSplit = 0, lastDocSplit = 0;                                                                           // 9334
                                                                                                                       // 9335
        var isCode = this.$wrapAsCode;                                                                                 // 9336
                                                                                                                       // 9337
        var indentedSoftWrap = this.$indentedSoftWrap;                                                                 // 9338
        var maxIndent = wrapLimit <= Math.max(2 * tabSize, 8)                                                          // 9339
            || indentedSoftWrap === false ? 0 : Math.floor(wrapLimit / 2);                                             // 9340
                                                                                                                       // 9341
        function getWrapIndent() {                                                                                     // 9342
            var indentation = 0;                                                                                       // 9343
            if (maxIndent === 0)                                                                                       // 9344
                return indentation;                                                                                    // 9345
            if (indentedSoftWrap) {                                                                                    // 9346
                for (var i = 0; i < tokens.length; i++) {                                                              // 9347
                    var token = tokens[i];                                                                             // 9348
                    if (token == SPACE)                                                                                // 9349
                        indentation += 1;                                                                              // 9350
                    else if (token == TAB)                                                                             // 9351
                        indentation += tabSize;                                                                        // 9352
                    else if (token == TAB_SPACE)                                                                       // 9353
                        continue;                                                                                      // 9354
                    else                                                                                               // 9355
                        break;                                                                                         // 9356
                }                                                                                                      // 9357
            }                                                                                                          // 9358
            if (isCode && indentedSoftWrap !== false)                                                                  // 9359
                indentation += tabSize;                                                                                // 9360
            return Math.min(indentation, maxIndent);                                                                   // 9361
        }                                                                                                              // 9362
        function addSplit(screenPos) {                                                                                 // 9363
            var displayed = tokens.slice(lastSplit, screenPos);                                                        // 9364
            var len = displayed.length;                                                                                // 9365
            displayed.join("").                                                                                        // 9366
                replace(/12/g, function() {                                                                            // 9367
                    len -= 1;                                                                                          // 9368
                }).                                                                                                    // 9369
                replace(/2/g, function() {                                                                             // 9370
                    len -= 1;                                                                                          // 9371
                });                                                                                                    // 9372
                                                                                                                       // 9373
            if (!splits.length) {                                                                                      // 9374
                indent = getWrapIndent();                                                                              // 9375
                splits.indent = indent;                                                                                // 9376
            }                                                                                                          // 9377
            lastDocSplit += len;                                                                                       // 9378
            splits.push(lastDocSplit);                                                                                 // 9379
            lastSplit = screenPos;                                                                                     // 9380
        }                                                                                                              // 9381
        var indent = 0;                                                                                                // 9382
        while (displayLength - lastSplit > wrapLimit - indent) {                                                       // 9383
            var split = lastSplit + wrapLimit - indent;                                                                // 9384
            if (tokens[split - 1] >= SPACE && tokens[split] >= SPACE) {                                                // 9385
                addSplit(split);                                                                                       // 9386
                continue;                                                                                              // 9387
            }                                                                                                          // 9388
            if (tokens[split] == PLACEHOLDER_START || tokens[split] == PLACEHOLDER_BODY) {                             // 9389
                for (split; split != lastSplit - 1; split--) {                                                         // 9390
                    if (tokens[split] == PLACEHOLDER_START) {                                                          // 9391
                        break;                                                                                         // 9392
                    }                                                                                                  // 9393
                }                                                                                                      // 9394
                if (split > lastSplit) {                                                                               // 9395
                    addSplit(split);                                                                                   // 9396
                    continue;                                                                                          // 9397
                }                                                                                                      // 9398
                split = lastSplit + wrapLimit;                                                                         // 9399
                for (split; split < tokens.length; split++) {                                                          // 9400
                    if (tokens[split] != PLACEHOLDER_BODY) {                                                           // 9401
                        break;                                                                                         // 9402
                    }                                                                                                  // 9403
                }                                                                                                      // 9404
                if (split == tokens.length) {                                                                          // 9405
                    break;  // Breaks the while-loop.                                                                  // 9406
                }                                                                                                      // 9407
                addSplit(split);                                                                                       // 9408
                continue;                                                                                              // 9409
            }                                                                                                          // 9410
            var minSplit = Math.max(split - (wrapLimit -(wrapLimit>>2)), lastSplit - 1);                               // 9411
            while (split > minSplit && tokens[split] < PLACEHOLDER_START) {                                            // 9412
                split --;                                                                                              // 9413
            }                                                                                                          // 9414
            if (isCode) {                                                                                              // 9415
                while (split > minSplit && tokens[split] < PLACEHOLDER_START) {                                        // 9416
                    split --;                                                                                          // 9417
                }                                                                                                      // 9418
                while (split > minSplit && tokens[split] == PUNCTUATION) {                                             // 9419
                    split --;                                                                                          // 9420
                }                                                                                                      // 9421
            } else {                                                                                                   // 9422
                while (split > minSplit && tokens[split] < SPACE) {                                                    // 9423
                    split --;                                                                                          // 9424
                }                                                                                                      // 9425
            }                                                                                                          // 9426
            if (split > minSplit) {                                                                                    // 9427
                addSplit(++split);                                                                                     // 9428
                continue;                                                                                              // 9429
            }                                                                                                          // 9430
            split = lastSplit + wrapLimit;                                                                             // 9431
            if (tokens[split] == CHAR_EXT)                                                                             // 9432
                split--;                                                                                               // 9433
            addSplit(split - indent);                                                                                  // 9434
        }                                                                                                              // 9435
        return splits;                                                                                                 // 9436
    };                                                                                                                 // 9437
    this.$getDisplayTokens = function(str, offset) {                                                                   // 9438
        var arr = [];                                                                                                  // 9439
        var tabSize;                                                                                                   // 9440
        offset = offset || 0;                                                                                          // 9441
                                                                                                                       // 9442
        for (var i = 0; i < str.length; i++) {                                                                         // 9443
            var c = str.charCodeAt(i);                                                                                 // 9444
            if (c == 9) {                                                                                              // 9445
                tabSize = this.getScreenTabSize(arr.length + offset);                                                  // 9446
                arr.push(TAB);                                                                                         // 9447
                for (var n = 1; n < tabSize; n++) {                                                                    // 9448
                    arr.push(TAB_SPACE);                                                                               // 9449
                }                                                                                                      // 9450
            }                                                                                                          // 9451
            else if (c == 32) {                                                                                        // 9452
                arr.push(SPACE);                                                                                       // 9453
            } else if((c > 39 && c < 48) || (c > 57 && c < 64)) {                                                      // 9454
                arr.push(PUNCTUATION);                                                                                 // 9455
            }                                                                                                          // 9456
            else if (c >= 0x1100 && isFullWidth(c)) {                                                                  // 9457
                arr.push(CHAR, CHAR_EXT);                                                                              // 9458
            } else {                                                                                                   // 9459
                arr.push(CHAR);                                                                                        // 9460
            }                                                                                                          // 9461
        }                                                                                                              // 9462
        return arr;                                                                                                    // 9463
    };                                                                                                                 // 9464
    this.$getStringScreenWidth = function(str, maxScreenColumn, screenColumn) {                                        // 9465
        if (maxScreenColumn == 0)                                                                                      // 9466
            return [0, 0];                                                                                             // 9467
        if (maxScreenColumn == null)                                                                                   // 9468
            maxScreenColumn = Infinity;                                                                                // 9469
        screenColumn = screenColumn || 0;                                                                              // 9470
                                                                                                                       // 9471
        var c, column;                                                                                                 // 9472
        for (column = 0; column < str.length; column++) {                                                              // 9473
            c = str.charCodeAt(column);                                                                                // 9474
            if (c == 9) {                                                                                              // 9475
                screenColumn += this.getScreenTabSize(screenColumn);                                                   // 9476
            }                                                                                                          // 9477
            else if (c >= 0x1100 && isFullWidth(c)) {                                                                  // 9478
                screenColumn += 2;                                                                                     // 9479
            } else {                                                                                                   // 9480
                screenColumn += 1;                                                                                     // 9481
            }                                                                                                          // 9482
            if (screenColumn > maxScreenColumn) {                                                                      // 9483
                break;                                                                                                 // 9484
            }                                                                                                          // 9485
        }                                                                                                              // 9486
                                                                                                                       // 9487
        return [screenColumn, column];                                                                                 // 9488
    };                                                                                                                 // 9489
                                                                                                                       // 9490
    this.lineWidgets = null;                                                                                           // 9491
    this.getRowLength = function(row) {                                                                                // 9492
        if (this.lineWidgets)                                                                                          // 9493
            var h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;                                      // 9494
        else                                                                                                           // 9495
            h = 0                                                                                                      // 9496
        if (!this.$useWrapMode || !this.$wrapData[row]) {                                                              // 9497
            return 1 + h;                                                                                              // 9498
        } else {                                                                                                       // 9499
            return this.$wrapData[row].length + 1 + h;                                                                 // 9500
        }                                                                                                              // 9501
    };                                                                                                                 // 9502
    this.getRowLineCount = function(row) {                                                                             // 9503
        if (!this.$useWrapMode || !this.$wrapData[row]) {                                                              // 9504
            return 1;                                                                                                  // 9505
        } else {                                                                                                       // 9506
            return this.$wrapData[row].length + 1;                                                                     // 9507
        }                                                                                                              // 9508
    };                                                                                                                 // 9509
                                                                                                                       // 9510
    this.getRowWrapIndent = function(screenRow) {                                                                      // 9511
        if (this.$useWrapMode) {                                                                                       // 9512
            var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);                                      // 9513
            var splits = this.$wrapData[pos.row];                                                                      // 9514
            return splits.length && splits[0] < pos.column ? splits.indent : 0;                                        // 9515
        } else {                                                                                                       // 9516
            return 0;                                                                                                  // 9517
        }                                                                                                              // 9518
    }                                                                                                                  // 9519
    this.getScreenLastRowColumn = function(screenRow) {                                                                // 9520
        var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);                                          // 9521
        return this.documentToScreenColumn(pos.row, pos.column);                                                       // 9522
    };                                                                                                                 // 9523
    this.getDocumentLastRowColumn = function(docRow, docColumn) {                                                      // 9524
        var screenRow = this.documentToScreenRow(docRow, docColumn);                                                   // 9525
        return this.getScreenLastRowColumn(screenRow);                                                                 // 9526
    };                                                                                                                 // 9527
    this.getDocumentLastRowColumnPosition = function(docRow, docColumn) {                                              // 9528
        var screenRow = this.documentToScreenRow(docRow, docColumn);                                                   // 9529
        return this.screenToDocumentPosition(screenRow, Number.MAX_VALUE / 10);                                        // 9530
    };                                                                                                                 // 9531
    this.getRowSplitData = function(row) {                                                                             // 9532
        if (!this.$useWrapMode) {                                                                                      // 9533
            return undefined;                                                                                          // 9534
        } else {                                                                                                       // 9535
            return this.$wrapData[row];                                                                                // 9536
        }                                                                                                              // 9537
    };                                                                                                                 // 9538
    this.getScreenTabSize = function(screenColumn) {                                                                   // 9539
        return this.$tabSize - screenColumn % this.$tabSize;                                                           // 9540
    };                                                                                                                 // 9541
                                                                                                                       // 9542
                                                                                                                       // 9543
    this.screenToDocumentRow = function(screenRow, screenColumn) {                                                     // 9544
        return this.screenToDocumentPosition(screenRow, screenColumn).row;                                             // 9545
    };                                                                                                                 // 9546
                                                                                                                       // 9547
                                                                                                                       // 9548
    this.screenToDocumentColumn = function(screenRow, screenColumn) {                                                  // 9549
        return this.screenToDocumentPosition(screenRow, screenColumn).column;                                          // 9550
    };                                                                                                                 // 9551
    this.screenToDocumentPosition = function(screenRow, screenColumn) {                                                // 9552
        if (screenRow < 0)                                                                                             // 9553
            return {row: 0, column: 0};                                                                                // 9554
                                                                                                                       // 9555
        var line;                                                                                                      // 9556
        var docRow = 0;                                                                                                // 9557
        var docColumn = 0;                                                                                             // 9558
        var column;                                                                                                    // 9559
        var row = 0;                                                                                                   // 9560
        var rowLength = 0;                                                                                             // 9561
                                                                                                                       // 9562
        var rowCache = this.$screenRowCache;                                                                           // 9563
        var i = this.$getRowCacheIndex(rowCache, screenRow);                                                           // 9564
        var l = rowCache.length;                                                                                       // 9565
        if (l && i >= 0) {                                                                                             // 9566
            var row = rowCache[i];                                                                                     // 9567
            var docRow = this.$docRowCache[i];                                                                         // 9568
            var doCache = screenRow > rowCache[l - 1];                                                                 // 9569
        } else {                                                                                                       // 9570
            var doCache = !l;                                                                                          // 9571
        }                                                                                                              // 9572
                                                                                                                       // 9573
        var maxRow = this.getLength() - 1;                                                                             // 9574
        var foldLine = this.getNextFoldLine(docRow);                                                                   // 9575
        var foldStart = foldLine ? foldLine.start.row : Infinity;                                                      // 9576
                                                                                                                       // 9577
        while (row <= screenRow) {                                                                                     // 9578
            rowLength = this.getRowLength(docRow);                                                                     // 9579
            if (row + rowLength > screenRow || docRow >= maxRow) {                                                     // 9580
                break;                                                                                                 // 9581
            } else {                                                                                                   // 9582
                row += rowLength;                                                                                      // 9583
                docRow++;                                                                                              // 9584
                if (docRow > foldStart) {                                                                              // 9585
                    docRow = foldLine.end.row+1;                                                                       // 9586
                    foldLine = this.getNextFoldLine(docRow, foldLine);                                                 // 9587
                    foldStart = foldLine ? foldLine.start.row : Infinity;                                              // 9588
                }                                                                                                      // 9589
            }                                                                                                          // 9590
                                                                                                                       // 9591
            if (doCache) {                                                                                             // 9592
                this.$docRowCache.push(docRow);                                                                        // 9593
                this.$screenRowCache.push(row);                                                                        // 9594
            }                                                                                                          // 9595
        }                                                                                                              // 9596
                                                                                                                       // 9597
        if (foldLine && foldLine.start.row <= docRow) {                                                                // 9598
            line = this.getFoldDisplayLine(foldLine);                                                                  // 9599
            docRow = foldLine.start.row;                                                                               // 9600
        } else if (row + rowLength <= screenRow || docRow > maxRow) {                                                  // 9601
            return {                                                                                                   // 9602
                row: maxRow,                                                                                           // 9603
                column: this.getLine(maxRow).length                                                                    // 9604
            };                                                                                                         // 9605
        } else {                                                                                                       // 9606
            line = this.getLine(docRow);                                                                               // 9607
            foldLine = null;                                                                                           // 9608
        }                                                                                                              // 9609
        var wrapIndent = 0;                                                                                            // 9610
        if (this.$useWrapMode) {                                                                                       // 9611
            var splits = this.$wrapData[docRow];                                                                       // 9612
            if (splits) {                                                                                              // 9613
                var splitIndex = Math.floor(screenRow - row);                                                          // 9614
                column = splits[splitIndex];                                                                           // 9615
                if(splitIndex > 0 && splits.length) {                                                                  // 9616
                    wrapIndent = splits.indent;                                                                        // 9617
                    docColumn = splits[splitIndex - 1] || splits[splits.length - 1];                                   // 9618
                    line = line.substring(docColumn);                                                                  // 9619
                }                                                                                                      // 9620
            }                                                                                                          // 9621
        }                                                                                                              // 9622
                                                                                                                       // 9623
        docColumn += this.$getStringScreenWidth(line, screenColumn - wrapIndent)[1];                                   // 9624
        if (this.$useWrapMode && docColumn >= column)                                                                  // 9625
            docColumn = column - 1;                                                                                    // 9626
                                                                                                                       // 9627
        if (foldLine)                                                                                                  // 9628
            return foldLine.idxToPosition(docColumn);                                                                  // 9629
                                                                                                                       // 9630
        return {row: docRow, column: docColumn};                                                                       // 9631
    };                                                                                                                 // 9632
    this.documentToScreenPosition = function(docRow, docColumn) {                                                      // 9633
        if (typeof docColumn === "undefined")                                                                          // 9634
            var pos = this.$clipPositionToDocument(docRow.row, docRow.column);                                         // 9635
        else                                                                                                           // 9636
            pos = this.$clipPositionToDocument(docRow, docColumn);                                                     // 9637
                                                                                                                       // 9638
        docRow = pos.row;                                                                                              // 9639
        docColumn = pos.column;                                                                                        // 9640
                                                                                                                       // 9641
        var screenRow = 0;                                                                                             // 9642
        var foldStartRow = null;                                                                                       // 9643
        var fold = null;                                                                                               // 9644
        fold = this.getFoldAt(docRow, docColumn, 1);                                                                   // 9645
        if (fold) {                                                                                                    // 9646
            docRow = fold.start.row;                                                                                   // 9647
            docColumn = fold.start.column;                                                                             // 9648
        }                                                                                                              // 9649
                                                                                                                       // 9650
        var rowEnd, row = 0;                                                                                           // 9651
                                                                                                                       // 9652
                                                                                                                       // 9653
        var rowCache = this.$docRowCache;                                                                              // 9654
        var i = this.$getRowCacheIndex(rowCache, docRow);                                                              // 9655
        var l = rowCache.length;                                                                                       // 9656
        if (l && i >= 0) {                                                                                             // 9657
            var row = rowCache[i];                                                                                     // 9658
            var screenRow = this.$screenRowCache[i];                                                                   // 9659
            var doCache = docRow > rowCache[l - 1];                                                                    // 9660
        } else {                                                                                                       // 9661
            var doCache = !l;                                                                                          // 9662
        }                                                                                                              // 9663
                                                                                                                       // 9664
        var foldLine = this.getNextFoldLine(row);                                                                      // 9665
        var foldStart = foldLine ?foldLine.start.row :Infinity;                                                        // 9666
                                                                                                                       // 9667
        while (row < docRow) {                                                                                         // 9668
            if (row >= foldStart) {                                                                                    // 9669
                rowEnd = foldLine.end.row + 1;                                                                         // 9670
                if (rowEnd > docRow)                                                                                   // 9671
                    break;                                                                                             // 9672
                foldLine = this.getNextFoldLine(rowEnd, foldLine);                                                     // 9673
                foldStart = foldLine ?foldLine.start.row :Infinity;                                                    // 9674
            }                                                                                                          // 9675
            else {                                                                                                     // 9676
                rowEnd = row + 1;                                                                                      // 9677
            }                                                                                                          // 9678
                                                                                                                       // 9679
            screenRow += this.getRowLength(row);                                                                       // 9680
            row = rowEnd;                                                                                              // 9681
                                                                                                                       // 9682
            if (doCache) {                                                                                             // 9683
                this.$docRowCache.push(row);                                                                           // 9684
                this.$screenRowCache.push(screenRow);                                                                  // 9685
            }                                                                                                          // 9686
        }                                                                                                              // 9687
        var textLine = "";                                                                                             // 9688
        if (foldLine && row >= foldStart) {                                                                            // 9689
            textLine = this.getFoldDisplayLine(foldLine, docRow, docColumn);                                           // 9690
            foldStartRow = foldLine.start.row;                                                                         // 9691
        } else {                                                                                                       // 9692
            textLine = this.getLine(docRow).substring(0, docColumn);                                                   // 9693
            foldStartRow = docRow;                                                                                     // 9694
        }                                                                                                              // 9695
        var wrapIndent = 0;                                                                                            // 9696
        if (this.$useWrapMode) {                                                                                       // 9697
            var wrapRow = this.$wrapData[foldStartRow];                                                                // 9698
            if (wrapRow) {                                                                                             // 9699
                var screenRowOffset = 0;                                                                               // 9700
                while (textLine.length >= wrapRow[screenRowOffset]) {                                                  // 9701
                    screenRow ++;                                                                                      // 9702
                    screenRowOffset++;                                                                                 // 9703
                }                                                                                                      // 9704
                textLine = textLine.substring(                                                                         // 9705
                    wrapRow[screenRowOffset - 1] || 0, textLine.length                                                 // 9706
                );                                                                                                     // 9707
                wrapIndent = screenRowOffset > 0 ? wrapRow.indent : 0;                                                 // 9708
            }                                                                                                          // 9709
        }                                                                                                              // 9710
                                                                                                                       // 9711
        return {                                                                                                       // 9712
            row: screenRow,                                                                                            // 9713
            column: wrapIndent + this.$getStringScreenWidth(textLine)[0]                                               // 9714
        };                                                                                                             // 9715
    };                                                                                                                 // 9716
    this.documentToScreenColumn = function(row, docColumn) {                                                           // 9717
        return this.documentToScreenPosition(row, docColumn).column;                                                   // 9718
    };                                                                                                                 // 9719
    this.documentToScreenRow = function(docRow, docColumn) {                                                           // 9720
        return this.documentToScreenPosition(docRow, docColumn).row;                                                   // 9721
    };                                                                                                                 // 9722
    this.getScreenLength = function() {                                                                                // 9723
        var screenRows = 0;                                                                                            // 9724
        var fold = null;                                                                                               // 9725
        if (!this.$useWrapMode) {                                                                                      // 9726
            screenRows = this.getLength();                                                                             // 9727
            var foldData = this.$foldData;                                                                             // 9728
            for (var i = 0; i < foldData.length; i++) {                                                                // 9729
                fold = foldData[i];                                                                                    // 9730
                screenRows -= fold.end.row - fold.start.row;                                                           // 9731
            }                                                                                                          // 9732
        } else {                                                                                                       // 9733
            var lastRow = this.$wrapData.length;                                                                       // 9734
            var row = 0, i = 0;                                                                                        // 9735
            var fold = this.$foldData[i++];                                                                            // 9736
            var foldStart = fold ? fold.start.row :Infinity;                                                           // 9737
                                                                                                                       // 9738
            while (row < lastRow) {                                                                                    // 9739
                var splits = this.$wrapData[row];                                                                      // 9740
                screenRows += splits ? splits.length + 1 : 1;                                                          // 9741
                row ++;                                                                                                // 9742
                if (row > foldStart) {                                                                                 // 9743
                    row = fold.end.row+1;                                                                              // 9744
                    fold = this.$foldData[i++];                                                                        // 9745
                    foldStart = fold ?fold.start.row :Infinity;                                                        // 9746
                }                                                                                                      // 9747
            }                                                                                                          // 9748
        }                                                                                                              // 9749
        if (this.lineWidgets)                                                                                          // 9750
            screenRows += this.$getWidgetScreenLength();                                                               // 9751
                                                                                                                       // 9752
        return screenRows;                                                                                             // 9753
    };                                                                                                                 // 9754
    this.$setFontMetrics = function(fm) {                                                                              // 9755
    };                                                                                                                 // 9756
                                                                                                                       // 9757
    this.destroy = function() {                                                                                        // 9758
        if (this.bgTokenizer) {                                                                                        // 9759
            this.bgTokenizer.setDocument(null);                                                                        // 9760
            this.bgTokenizer = null;                                                                                   // 9761
        }                                                                                                              // 9762
        this.$stopWorker();                                                                                            // 9763
    };                                                                                                                 // 9764
    function isFullWidth(c) {                                                                                          // 9765
        if (c < 0x1100)                                                                                                // 9766
            return false;                                                                                              // 9767
        return c >= 0x1100 && c <= 0x115F ||                                                                           // 9768
               c >= 0x11A3 && c <= 0x11A7 ||                                                                           // 9769
               c >= 0x11FA && c <= 0x11FF ||                                                                           // 9770
               c >= 0x2329 && c <= 0x232A ||                                                                           // 9771
               c >= 0x2E80 && c <= 0x2E99 ||                                                                           // 9772
               c >= 0x2E9B && c <= 0x2EF3 ||                                                                           // 9773
               c >= 0x2F00 && c <= 0x2FD5 ||                                                                           // 9774
               c >= 0x2FF0 && c <= 0x2FFB ||                                                                           // 9775
               c >= 0x3000 && c <= 0x303E ||                                                                           // 9776
               c >= 0x3041 && c <= 0x3096 ||                                                                           // 9777
               c >= 0x3099 && c <= 0x30FF ||                                                                           // 9778
               c >= 0x3105 && c <= 0x312D ||                                                                           // 9779
               c >= 0x3131 && c <= 0x318E ||                                                                           // 9780
               c >= 0x3190 && c <= 0x31BA ||                                                                           // 9781
               c >= 0x31C0 && c <= 0x31E3 ||                                                                           // 9782
               c >= 0x31F0 && c <= 0x321E ||                                                                           // 9783
               c >= 0x3220 && c <= 0x3247 ||                                                                           // 9784
               c >= 0x3250 && c <= 0x32FE ||                                                                           // 9785
               c >= 0x3300 && c <= 0x4DBF ||                                                                           // 9786
               c >= 0x4E00 && c <= 0xA48C ||                                                                           // 9787
               c >= 0xA490 && c <= 0xA4C6 ||                                                                           // 9788
               c >= 0xA960 && c <= 0xA97C ||                                                                           // 9789
               c >= 0xAC00 && c <= 0xD7A3 ||                                                                           // 9790
               c >= 0xD7B0 && c <= 0xD7C6 ||                                                                           // 9791
               c >= 0xD7CB && c <= 0xD7FB ||                                                                           // 9792
               c >= 0xF900 && c <= 0xFAFF ||                                                                           // 9793
               c >= 0xFE10 && c <= 0xFE19 ||                                                                           // 9794
               c >= 0xFE30 && c <= 0xFE52 ||                                                                           // 9795
               c >= 0xFE54 && c <= 0xFE66 ||                                                                           // 9796
               c >= 0xFE68 && c <= 0xFE6B ||                                                                           // 9797
               c >= 0xFF01 && c <= 0xFF60 ||                                                                           // 9798
               c >= 0xFFE0 && c <= 0xFFE6;                                                                             // 9799
    };                                                                                                                 // 9800
                                                                                                                       // 9801
}).call(EditSession.prototype);                                                                                        // 9802
                                                                                                                       // 9803
require("./edit_session/folding").Folding.call(EditSession.prototype);                                                 // 9804
require("./edit_session/bracket_match").BracketMatch.call(EditSession.prototype);                                      // 9805
                                                                                                                       // 9806
                                                                                                                       // 9807
config.defineOptions(EditSession.prototype, "session", {                                                               // 9808
    wrap: {                                                                                                            // 9809
        set: function(value) {                                                                                         // 9810
            if (!value || value == "off")                                                                              // 9811
                value = false;                                                                                         // 9812
            else if (value == "free")                                                                                  // 9813
                value = true;                                                                                          // 9814
            else if (value == "printMargin")                                                                           // 9815
                value = -1;                                                                                            // 9816
            else if (typeof value == "string")                                                                         // 9817
                value = parseInt(value, 10) || false;                                                                  // 9818
                                                                                                                       // 9819
            if (this.$wrap == value)                                                                                   // 9820
                return;                                                                                                // 9821
            this.$wrap = value;                                                                                        // 9822
            if (!value) {                                                                                              // 9823
                this.setUseWrapMode(false);                                                                            // 9824
            } else {                                                                                                   // 9825
                var col = typeof value == "number" ? value : null;                                                     // 9826
                this.setWrapLimitRange(col, col);                                                                      // 9827
                this.setUseWrapMode(true);                                                                             // 9828
            }                                                                                                          // 9829
        },                                                                                                             // 9830
        get: function() {                                                                                              // 9831
            if (this.getUseWrapMode()) {                                                                               // 9832
                if (this.$wrap == -1)                                                                                  // 9833
                    return "printMargin";                                                                              // 9834
                if (!this.getWrapLimitRange().min)                                                                     // 9835
                    return "free";                                                                                     // 9836
                return this.$wrap;                                                                                     // 9837
            }                                                                                                          // 9838
            return "off";                                                                                              // 9839
        },                                                                                                             // 9840
        handlesSet: true                                                                                               // 9841
    },                                                                                                                 // 9842
    wrapMethod: {                                                                                                      // 9843
        set: function(val) {                                                                                           // 9844
            val = val == "auto"                                                                                        // 9845
                ? this.$mode.type != "text"                                                                            // 9846
                : val != "text";                                                                                       // 9847
            if (val != this.$wrapAsCode) {                                                                             // 9848
                this.$wrapAsCode = val;                                                                                // 9849
                if (this.$useWrapMode) {                                                                               // 9850
                    this.$modified = true;                                                                             // 9851
                    this.$resetRowCache(0);                                                                            // 9852
                    this.$updateWrapData(0, this.getLength() - 1);                                                     // 9853
                }                                                                                                      // 9854
            }                                                                                                          // 9855
        },                                                                                                             // 9856
        initialValue: "auto"                                                                                           // 9857
    },                                                                                                                 // 9858
    indentedSoftWrap: { initialValue: true },                                                                          // 9859
    firstLineNumber: {                                                                                                 // 9860
        set: function() {this._signal("changeBreakpoint");},                                                           // 9861
        initialValue: 1                                                                                                // 9862
    },                                                                                                                 // 9863
    useWorker: {                                                                                                       // 9864
        set: function(useWorker) {                                                                                     // 9865
            this.$useWorker = useWorker;                                                                               // 9866
                                                                                                                       // 9867
            this.$stopWorker();                                                                                        // 9868
            if (useWorker)                                                                                             // 9869
                this.$startWorker();                                                                                   // 9870
        },                                                                                                             // 9871
        initialValue: true                                                                                             // 9872
    },                                                                                                                 // 9873
    useSoftTabs: {initialValue: true},                                                                                 // 9874
    tabSize: {                                                                                                         // 9875
        set: function(tabSize) {                                                                                       // 9876
            if (isNaN(tabSize) || this.$tabSize === tabSize) return;                                                   // 9877
                                                                                                                       // 9878
            this.$modified = true;                                                                                     // 9879
            this.$rowLengthCache = [];                                                                                 // 9880
            this.$tabSize = tabSize;                                                                                   // 9881
            this._signal("changeTabSize");                                                                             // 9882
        },                                                                                                             // 9883
        initialValue: 4,                                                                                               // 9884
        handlesSet: true                                                                                               // 9885
    },                                                                                                                 // 9886
    overwrite: {                                                                                                       // 9887
        set: function(val) {this._signal("changeOverwrite");},                                                         // 9888
        initialValue: false                                                                                            // 9889
    },                                                                                                                 // 9890
    newLineMode: {                                                                                                     // 9891
        set: function(val) {this.doc.setNewLineMode(val)},                                                             // 9892
        get: function() {return this.doc.getNewLineMode()},                                                            // 9893
        handlesSet: true                                                                                               // 9894
    },                                                                                                                 // 9895
    mode: {                                                                                                            // 9896
        set: function(val) { this.setMode(val) },                                                                      // 9897
        get: function() { return this.$modeId }                                                                        // 9898
    }                                                                                                                  // 9899
});                                                                                                                    // 9900
                                                                                                                       // 9901
exports.EditSession = EditSession;                                                                                     // 9902
});                                                                                                                    // 9903
                                                                                                                       // 9904
define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 9906
                                                                                                                       // 9907
var lang = require("./lib/lang");                                                                                      // 9908
var oop = require("./lib/oop");                                                                                        // 9909
var Range = require("./range").Range;                                                                                  // 9910
                                                                                                                       // 9911
var Search = function() {                                                                                              // 9912
    this.$options = {};                                                                                                // 9913
};                                                                                                                     // 9914
                                                                                                                       // 9915
(function() {                                                                                                          // 9916
    this.set = function(options) {                                                                                     // 9917
        oop.mixin(this.$options, options);                                                                             // 9918
        return this;                                                                                                   // 9919
    };                                                                                                                 // 9920
    this.getOptions = function() {                                                                                     // 9921
        return lang.copyObject(this.$options);                                                                         // 9922
    };                                                                                                                 // 9923
    this.setOptions = function(options) {                                                                              // 9924
        this.$options = options;                                                                                       // 9925
    };                                                                                                                 // 9926
    this.find = function(session) {                                                                                    // 9927
        var options = this.$options;                                                                                   // 9928
        var iterator = this.$matchIterator(session, options);                                                          // 9929
        if (!iterator)                                                                                                 // 9930
            return false;                                                                                              // 9931
                                                                                                                       // 9932
        var firstRange = null;                                                                                         // 9933
        iterator.forEach(function(range, row, offset) {                                                                // 9934
            if (!range.start) {                                                                                        // 9935
                var column = range.offset + (offset || 0);                                                             // 9936
                firstRange = new Range(row, column, row, column + range.length);                                       // 9937
                if (!range.length && options.start && options.start.start                                              // 9938
                    && options.skipCurrent != false && firstRange.isEqual(options.start)                               // 9939
                ) {                                                                                                    // 9940
                    firstRange = null;                                                                                 // 9941
                    return false;                                                                                      // 9942
                }                                                                                                      // 9943
            } else                                                                                                     // 9944
                firstRange = range;                                                                                    // 9945
            return true;                                                                                               // 9946
        });                                                                                                            // 9947
                                                                                                                       // 9948
        return firstRange;                                                                                             // 9949
    };                                                                                                                 // 9950
    this.findAll = function(session) {                                                                                 // 9951
        var options = this.$options;                                                                                   // 9952
        if (!options.needle)                                                                                           // 9953
            return [];                                                                                                 // 9954
        this.$assembleRegExp(options);                                                                                 // 9955
                                                                                                                       // 9956
        var range = options.range;                                                                                     // 9957
        var lines = range                                                                                              // 9958
            ? session.getLines(range.start.row, range.end.row)                                                         // 9959
            : session.doc.getAllLines();                                                                               // 9960
                                                                                                                       // 9961
        var ranges = [];                                                                                               // 9962
        var re = options.re;                                                                                           // 9963
        if (options.$isMultiLine) {                                                                                    // 9964
            var len = re.length;                                                                                       // 9965
            var maxRow = lines.length - len;                                                                           // 9966
            var prevRange;                                                                                             // 9967
            outer: for (var row = re.offset || 0; row <= maxRow; row++) {                                              // 9968
                for (var j = 0; j < len; j++)                                                                          // 9969
                    if (lines[row + j].search(re[j]) == -1)                                                            // 9970
                        continue outer;                                                                                // 9971
                                                                                                                       // 9972
                var startLine = lines[row];                                                                            // 9973
                var line = lines[row + len - 1];                                                                       // 9974
                var startIndex = startLine.length - startLine.match(re[0])[0].length;                                  // 9975
                var endIndex = line.match(re[len - 1])[0].length;                                                      // 9976
                                                                                                                       // 9977
                if (prevRange && prevRange.end.row === row &&                                                          // 9978
                    prevRange.end.column > startIndex                                                                  // 9979
                ) {                                                                                                    // 9980
                    continue;                                                                                          // 9981
                }                                                                                                      // 9982
                ranges.push(prevRange = new Range(                                                                     // 9983
                    row, startIndex, row + len - 1, endIndex                                                           // 9984
                ));                                                                                                    // 9985
                if (len > 2)                                                                                           // 9986
                    row = row + len - 2;                                                                               // 9987
            }                                                                                                          // 9988
        } else {                                                                                                       // 9989
            for (var i = 0; i < lines.length; i++) {                                                                   // 9990
                var matches = lang.getMatchOffsets(lines[i], re);                                                      // 9991
                for (var j = 0; j < matches.length; j++) {                                                             // 9992
                    var match = matches[j];                                                                            // 9993
                    ranges.push(new Range(i, match.offset, i, match.offset + match.length));                           // 9994
                }                                                                                                      // 9995
            }                                                                                                          // 9996
        }                                                                                                              // 9997
                                                                                                                       // 9998
        if (range) {                                                                                                   // 9999
            var startColumn = range.start.column;                                                                      // 10000
            var endColumn = range.start.column;                                                                        // 10001
            var i = 0, j = ranges.length - 1;                                                                          // 10002
            while (i < j && ranges[i].start.column < startColumn && ranges[i].start.row == range.start.row)            // 10003
                i++;                                                                                                   // 10004
                                                                                                                       // 10005
            while (i < j && ranges[j].end.column > endColumn && ranges[j].end.row == range.end.row)                    // 10006
                j--;                                                                                                   // 10007
                                                                                                                       // 10008
            ranges = ranges.slice(i, j + 1);                                                                           // 10009
            for (i = 0, j = ranges.length; i < j; i++) {                                                               // 10010
                ranges[i].start.row += range.start.row;                                                                // 10011
                ranges[i].end.row += range.start.row;                                                                  // 10012
            }                                                                                                          // 10013
        }                                                                                                              // 10014
                                                                                                                       // 10015
        return ranges;                                                                                                 // 10016
    };                                                                                                                 // 10017
    this.replace = function(input, replacement) {                                                                      // 10018
        var options = this.$options;                                                                                   // 10019
                                                                                                                       // 10020
        var re = this.$assembleRegExp(options);                                                                        // 10021
        if (options.$isMultiLine)                                                                                      // 10022
            return replacement;                                                                                        // 10023
                                                                                                                       // 10024
        if (!re)                                                                                                       // 10025
            return;                                                                                                    // 10026
                                                                                                                       // 10027
        var match = re.exec(input);                                                                                    // 10028
        if (!match || match[0].length != input.length)                                                                 // 10029
            return null;                                                                                               // 10030
                                                                                                                       // 10031
        replacement = input.replace(re, replacement);                                                                  // 10032
        if (options.preserveCase) {                                                                                    // 10033
            replacement = replacement.split("");                                                                       // 10034
            for (var i = Math.min(input.length, input.length); i--; ) {                                                // 10035
                var ch = input[i];                                                                                     // 10036
                if (ch && ch.toLowerCase() != ch)                                                                      // 10037
                    replacement[i] = replacement[i].toUpperCase();                                                     // 10038
                else                                                                                                   // 10039
                    replacement[i] = replacement[i].toLowerCase();                                                     // 10040
            }                                                                                                          // 10041
            replacement = replacement.join("");                                                                        // 10042
        }                                                                                                              // 10043
                                                                                                                       // 10044
        return replacement;                                                                                            // 10045
    };                                                                                                                 // 10046
                                                                                                                       // 10047
    this.$matchIterator = function(session, options) {                                                                 // 10048
        var re = this.$assembleRegExp(options);                                                                        // 10049
        if (!re)                                                                                                       // 10050
            return false;                                                                                              // 10051
                                                                                                                       // 10052
        var callback;                                                                                                  // 10053
        if (options.$isMultiLine) {                                                                                    // 10054
            var len = re.length;                                                                                       // 10055
            var matchIterator = function(line, row, offset) {                                                          // 10056
                var startIndex = line.search(re[0]);                                                                   // 10057
                if (startIndex == -1)                                                                                  // 10058
                    return;                                                                                            // 10059
                for (var i = 1; i < len; i++) {                                                                        // 10060
                    line = session.getLine(row + i);                                                                   // 10061
                    if (line.search(re[i]) == -1)                                                                      // 10062
                        return;                                                                                        // 10063
                }                                                                                                      // 10064
                                                                                                                       // 10065
                var endIndex = line.match(re[len - 1])[0].length;                                                      // 10066
                                                                                                                       // 10067
                var range = new Range(row, startIndex, row + len - 1, endIndex);                                       // 10068
                if (re.offset == 1) {                                                                                  // 10069
                    range.start.row--;                                                                                 // 10070
                    range.start.column = Number.MAX_VALUE;                                                             // 10071
                } else if (offset)                                                                                     // 10072
                    range.start.column += offset;                                                                      // 10073
                                                                                                                       // 10074
                if (callback(range))                                                                                   // 10075
                    return true;                                                                                       // 10076
            };                                                                                                         // 10077
        } else if (options.backwards) {                                                                                // 10078
            var matchIterator = function(line, row, startIndex) {                                                      // 10079
                var matches = lang.getMatchOffsets(line, re);                                                          // 10080
                for (var i = matches.length-1; i >= 0; i--)                                                            // 10081
                    if (callback(matches[i], row, startIndex))                                                         // 10082
                        return true;                                                                                   // 10083
            };                                                                                                         // 10084
        } else {                                                                                                       // 10085
            var matchIterator = function(line, row, startIndex) {                                                      // 10086
                var matches = lang.getMatchOffsets(line, re);                                                          // 10087
                for (var i = 0; i < matches.length; i++)                                                               // 10088
                    if (callback(matches[i], row, startIndex))                                                         // 10089
                        return true;                                                                                   // 10090
            };                                                                                                         // 10091
        }                                                                                                              // 10092
                                                                                                                       // 10093
        var lineIterator = this.$lineIterator(session, options);                                                       // 10094
                                                                                                                       // 10095
        return {                                                                                                       // 10096
            forEach: function(_callback) {                                                                             // 10097
                callback = _callback;                                                                                  // 10098
                lineIterator.forEach(matchIterator);                                                                   // 10099
            }                                                                                                          // 10100
        };                                                                                                             // 10101
    };                                                                                                                 // 10102
                                                                                                                       // 10103
    this.$assembleRegExp = function(options, $disableFakeMultiline) {                                                  // 10104
        if (options.needle instanceof RegExp)                                                                          // 10105
            return options.re = options.needle;                                                                        // 10106
                                                                                                                       // 10107
        var needle = options.needle;                                                                                   // 10108
                                                                                                                       // 10109
        if (!options.needle)                                                                                           // 10110
            return options.re = false;                                                                                 // 10111
                                                                                                                       // 10112
        if (!options.regExp)                                                                                           // 10113
            needle = lang.escapeRegExp(needle);                                                                        // 10114
                                                                                                                       // 10115
        if (options.wholeWord)                                                                                         // 10116
            needle = "\\b" + needle + "\\b";                                                                           // 10117
                                                                                                                       // 10118
        var modifier = options.caseSensitive ? "gm" : "gmi";                                                           // 10119
                                                                                                                       // 10120
        options.$isMultiLine = !$disableFakeMultiline && /[\n\r]/.test(needle);                                        // 10121
        if (options.$isMultiLine)                                                                                      // 10122
            return options.re = this.$assembleMultilineRegExp(needle, modifier);                                       // 10123
                                                                                                                       // 10124
        try {                                                                                                          // 10125
            var re = new RegExp(needle, modifier);                                                                     // 10126
        } catch(e) {                                                                                                   // 10127
            re = false;                                                                                                // 10128
        }                                                                                                              // 10129
        return options.re = re;                                                                                        // 10130
    };                                                                                                                 // 10131
                                                                                                                       // 10132
    this.$assembleMultilineRegExp = function(needle, modifier) {                                                       // 10133
        var parts = needle.replace(/\r\n|\r|\n/g, "$\n^").split("\n");                                                 // 10134
        var re = [];                                                                                                   // 10135
        for (var i = 0; i < parts.length; i++) try {                                                                   // 10136
            re.push(new RegExp(parts[i], modifier));                                                                   // 10137
        } catch(e) {                                                                                                   // 10138
            return false;                                                                                              // 10139
        }                                                                                                              // 10140
        if (parts[0] == "") {                                                                                          // 10141
            re.shift();                                                                                                // 10142
            re.offset = 1;                                                                                             // 10143
        } else {                                                                                                       // 10144
            re.offset = 0;                                                                                             // 10145
        }                                                                                                              // 10146
        return re;                                                                                                     // 10147
    };                                                                                                                 // 10148
                                                                                                                       // 10149
    this.$lineIterator = function(session, options) {                                                                  // 10150
        var backwards = options.backwards == true;                                                                     // 10151
        var skipCurrent = options.skipCurrent != false;                                                                // 10152
                                                                                                                       // 10153
        var range = options.range;                                                                                     // 10154
        var start = options.start;                                                                                     // 10155
        if (!start)                                                                                                    // 10156
            start = range ? range[backwards ? "end" : "start"] : session.selection.getRange();                         // 10157
                                                                                                                       // 10158
        if (start.start)                                                                                               // 10159
            start = start[skipCurrent != backwards ? "end" : "start"];                                                 // 10160
                                                                                                                       // 10161
        var firstRow = range ? range.start.row : 0;                                                                    // 10162
        var lastRow = range ? range.end.row : session.getLength() - 1;                                                 // 10163
                                                                                                                       // 10164
        var forEach = backwards ? function(callback) {                                                                 // 10165
                var row = start.row;                                                                                   // 10166
                                                                                                                       // 10167
                var line = session.getLine(row).substring(0, start.column);                                            // 10168
                if (callback(line, row))                                                                               // 10169
                    return;                                                                                            // 10170
                                                                                                                       // 10171
                for (row--; row >= firstRow; row--)                                                                    // 10172
                    if (callback(session.getLine(row), row))                                                           // 10173
                        return;                                                                                        // 10174
                                                                                                                       // 10175
                if (options.wrap == false)                                                                             // 10176
                    return;                                                                                            // 10177
                                                                                                                       // 10178
                for (row = lastRow, firstRow = start.row; row >= firstRow; row--)                                      // 10179
                    if (callback(session.getLine(row), row))                                                           // 10180
                        return;                                                                                        // 10181
            } : function(callback) {                                                                                   // 10182
                var row = start.row;                                                                                   // 10183
                                                                                                                       // 10184
                var line = session.getLine(row).substr(start.column);                                                  // 10185
                if (callback(line, row, start.column))                                                                 // 10186
                    return;                                                                                            // 10187
                                                                                                                       // 10188
                for (row = row+1; row <= lastRow; row++)                                                               // 10189
                    if (callback(session.getLine(row), row))                                                           // 10190
                        return;                                                                                        // 10191
                                                                                                                       // 10192
                if (options.wrap == false)                                                                             // 10193
                    return;                                                                                            // 10194
                                                                                                                       // 10195
                for (row = firstRow, lastRow = start.row; row <= lastRow; row++)                                       // 10196
                    if (callback(session.getLine(row), row))                                                           // 10197
                        return;                                                                                        // 10198
            };                                                                                                         // 10199
                                                                                                                       // 10200
        return {forEach: forEach};                                                                                     // 10201
    };                                                                                                                 // 10202
                                                                                                                       // 10203
}).call(Search.prototype);                                                                                             // 10204
                                                                                                                       // 10205
exports.Search = Search;                                                                                               // 10206
});                                                                                                                    // 10207
                                                                                                                       // 10208
define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"], function(require, exports, module) {
"use strict";                                                                                                          // 10210
                                                                                                                       // 10211
var keyUtil = require("../lib/keys");                                                                                  // 10212
var useragent = require("../lib/useragent");                                                                           // 10213
var KEY_MODS = keyUtil.KEY_MODS;                                                                                       // 10214
                                                                                                                       // 10215
function HashHandler(config, platform) {                                                                               // 10216
    this.platform = platform || (useragent.isMac ? "mac" : "win");                                                     // 10217
    this.commands = {};                                                                                                // 10218
    this.commandKeyBinding = {};                                                                                       // 10219
    this.addCommands(config);                                                                                          // 10220
    this.$singleCommand = true;                                                                                        // 10221
}                                                                                                                      // 10222
                                                                                                                       // 10223
function MultiHashHandler(config, platform) {                                                                          // 10224
    HashHandler.call(this, config, platform);                                                                          // 10225
    this.$singleCommand = false;                                                                                       // 10226
}                                                                                                                      // 10227
                                                                                                                       // 10228
MultiHashHandler.prototype = HashHandler.prototype;                                                                    // 10229
                                                                                                                       // 10230
(function() {                                                                                                          // 10231
                                                                                                                       // 10232
                                                                                                                       // 10233
    this.addCommand = function(command) {                                                                              // 10234
        if (this.commands[command.name])                                                                               // 10235
            this.removeCommand(command);                                                                               // 10236
                                                                                                                       // 10237
        this.commands[command.name] = command;                                                                         // 10238
                                                                                                                       // 10239
        if (command.bindKey)                                                                                           // 10240
            this._buildKeyHash(command);                                                                               // 10241
    };                                                                                                                 // 10242
                                                                                                                       // 10243
    this.removeCommand = function(command, keepCommand) {                                                              // 10244
        var name = command && (typeof command === 'string' ? command : command.name);                                  // 10245
        command = this.commands[name];                                                                                 // 10246
        if (!keepCommand)                                                                                              // 10247
            delete this.commands[name];                                                                                // 10248
        var ckb = this.commandKeyBinding;                                                                              // 10249
        for (var keyId in ckb) {                                                                                       // 10250
            var cmdGroup = ckb[keyId];                                                                                 // 10251
            if (cmdGroup == command) {                                                                                 // 10252
                delete ckb[keyId];                                                                                     // 10253
            } else if (Array.isArray(cmdGroup)) {                                                                      // 10254
                var i = cmdGroup.indexOf(command);                                                                     // 10255
                if (i != -1) {                                                                                         // 10256
                    cmdGroup.splice(i, 1);                                                                             // 10257
                    if (cmdGroup.length == 1)                                                                          // 10258
                        ckb[keyId] = cmdGroup[0];                                                                      // 10259
                }                                                                                                      // 10260
            }                                                                                                          // 10261
        }                                                                                                              // 10262
    };                                                                                                                 // 10263
                                                                                                                       // 10264
    this.bindKey = function(key, command, position) {                                                                  // 10265
        if (typeof key == "object") {                                                                                  // 10266
            if (position == undefined)                                                                                 // 10267
                position = key.position;                                                                               // 10268
            key = key[this.platform];                                                                                  // 10269
        }                                                                                                              // 10270
        if (!key)                                                                                                      // 10271
            return;                                                                                                    // 10272
        if (typeof command == "function")                                                                              // 10273
            return this.addCommand({exec: command, bindKey: key, name: command.name || key});                          // 10274
                                                                                                                       // 10275
        key.split("|").forEach(function(keyPart) {                                                                     // 10276
            var chain = "";                                                                                            // 10277
            if (keyPart.indexOf(" ") != -1) {                                                                          // 10278
                var parts = keyPart.split(/\s+/);                                                                      // 10279
                keyPart = parts.pop();                                                                                 // 10280
                parts.forEach(function(keyPart) {                                                                      // 10281
                    var binding = this.parseKeys(keyPart);                                                             // 10282
                    var id = KEY_MODS[binding.hashId] + binding.key;                                                   // 10283
                    chain += (chain ? " " : "") + id;                                                                  // 10284
                    this._addCommandToBinding(chain, "chainKeys");                                                     // 10285
                }, this);                                                                                              // 10286
                chain += " ";                                                                                          // 10287
            }                                                                                                          // 10288
            var binding = this.parseKeys(keyPart);                                                                     // 10289
            var id = KEY_MODS[binding.hashId] + binding.key;                                                           // 10290
            this._addCommandToBinding(chain + id, command, position);                                                  // 10291
        }, this);                                                                                                      // 10292
    };                                                                                                                 // 10293
                                                                                                                       // 10294
    function getPosition(command) {                                                                                    // 10295
        return typeof command == "object" && command.bindKey                                                           // 10296
            && command.bindKey.position || 0;                                                                          // 10297
    }                                                                                                                  // 10298
    this._addCommandToBinding = function(keyId, command, position) {                                                   // 10299
        var ckb = this.commandKeyBinding, i;                                                                           // 10300
        if (!command) {                                                                                                // 10301
            delete ckb[keyId];                                                                                         // 10302
        } else if (!ckb[keyId] || this.$singleCommand) {                                                               // 10303
            ckb[keyId] = command;                                                                                      // 10304
        } else {                                                                                                       // 10305
            if (!Array.isArray(ckb[keyId])) {                                                                          // 10306
                ckb[keyId] = [ckb[keyId]];                                                                             // 10307
            } else if ((i = ckb[keyId].indexOf(command)) != -1) {                                                      // 10308
                ckb[keyId].splice(i, 1);                                                                               // 10309
            }                                                                                                          // 10310
                                                                                                                       // 10311
            if (typeof position != "number") {                                                                         // 10312
                if (position || command.isDefault)                                                                     // 10313
                    position = -100;                                                                                   // 10314
                else                                                                                                   // 10315
                   position = getPosition(command);                                                                    // 10316
            }                                                                                                          // 10317
            var commands = ckb[keyId];                                                                                 // 10318
            for (i = 0; i < commands.length; i++) {                                                                    // 10319
                var other = commands[i];                                                                               // 10320
                var otherPos = getPosition(other);                                                                     // 10321
                if (otherPos > position)                                                                               // 10322
                    break;                                                                                             // 10323
            }                                                                                                          // 10324
            commands.splice(i, 0, command);                                                                            // 10325
        }                                                                                                              // 10326
    };                                                                                                                 // 10327
                                                                                                                       // 10328
    this.addCommands = function(commands) {                                                                            // 10329
        commands && Object.keys(commands).forEach(function(name) {                                                     // 10330
            var command = commands[name];                                                                              // 10331
            if (!command)                                                                                              // 10332
                return;                                                                                                // 10333
                                                                                                                       // 10334
            if (typeof command === "string")                                                                           // 10335
                return this.bindKey(command, name);                                                                    // 10336
                                                                                                                       // 10337
            if (typeof command === "function")                                                                         // 10338
                command = { exec: command };                                                                           // 10339
                                                                                                                       // 10340
            if (typeof command !== "object")                                                                           // 10341
                return;                                                                                                // 10342
                                                                                                                       // 10343
            if (!command.name)                                                                                         // 10344
                command.name = name;                                                                                   // 10345
                                                                                                                       // 10346
            this.addCommand(command);                                                                                  // 10347
        }, this);                                                                                                      // 10348
    };                                                                                                                 // 10349
                                                                                                                       // 10350
    this.removeCommands = function(commands) {                                                                         // 10351
        Object.keys(commands).forEach(function(name) {                                                                 // 10352
            this.removeCommand(commands[name]);                                                                        // 10353
        }, this);                                                                                                      // 10354
    };                                                                                                                 // 10355
                                                                                                                       // 10356
    this.bindKeys = function(keyList) {                                                                                // 10357
        Object.keys(keyList).forEach(function(key) {                                                                   // 10358
            this.bindKey(key, keyList[key]);                                                                           // 10359
        }, this);                                                                                                      // 10360
    };                                                                                                                 // 10361
                                                                                                                       // 10362
    this._buildKeyHash = function(command) {                                                                           // 10363
        this.bindKey(command.bindKey, command);                                                                        // 10364
    };                                                                                                                 // 10365
    this.parseKeys = function(keys) {                                                                                  // 10366
        var parts = keys.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(x){return x});                         // 10367
        var key = parts.pop();                                                                                         // 10368
                                                                                                                       // 10369
        var keyCode = keyUtil[key];                                                                                    // 10370
        if (keyUtil.FUNCTION_KEYS[keyCode])                                                                            // 10371
            key = keyUtil.FUNCTION_KEYS[keyCode].toLowerCase();                                                        // 10372
        else if (!parts.length)                                                                                        // 10373
            return {key: key, hashId: -1};                                                                             // 10374
        else if (parts.length == 1 && parts[0] == "shift")                                                             // 10375
            return {key: key.toUpperCase(), hashId: -1};                                                               // 10376
                                                                                                                       // 10377
        var hashId = 0;                                                                                                // 10378
        for (var i = parts.length; i--;) {                                                                             // 10379
            var modifier = keyUtil.KEY_MODS[parts[i]];                                                                 // 10380
            if (modifier == null) {                                                                                    // 10381
                if (typeof console != "undefined")                                                                     // 10382
                    console.error("invalid modifier " + parts[i] + " in " + keys);                                     // 10383
                return false;                                                                                          // 10384
            }                                                                                                          // 10385
            hashId |= modifier;                                                                                        // 10386
        }                                                                                                              // 10387
        return {key: key, hashId: hashId};                                                                             // 10388
    };                                                                                                                 // 10389
                                                                                                                       // 10390
    this.findKeyCommand = function findKeyCommand(hashId, keyString) {                                                 // 10391
        var key = KEY_MODS[hashId] + keyString;                                                                        // 10392
        return this.commandKeyBinding[key];                                                                            // 10393
    };                                                                                                                 // 10394
                                                                                                                       // 10395
    this.handleKeyboard = function(data, hashId, keyString, keyCode) {                                                 // 10396
        var key = KEY_MODS[hashId] + keyString;                                                                        // 10397
        var command = this.commandKeyBinding[key];                                                                     // 10398
        if (data.$keyChain) {                                                                                          // 10399
            data.$keyChain += " " + key;                                                                               // 10400
            command = this.commandKeyBinding[data.$keyChain] || command;                                               // 10401
        }                                                                                                              // 10402
                                                                                                                       // 10403
        if (command) {                                                                                                 // 10404
            if (command == "chainKeys" || command[command.length - 1] == "chainKeys") {                                // 10405
                data.$keyChain = data.$keyChain || key;                                                                // 10406
                return {command: "null"};                                                                              // 10407
            }                                                                                                          // 10408
        }                                                                                                              // 10409
                                                                                                                       // 10410
        if (data.$keyChain) {                                                                                          // 10411
            if ((!hashId || hashId == 4) && keyString.length == 1)                                                     // 10412
                data.$keyChain = data.$keyChain.slice(0, -key.length - 1); // wait for input                           // 10413
            else if (hashId == -1 || keyCode > 0)                                                                      // 10414
                data.$keyChain = ""; // reset keyChain                                                                 // 10415
        }                                                                                                              // 10416
        return {command: command};                                                                                     // 10417
    };                                                                                                                 // 10418
                                                                                                                       // 10419
    this.getStatusText = function(editor, data) {                                                                      // 10420
        return data.$keyChain || "";                                                                                   // 10421
    };                                                                                                                 // 10422
                                                                                                                       // 10423
}).call(HashHandler.prototype);                                                                                        // 10424
                                                                                                                       // 10425
exports.HashHandler = HashHandler;                                                                                     // 10426
exports.MultiHashHandler = MultiHashHandler;                                                                           // 10427
});                                                                                                                    // 10428
                                                                                                                       // 10429
define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"], function(require, exports, module) {
"use strict";                                                                                                          // 10431
                                                                                                                       // 10432
var oop = require("../lib/oop");                                                                                       // 10433
var MultiHashHandler = require("../keyboard/hash_handler").MultiHashHandler;                                           // 10434
var EventEmitter = require("../lib/event_emitter").EventEmitter;                                                       // 10435
                                                                                                                       // 10436
var CommandManager = function(platform, commands) {                                                                    // 10437
    MultiHashHandler.call(this, commands, platform);                                                                   // 10438
    this.byName = this.commands;                                                                                       // 10439
    this.setDefaultHandler("exec", function(e) {                                                                       // 10440
        return e.command.exec(e.editor, e.args || {});                                                                 // 10441
    });                                                                                                                // 10442
};                                                                                                                     // 10443
                                                                                                                       // 10444
oop.inherits(CommandManager, MultiHashHandler);                                                                        // 10445
                                                                                                                       // 10446
(function() {                                                                                                          // 10447
                                                                                                                       // 10448
    oop.implement(this, EventEmitter);                                                                                 // 10449
                                                                                                                       // 10450
    this.exec = function(command, editor, args) {                                                                      // 10451
        if (Array.isArray(command)) {                                                                                  // 10452
            for (var i = command.length; i--; ) {                                                                      // 10453
                if (this.exec(command[i], editor, args)) return true;                                                  // 10454
            }                                                                                                          // 10455
            return false;                                                                                              // 10456
        }                                                                                                              // 10457
                                                                                                                       // 10458
        if (typeof command === "string")                                                                               // 10459
            command = this.commands[command];                                                                          // 10460
                                                                                                                       // 10461
        if (!command)                                                                                                  // 10462
            return false;                                                                                              // 10463
                                                                                                                       // 10464
        if (editor && editor.$readOnly && !command.readOnly)                                                           // 10465
            return false;                                                                                              // 10466
                                                                                                                       // 10467
        var e = {editor: editor, command: command, args: args};                                                        // 10468
        e.returnValue = this._emit("exec", e);                                                                         // 10469
        this._signal("afterExec", e);                                                                                  // 10470
                                                                                                                       // 10471
        return e.returnValue === false ? false : true;                                                                 // 10472
    };                                                                                                                 // 10473
                                                                                                                       // 10474
    this.toggleRecording = function(editor) {                                                                          // 10475
        if (this.$inReplay)                                                                                            // 10476
            return;                                                                                                    // 10477
                                                                                                                       // 10478
        editor && editor._emit("changeStatus");                                                                        // 10479
        if (this.recording) {                                                                                          // 10480
            this.macro.pop();                                                                                          // 10481
            this.removeEventListener("exec", this.$addCommandToMacro);                                                 // 10482
                                                                                                                       // 10483
            if (!this.macro.length)                                                                                    // 10484
                this.macro = this.oldMacro;                                                                            // 10485
                                                                                                                       // 10486
            return this.recording = false;                                                                             // 10487
        }                                                                                                              // 10488
        if (!this.$addCommandToMacro) {                                                                                // 10489
            this.$addCommandToMacro = function(e) {                                                                    // 10490
                this.macro.push([e.command, e.args]);                                                                  // 10491
            }.bind(this);                                                                                              // 10492
        }                                                                                                              // 10493
                                                                                                                       // 10494
        this.oldMacro = this.macro;                                                                                    // 10495
        this.macro = [];                                                                                               // 10496
        this.on("exec", this.$addCommandToMacro);                                                                      // 10497
        return this.recording = true;                                                                                  // 10498
    };                                                                                                                 // 10499
                                                                                                                       // 10500
    this.replay = function(editor) {                                                                                   // 10501
        if (this.$inReplay || !this.macro)                                                                             // 10502
            return;                                                                                                    // 10503
                                                                                                                       // 10504
        if (this.recording)                                                                                            // 10505
            return this.toggleRecording(editor);                                                                       // 10506
                                                                                                                       // 10507
        try {                                                                                                          // 10508
            this.$inReplay = true;                                                                                     // 10509
            this.macro.forEach(function(x) {                                                                           // 10510
                if (typeof x == "string")                                                                              // 10511
                    this.exec(x, editor);                                                                              // 10512
                else                                                                                                   // 10513
                    this.exec(x[0], editor, x[1]);                                                                     // 10514
            }, this);                                                                                                  // 10515
        } finally {                                                                                                    // 10516
            this.$inReplay = false;                                                                                    // 10517
        }                                                                                                              // 10518
    };                                                                                                                 // 10519
                                                                                                                       // 10520
    this.trimMacro = function(m) {                                                                                     // 10521
        return m.map(function(x){                                                                                      // 10522
            if (typeof x[0] != "string")                                                                               // 10523
                x[0] = x[0].name;                                                                                      // 10524
            if (!x[1])                                                                                                 // 10525
                x = x[0];                                                                                              // 10526
            return x;                                                                                                  // 10527
        });                                                                                                            // 10528
    };                                                                                                                 // 10529
                                                                                                                       // 10530
}).call(CommandManager.prototype);                                                                                     // 10531
                                                                                                                       // 10532
exports.CommandManager = CommandManager;                                                                               // 10533
                                                                                                                       // 10534
});                                                                                                                    // 10535
                                                                                                                       // 10536
define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 10538
                                                                                                                       // 10539
var lang = require("../lib/lang");                                                                                     // 10540
var config = require("../config");                                                                                     // 10541
var Range = require("../range").Range;                                                                                 // 10542
                                                                                                                       // 10543
function bindKey(win, mac) {                                                                                           // 10544
    return {win: win, mac: mac};                                                                                       // 10545
}                                                                                                                      // 10546
exports.commands = [{                                                                                                  // 10547
    name: "showSettingsMenu",                                                                                          // 10548
    bindKey: bindKey("Ctrl-,", "Command-,"),                                                                           // 10549
    exec: function(editor) {                                                                                           // 10550
        config.loadModule("ace/ext/settings_menu", function(module) {                                                  // 10551
            module.init(editor);                                                                                       // 10552
            editor.showSettingsMenu();                                                                                 // 10553
        });                                                                                                            // 10554
    },                                                                                                                 // 10555
    readOnly: true                                                                                                     // 10556
}, {                                                                                                                   // 10557
    name: "goToNextError",                                                                                             // 10558
    bindKey: bindKey("Alt-E", "Ctrl-E"),                                                                               // 10559
    exec: function(editor) {                                                                                           // 10560
        config.loadModule("ace/ext/error_marker", function(module) {                                                   // 10561
            module.showErrorMarker(editor, 1);                                                                         // 10562
        });                                                                                                            // 10563
    },                                                                                                                 // 10564
    scrollIntoView: "animate",                                                                                         // 10565
    readOnly: true                                                                                                     // 10566
}, {                                                                                                                   // 10567
    name: "goToPreviousError",                                                                                         // 10568
    bindKey: bindKey("Alt-Shift-E", "Ctrl-Shift-E"),                                                                   // 10569
    exec: function(editor) {                                                                                           // 10570
        config.loadModule("ace/ext/error_marker", function(module) {                                                   // 10571
            module.showErrorMarker(editor, -1);                                                                        // 10572
        });                                                                                                            // 10573
    },                                                                                                                 // 10574
    scrollIntoView: "animate",                                                                                         // 10575
    readOnly: true                                                                                                     // 10576
}, {                                                                                                                   // 10577
    name: "selectall",                                                                                                 // 10578
    bindKey: bindKey("Ctrl-A", "Command-A"),                                                                           // 10579
    exec: function(editor) { editor.selectAll(); },                                                                    // 10580
    readOnly: true                                                                                                     // 10581
}, {                                                                                                                   // 10582
    name: "centerselection",                                                                                           // 10583
    bindKey: bindKey(null, "Ctrl-L"),                                                                                  // 10584
    exec: function(editor) { editor.centerSelection(); },                                                              // 10585
    readOnly: true                                                                                                     // 10586
}, {                                                                                                                   // 10587
    name: "gotoline",                                                                                                  // 10588
    bindKey: bindKey("Ctrl-L", "Command-L"),                                                                           // 10589
    exec: function(editor) {                                                                                           // 10590
        var line = parseInt(prompt("Enter line number:"), 10);                                                         // 10591
        if (!isNaN(line)) {                                                                                            // 10592
            editor.gotoLine(line);                                                                                     // 10593
        }                                                                                                              // 10594
    },                                                                                                                 // 10595
    readOnly: true                                                                                                     // 10596
}, {                                                                                                                   // 10597
    name: "fold",                                                                                                      // 10598
    bindKey: bindKey("Alt-L|Ctrl-F1", "Command-Alt-L|Command-F1"),                                                     // 10599
    exec: function(editor) { editor.session.toggleFold(false); },                                                      // 10600
    multiSelectAction: "forEach",                                                                                      // 10601
    scrollIntoView: "center",                                                                                          // 10602
    readOnly: true                                                                                                     // 10603
}, {                                                                                                                   // 10604
    name: "unfold",                                                                                                    // 10605
    bindKey: bindKey("Alt-Shift-L|Ctrl-Shift-F1", "Command-Alt-Shift-L|Command-Shift-F1"),                             // 10606
    exec: function(editor) { editor.session.toggleFold(true); },                                                       // 10607
    multiSelectAction: "forEach",                                                                                      // 10608
    scrollIntoView: "center",                                                                                          // 10609
    readOnly: true                                                                                                     // 10610
}, {                                                                                                                   // 10611
    name: "toggleFoldWidget",                                                                                          // 10612
    bindKey: bindKey("F2", "F2"),                                                                                      // 10613
    exec: function(editor) { editor.session.toggleFoldWidget(); },                                                     // 10614
    multiSelectAction: "forEach",                                                                                      // 10615
    scrollIntoView: "center",                                                                                          // 10616
    readOnly: true                                                                                                     // 10617
}, {                                                                                                                   // 10618
    name: "toggleParentFoldWidget",                                                                                    // 10619
    bindKey: bindKey("Alt-F2", "Alt-F2"),                                                                              // 10620
    exec: function(editor) { editor.session.toggleFoldWidget(true); },                                                 // 10621
    multiSelectAction: "forEach",                                                                                      // 10622
    scrollIntoView: "center",                                                                                          // 10623
    readOnly: true                                                                                                     // 10624
}, {                                                                                                                   // 10625
    name: "foldall",                                                                                                   // 10626
    bindKey: bindKey(null, "Ctrl-Command-Option-0"),                                                                   // 10627
    exec: function(editor) { editor.session.foldAll(); },                                                              // 10628
    scrollIntoView: "center",                                                                                          // 10629
    readOnly: true                                                                                                     // 10630
}, {                                                                                                                   // 10631
    name: "foldOther",                                                                                                 // 10632
    bindKey: bindKey("Alt-0", "Command-Option-0"),                                                                     // 10633
    exec: function(editor) {                                                                                           // 10634
        editor.session.foldAll();                                                                                      // 10635
        editor.session.unfold(editor.selection.getAllRanges());                                                        // 10636
    },                                                                                                                 // 10637
    scrollIntoView: "center",                                                                                          // 10638
    readOnly: true                                                                                                     // 10639
}, {                                                                                                                   // 10640
    name: "unfoldall",                                                                                                 // 10641
    bindKey: bindKey("Alt-Shift-0", "Command-Option-Shift-0"),                                                         // 10642
    exec: function(editor) { editor.session.unfold(); },                                                               // 10643
    scrollIntoView: "center",                                                                                          // 10644
    readOnly: true                                                                                                     // 10645
}, {                                                                                                                   // 10646
    name: "findnext",                                                                                                  // 10647
    bindKey: bindKey("Ctrl-K", "Command-G"),                                                                           // 10648
    exec: function(editor) { editor.findNext(); },                                                                     // 10649
    multiSelectAction: "forEach",                                                                                      // 10650
    scrollIntoView: "center",                                                                                          // 10651
    readOnly: true                                                                                                     // 10652
}, {                                                                                                                   // 10653
    name: "findprevious",                                                                                              // 10654
    bindKey: bindKey("Ctrl-Shift-K", "Command-Shift-G"),                                                               // 10655
    exec: function(editor) { editor.findPrevious(); },                                                                 // 10656
    multiSelectAction: "forEach",                                                                                      // 10657
    scrollIntoView: "center",                                                                                          // 10658
    readOnly: true                                                                                                     // 10659
}, {                                                                                                                   // 10660
    name: "selectOrFindNext",                                                                                          // 10661
    bindKey: bindKey("Alt-K", "Ctrl-G"),                                                                               // 10662
    exec: function(editor) {                                                                                           // 10663
        if (editor.selection.isEmpty())                                                                                // 10664
            editor.selection.selectWord();                                                                             // 10665
        else                                                                                                           // 10666
            editor.findNext();                                                                                         // 10667
    },                                                                                                                 // 10668
    readOnly: true                                                                                                     // 10669
}, {                                                                                                                   // 10670
    name: "selectOrFindPrevious",                                                                                      // 10671
    bindKey: bindKey("Alt-Shift-K", "Ctrl-Shift-G"),                                                                   // 10672
    exec: function(editor) {                                                                                           // 10673
        if (editor.selection.isEmpty())                                                                                // 10674
            editor.selection.selectWord();                                                                             // 10675
        else                                                                                                           // 10676
            editor.findPrevious();                                                                                     // 10677
    },                                                                                                                 // 10678
    readOnly: true                                                                                                     // 10679
}, {                                                                                                                   // 10680
    name: "find",                                                                                                      // 10681
    bindKey: bindKey("Ctrl-F", "Command-F"),                                                                           // 10682
    exec: function(editor) {                                                                                           // 10683
        config.loadModule("ace/ext/searchbox", function(e) {e.Search(editor)});                                        // 10684
    },                                                                                                                 // 10685
    readOnly: true                                                                                                     // 10686
}, {                                                                                                                   // 10687
    name: "overwrite",                                                                                                 // 10688
    bindKey: "Insert",                                                                                                 // 10689
    exec: function(editor) { editor.toggleOverwrite(); },                                                              // 10690
    readOnly: true                                                                                                     // 10691
}, {                                                                                                                   // 10692
    name: "selecttostart",                                                                                             // 10693
    bindKey: bindKey("Ctrl-Shift-Home", "Command-Shift-Up"),                                                           // 10694
    exec: function(editor) { editor.getSelection().selectFileStart(); },                                               // 10695
    multiSelectAction: "forEach",                                                                                      // 10696
    readOnly: true,                                                                                                    // 10697
    scrollIntoView: "animate",                                                                                         // 10698
    aceCommandGroup: "fileJump"                                                                                        // 10699
}, {                                                                                                                   // 10700
    name: "gotostart",                                                                                                 // 10701
    bindKey: bindKey("Ctrl-Home", "Command-Home|Command-Up"),                                                          // 10702
    exec: function(editor) { editor.navigateFileStart(); },                                                            // 10703
    multiSelectAction: "forEach",                                                                                      // 10704
    readOnly: true,                                                                                                    // 10705
    scrollIntoView: "animate",                                                                                         // 10706
    aceCommandGroup: "fileJump"                                                                                        // 10707
}, {                                                                                                                   // 10708
    name: "selectup",                                                                                                  // 10709
    bindKey: bindKey("Shift-Up", "Shift-Up"),                                                                          // 10710
    exec: function(editor) { editor.getSelection().selectUp(); },                                                      // 10711
    multiSelectAction: "forEach",                                                                                      // 10712
    scrollIntoView: "cursor",                                                                                          // 10713
    readOnly: true                                                                                                     // 10714
}, {                                                                                                                   // 10715
    name: "golineup",                                                                                                  // 10716
    bindKey: bindKey("Up", "Up|Ctrl-P"),                                                                               // 10717
    exec: function(editor, args) { editor.navigateUp(args.times); },                                                   // 10718
    multiSelectAction: "forEach",                                                                                      // 10719
    scrollIntoView: "cursor",                                                                                          // 10720
    readOnly: true                                                                                                     // 10721
}, {                                                                                                                   // 10722
    name: "selecttoend",                                                                                               // 10723
    bindKey: bindKey("Ctrl-Shift-End", "Command-Shift-Down"),                                                          // 10724
    exec: function(editor) { editor.getSelection().selectFileEnd(); },                                                 // 10725
    multiSelectAction: "forEach",                                                                                      // 10726
    readOnly: true,                                                                                                    // 10727
    scrollIntoView: "animate",                                                                                         // 10728
    aceCommandGroup: "fileJump"                                                                                        // 10729
}, {                                                                                                                   // 10730
    name: "gotoend",                                                                                                   // 10731
    bindKey: bindKey("Ctrl-End", "Command-End|Command-Down"),                                                          // 10732
    exec: function(editor) { editor.navigateFileEnd(); },                                                              // 10733
    multiSelectAction: "forEach",                                                                                      // 10734
    readOnly: true,                                                                                                    // 10735
    scrollIntoView: "animate",                                                                                         // 10736
    aceCommandGroup: "fileJump"                                                                                        // 10737
}, {                                                                                                                   // 10738
    name: "selectdown",                                                                                                // 10739
    bindKey: bindKey("Shift-Down", "Shift-Down"),                                                                      // 10740
    exec: function(editor) { editor.getSelection().selectDown(); },                                                    // 10741
    multiSelectAction: "forEach",                                                                                      // 10742
    scrollIntoView: "cursor",                                                                                          // 10743
    readOnly: true                                                                                                     // 10744
}, {                                                                                                                   // 10745
    name: "golinedown",                                                                                                // 10746
    bindKey: bindKey("Down", "Down|Ctrl-N"),                                                                           // 10747
    exec: function(editor, args) { editor.navigateDown(args.times); },                                                 // 10748
    multiSelectAction: "forEach",                                                                                      // 10749
    scrollIntoView: "cursor",                                                                                          // 10750
    readOnly: true                                                                                                     // 10751
}, {                                                                                                                   // 10752
    name: "selectwordleft",                                                                                            // 10753
    bindKey: bindKey("Ctrl-Shift-Left", "Option-Shift-Left"),                                                          // 10754
    exec: function(editor) { editor.getSelection().selectWordLeft(); },                                                // 10755
    multiSelectAction: "forEach",                                                                                      // 10756
    scrollIntoView: "cursor",                                                                                          // 10757
    readOnly: true                                                                                                     // 10758
}, {                                                                                                                   // 10759
    name: "gotowordleft",                                                                                              // 10760
    bindKey: bindKey("Ctrl-Left", "Option-Left"),                                                                      // 10761
    exec: function(editor) { editor.navigateWordLeft(); },                                                             // 10762
    multiSelectAction: "forEach",                                                                                      // 10763
    scrollIntoView: "cursor",                                                                                          // 10764
    readOnly: true                                                                                                     // 10765
}, {                                                                                                                   // 10766
    name: "selecttolinestart",                                                                                         // 10767
    bindKey: bindKey("Alt-Shift-Left", "Command-Shift-Left"),                                                          // 10768
    exec: function(editor) { editor.getSelection().selectLineStart(); },                                               // 10769
    multiSelectAction: "forEach",                                                                                      // 10770
    scrollIntoView: "cursor",                                                                                          // 10771
    readOnly: true                                                                                                     // 10772
}, {                                                                                                                   // 10773
    name: "gotolinestart",                                                                                             // 10774
    bindKey: bindKey("Alt-Left|Home", "Command-Left|Home|Ctrl-A"),                                                     // 10775
    exec: function(editor) { editor.navigateLineStart(); },                                                            // 10776
    multiSelectAction: "forEach",                                                                                      // 10777
    scrollIntoView: "cursor",                                                                                          // 10778
    readOnly: true                                                                                                     // 10779
}, {                                                                                                                   // 10780
    name: "selectleft",                                                                                                // 10781
    bindKey: bindKey("Shift-Left", "Shift-Left"),                                                                      // 10782
    exec: function(editor) { editor.getSelection().selectLeft(); },                                                    // 10783
    multiSelectAction: "forEach",                                                                                      // 10784
    scrollIntoView: "cursor",                                                                                          // 10785
    readOnly: true                                                                                                     // 10786
}, {                                                                                                                   // 10787
    name: "gotoleft",                                                                                                  // 10788
    bindKey: bindKey("Left", "Left|Ctrl-B"),                                                                           // 10789
    exec: function(editor, args) { editor.navigateLeft(args.times); },                                                 // 10790
    multiSelectAction: "forEach",                                                                                      // 10791
    scrollIntoView: "cursor",                                                                                          // 10792
    readOnly: true                                                                                                     // 10793
}, {                                                                                                                   // 10794
    name: "selectwordright",                                                                                           // 10795
    bindKey: bindKey("Ctrl-Shift-Right", "Option-Shift-Right"),                                                        // 10796
    exec: function(editor) { editor.getSelection().selectWordRight(); },                                               // 10797
    multiSelectAction: "forEach",                                                                                      // 10798
    scrollIntoView: "cursor",                                                                                          // 10799
    readOnly: true                                                                                                     // 10800
}, {                                                                                                                   // 10801
    name: "gotowordright",                                                                                             // 10802
    bindKey: bindKey("Ctrl-Right", "Option-Right"),                                                                    // 10803
    exec: function(editor) { editor.navigateWordRight(); },                                                            // 10804
    multiSelectAction: "forEach",                                                                                      // 10805
    scrollIntoView: "cursor",                                                                                          // 10806
    readOnly: true                                                                                                     // 10807
}, {                                                                                                                   // 10808
    name: "selecttolineend",                                                                                           // 10809
    bindKey: bindKey("Alt-Shift-Right", "Command-Shift-Right"),                                                        // 10810
    exec: function(editor) { editor.getSelection().selectLineEnd(); },                                                 // 10811
    multiSelectAction: "forEach",                                                                                      // 10812
    scrollIntoView: "cursor",                                                                                          // 10813
    readOnly: true                                                                                                     // 10814
}, {                                                                                                                   // 10815
    name: "gotolineend",                                                                                               // 10816
    bindKey: bindKey("Alt-Right|End", "Command-Right|End|Ctrl-E"),                                                     // 10817
    exec: function(editor) { editor.navigateLineEnd(); },                                                              // 10818
    multiSelectAction: "forEach",                                                                                      // 10819
    scrollIntoView: "cursor",                                                                                          // 10820
    readOnly: true                                                                                                     // 10821
}, {                                                                                                                   // 10822
    name: "selectright",                                                                                               // 10823
    bindKey: bindKey("Shift-Right", "Shift-Right"),                                                                    // 10824
    exec: function(editor) { editor.getSelection().selectRight(); },                                                   // 10825
    multiSelectAction: "forEach",                                                                                      // 10826
    scrollIntoView: "cursor",                                                                                          // 10827
    readOnly: true                                                                                                     // 10828
}, {                                                                                                                   // 10829
    name: "gotoright",                                                                                                 // 10830
    bindKey: bindKey("Right", "Right|Ctrl-F"),                                                                         // 10831
    exec: function(editor, args) { editor.navigateRight(args.times); },                                                // 10832
    multiSelectAction: "forEach",                                                                                      // 10833
    scrollIntoView: "cursor",                                                                                          // 10834
    readOnly: true                                                                                                     // 10835
}, {                                                                                                                   // 10836
    name: "selectpagedown",                                                                                            // 10837
    bindKey: "Shift-PageDown",                                                                                         // 10838
    exec: function(editor) { editor.selectPageDown(); },                                                               // 10839
    readOnly: true                                                                                                     // 10840
}, {                                                                                                                   // 10841
    name: "pagedown",                                                                                                  // 10842
    bindKey: bindKey(null, "Option-PageDown"),                                                                         // 10843
    exec: function(editor) { editor.scrollPageDown(); },                                                               // 10844
    readOnly: true                                                                                                     // 10845
}, {                                                                                                                   // 10846
    name: "gotopagedown",                                                                                              // 10847
    bindKey: bindKey("PageDown", "PageDown|Ctrl-V"),                                                                   // 10848
    exec: function(editor) { editor.gotoPageDown(); },                                                                 // 10849
    readOnly: true                                                                                                     // 10850
}, {                                                                                                                   // 10851
    name: "selectpageup",                                                                                              // 10852
    bindKey: "Shift-PageUp",                                                                                           // 10853
    exec: function(editor) { editor.selectPageUp(); },                                                                 // 10854
    readOnly: true                                                                                                     // 10855
}, {                                                                                                                   // 10856
    name: "pageup",                                                                                                    // 10857
    bindKey: bindKey(null, "Option-PageUp"),                                                                           // 10858
    exec: function(editor) { editor.scrollPageUp(); },                                                                 // 10859
    readOnly: true                                                                                                     // 10860
}, {                                                                                                                   // 10861
    name: "gotopageup",                                                                                                // 10862
    bindKey: "PageUp",                                                                                                 // 10863
    exec: function(editor) { editor.gotoPageUp(); },                                                                   // 10864
    readOnly: true                                                                                                     // 10865
}, {                                                                                                                   // 10866
    name: "scrollup",                                                                                                  // 10867
    bindKey: bindKey("Ctrl-Up", null),                                                                                 // 10868
    exec: function(e) { e.renderer.scrollBy(0, -2 * e.renderer.layerConfig.lineHeight); },                             // 10869
    readOnly: true                                                                                                     // 10870
}, {                                                                                                                   // 10871
    name: "scrolldown",                                                                                                // 10872
    bindKey: bindKey("Ctrl-Down", null),                                                                               // 10873
    exec: function(e) { e.renderer.scrollBy(0, 2 * e.renderer.layerConfig.lineHeight); },                              // 10874
    readOnly: true                                                                                                     // 10875
}, {                                                                                                                   // 10876
    name: "selectlinestart",                                                                                           // 10877
    bindKey: "Shift-Home",                                                                                             // 10878
    exec: function(editor) { editor.getSelection().selectLineStart(); },                                               // 10879
    multiSelectAction: "forEach",                                                                                      // 10880
    scrollIntoView: "cursor",                                                                                          // 10881
    readOnly: true                                                                                                     // 10882
}, {                                                                                                                   // 10883
    name: "selectlineend",                                                                                             // 10884
    bindKey: "Shift-End",                                                                                              // 10885
    exec: function(editor) { editor.getSelection().selectLineEnd(); },                                                 // 10886
    multiSelectAction: "forEach",                                                                                      // 10887
    scrollIntoView: "cursor",                                                                                          // 10888
    readOnly: true                                                                                                     // 10889
}, {                                                                                                                   // 10890
    name: "togglerecording",                                                                                           // 10891
    bindKey: bindKey("Ctrl-Alt-E", "Command-Option-E"),                                                                // 10892
    exec: function(editor) { editor.commands.toggleRecording(editor); },                                               // 10893
    readOnly: true                                                                                                     // 10894
}, {                                                                                                                   // 10895
    name: "replaymacro",                                                                                               // 10896
    bindKey: bindKey("Ctrl-Shift-E", "Command-Shift-E"),                                                               // 10897
    exec: function(editor) { editor.commands.replay(editor); },                                                        // 10898
    readOnly: true                                                                                                     // 10899
}, {                                                                                                                   // 10900
    name: "jumptomatching",                                                                                            // 10901
    bindKey: bindKey("Ctrl-P", "Ctrl-P"),                                                                              // 10902
    exec: function(editor) { editor.jumpToMatching(); },                                                               // 10903
    multiSelectAction: "forEach",                                                                                      // 10904
    scrollIntoView: "animate",                                                                                         // 10905
    readOnly: true                                                                                                     // 10906
}, {                                                                                                                   // 10907
    name: "selecttomatching",                                                                                          // 10908
    bindKey: bindKey("Ctrl-Shift-P", "Ctrl-Shift-P"),                                                                  // 10909
    exec: function(editor) { editor.jumpToMatching(true); },                                                           // 10910
    multiSelectAction: "forEach",                                                                                      // 10911
    scrollIntoView: "animate",                                                                                         // 10912
    readOnly: true                                                                                                     // 10913
}, {                                                                                                                   // 10914
    name: "expandToMatching",                                                                                          // 10915
    bindKey: bindKey("Ctrl-Shift-M", "Ctrl-Shift-M"),                                                                  // 10916
    exec: function(editor) { editor.jumpToMatching(true, true); },                                                     // 10917
    multiSelectAction: "forEach",                                                                                      // 10918
    scrollIntoView: "animate",                                                                                         // 10919
    readOnly: true                                                                                                     // 10920
}, {                                                                                                                   // 10921
    name: "passKeysToBrowser",                                                                                         // 10922
    bindKey: bindKey(null, null),                                                                                      // 10923
    exec: function() {},                                                                                               // 10924
    passEvent: true,                                                                                                   // 10925
    readOnly: true                                                                                                     // 10926
}, {                                                                                                                   // 10927
    name: "copy",                                                                                                      // 10928
    exec: function(editor) {                                                                                           // 10929
    },                                                                                                                 // 10930
    readOnly: true                                                                                                     // 10931
},                                                                                                                     // 10932
{                                                                                                                      // 10933
    name: "cut",                                                                                                       // 10934
    exec: function(editor) {                                                                                           // 10935
        var range = editor.getSelectionRange();                                                                        // 10936
        editor._emit("cut", range);                                                                                    // 10937
                                                                                                                       // 10938
        if (!editor.selection.isEmpty()) {                                                                             // 10939
            editor.session.remove(range);                                                                              // 10940
            editor.clearSelection();                                                                                   // 10941
        }                                                                                                              // 10942
    },                                                                                                                 // 10943
    scrollIntoView: "cursor",                                                                                          // 10944
    multiSelectAction: "forEach"                                                                                       // 10945
}, {                                                                                                                   // 10946
    name: "paste",                                                                                                     // 10947
    exec: function(editor, args) {                                                                                     // 10948
        editor.$handlePaste(args);                                                                                     // 10949
    },                                                                                                                 // 10950
    scrollIntoView: "cursor"                                                                                           // 10951
}, {                                                                                                                   // 10952
    name: "removeline",                                                                                                // 10953
    bindKey: bindKey("Ctrl-D", "Command-D"),                                                                           // 10954
    exec: function(editor) { editor.removeLines(); },                                                                  // 10955
    scrollIntoView: "cursor",                                                                                          // 10956
    multiSelectAction: "forEachLine"                                                                                   // 10957
}, {                                                                                                                   // 10958
    name: "duplicateSelection",                                                                                        // 10959
    bindKey: bindKey("Ctrl-Shift-D", "Command-Shift-D"),                                                               // 10960
    exec: function(editor) { editor.duplicateSelection(); },                                                           // 10961
    scrollIntoView: "cursor",                                                                                          // 10962
    multiSelectAction: "forEach"                                                                                       // 10963
}, {                                                                                                                   // 10964
    name: "sortlines",                                                                                                 // 10965
    bindKey: bindKey("Ctrl-Alt-S", "Command-Alt-S"),                                                                   // 10966
    exec: function(editor) { editor.sortLines(); },                                                                    // 10967
    scrollIntoView: "selection",                                                                                       // 10968
    multiSelectAction: "forEachLine"                                                                                   // 10969
}, {                                                                                                                   // 10970
    name: "togglecomment",                                                                                             // 10971
    bindKey: bindKey("Ctrl-/", "Command-/"),                                                                           // 10972
    exec: function(editor) { editor.toggleCommentLines(); },                                                           // 10973
    multiSelectAction: "forEachLine",                                                                                  // 10974
    scrollIntoView: "selectionPart"                                                                                    // 10975
}, {                                                                                                                   // 10976
    name: "toggleBlockComment",                                                                                        // 10977
    bindKey: bindKey("Ctrl-Shift-/", "Command-Shift-/"),                                                               // 10978
    exec: function(editor) { editor.toggleBlockComment(); },                                                           // 10979
    multiSelectAction: "forEach",                                                                                      // 10980
    scrollIntoView: "selectionPart"                                                                                    // 10981
}, {                                                                                                                   // 10982
    name: "modifyNumberUp",                                                                                            // 10983
    bindKey: bindKey("Ctrl-Shift-Up", "Alt-Shift-Up"),                                                                 // 10984
    exec: function(editor) { editor.modifyNumber(1); },                                                                // 10985
    scrollIntoView: "cursor",                                                                                          // 10986
    multiSelectAction: "forEach"                                                                                       // 10987
}, {                                                                                                                   // 10988
    name: "modifyNumberDown",                                                                                          // 10989
    bindKey: bindKey("Ctrl-Shift-Down", "Alt-Shift-Down"),                                                             // 10990
    exec: function(editor) { editor.modifyNumber(-1); },                                                               // 10991
    scrollIntoView: "cursor",                                                                                          // 10992
    multiSelectAction: "forEach"                                                                                       // 10993
}, {                                                                                                                   // 10994
    name: "replace",                                                                                                   // 10995
    bindKey: bindKey("Ctrl-H", "Command-Option-F"),                                                                    // 10996
    exec: function(editor) {                                                                                           // 10997
        config.loadModule("ace/ext/searchbox", function(e) {e.Search(editor, true)});                                  // 10998
    }                                                                                                                  // 10999
}, {                                                                                                                   // 11000
    name: "undo",                                                                                                      // 11001
    bindKey: bindKey("Ctrl-Z", "Command-Z"),                                                                           // 11002
    exec: function(editor) { editor.undo(); }                                                                          // 11003
}, {                                                                                                                   // 11004
    name: "redo",                                                                                                      // 11005
    bindKey: bindKey("Ctrl-Shift-Z|Ctrl-Y", "Command-Shift-Z|Command-Y"),                                              // 11006
    exec: function(editor) { editor.redo(); }                                                                          // 11007
}, {                                                                                                                   // 11008
    name: "copylinesup",                                                                                               // 11009
    bindKey: bindKey("Alt-Shift-Up", "Command-Option-Up"),                                                             // 11010
    exec: function(editor) { editor.copyLinesUp(); },                                                                  // 11011
    scrollIntoView: "cursor"                                                                                           // 11012
}, {                                                                                                                   // 11013
    name: "movelinesup",                                                                                               // 11014
    bindKey: bindKey("Alt-Up", "Option-Up"),                                                                           // 11015
    exec: function(editor) { editor.moveLinesUp(); },                                                                  // 11016
    scrollIntoView: "cursor"                                                                                           // 11017
}, {                                                                                                                   // 11018
    name: "copylinesdown",                                                                                             // 11019
    bindKey: bindKey("Alt-Shift-Down", "Command-Option-Down"),                                                         // 11020
    exec: function(editor) { editor.copyLinesDown(); },                                                                // 11021
    scrollIntoView: "cursor"                                                                                           // 11022
}, {                                                                                                                   // 11023
    name: "movelinesdown",                                                                                             // 11024
    bindKey: bindKey("Alt-Down", "Option-Down"),                                                                       // 11025
    exec: function(editor) { editor.moveLinesDown(); },                                                                // 11026
    scrollIntoView: "cursor"                                                                                           // 11027
}, {                                                                                                                   // 11028
    name: "del",                                                                                                       // 11029
    bindKey: bindKey("Delete", "Delete|Ctrl-D|Shift-Delete"),                                                          // 11030
    exec: function(editor) { editor.remove("right"); },                                                                // 11031
    multiSelectAction: "forEach",                                                                                      // 11032
    scrollIntoView: "cursor"                                                                                           // 11033
}, {                                                                                                                   // 11034
    name: "backspace",                                                                                                 // 11035
    bindKey: bindKey(                                                                                                  // 11036
        "Shift-Backspace|Backspace",                                                                                   // 11037
        "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"                                                              // 11038
    ),                                                                                                                 // 11039
    exec: function(editor) { editor.remove("left"); },                                                                 // 11040
    multiSelectAction: "forEach",                                                                                      // 11041
    scrollIntoView: "cursor"                                                                                           // 11042
}, {                                                                                                                   // 11043
    name: "cut_or_delete",                                                                                             // 11044
    bindKey: bindKey("Shift-Delete", null),                                                                            // 11045
    exec: function(editor) {                                                                                           // 11046
        if (editor.selection.isEmpty()) {                                                                              // 11047
            editor.remove("left");                                                                                     // 11048
        } else {                                                                                                       // 11049
            return false;                                                                                              // 11050
        }                                                                                                              // 11051
    },                                                                                                                 // 11052
    multiSelectAction: "forEach",                                                                                      // 11053
    scrollIntoView: "cursor"                                                                                           // 11054
}, {                                                                                                                   // 11055
    name: "removetolinestart",                                                                                         // 11056
    bindKey: bindKey("Alt-Backspace", "Command-Backspace"),                                                            // 11057
    exec: function(editor) { editor.removeToLineStart(); },                                                            // 11058
    multiSelectAction: "forEach",                                                                                      // 11059
    scrollIntoView: "cursor"                                                                                           // 11060
}, {                                                                                                                   // 11061
    name: "removetolineend",                                                                                           // 11062
    bindKey: bindKey("Alt-Delete", "Ctrl-K"),                                                                          // 11063
    exec: function(editor) { editor.removeToLineEnd(); },                                                              // 11064
    multiSelectAction: "forEach",                                                                                      // 11065
    scrollIntoView: "cursor"                                                                                           // 11066
}, {                                                                                                                   // 11067
    name: "removewordleft",                                                                                            // 11068
    bindKey: bindKey("Ctrl-Backspace", "Alt-Backspace|Ctrl-Alt-Backspace"),                                            // 11069
    exec: function(editor) { editor.removeWordLeft(); },                                                               // 11070
    multiSelectAction: "forEach",                                                                                      // 11071
    scrollIntoView: "cursor"                                                                                           // 11072
}, {                                                                                                                   // 11073
    name: "removewordright",                                                                                           // 11074
    bindKey: bindKey("Ctrl-Delete", "Alt-Delete"),                                                                     // 11075
    exec: function(editor) { editor.removeWordRight(); },                                                              // 11076
    multiSelectAction: "forEach",                                                                                      // 11077
    scrollIntoView: "cursor"                                                                                           // 11078
}, {                                                                                                                   // 11079
    name: "outdent",                                                                                                   // 11080
    bindKey: bindKey("Shift-Tab", "Shift-Tab"),                                                                        // 11081
    exec: function(editor) { editor.blockOutdent(); },                                                                 // 11082
    multiSelectAction: "forEach",                                                                                      // 11083
    scrollIntoView: "selectionPart"                                                                                    // 11084
}, {                                                                                                                   // 11085
    name: "indent",                                                                                                    // 11086
    bindKey: bindKey("Tab", "Tab"),                                                                                    // 11087
    exec: function(editor) { editor.indent(); },                                                                       // 11088
    multiSelectAction: "forEach",                                                                                      // 11089
    scrollIntoView: "selectionPart"                                                                                    // 11090
}, {                                                                                                                   // 11091
    name: "blockoutdent",                                                                                              // 11092
    bindKey: bindKey("Ctrl-[", "Ctrl-["),                                                                              // 11093
    exec: function(editor) { editor.blockOutdent(); },                                                                 // 11094
    multiSelectAction: "forEachLine",                                                                                  // 11095
    scrollIntoView: "selectionPart"                                                                                    // 11096
}, {                                                                                                                   // 11097
    name: "blockindent",                                                                                               // 11098
    bindKey: bindKey("Ctrl-]", "Ctrl-]"),                                                                              // 11099
    exec: function(editor) { editor.blockIndent(); },                                                                  // 11100
    multiSelectAction: "forEachLine",                                                                                  // 11101
    scrollIntoView: "selectionPart"                                                                                    // 11102
}, {                                                                                                                   // 11103
    name: "insertstring",                                                                                              // 11104
    exec: function(editor, str) { editor.insert(str); },                                                               // 11105
    multiSelectAction: "forEach",                                                                                      // 11106
    scrollIntoView: "cursor"                                                                                           // 11107
}, {                                                                                                                   // 11108
    name: "inserttext",                                                                                                // 11109
    exec: function(editor, args) {                                                                                     // 11110
        editor.insert(lang.stringRepeat(args.text  || "", args.times || 1));                                           // 11111
    },                                                                                                                 // 11112
    multiSelectAction: "forEach",                                                                                      // 11113
    scrollIntoView: "cursor"                                                                                           // 11114
}, {                                                                                                                   // 11115
    name: "splitline",                                                                                                 // 11116
    bindKey: bindKey(null, "Ctrl-O"),                                                                                  // 11117
    exec: function(editor) { editor.splitLine(); },                                                                    // 11118
    multiSelectAction: "forEach",                                                                                      // 11119
    scrollIntoView: "cursor"                                                                                           // 11120
}, {                                                                                                                   // 11121
    name: "transposeletters",                                                                                          // 11122
    bindKey: bindKey("Ctrl-T", "Ctrl-T"),                                                                              // 11123
    exec: function(editor) { editor.transposeLetters(); },                                                             // 11124
    multiSelectAction: function(editor) {editor.transposeSelections(1); },                                             // 11125
    scrollIntoView: "cursor"                                                                                           // 11126
}, {                                                                                                                   // 11127
    name: "touppercase",                                                                                               // 11128
    bindKey: bindKey("Ctrl-U", "Ctrl-U"),                                                                              // 11129
    exec: function(editor) { editor.toUpperCase(); },                                                                  // 11130
    multiSelectAction: "forEach",                                                                                      // 11131
    scrollIntoView: "cursor"                                                                                           // 11132
}, {                                                                                                                   // 11133
    name: "tolowercase",                                                                                               // 11134
    bindKey: bindKey("Ctrl-Shift-U", "Ctrl-Shift-U"),                                                                  // 11135
    exec: function(editor) { editor.toLowerCase(); },                                                                  // 11136
    multiSelectAction: "forEach",                                                                                      // 11137
    scrollIntoView: "cursor"                                                                                           // 11138
}, {                                                                                                                   // 11139
    name: "expandtoline",                                                                                              // 11140
    bindKey: bindKey("Ctrl-Shift-L", "Command-Shift-L"),                                                               // 11141
    exec: function(editor) {                                                                                           // 11142
        var range = editor.selection.getRange();                                                                       // 11143
                                                                                                                       // 11144
        range.start.column = range.end.column = 0;                                                                     // 11145
        range.end.row++;                                                                                               // 11146
        editor.selection.setRange(range, false);                                                                       // 11147
    },                                                                                                                 // 11148
    multiSelectAction: "forEach",                                                                                      // 11149
    scrollIntoView: "cursor",                                                                                          // 11150
    readOnly: true                                                                                                     // 11151
}, {                                                                                                                   // 11152
    name: "joinlines",                                                                                                 // 11153
    bindKey: bindKey(null, null),                                                                                      // 11154
    exec: function(editor) {                                                                                           // 11155
        var isBackwards = editor.selection.isBackwards();                                                              // 11156
        var selectionStart = isBackwards ? editor.selection.getSelectionLead() : editor.selection.getSelectionAnchor();
        var selectionEnd = isBackwards ? editor.selection.getSelectionAnchor() : editor.selection.getSelectionLead();  // 11158
        var firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length;                                   // 11159
        var selectedText = editor.session.doc.getTextRange(editor.selection.getRange());                               // 11160
        var selectedCount = selectedText.replace(/\n\s*/, " ").length;                                                 // 11161
        var insertLine = editor.session.doc.getLine(selectionStart.row);                                               // 11162
                                                                                                                       // 11163
        for (var i = selectionStart.row + 1; i <= selectionEnd.row + 1; i++) {                                         // 11164
            var curLine = lang.stringTrimLeft(lang.stringTrimRight(editor.session.doc.getLine(i)));                    // 11165
            if (curLine.length !== 0) {                                                                                // 11166
                curLine = " " + curLine;                                                                               // 11167
            }                                                                                                          // 11168
            insertLine += curLine;                                                                                     // 11169
        }                                                                                                              // 11170
                                                                                                                       // 11171
        if (selectionEnd.row + 1 < (editor.session.doc.getLength() - 1)) {                                             // 11172
            insertLine += editor.session.doc.getNewLineCharacter();                                                    // 11173
        }                                                                                                              // 11174
                                                                                                                       // 11175
        editor.clearSelection();                                                                                       // 11176
        editor.session.doc.replace(new Range(selectionStart.row, 0, selectionEnd.row + 2, 0), insertLine);             // 11177
                                                                                                                       // 11178
        if (selectedCount > 0) {                                                                                       // 11179
            editor.selection.moveCursorTo(selectionStart.row, selectionStart.column);                                  // 11180
            editor.selection.selectTo(selectionStart.row, selectionStart.column + selectedCount);                      // 11181
        } else {                                                                                                       // 11182
            firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length > firstLineEndCol ? (firstLineEndCol + 1) : firstLineEndCol;
            editor.selection.moveCursorTo(selectionStart.row, firstLineEndCol);                                        // 11184
        }                                                                                                              // 11185
    },                                                                                                                 // 11186
    multiSelectAction: "forEach",                                                                                      // 11187
    readOnly: true                                                                                                     // 11188
}, {                                                                                                                   // 11189
    name: "invertSelection",                                                                                           // 11190
    bindKey: bindKey(null, null),                                                                                      // 11191
    exec: function(editor) {                                                                                           // 11192
        var endRow = editor.session.doc.getLength() - 1;                                                               // 11193
        var endCol = editor.session.doc.getLine(endRow).length;                                                        // 11194
        var ranges = editor.selection.rangeList.ranges;                                                                // 11195
        var newRanges = [];                                                                                            // 11196
        if (ranges.length < 1) {                                                                                       // 11197
            ranges = [editor.selection.getRange()];                                                                    // 11198
        }                                                                                                              // 11199
                                                                                                                       // 11200
        for (var i = 0; i < ranges.length; i++) {                                                                      // 11201
            if (i == (ranges.length - 1)) {                                                                            // 11202
                if (!(ranges[i].end.row === endRow && ranges[i].end.column === endCol)) {                              // 11203
                    newRanges.push(new Range(ranges[i].end.row, ranges[i].end.column, endRow, endCol));                // 11204
                }                                                                                                      // 11205
            }                                                                                                          // 11206
                                                                                                                       // 11207
            if (i === 0) {                                                                                             // 11208
                if (!(ranges[i].start.row === 0 && ranges[i].start.column === 0)) {                                    // 11209
                    newRanges.push(new Range(0, 0, ranges[i].start.row, ranges[i].start.column));                      // 11210
                }                                                                                                      // 11211
            } else {                                                                                                   // 11212
                newRanges.push(new Range(ranges[i-1].end.row, ranges[i-1].end.column, ranges[i].start.row, ranges[i].start.column));
            }                                                                                                          // 11214
        }                                                                                                              // 11215
                                                                                                                       // 11216
        editor.exitMultiSelectMode();                                                                                  // 11217
        editor.clearSelection();                                                                                       // 11218
                                                                                                                       // 11219
        for(var i = 0; i < newRanges.length; i++) {                                                                    // 11220
            editor.selection.addRange(newRanges[i], false);                                                            // 11221
        }                                                                                                              // 11222
    },                                                                                                                 // 11223
    readOnly: true,                                                                                                    // 11224
    scrollIntoView: "none"                                                                                             // 11225
}];                                                                                                                    // 11226
                                                                                                                       // 11227
});                                                                                                                    // 11228
                                                                                                                       // 11229
define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"], function(require, exports, module) {
"use strict";                                                                                                          // 11231
                                                                                                                       // 11232
require("./lib/fixoldbrowsers");                                                                                       // 11233
                                                                                                                       // 11234
var oop = require("./lib/oop");                                                                                        // 11235
var dom = require("./lib/dom");                                                                                        // 11236
var lang = require("./lib/lang");                                                                                      // 11237
var useragent = require("./lib/useragent");                                                                            // 11238
var TextInput = require("./keyboard/textinput").TextInput;                                                             // 11239
var MouseHandler = require("./mouse/mouse_handler").MouseHandler;                                                      // 11240
var FoldHandler = require("./mouse/fold_handler").FoldHandler;                                                         // 11241
var KeyBinding = require("./keyboard/keybinding").KeyBinding;                                                          // 11242
var EditSession = require("./edit_session").EditSession;                                                               // 11243
var Search = require("./search").Search;                                                                               // 11244
var Range = require("./range").Range;                                                                                  // 11245
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 11246
var CommandManager = require("./commands/command_manager").CommandManager;                                             // 11247
var defaultCommands = require("./commands/default_commands").commands;                                                 // 11248
var config = require("./config");                                                                                      // 11249
var TokenIterator = require("./token_iterator").TokenIterator;                                                         // 11250
var Editor = function(renderer, session) {                                                                             // 11251
    var container = renderer.getContainerElement();                                                                    // 11252
    this.container = container;                                                                                        // 11253
    this.renderer = renderer;                                                                                          // 11254
                                                                                                                       // 11255
    this.commands = new CommandManager(useragent.isMac ? "mac" : "win", defaultCommands);                              // 11256
    this.textInput  = new TextInput(renderer.getTextAreaContainer(), this);                                            // 11257
    this.renderer.textarea = this.textInput.getElement();                                                              // 11258
    this.keyBinding = new KeyBinding(this);                                                                            // 11259
    this.$mouseHandler = new MouseHandler(this);                                                                       // 11260
    new FoldHandler(this);                                                                                             // 11261
                                                                                                                       // 11262
    this.$blockScrolling = 0;                                                                                          // 11263
    this.$search = new Search().set({                                                                                  // 11264
        wrap: true                                                                                                     // 11265
    });                                                                                                                // 11266
                                                                                                                       // 11267
    this.$historyTracker = this.$historyTracker.bind(this);                                                            // 11268
    this.commands.on("exec", this.$historyTracker);                                                                    // 11269
                                                                                                                       // 11270
    this.$initOperationListeners();                                                                                    // 11271
                                                                                                                       // 11272
    this._$emitInputEvent = lang.delayedCall(function() {                                                              // 11273
        this._signal("input", {});                                                                                     // 11274
        if (this.session && this.session.bgTokenizer)                                                                  // 11275
            this.session.bgTokenizer.scheduleStart();                                                                  // 11276
    }.bind(this));                                                                                                     // 11277
                                                                                                                       // 11278
    this.on("change", function(_, _self) {                                                                             // 11279
        _self._$emitInputEvent.schedule(31);                                                                           // 11280
    });                                                                                                                // 11281
                                                                                                                       // 11282
    this.setSession(session || new EditSession(""));                                                                   // 11283
    config.resetOptions(this);                                                                                         // 11284
    config._signal("editor", this);                                                                                    // 11285
};                                                                                                                     // 11286
                                                                                                                       // 11287
(function(){                                                                                                           // 11288
                                                                                                                       // 11289
    oop.implement(this, EventEmitter);                                                                                 // 11290
                                                                                                                       // 11291
    this.$initOperationListeners = function() {                                                                        // 11292
        function last(a) {return a[a.length - 1]}                                                                      // 11293
                                                                                                                       // 11294
        this.selections = [];                                                                                          // 11295
        this.commands.on("exec", this.startOperation.bind(this), true);                                                // 11296
        this.commands.on("afterExec", this.endOperation.bind(this), true);                                             // 11297
                                                                                                                       // 11298
        this.$opResetTimer = lang.delayedCall(this.endOperation.bind(this));                                           // 11299
                                                                                                                       // 11300
        this.on("change", function() {                                                                                 // 11301
            this.curOp || this.startOperation();                                                                       // 11302
            this.curOp.docChanged = true;                                                                              // 11303
        }.bind(this), true);                                                                                           // 11304
                                                                                                                       // 11305
        this.on("changeSelection", function() {                                                                        // 11306
            this.curOp || this.startOperation();                                                                       // 11307
            this.curOp.selectionChanged = true;                                                                        // 11308
        }.bind(this), true);                                                                                           // 11309
    };                                                                                                                 // 11310
                                                                                                                       // 11311
    this.curOp = null;                                                                                                 // 11312
    this.prevOp = {};                                                                                                  // 11313
    this.startOperation = function(commadEvent) {                                                                      // 11314
        if (this.curOp) {                                                                                              // 11315
            if (!commadEvent || this.curOp.command)                                                                    // 11316
                return;                                                                                                // 11317
            this.prevOp = this.curOp;                                                                                  // 11318
        }                                                                                                              // 11319
        if (!commadEvent) {                                                                                            // 11320
            this.previousCommand = null;                                                                               // 11321
            commadEvent = {};                                                                                          // 11322
        }                                                                                                              // 11323
                                                                                                                       // 11324
        this.$opResetTimer.schedule();                                                                                 // 11325
        this.curOp = {                                                                                                 // 11326
            command: commadEvent.command || {},                                                                        // 11327
            args: commadEvent.args,                                                                                    // 11328
            scrollTop: this.renderer.scrollTop                                                                         // 11329
        };                                                                                                             // 11330
        if (this.curOp.command.name && this.curOp.command.scrollIntoView !== undefined)                                // 11331
            this.$blockScrolling++;                                                                                    // 11332
    };                                                                                                                 // 11333
                                                                                                                       // 11334
    this.endOperation = function(e) {                                                                                  // 11335
        if (this.curOp) {                                                                                              // 11336
            if (e && e.returnValue === false)                                                                          // 11337
                return this.curOp = null;                                                                              // 11338
            this._signal("beforeEndOperation");                                                                        // 11339
            var command = this.curOp.command;                                                                          // 11340
            if (command.name && this.$blockScrolling > 0)                                                              // 11341
                this.$blockScrolling--;                                                                                // 11342
            var scrollIntoView = command && command.scrollIntoView;                                                    // 11343
            if (scrollIntoView) {                                                                                      // 11344
                switch (scrollIntoView) {                                                                              // 11345
                    case "center-animate":                                                                             // 11346
                        scrollIntoView = "animate";                                                                    // 11347
                    case "center":                                                                                     // 11348
                        this.renderer.scrollCursorIntoView(null, 0.5);                                                 // 11349
                        break;                                                                                         // 11350
                    case "animate":                                                                                    // 11351
                    case "cursor":                                                                                     // 11352
                        this.renderer.scrollCursorIntoView();                                                          // 11353
                        break;                                                                                         // 11354
                    case "selectionPart":                                                                              // 11355
                        var range = this.selection.getRange();                                                         // 11356
                        var config = this.renderer.layerConfig;                                                        // 11357
                        if (range.start.row >= config.lastRow || range.end.row <= config.firstRow) {                   // 11358
                            this.renderer.scrollSelectionIntoView(this.selection.anchor, this.selection.lead);         // 11359
                        }                                                                                              // 11360
                        break;                                                                                         // 11361
                    default:                                                                                           // 11362
                        break;                                                                                         // 11363
                }                                                                                                      // 11364
                if (scrollIntoView == "animate")                                                                       // 11365
                    this.renderer.animateScrolling(this.curOp.scrollTop);                                              // 11366
            }                                                                                                          // 11367
                                                                                                                       // 11368
            this.prevOp = this.curOp;                                                                                  // 11369
            this.curOp = null;                                                                                         // 11370
        }                                                                                                              // 11371
    };                                                                                                                 // 11372
    this.$mergeableCommands = ["backspace", "del", "insertstring"];                                                    // 11373
    this.$historyTracker = function(e) {                                                                               // 11374
        if (!this.$mergeUndoDeltas)                                                                                    // 11375
            return;                                                                                                    // 11376
                                                                                                                       // 11377
        var prev = this.prevOp;                                                                                        // 11378
        var mergeableCommands = this.$mergeableCommands;                                                               // 11379
        var shouldMerge = prev.command && (e.command.name == prev.command.name);                                       // 11380
        if (e.command.name == "insertstring") {                                                                        // 11381
            var text = e.args;                                                                                         // 11382
            if (this.mergeNextCommand === undefined)                                                                   // 11383
                this.mergeNextCommand = true;                                                                          // 11384
                                                                                                                       // 11385
            shouldMerge = shouldMerge                                                                                  // 11386
                && this.mergeNextCommand // previous command allows to coalesce with                                   // 11387
                && (!/\s/.test(text) || /\s/.test(prev.args)); // previous insertion was of same type                  // 11388
                                                                                                                       // 11389
            this.mergeNextCommand = true;                                                                              // 11390
        } else {                                                                                                       // 11391
            shouldMerge = shouldMerge                                                                                  // 11392
                && mergeableCommands.indexOf(e.command.name) !== -1; // the command is mergeable                       // 11393
        }                                                                                                              // 11394
                                                                                                                       // 11395
        if (                                                                                                           // 11396
            this.$mergeUndoDeltas != "always"                                                                          // 11397
            && Date.now() - this.sequenceStartTime > 2000                                                              // 11398
        ) {                                                                                                            // 11399
            shouldMerge = false; // the sequence is too long                                                           // 11400
        }                                                                                                              // 11401
                                                                                                                       // 11402
        if (shouldMerge)                                                                                               // 11403
            this.session.mergeUndoDeltas = true;                                                                       // 11404
        else if (mergeableCommands.indexOf(e.command.name) !== -1)                                                     // 11405
            this.sequenceStartTime = Date.now();                                                                       // 11406
    };                                                                                                                 // 11407
    this.setKeyboardHandler = function(keyboardHandler, cb) {                                                          // 11408
        if (keyboardHandler && typeof keyboardHandler === "string") {                                                  // 11409
            this.$keybindingId = keyboardHandler;                                                                      // 11410
            var _self = this;                                                                                          // 11411
            config.loadModule(["keybinding", keyboardHandler], function(module) {                                      // 11412
                if (_self.$keybindingId == keyboardHandler)                                                            // 11413
                    _self.keyBinding.setKeyboardHandler(module && module.handler);                                     // 11414
                cb && cb();                                                                                            // 11415
            });                                                                                                        // 11416
        } else {                                                                                                       // 11417
            this.$keybindingId = null;                                                                                 // 11418
            this.keyBinding.setKeyboardHandler(keyboardHandler);                                                       // 11419
            cb && cb();                                                                                                // 11420
        }                                                                                                              // 11421
    };                                                                                                                 // 11422
    this.getKeyboardHandler = function() {                                                                             // 11423
        return this.keyBinding.getKeyboardHandler();                                                                   // 11424
    };                                                                                                                 // 11425
    this.setSession = function(session) {                                                                              // 11426
        if (this.session == session)                                                                                   // 11427
            return;                                                                                                    // 11428
        if (this.curOp) this.endOperation();                                                                           // 11429
        this.curOp = {};                                                                                               // 11430
                                                                                                                       // 11431
        var oldSession = this.session;                                                                                 // 11432
        if (oldSession) {                                                                                              // 11433
            this.session.removeEventListener("change", this.$onDocumentChange);                                        // 11434
            this.session.removeEventListener("changeMode", this.$onChangeMode);                                        // 11435
            this.session.removeEventListener("tokenizerUpdate", this.$onTokenizerUpdate);                              // 11436
            this.session.removeEventListener("changeTabSize", this.$onChangeTabSize);                                  // 11437
            this.session.removeEventListener("changeWrapLimit", this.$onChangeWrapLimit);                              // 11438
            this.session.removeEventListener("changeWrapMode", this.$onChangeWrapMode);                                // 11439
            this.session.removeEventListener("onChangeFold", this.$onChangeFold);                                      // 11440
            this.session.removeEventListener("changeFrontMarker", this.$onChangeFrontMarker);                          // 11441
            this.session.removeEventListener("changeBackMarker", this.$onChangeBackMarker);                            // 11442
            this.session.removeEventListener("changeBreakpoint", this.$onChangeBreakpoint);                            // 11443
            this.session.removeEventListener("changeAnnotation", this.$onChangeAnnotation);                            // 11444
            this.session.removeEventListener("changeOverwrite", this.$onCursorChange);                                 // 11445
            this.session.removeEventListener("changeScrollTop", this.$onScrollTopChange);                              // 11446
            this.session.removeEventListener("changeScrollLeft", this.$onScrollLeftChange);                            // 11447
                                                                                                                       // 11448
            var selection = this.session.getSelection();                                                               // 11449
            selection.removeEventListener("changeCursor", this.$onCursorChange);                                       // 11450
            selection.removeEventListener("changeSelection", this.$onSelectionChange);                                 // 11451
        }                                                                                                              // 11452
                                                                                                                       // 11453
        this.session = session;                                                                                        // 11454
        if (session) {                                                                                                 // 11455
            this.$onDocumentChange = this.onDocumentChange.bind(this);                                                 // 11456
            session.addEventListener("change", this.$onDocumentChange);                                                // 11457
            this.renderer.setSession(session);                                                                         // 11458
                                                                                                                       // 11459
            this.$onChangeMode = this.onChangeMode.bind(this);                                                         // 11460
            session.addEventListener("changeMode", this.$onChangeMode);                                                // 11461
                                                                                                                       // 11462
            this.$onTokenizerUpdate = this.onTokenizerUpdate.bind(this);                                               // 11463
            session.addEventListener("tokenizerUpdate", this.$onTokenizerUpdate);                                      // 11464
                                                                                                                       // 11465
            this.$onChangeTabSize = this.renderer.onChangeTabSize.bind(this.renderer);                                 // 11466
            session.addEventListener("changeTabSize", this.$onChangeTabSize);                                          // 11467
                                                                                                                       // 11468
            this.$onChangeWrapLimit = this.onChangeWrapLimit.bind(this);                                               // 11469
            session.addEventListener("changeWrapLimit", this.$onChangeWrapLimit);                                      // 11470
                                                                                                                       // 11471
            this.$onChangeWrapMode = this.onChangeWrapMode.bind(this);                                                 // 11472
            session.addEventListener("changeWrapMode", this.$onChangeWrapMode);                                        // 11473
                                                                                                                       // 11474
            this.$onChangeFold = this.onChangeFold.bind(this);                                                         // 11475
            session.addEventListener("changeFold", this.$onChangeFold);                                                // 11476
                                                                                                                       // 11477
            this.$onChangeFrontMarker = this.onChangeFrontMarker.bind(this);                                           // 11478
            this.session.addEventListener("changeFrontMarker", this.$onChangeFrontMarker);                             // 11479
                                                                                                                       // 11480
            this.$onChangeBackMarker = this.onChangeBackMarker.bind(this);                                             // 11481
            this.session.addEventListener("changeBackMarker", this.$onChangeBackMarker);                               // 11482
                                                                                                                       // 11483
            this.$onChangeBreakpoint = this.onChangeBreakpoint.bind(this);                                             // 11484
            this.session.addEventListener("changeBreakpoint", this.$onChangeBreakpoint);                               // 11485
                                                                                                                       // 11486
            this.$onChangeAnnotation = this.onChangeAnnotation.bind(this);                                             // 11487
            this.session.addEventListener("changeAnnotation", this.$onChangeAnnotation);                               // 11488
                                                                                                                       // 11489
            this.$onCursorChange = this.onCursorChange.bind(this);                                                     // 11490
            this.session.addEventListener("changeOverwrite", this.$onCursorChange);                                    // 11491
                                                                                                                       // 11492
            this.$onScrollTopChange = this.onScrollTopChange.bind(this);                                               // 11493
            this.session.addEventListener("changeScrollTop", this.$onScrollTopChange);                                 // 11494
                                                                                                                       // 11495
            this.$onScrollLeftChange = this.onScrollLeftChange.bind(this);                                             // 11496
            this.session.addEventListener("changeScrollLeft", this.$onScrollLeftChange);                               // 11497
                                                                                                                       // 11498
            this.selection = session.getSelection();                                                                   // 11499
            this.selection.addEventListener("changeCursor", this.$onCursorChange);                                     // 11500
                                                                                                                       // 11501
            this.$onSelectionChange = this.onSelectionChange.bind(this);                                               // 11502
            this.selection.addEventListener("changeSelection", this.$onSelectionChange);                               // 11503
                                                                                                                       // 11504
            this.onChangeMode();                                                                                       // 11505
                                                                                                                       // 11506
            this.$blockScrolling += 1;                                                                                 // 11507
            this.onCursorChange();                                                                                     // 11508
            this.$blockScrolling -= 1;                                                                                 // 11509
                                                                                                                       // 11510
            this.onScrollTopChange();                                                                                  // 11511
            this.onScrollLeftChange();                                                                                 // 11512
            this.onSelectionChange();                                                                                  // 11513
            this.onChangeFrontMarker();                                                                                // 11514
            this.onChangeBackMarker();                                                                                 // 11515
            this.onChangeBreakpoint();                                                                                 // 11516
            this.onChangeAnnotation();                                                                                 // 11517
            this.session.getUseWrapMode() && this.renderer.adjustWrapLimit();                                          // 11518
            this.renderer.updateFull();                                                                                // 11519
        } else {                                                                                                       // 11520
            this.selection = null;                                                                                     // 11521
            this.renderer.setSession(session);                                                                         // 11522
        }                                                                                                              // 11523
                                                                                                                       // 11524
        this._signal("changeSession", {                                                                                // 11525
            session: session,                                                                                          // 11526
            oldSession: oldSession                                                                                     // 11527
        });                                                                                                            // 11528
                                                                                                                       // 11529
        this.curOp = null;                                                                                             // 11530
                                                                                                                       // 11531
        oldSession && oldSession._signal("changeEditor", {oldEditor: this});                                           // 11532
        session && session._signal("changeEditor", {editor: this});                                                    // 11533
    };                                                                                                                 // 11534
    this.getSession = function() {                                                                                     // 11535
        return this.session;                                                                                           // 11536
    };                                                                                                                 // 11537
    this.setValue = function(val, cursorPos) {                                                                         // 11538
        this.session.doc.setValue(val);                                                                                // 11539
                                                                                                                       // 11540
        if (!cursorPos)                                                                                                // 11541
            this.selectAll();                                                                                          // 11542
        else if (cursorPos == 1)                                                                                       // 11543
            this.navigateFileEnd();                                                                                    // 11544
        else if (cursorPos == -1)                                                                                      // 11545
            this.navigateFileStart();                                                                                  // 11546
                                                                                                                       // 11547
        return val;                                                                                                    // 11548
    };                                                                                                                 // 11549
    this.getValue = function() {                                                                                       // 11550
        return this.session.getValue();                                                                                // 11551
    };                                                                                                                 // 11552
    this.getSelection = function() {                                                                                   // 11553
        return this.selection;                                                                                         // 11554
    };                                                                                                                 // 11555
    this.resize = function(force) {                                                                                    // 11556
        this.renderer.onResize(force);                                                                                 // 11557
    };                                                                                                                 // 11558
    this.setTheme = function(theme, cb) {                                                                              // 11559
        this.renderer.setTheme(theme, cb);                                                                             // 11560
    };                                                                                                                 // 11561
    this.getTheme = function() {                                                                                       // 11562
        return this.renderer.getTheme();                                                                               // 11563
    };                                                                                                                 // 11564
    this.setStyle = function(style) {                                                                                  // 11565
        this.renderer.setStyle(style);                                                                                 // 11566
    };                                                                                                                 // 11567
    this.unsetStyle = function(style) {                                                                                // 11568
        this.renderer.unsetStyle(style);                                                                               // 11569
    };                                                                                                                 // 11570
    this.getFontSize = function () {                                                                                   // 11571
        return this.getOption("fontSize") ||                                                                           // 11572
           dom.computedStyle(this.container, "fontSize");                                                              // 11573
    };                                                                                                                 // 11574
    this.setFontSize = function(size) {                                                                                // 11575
        this.setOption("fontSize", size);                                                                              // 11576
    };                                                                                                                 // 11577
                                                                                                                       // 11578
    this.$highlightBrackets = function() {                                                                             // 11579
        if (this.session.$bracketHighlight) {                                                                          // 11580
            this.session.removeMarker(this.session.$bracketHighlight);                                                 // 11581
            this.session.$bracketHighlight = null;                                                                     // 11582
        }                                                                                                              // 11583
                                                                                                                       // 11584
        if (this.$highlightPending) {                                                                                  // 11585
            return;                                                                                                    // 11586
        }                                                                                                              // 11587
        var self = this;                                                                                               // 11588
        this.$highlightPending = true;                                                                                 // 11589
        setTimeout(function() {                                                                                        // 11590
            self.$highlightPending = false;                                                                            // 11591
            var session = self.session;                                                                                // 11592
            if (!session || !session.bgTokenizer) return;                                                              // 11593
            var pos = session.findMatchingBracket(self.getCursorPosition());                                           // 11594
            if (pos) {                                                                                                 // 11595
                var range = new Range(pos.row, pos.column, pos.row, pos.column + 1);                                   // 11596
            } else if (session.$mode.getMatching) {                                                                    // 11597
                var range = session.$mode.getMatching(self.session);                                                   // 11598
            }                                                                                                          // 11599
            if (range)                                                                                                 // 11600
                session.$bracketHighlight = session.addMarker(range, "ace_bracket", "text");                           // 11601
        }, 50);                                                                                                        // 11602
    };                                                                                                                 // 11603
    this.$highlightTags = function() {                                                                                 // 11604
        if (this.$highlightTagPending)                                                                                 // 11605
            return;                                                                                                    // 11606
        var self = this;                                                                                               // 11607
        this.$highlightTagPending = true;                                                                              // 11608
        setTimeout(function() {                                                                                        // 11609
            self.$highlightTagPending = false;                                                                         // 11610
                                                                                                                       // 11611
            var session = self.session;                                                                                // 11612
            if (!session || !session.bgTokenizer) return;                                                              // 11613
                                                                                                                       // 11614
            var pos = self.getCursorPosition();                                                                        // 11615
            var iterator = new TokenIterator(self.session, pos.row, pos.column);                                       // 11616
            var token = iterator.getCurrentToken();                                                                    // 11617
                                                                                                                       // 11618
            if (!token || !/\b(?:tag-open|tag-name)/.test(token.type)) {                                               // 11619
                session.removeMarker(session.$tagHighlight);                                                           // 11620
                session.$tagHighlight = null;                                                                          // 11621
                return;                                                                                                // 11622
            }                                                                                                          // 11623
                                                                                                                       // 11624
            if (token.type.indexOf("tag-open") != -1) {                                                                // 11625
                token = iterator.stepForward();                                                                        // 11626
                if (!token)                                                                                            // 11627
                    return;                                                                                            // 11628
            }                                                                                                          // 11629
                                                                                                                       // 11630
            var tag = token.value;                                                                                     // 11631
            var depth = 0;                                                                                             // 11632
            var prevToken = iterator.stepBackward();                                                                   // 11633
                                                                                                                       // 11634
            if (prevToken.value == '<'){                                                                               // 11635
                do {                                                                                                   // 11636
                    prevToken = token;                                                                                 // 11637
                    token = iterator.stepForward();                                                                    // 11638
                                                                                                                       // 11639
                    if (token && token.value === tag && token.type.indexOf('tag-name') !== -1) {                       // 11640
                        if (prevToken.value === '<'){                                                                  // 11641
                            depth++;                                                                                   // 11642
                        } else if (prevToken.value === '</'){                                                          // 11643
                            depth--;                                                                                   // 11644
                        }                                                                                              // 11645
                    }                                                                                                  // 11646
                                                                                                                       // 11647
                } while (token && depth >= 0);                                                                         // 11648
            } else {                                                                                                   // 11649
                do {                                                                                                   // 11650
                    token = prevToken;                                                                                 // 11651
                    prevToken = iterator.stepBackward();                                                               // 11652
                                                                                                                       // 11653
                    if (token && token.value === tag && token.type.indexOf('tag-name') !== -1) {                       // 11654
                        if (prevToken.value === '<') {                                                                 // 11655
                            depth++;                                                                                   // 11656
                        } else if (prevToken.value === '</') {                                                         // 11657
                            depth--;                                                                                   // 11658
                        }                                                                                              // 11659
                    }                                                                                                  // 11660
                } while (prevToken && depth <= 0);                                                                     // 11661
                iterator.stepForward();                                                                                // 11662
            }                                                                                                          // 11663
                                                                                                                       // 11664
            if (!token) {                                                                                              // 11665
                session.removeMarker(session.$tagHighlight);                                                           // 11666
                session.$tagHighlight = null;                                                                          // 11667
                return;                                                                                                // 11668
            }                                                                                                          // 11669
                                                                                                                       // 11670
            var row = iterator.getCurrentTokenRow();                                                                   // 11671
            var column = iterator.getCurrentTokenColumn();                                                             // 11672
            var range = new Range(row, column, row, column+token.value.length);                                        // 11673
            if (session.$tagHighlight && range.compareRange(session.$backMarkers[session.$tagHighlight].range)!==0) {  // 11674
                session.removeMarker(session.$tagHighlight);                                                           // 11675
                session.$tagHighlight = null;                                                                          // 11676
            }                                                                                                          // 11677
                                                                                                                       // 11678
            if (range && !session.$tagHighlight)                                                                       // 11679
                session.$tagHighlight = session.addMarker(range, "ace_bracket", "text");                               // 11680
        }, 50);                                                                                                        // 11681
    };                                                                                                                 // 11682
    this.focus = function() {                                                                                          // 11683
        var _self = this;                                                                                              // 11684
        setTimeout(function() {                                                                                        // 11685
            _self.textInput.focus();                                                                                   // 11686
        });                                                                                                            // 11687
        this.textInput.focus();                                                                                        // 11688
    };                                                                                                                 // 11689
    this.isFocused = function() {                                                                                      // 11690
        return this.textInput.isFocused();                                                                             // 11691
    };                                                                                                                 // 11692
    this.blur = function() {                                                                                           // 11693
        this.textInput.blur();                                                                                         // 11694
    };                                                                                                                 // 11695
    this.onFocus = function(e) {                                                                                       // 11696
        if (this.$isFocused)                                                                                           // 11697
            return;                                                                                                    // 11698
        this.$isFocused = true;                                                                                        // 11699
        this.renderer.showCursor();                                                                                    // 11700
        this.renderer.visualizeFocus();                                                                                // 11701
        this._emit("focus", e);                                                                                        // 11702
    };                                                                                                                 // 11703
    this.onBlur = function(e) {                                                                                        // 11704
        if (!this.$isFocused)                                                                                          // 11705
            return;                                                                                                    // 11706
        this.$isFocused = false;                                                                                       // 11707
        this.renderer.hideCursor();                                                                                    // 11708
        this.renderer.visualizeBlur();                                                                                 // 11709
        this._emit("blur", e);                                                                                         // 11710
    };                                                                                                                 // 11711
                                                                                                                       // 11712
    this.$cursorChange = function() {                                                                                  // 11713
        this.renderer.updateCursor();                                                                                  // 11714
    };                                                                                                                 // 11715
    this.onDocumentChange = function(delta) {                                                                          // 11716
        var wrap = this.session.$useWrapMode;                                                                          // 11717
        var lastRow = (delta.start.row == delta.end.row ? delta.end.row : Infinity);                                   // 11718
        this.renderer.updateLines(delta.start.row, lastRow, wrap);                                                     // 11719
                                                                                                                       // 11720
        this._signal("change", delta);                                                                                 // 11721
        this.$cursorChange();                                                                                          // 11722
        this.$updateHighlightActiveLine();                                                                             // 11723
    };                                                                                                                 // 11724
                                                                                                                       // 11725
    this.onTokenizerUpdate = function(e) {                                                                             // 11726
        var rows = e.data;                                                                                             // 11727
        this.renderer.updateLines(rows.first, rows.last);                                                              // 11728
    };                                                                                                                 // 11729
                                                                                                                       // 11730
                                                                                                                       // 11731
    this.onScrollTopChange = function() {                                                                              // 11732
        this.renderer.scrollToY(this.session.getScrollTop());                                                          // 11733
    };                                                                                                                 // 11734
                                                                                                                       // 11735
    this.onScrollLeftChange = function() {                                                                             // 11736
        this.renderer.scrollToX(this.session.getScrollLeft());                                                         // 11737
    };                                                                                                                 // 11738
    this.onCursorChange = function() {                                                                                 // 11739
        this.$cursorChange();                                                                                          // 11740
                                                                                                                       // 11741
        if (!this.$blockScrolling) {                                                                                   // 11742
            config.warn("Automatically scrolling cursor into view after selection change",                             // 11743
                "this will be disabled in the next version",                                                           // 11744
                "set editor.$blockScrolling = Infinity to disable this message"                                        // 11745
            );                                                                                                         // 11746
            this.renderer.scrollCursorIntoView();                                                                      // 11747
        }                                                                                                              // 11748
                                                                                                                       // 11749
        this.$highlightBrackets();                                                                                     // 11750
        this.$highlightTags();                                                                                         // 11751
        this.$updateHighlightActiveLine();                                                                             // 11752
        this._signal("changeSelection");                                                                               // 11753
    };                                                                                                                 // 11754
                                                                                                                       // 11755
    this.$updateHighlightActiveLine = function() {                                                                     // 11756
        var session = this.getSession();                                                                               // 11757
                                                                                                                       // 11758
        var highlight;                                                                                                 // 11759
        if (this.$highlightActiveLine) {                                                                               // 11760
            if ((this.$selectionStyle != "line" || !this.selection.isMultiLine()))                                     // 11761
                highlight = this.getCursorPosition();                                                                  // 11762
            if (this.renderer.$maxLines && this.session.getLength() === 1 && !(this.renderer.$minLines > 1))           // 11763
                highlight = false;                                                                                     // 11764
        }                                                                                                              // 11765
                                                                                                                       // 11766
        if (session.$highlightLineMarker && !highlight) {                                                              // 11767
            session.removeMarker(session.$highlightLineMarker.id);                                                     // 11768
            session.$highlightLineMarker = null;                                                                       // 11769
        } else if (!session.$highlightLineMarker && highlight) {                                                       // 11770
            var range = new Range(highlight.row, highlight.column, highlight.row, Infinity);                           // 11771
            range.id = session.addMarker(range, "ace_active-line", "screenLine");                                      // 11772
            session.$highlightLineMarker = range;                                                                      // 11773
        } else if (highlight) {                                                                                        // 11774
            session.$highlightLineMarker.start.row = highlight.row;                                                    // 11775
            session.$highlightLineMarker.end.row = highlight.row;                                                      // 11776
            session.$highlightLineMarker.start.column = highlight.column;                                              // 11777
            session._signal("changeBackMarker");                                                                       // 11778
        }                                                                                                              // 11779
    };                                                                                                                 // 11780
                                                                                                                       // 11781
    this.onSelectionChange = function(e) {                                                                             // 11782
        var session = this.session;                                                                                    // 11783
                                                                                                                       // 11784
        if (session.$selectionMarker) {                                                                                // 11785
            session.removeMarker(session.$selectionMarker);                                                            // 11786
        }                                                                                                              // 11787
        session.$selectionMarker = null;                                                                               // 11788
                                                                                                                       // 11789
        if (!this.selection.isEmpty()) {                                                                               // 11790
            var range = this.selection.getRange();                                                                     // 11791
            var style = this.getSelectionStyle();                                                                      // 11792
            session.$selectionMarker = session.addMarker(range, "ace_selection", style);                               // 11793
        } else {                                                                                                       // 11794
            this.$updateHighlightActiveLine();                                                                         // 11795
        }                                                                                                              // 11796
                                                                                                                       // 11797
        var re = this.$highlightSelectedWord && this.$getSelectionHighLightRegexp();                                   // 11798
        this.session.highlight(re);                                                                                    // 11799
                                                                                                                       // 11800
        this._signal("changeSelection");                                                                               // 11801
    };                                                                                                                 // 11802
                                                                                                                       // 11803
    this.$getSelectionHighLightRegexp = function() {                                                                   // 11804
        var session = this.session;                                                                                    // 11805
                                                                                                                       // 11806
        var selection = this.getSelectionRange();                                                                      // 11807
        if (selection.isEmpty() || selection.isMultiLine())                                                            // 11808
            return;                                                                                                    // 11809
                                                                                                                       // 11810
        var startOuter = selection.start.column - 1;                                                                   // 11811
        var endOuter = selection.end.column + 1;                                                                       // 11812
        var line = session.getLine(selection.start.row);                                                               // 11813
        var lineCols = line.length;                                                                                    // 11814
        var needle = line.substring(Math.max(startOuter, 0),                                                           // 11815
                                    Math.min(endOuter, lineCols));                                                     // 11816
        if ((startOuter >= 0 && /^[\w\d]/.test(needle)) ||                                                             // 11817
            (endOuter <= lineCols && /[\w\d]$/.test(needle)))                                                          // 11818
            return;                                                                                                    // 11819
                                                                                                                       // 11820
        needle = line.substring(selection.start.column, selection.end.column);                                         // 11821
        if (!/^[\w\d]+$/.test(needle))                                                                                 // 11822
            return;                                                                                                    // 11823
                                                                                                                       // 11824
        var re = this.$search.$assembleRegExp({                                                                        // 11825
            wholeWord: true,                                                                                           // 11826
            caseSensitive: true,                                                                                       // 11827
            needle: needle                                                                                             // 11828
        });                                                                                                            // 11829
                                                                                                                       // 11830
        return re;                                                                                                     // 11831
    };                                                                                                                 // 11832
                                                                                                                       // 11833
                                                                                                                       // 11834
    this.onChangeFrontMarker = function() {                                                                            // 11835
        this.renderer.updateFrontMarkers();                                                                            // 11836
    };                                                                                                                 // 11837
                                                                                                                       // 11838
    this.onChangeBackMarker = function() {                                                                             // 11839
        this.renderer.updateBackMarkers();                                                                             // 11840
    };                                                                                                                 // 11841
                                                                                                                       // 11842
                                                                                                                       // 11843
    this.onChangeBreakpoint = function() {                                                                             // 11844
        this.renderer.updateBreakpoints();                                                                             // 11845
    };                                                                                                                 // 11846
                                                                                                                       // 11847
    this.onChangeAnnotation = function() {                                                                             // 11848
        this.renderer.setAnnotations(this.session.getAnnotations());                                                   // 11849
    };                                                                                                                 // 11850
                                                                                                                       // 11851
                                                                                                                       // 11852
    this.onChangeMode = function(e) {                                                                                  // 11853
        this.renderer.updateText();                                                                                    // 11854
        this._emit("changeMode", e);                                                                                   // 11855
    };                                                                                                                 // 11856
                                                                                                                       // 11857
                                                                                                                       // 11858
    this.onChangeWrapLimit = function() {                                                                              // 11859
        this.renderer.updateFull();                                                                                    // 11860
    };                                                                                                                 // 11861
                                                                                                                       // 11862
    this.onChangeWrapMode = function() {                                                                               // 11863
        this.renderer.onResize(true);                                                                                  // 11864
    };                                                                                                                 // 11865
                                                                                                                       // 11866
                                                                                                                       // 11867
    this.onChangeFold = function() {                                                                                   // 11868
        this.$updateHighlightActiveLine();                                                                             // 11869
        this.renderer.updateFull();                                                                                    // 11870
    };                                                                                                                 // 11871
    this.getSelectedText = function() {                                                                                // 11872
        return this.session.getTextRange(this.getSelectionRange());                                                    // 11873
    };                                                                                                                 // 11874
    this.getCopyText = function() {                                                                                    // 11875
        var text = this.getSelectedText();                                                                             // 11876
        this._signal("copy", text);                                                                                    // 11877
        return text;                                                                                                   // 11878
    };                                                                                                                 // 11879
    this.onCopy = function() {                                                                                         // 11880
        this.commands.exec("copy", this);                                                                              // 11881
    };                                                                                                                 // 11882
    this.onCut = function() {                                                                                          // 11883
        this.commands.exec("cut", this);                                                                               // 11884
    };                                                                                                                 // 11885
    this.onPaste = function(text, event) {                                                                             // 11886
        var e = {text: text, event: event};                                                                            // 11887
        this.commands.exec("paste", this, e);                                                                          // 11888
    };                                                                                                                 // 11889
                                                                                                                       // 11890
    this.$handlePaste = function(e) {                                                                                  // 11891
        if (typeof e == "string")                                                                                      // 11892
            e = {text: e};                                                                                             // 11893
        this._signal("paste", e);                                                                                      // 11894
        var text = e.text;                                                                                             // 11895
        if (!this.inMultiSelectMode || this.inVirtualSelectionMode) {                                                  // 11896
            this.insert(text);                                                                                         // 11897
        } else {                                                                                                       // 11898
            var lines = text.split(/\r\n|\r|\n/);                                                                      // 11899
            var ranges = this.selection.rangeList.ranges;                                                              // 11900
                                                                                                                       // 11901
            if (lines.length > ranges.length || lines.length < 2 || !lines[1])                                         // 11902
                return this.commands.exec("insertstring", this, text);                                                 // 11903
                                                                                                                       // 11904
            for (var i = ranges.length; i--;) {                                                                        // 11905
                var range = ranges[i];                                                                                 // 11906
                if (!range.isEmpty())                                                                                  // 11907
                    this.session.remove(range);                                                                        // 11908
                                                                                                                       // 11909
                this.session.insert(range.start, lines[i]);                                                            // 11910
            }                                                                                                          // 11911
        }                                                                                                              // 11912
    };                                                                                                                 // 11913
                                                                                                                       // 11914
    this.execCommand = function(command, args) {                                                                       // 11915
        return this.commands.exec(command, this, args);                                                                // 11916
    };                                                                                                                 // 11917
    this.insert = function(text, pasted) {                                                                             // 11918
        var session = this.session;                                                                                    // 11919
        var mode = session.getMode();                                                                                  // 11920
        var cursor = this.getCursorPosition();                                                                         // 11921
                                                                                                                       // 11922
        if (this.getBehavioursEnabled() && !pasted) {                                                                  // 11923
            var transform = mode.transformAction(session.getState(cursor.row), 'insertion', this, session, text);      // 11924
            if (transform) {                                                                                           // 11925
                if (text !== transform.text) {                                                                         // 11926
                    this.session.mergeUndoDeltas = false;                                                              // 11927
                    this.$mergeNextCommand = false;                                                                    // 11928
                }                                                                                                      // 11929
                text = transform.text;                                                                                 // 11930
                                                                                                                       // 11931
            }                                                                                                          // 11932
        }                                                                                                              // 11933
                                                                                                                       // 11934
        if (text == "\t")                                                                                              // 11935
            text = this.session.getTabString();                                                                        // 11936
        if (!this.selection.isEmpty()) {                                                                               // 11937
            var range = this.getSelectionRange();                                                                      // 11938
            cursor = this.session.remove(range);                                                                       // 11939
            this.clearSelection();                                                                                     // 11940
        }                                                                                                              // 11941
        else if (this.session.getOverwrite()) {                                                                        // 11942
            var range = new Range.fromPoints(cursor, cursor);                                                          // 11943
            range.end.column += text.length;                                                                           // 11944
            this.session.remove(range);                                                                                // 11945
        }                                                                                                              // 11946
                                                                                                                       // 11947
        if (text == "\n" || text == "\r\n") {                                                                          // 11948
            var line = session.getLine(cursor.row);                                                                    // 11949
            if (cursor.column > line.search(/\S|$/)) {                                                                 // 11950
                var d = line.substr(cursor.column).search(/\S|$/);                                                     // 11951
                session.doc.removeInLine(cursor.row, cursor.column, cursor.column + d);                                // 11952
            }                                                                                                          // 11953
        }                                                                                                              // 11954
        this.clearSelection();                                                                                         // 11955
                                                                                                                       // 11956
        var start = cursor.column;                                                                                     // 11957
        var lineState = session.getState(cursor.row);                                                                  // 11958
        var line = session.getLine(cursor.row);                                                                        // 11959
        var shouldOutdent = mode.checkOutdent(lineState, line, text);                                                  // 11960
        var end = session.insert(cursor, text);                                                                        // 11961
                                                                                                                       // 11962
        if (transform && transform.selection) {                                                                        // 11963
            if (transform.selection.length == 2) { // Transform relative to the current column                         // 11964
                this.selection.setSelectionRange(                                                                      // 11965
                    new Range(cursor.row, start + transform.selection[0],                                              // 11966
                              cursor.row, start + transform.selection[1]));                                            // 11967
            } else { // Transform relative to the current row.                                                         // 11968
                this.selection.setSelectionRange(                                                                      // 11969
                    new Range(cursor.row + transform.selection[0],                                                     // 11970
                              transform.selection[1],                                                                  // 11971
                              cursor.row + transform.selection[2],                                                     // 11972
                              transform.selection[3]));                                                                // 11973
            }                                                                                                          // 11974
        }                                                                                                              // 11975
                                                                                                                       // 11976
        if (session.getDocument().isNewLine(text)) {                                                                   // 11977
            var lineIndent = mode.getNextLineIndent(lineState, line.slice(0, cursor.column), session.getTabString());  // 11978
                                                                                                                       // 11979
            session.insert({row: cursor.row+1, column: 0}, lineIndent);                                                // 11980
        }                                                                                                              // 11981
        if (shouldOutdent)                                                                                             // 11982
            mode.autoOutdent(lineState, session, cursor.row);                                                          // 11983
    };                                                                                                                 // 11984
                                                                                                                       // 11985
    this.onTextInput = function(text) {                                                                                // 11986
        this.keyBinding.onTextInput(text);                                                                             // 11987
    };                                                                                                                 // 11988
                                                                                                                       // 11989
    this.onCommandKey = function(e, hashId, keyCode) {                                                                 // 11990
        this.keyBinding.onCommandKey(e, hashId, keyCode);                                                              // 11991
    };                                                                                                                 // 11992
    this.setOverwrite = function(overwrite) {                                                                          // 11993
        this.session.setOverwrite(overwrite);                                                                          // 11994
    };                                                                                                                 // 11995
    this.getOverwrite = function() {                                                                                   // 11996
        return this.session.getOverwrite();                                                                            // 11997
    };                                                                                                                 // 11998
    this.toggleOverwrite = function() {                                                                                // 11999
        this.session.toggleOverwrite();                                                                                // 12000
    };                                                                                                                 // 12001
    this.setScrollSpeed = function(speed) {                                                                            // 12002
        this.setOption("scrollSpeed", speed);                                                                          // 12003
    };                                                                                                                 // 12004
    this.getScrollSpeed = function() {                                                                                 // 12005
        return this.getOption("scrollSpeed");                                                                          // 12006
    };                                                                                                                 // 12007
    this.setDragDelay = function(dragDelay) {                                                                          // 12008
        this.setOption("dragDelay", dragDelay);                                                                        // 12009
    };                                                                                                                 // 12010
    this.getDragDelay = function() {                                                                                   // 12011
        return this.getOption("dragDelay");                                                                            // 12012
    };                                                                                                                 // 12013
    this.setSelectionStyle = function(val) {                                                                           // 12014
        this.setOption("selectionStyle", val);                                                                         // 12015
    };                                                                                                                 // 12016
    this.getSelectionStyle = function() {                                                                              // 12017
        return this.getOption("selectionStyle");                                                                       // 12018
    };                                                                                                                 // 12019
    this.setHighlightActiveLine = function(shouldHighlight) {                                                          // 12020
        this.setOption("highlightActiveLine", shouldHighlight);                                                        // 12021
    };                                                                                                                 // 12022
    this.getHighlightActiveLine = function() {                                                                         // 12023
        return this.getOption("highlightActiveLine");                                                                  // 12024
    };                                                                                                                 // 12025
    this.setHighlightGutterLine = function(shouldHighlight) {                                                          // 12026
        this.setOption("highlightGutterLine", shouldHighlight);                                                        // 12027
    };                                                                                                                 // 12028
                                                                                                                       // 12029
    this.getHighlightGutterLine = function() {                                                                         // 12030
        return this.getOption("highlightGutterLine");                                                                  // 12031
    };                                                                                                                 // 12032
    this.setHighlightSelectedWord = function(shouldHighlight) {                                                        // 12033
        this.setOption("highlightSelectedWord", shouldHighlight);                                                      // 12034
    };                                                                                                                 // 12035
    this.getHighlightSelectedWord = function() {                                                                       // 12036
        return this.$highlightSelectedWord;                                                                            // 12037
    };                                                                                                                 // 12038
                                                                                                                       // 12039
    this.setAnimatedScroll = function(shouldAnimate){                                                                  // 12040
        this.renderer.setAnimatedScroll(shouldAnimate);                                                                // 12041
    };                                                                                                                 // 12042
                                                                                                                       // 12043
    this.getAnimatedScroll = function(){                                                                               // 12044
        return this.renderer.getAnimatedScroll();                                                                      // 12045
    };                                                                                                                 // 12046
    this.setShowInvisibles = function(showInvisibles) {                                                                // 12047
        this.renderer.setShowInvisibles(showInvisibles);                                                               // 12048
    };                                                                                                                 // 12049
    this.getShowInvisibles = function() {                                                                              // 12050
        return this.renderer.getShowInvisibles();                                                                      // 12051
    };                                                                                                                 // 12052
                                                                                                                       // 12053
    this.setDisplayIndentGuides = function(display) {                                                                  // 12054
        this.renderer.setDisplayIndentGuides(display);                                                                 // 12055
    };                                                                                                                 // 12056
                                                                                                                       // 12057
    this.getDisplayIndentGuides = function() {                                                                         // 12058
        return this.renderer.getDisplayIndentGuides();                                                                 // 12059
    };                                                                                                                 // 12060
    this.setShowPrintMargin = function(showPrintMargin) {                                                              // 12061
        this.renderer.setShowPrintMargin(showPrintMargin);                                                             // 12062
    };                                                                                                                 // 12063
    this.getShowPrintMargin = function() {                                                                             // 12064
        return this.renderer.getShowPrintMargin();                                                                     // 12065
    };                                                                                                                 // 12066
    this.setPrintMarginColumn = function(showPrintMargin) {                                                            // 12067
        this.renderer.setPrintMarginColumn(showPrintMargin);                                                           // 12068
    };                                                                                                                 // 12069
    this.getPrintMarginColumn = function() {                                                                           // 12070
        return this.renderer.getPrintMarginColumn();                                                                   // 12071
    };                                                                                                                 // 12072
    this.setReadOnly = function(readOnly) {                                                                            // 12073
        this.setOption("readOnly", readOnly);                                                                          // 12074
    };                                                                                                                 // 12075
    this.getReadOnly = function() {                                                                                    // 12076
        return this.getOption("readOnly");                                                                             // 12077
    };                                                                                                                 // 12078
    this.setBehavioursEnabled = function (enabled) {                                                                   // 12079
        this.setOption("behavioursEnabled", enabled);                                                                  // 12080
    };                                                                                                                 // 12081
    this.getBehavioursEnabled = function () {                                                                          // 12082
        return this.getOption("behavioursEnabled");                                                                    // 12083
    };                                                                                                                 // 12084
    this.setWrapBehavioursEnabled = function (enabled) {                                                               // 12085
        this.setOption("wrapBehavioursEnabled", enabled);                                                              // 12086
    };                                                                                                                 // 12087
    this.getWrapBehavioursEnabled = function () {                                                                      // 12088
        return this.getOption("wrapBehavioursEnabled");                                                                // 12089
    };                                                                                                                 // 12090
    this.setShowFoldWidgets = function(show) {                                                                         // 12091
        this.setOption("showFoldWidgets", show);                                                                       // 12092
                                                                                                                       // 12093
    };                                                                                                                 // 12094
    this.getShowFoldWidgets = function() {                                                                             // 12095
        return this.getOption("showFoldWidgets");                                                                      // 12096
    };                                                                                                                 // 12097
                                                                                                                       // 12098
    this.setFadeFoldWidgets = function(fade) {                                                                         // 12099
        this.setOption("fadeFoldWidgets", fade);                                                                       // 12100
    };                                                                                                                 // 12101
                                                                                                                       // 12102
    this.getFadeFoldWidgets = function() {                                                                             // 12103
        return this.getOption("fadeFoldWidgets");                                                                      // 12104
    };                                                                                                                 // 12105
    this.remove = function(dir) {                                                                                      // 12106
        if (this.selection.isEmpty()){                                                                                 // 12107
            if (dir == "left")                                                                                         // 12108
                this.selection.selectLeft();                                                                           // 12109
            else                                                                                                       // 12110
                this.selection.selectRight();                                                                          // 12111
        }                                                                                                              // 12112
                                                                                                                       // 12113
        var range = this.getSelectionRange();                                                                          // 12114
        if (this.getBehavioursEnabled()) {                                                                             // 12115
            var session = this.session;                                                                                // 12116
            var state = session.getState(range.start.row);                                                             // 12117
            var new_range = session.getMode().transformAction(state, 'deletion', this, session, range);                // 12118
                                                                                                                       // 12119
            if (range.end.column === 0) {                                                                              // 12120
                var text = session.getTextRange(range);                                                                // 12121
                if (text[text.length - 1] == "\n") {                                                                   // 12122
                    var line = session.getLine(range.end.row);                                                         // 12123
                    if (/^\s+$/.test(line)) {                                                                          // 12124
                        range.end.column = line.length;                                                                // 12125
                    }                                                                                                  // 12126
                }                                                                                                      // 12127
            }                                                                                                          // 12128
            if (new_range)                                                                                             // 12129
                range = new_range;                                                                                     // 12130
        }                                                                                                              // 12131
                                                                                                                       // 12132
        this.session.remove(range);                                                                                    // 12133
        this.clearSelection();                                                                                         // 12134
    };                                                                                                                 // 12135
    this.removeWordRight = function() {                                                                                // 12136
        if (this.selection.isEmpty())                                                                                  // 12137
            this.selection.selectWordRight();                                                                          // 12138
                                                                                                                       // 12139
        this.session.remove(this.getSelectionRange());                                                                 // 12140
        this.clearSelection();                                                                                         // 12141
    };                                                                                                                 // 12142
    this.removeWordLeft = function() {                                                                                 // 12143
        if (this.selection.isEmpty())                                                                                  // 12144
            this.selection.selectWordLeft();                                                                           // 12145
                                                                                                                       // 12146
        this.session.remove(this.getSelectionRange());                                                                 // 12147
        this.clearSelection();                                                                                         // 12148
    };                                                                                                                 // 12149
    this.removeToLineStart = function() {                                                                              // 12150
        if (this.selection.isEmpty())                                                                                  // 12151
            this.selection.selectLineStart();                                                                          // 12152
                                                                                                                       // 12153
        this.session.remove(this.getSelectionRange());                                                                 // 12154
        this.clearSelection();                                                                                         // 12155
    };                                                                                                                 // 12156
    this.removeToLineEnd = function() {                                                                                // 12157
        if (this.selection.isEmpty())                                                                                  // 12158
            this.selection.selectLineEnd();                                                                            // 12159
                                                                                                                       // 12160
        var range = this.getSelectionRange();                                                                          // 12161
        if (range.start.column == range.end.column && range.start.row == range.end.row) {                              // 12162
            range.end.column = 0;                                                                                      // 12163
            range.end.row++;                                                                                           // 12164
        }                                                                                                              // 12165
                                                                                                                       // 12166
        this.session.remove(range);                                                                                    // 12167
        this.clearSelection();                                                                                         // 12168
    };                                                                                                                 // 12169
    this.splitLine = function() {                                                                                      // 12170
        if (!this.selection.isEmpty()) {                                                                               // 12171
            this.session.remove(this.getSelectionRange());                                                             // 12172
            this.clearSelection();                                                                                     // 12173
        }                                                                                                              // 12174
                                                                                                                       // 12175
        var cursor = this.getCursorPosition();                                                                         // 12176
        this.insert("\n");                                                                                             // 12177
        this.moveCursorToPosition(cursor);                                                                             // 12178
    };                                                                                                                 // 12179
    this.transposeLetters = function() {                                                                               // 12180
        if (!this.selection.isEmpty()) {                                                                               // 12181
            return;                                                                                                    // 12182
        }                                                                                                              // 12183
                                                                                                                       // 12184
        var cursor = this.getCursorPosition();                                                                         // 12185
        var column = cursor.column;                                                                                    // 12186
        if (column === 0)                                                                                              // 12187
            return;                                                                                                    // 12188
                                                                                                                       // 12189
        var line = this.session.getLine(cursor.row);                                                                   // 12190
        var swap, range;                                                                                               // 12191
        if (column < line.length) {                                                                                    // 12192
            swap = line.charAt(column) + line.charAt(column-1);                                                        // 12193
            range = new Range(cursor.row, column-1, cursor.row, column+1);                                             // 12194
        }                                                                                                              // 12195
        else {                                                                                                         // 12196
            swap = line.charAt(column-1) + line.charAt(column-2);                                                      // 12197
            range = new Range(cursor.row, column-2, cursor.row, column);                                               // 12198
        }                                                                                                              // 12199
        this.session.replace(range, swap);                                                                             // 12200
    };                                                                                                                 // 12201
    this.toLowerCase = function() {                                                                                    // 12202
        var originalRange = this.getSelectionRange();                                                                  // 12203
        if (this.selection.isEmpty()) {                                                                                // 12204
            this.selection.selectWord();                                                                               // 12205
        }                                                                                                              // 12206
                                                                                                                       // 12207
        var range = this.getSelectionRange();                                                                          // 12208
        var text = this.session.getTextRange(range);                                                                   // 12209
        this.session.replace(range, text.toLowerCase());                                                               // 12210
        this.selection.setSelectionRange(originalRange);                                                               // 12211
    };                                                                                                                 // 12212
    this.toUpperCase = function() {                                                                                    // 12213
        var originalRange = this.getSelectionRange();                                                                  // 12214
        if (this.selection.isEmpty()) {                                                                                // 12215
            this.selection.selectWord();                                                                               // 12216
        }                                                                                                              // 12217
                                                                                                                       // 12218
        var range = this.getSelectionRange();                                                                          // 12219
        var text = this.session.getTextRange(range);                                                                   // 12220
        this.session.replace(range, text.toUpperCase());                                                               // 12221
        this.selection.setSelectionRange(originalRange);                                                               // 12222
    };                                                                                                                 // 12223
    this.indent = function() {                                                                                         // 12224
        var session = this.session;                                                                                    // 12225
        var range = this.getSelectionRange();                                                                          // 12226
                                                                                                                       // 12227
        if (range.start.row < range.end.row) {                                                                         // 12228
            var rows = this.$getSelectedRows();                                                                        // 12229
            session.indentRows(rows.first, rows.last, "\t");                                                           // 12230
            return;                                                                                                    // 12231
        } else if (range.start.column < range.end.column) {                                                            // 12232
            var text = session.getTextRange(range);                                                                    // 12233
            if (!/^\s+$/.test(text)) {                                                                                 // 12234
                var rows = this.$getSelectedRows();                                                                    // 12235
                session.indentRows(rows.first, rows.last, "\t");                                                       // 12236
                return;                                                                                                // 12237
            }                                                                                                          // 12238
        }                                                                                                              // 12239
                                                                                                                       // 12240
        var line = session.getLine(range.start.row);                                                                   // 12241
        var position = range.start;                                                                                    // 12242
        var size = session.getTabSize();                                                                               // 12243
        var column = session.documentToScreenColumn(position.row, position.column);                                    // 12244
                                                                                                                       // 12245
        if (this.session.getUseSoftTabs()) {                                                                           // 12246
            var count = (size - column % size);                                                                        // 12247
            var indentString = lang.stringRepeat(" ", count);                                                          // 12248
        } else {                                                                                                       // 12249
            var count = column % size;                                                                                 // 12250
            while (line[range.start.column] == " " && count) {                                                         // 12251
                range.start.column--;                                                                                  // 12252
                count--;                                                                                               // 12253
            }                                                                                                          // 12254
            this.selection.setSelectionRange(range);                                                                   // 12255
            indentString = "\t";                                                                                       // 12256
        }                                                                                                              // 12257
        return this.insert(indentString);                                                                              // 12258
    };                                                                                                                 // 12259
    this.blockIndent = function() {                                                                                    // 12260
        var rows = this.$getSelectedRows();                                                                            // 12261
        this.session.indentRows(rows.first, rows.last, "\t");                                                          // 12262
    };                                                                                                                 // 12263
    this.blockOutdent = function() {                                                                                   // 12264
        var selection = this.session.getSelection();                                                                   // 12265
        this.session.outdentRows(selection.getRange());                                                                // 12266
    };                                                                                                                 // 12267
    this.sortLines = function() {                                                                                      // 12268
        var rows = this.$getSelectedRows();                                                                            // 12269
        var session = this.session;                                                                                    // 12270
                                                                                                                       // 12271
        var lines = [];                                                                                                // 12272
        for (i = rows.first; i <= rows.last; i++)                                                                      // 12273
            lines.push(session.getLine(i));                                                                            // 12274
                                                                                                                       // 12275
        lines.sort(function(a, b) {                                                                                    // 12276
            if (a.toLowerCase() < b.toLowerCase()) return -1;                                                          // 12277
            if (a.toLowerCase() > b.toLowerCase()) return 1;                                                           // 12278
            return 0;                                                                                                  // 12279
        });                                                                                                            // 12280
                                                                                                                       // 12281
        var deleteRange = new Range(0, 0, 0, 0);                                                                       // 12282
        for (var i = rows.first; i <= rows.last; i++) {                                                                // 12283
            var line = session.getLine(i);                                                                             // 12284
            deleteRange.start.row = i;                                                                                 // 12285
            deleteRange.end.row = i;                                                                                   // 12286
            deleteRange.end.column = line.length;                                                                      // 12287
            session.replace(deleteRange, lines[i-rows.first]);                                                         // 12288
        }                                                                                                              // 12289
    };                                                                                                                 // 12290
    this.toggleCommentLines = function() {                                                                             // 12291
        var state = this.session.getState(this.getCursorPosition().row);                                               // 12292
        var rows = this.$getSelectedRows();                                                                            // 12293
        this.session.getMode().toggleCommentLines(state, this.session, rows.first, rows.last);                         // 12294
    };                                                                                                                 // 12295
                                                                                                                       // 12296
    this.toggleBlockComment = function() {                                                                             // 12297
        var cursor = this.getCursorPosition();                                                                         // 12298
        var state = this.session.getState(cursor.row);                                                                 // 12299
        var range = this.getSelectionRange();                                                                          // 12300
        this.session.getMode().toggleBlockComment(state, this.session, range, cursor);                                 // 12301
    };                                                                                                                 // 12302
    this.getNumberAt = function(row, column) {                                                                         // 12303
        var _numberRx = /[\-]?[0-9]+(?:\.[0-9]+)?/g;                                                                   // 12304
        _numberRx.lastIndex = 0;                                                                                       // 12305
                                                                                                                       // 12306
        var s = this.session.getLine(row);                                                                             // 12307
        while (_numberRx.lastIndex < column) {                                                                         // 12308
            var m = _numberRx.exec(s);                                                                                 // 12309
            if(m.index <= column && m.index+m[0].length >= column){                                                    // 12310
                var number = {                                                                                         // 12311
                    value: m[0],                                                                                       // 12312
                    start: m.index,                                                                                    // 12313
                    end: m.index+m[0].length                                                                           // 12314
                };                                                                                                     // 12315
                return number;                                                                                         // 12316
            }                                                                                                          // 12317
        }                                                                                                              // 12318
        return null;                                                                                                   // 12319
    };                                                                                                                 // 12320
    this.modifyNumber = function(amount) {                                                                             // 12321
        var row = this.selection.getCursor().row;                                                                      // 12322
        var column = this.selection.getCursor().column;                                                                // 12323
        var charRange = new Range(row, column-1, row, column);                                                         // 12324
                                                                                                                       // 12325
        var c = this.session.getTextRange(charRange);                                                                  // 12326
        if (!isNaN(parseFloat(c)) && isFinite(c)) {                                                                    // 12327
            var nr = this.getNumberAt(row, column);                                                                    // 12328
            if (nr) {                                                                                                  // 12329
                var fp = nr.value.indexOf(".") >= 0 ? nr.start + nr.value.indexOf(".") + 1 : nr.end;                   // 12330
                var decimals = nr.start + nr.value.length - fp;                                                        // 12331
                                                                                                                       // 12332
                var t = parseFloat(nr.value);                                                                          // 12333
                t *= Math.pow(10, decimals);                                                                           // 12334
                                                                                                                       // 12335
                                                                                                                       // 12336
                if(fp !== nr.end && column < fp){                                                                      // 12337
                    amount *= Math.pow(10, nr.end - column - 1);                                                       // 12338
                } else {                                                                                               // 12339
                    amount *= Math.pow(10, nr.end - column);                                                           // 12340
                }                                                                                                      // 12341
                                                                                                                       // 12342
                t += amount;                                                                                           // 12343
                t /= Math.pow(10, decimals);                                                                           // 12344
                var nnr = t.toFixed(decimals);                                                                         // 12345
                var replaceRange = new Range(row, nr.start, row, nr.end);                                              // 12346
                this.session.replace(replaceRange, nnr);                                                               // 12347
                this.moveCursorTo(row, Math.max(nr.start +1, column + nnr.length - nr.value.length));                  // 12348
                                                                                                                       // 12349
            }                                                                                                          // 12350
        }                                                                                                              // 12351
    };                                                                                                                 // 12352
    this.removeLines = function() {                                                                                    // 12353
        var rows = this.$getSelectedRows();                                                                            // 12354
        this.session.removeFullLines(rows.first, rows.last);                                                           // 12355
        this.clearSelection();                                                                                         // 12356
    };                                                                                                                 // 12357
                                                                                                                       // 12358
    this.duplicateSelection = function() {                                                                             // 12359
        var sel = this.selection;                                                                                      // 12360
        var doc = this.session;                                                                                        // 12361
        var range = sel.getRange();                                                                                    // 12362
        var reverse = sel.isBackwards();                                                                               // 12363
        if (range.isEmpty()) {                                                                                         // 12364
            var row = range.start.row;                                                                                 // 12365
            doc.duplicateLines(row, row);                                                                              // 12366
        } else {                                                                                                       // 12367
            var point = reverse ? range.start : range.end;                                                             // 12368
            var endPoint = doc.insert(point, doc.getTextRange(range), false);                                          // 12369
            range.start = point;                                                                                       // 12370
            range.end = endPoint;                                                                                      // 12371
                                                                                                                       // 12372
            sel.setSelectionRange(range, reverse);                                                                     // 12373
        }                                                                                                              // 12374
    };                                                                                                                 // 12375
    this.moveLinesDown = function() {                                                                                  // 12376
        this.$moveLines(1, false);                                                                                     // 12377
    };                                                                                                                 // 12378
    this.moveLinesUp = function() {                                                                                    // 12379
        this.$moveLines(-1, false);                                                                                    // 12380
    };                                                                                                                 // 12381
    this.moveText = function(range, toPosition, copy) {                                                                // 12382
        return this.session.moveText(range, toPosition, copy);                                                         // 12383
    };                                                                                                                 // 12384
    this.copyLinesUp = function() {                                                                                    // 12385
        this.$moveLines(-1, true);                                                                                     // 12386
    };                                                                                                                 // 12387
    this.copyLinesDown = function() {                                                                                  // 12388
        this.$moveLines(1, true);                                                                                      // 12389
    };                                                                                                                 // 12390
    this.$moveLines = function(dir, copy) {                                                                            // 12391
        var rows, moved;                                                                                               // 12392
        var selection = this.selection;                                                                                // 12393
        if (!selection.inMultiSelectMode || this.inVirtualSelectionMode) {                                             // 12394
            var range = selection.toOrientedRange();                                                                   // 12395
            rows = this.$getSelectedRows(range);                                                                       // 12396
            moved = this.session.$moveLines(rows.first, rows.last, copy ? 0 : dir);                                    // 12397
            if (copy && dir == -1) moved = 0;                                                                          // 12398
            range.moveBy(moved, 0);                                                                                    // 12399
            selection.fromOrientedRange(range);                                                                        // 12400
        } else {                                                                                                       // 12401
            var ranges = selection.rangeList.ranges;                                                                   // 12402
            selection.rangeList.detach(this.session);                                                                  // 12403
            this.inVirtualSelectionMode = true;                                                                        // 12404
                                                                                                                       // 12405
            var diff = 0;                                                                                              // 12406
            var totalDiff = 0;                                                                                         // 12407
            var l = ranges.length;                                                                                     // 12408
            for (var i = 0; i < l; i++) {                                                                              // 12409
                var rangeIndex = i;                                                                                    // 12410
                ranges[i].moveBy(diff, 0);                                                                             // 12411
                rows = this.$getSelectedRows(ranges[i]);                                                               // 12412
                var first = rows.first;                                                                                // 12413
                var last = rows.last;                                                                                  // 12414
                while (++i < l) {                                                                                      // 12415
                    if (totalDiff) ranges[i].moveBy(totalDiff, 0);                                                     // 12416
                    var subRows = this.$getSelectedRows(ranges[i]);                                                    // 12417
                    if (copy && subRows.first != last)                                                                 // 12418
                        break;                                                                                         // 12419
                    else if (!copy && subRows.first > last + 1)                                                        // 12420
                        break;                                                                                         // 12421
                    last = subRows.last;                                                                               // 12422
                }                                                                                                      // 12423
                i--;                                                                                                   // 12424
                diff = this.session.$moveLines(first, last, copy ? 0 : dir);                                           // 12425
                if (copy && dir == -1) rangeIndex = i + 1;                                                             // 12426
                while (rangeIndex <= i) {                                                                              // 12427
                    ranges[rangeIndex].moveBy(diff, 0);                                                                // 12428
                    rangeIndex++;                                                                                      // 12429
                }                                                                                                      // 12430
                if (!copy) diff = 0;                                                                                   // 12431
                totalDiff += diff;                                                                                     // 12432
            }                                                                                                          // 12433
                                                                                                                       // 12434
            selection.fromOrientedRange(selection.ranges[0]);                                                          // 12435
            selection.rangeList.attach(this.session);                                                                  // 12436
            this.inVirtualSelectionMode = false;                                                                       // 12437
        }                                                                                                              // 12438
    };                                                                                                                 // 12439
    this.$getSelectedRows = function(range) {                                                                          // 12440
        range = (range || this.getSelectionRange()).collapseRows();                                                    // 12441
                                                                                                                       // 12442
        return {                                                                                                       // 12443
            first: this.session.getRowFoldStart(range.start.row),                                                      // 12444
            last: this.session.getRowFoldEnd(range.end.row)                                                            // 12445
        };                                                                                                             // 12446
    };                                                                                                                 // 12447
                                                                                                                       // 12448
    this.onCompositionStart = function(text) {                                                                         // 12449
        this.renderer.showComposition(this.getCursorPosition());                                                       // 12450
    };                                                                                                                 // 12451
                                                                                                                       // 12452
    this.onCompositionUpdate = function(text) {                                                                        // 12453
        this.renderer.setCompositionText(text);                                                                        // 12454
    };                                                                                                                 // 12455
                                                                                                                       // 12456
    this.onCompositionEnd = function() {                                                                               // 12457
        this.renderer.hideComposition();                                                                               // 12458
    };                                                                                                                 // 12459
    this.getFirstVisibleRow = function() {                                                                             // 12460
        return this.renderer.getFirstVisibleRow();                                                                     // 12461
    };                                                                                                                 // 12462
    this.getLastVisibleRow = function() {                                                                              // 12463
        return this.renderer.getLastVisibleRow();                                                                      // 12464
    };                                                                                                                 // 12465
    this.isRowVisible = function(row) {                                                                                // 12466
        return (row >= this.getFirstVisibleRow() && row <= this.getLastVisibleRow());                                  // 12467
    };                                                                                                                 // 12468
    this.isRowFullyVisible = function(row) {                                                                           // 12469
        return (row >= this.renderer.getFirstFullyVisibleRow() && row <= this.renderer.getLastFullyVisibleRow());      // 12470
    };                                                                                                                 // 12471
    this.$getVisibleRowCount = function() {                                                                            // 12472
        return this.renderer.getScrollBottomRow() - this.renderer.getScrollTopRow() + 1;                               // 12473
    };                                                                                                                 // 12474
                                                                                                                       // 12475
    this.$moveByPage = function(dir, select) {                                                                         // 12476
        var renderer = this.renderer;                                                                                  // 12477
        var config = this.renderer.layerConfig;                                                                        // 12478
        var rows = dir * Math.floor(config.height / config.lineHeight);                                                // 12479
                                                                                                                       // 12480
        this.$blockScrolling++;                                                                                        // 12481
        if (select === true) {                                                                                         // 12482
            this.selection.$moveSelection(function(){                                                                  // 12483
                this.moveCursorBy(rows, 0);                                                                            // 12484
            });                                                                                                        // 12485
        } else if (select === false) {                                                                                 // 12486
            this.selection.moveCursorBy(rows, 0);                                                                      // 12487
            this.selection.clearSelection();                                                                           // 12488
        }                                                                                                              // 12489
        this.$blockScrolling--;                                                                                        // 12490
                                                                                                                       // 12491
        var scrollTop = renderer.scrollTop;                                                                            // 12492
                                                                                                                       // 12493
        renderer.scrollBy(0, rows * config.lineHeight);                                                                // 12494
        if (select != null)                                                                                            // 12495
            renderer.scrollCursorIntoView(null, 0.5);                                                                  // 12496
                                                                                                                       // 12497
        renderer.animateScrolling(scrollTop);                                                                          // 12498
    };                                                                                                                 // 12499
    this.selectPageDown = function() {                                                                                 // 12500
        this.$moveByPage(1, true);                                                                                     // 12501
    };                                                                                                                 // 12502
    this.selectPageUp = function() {                                                                                   // 12503
        this.$moveByPage(-1, true);                                                                                    // 12504
    };                                                                                                                 // 12505
    this.gotoPageDown = function() {                                                                                   // 12506
       this.$moveByPage(1, false);                                                                                     // 12507
    };                                                                                                                 // 12508
    this.gotoPageUp = function() {                                                                                     // 12509
        this.$moveByPage(-1, false);                                                                                   // 12510
    };                                                                                                                 // 12511
    this.scrollPageDown = function() {                                                                                 // 12512
        this.$moveByPage(1);                                                                                           // 12513
    };                                                                                                                 // 12514
    this.scrollPageUp = function() {                                                                                   // 12515
        this.$moveByPage(-1);                                                                                          // 12516
    };                                                                                                                 // 12517
    this.scrollToRow = function(row) {                                                                                 // 12518
        this.renderer.scrollToRow(row);                                                                                // 12519
    };                                                                                                                 // 12520
    this.scrollToLine = function(line, center, animate, callback) {                                                    // 12521
        this.renderer.scrollToLine(line, center, animate, callback);                                                   // 12522
    };                                                                                                                 // 12523
    this.centerSelection = function() {                                                                                // 12524
        var range = this.getSelectionRange();                                                                          // 12525
        var pos = {                                                                                                    // 12526
            row: Math.floor(range.start.row + (range.end.row - range.start.row) / 2),                                  // 12527
            column: Math.floor(range.start.column + (range.end.column - range.start.column) / 2)                       // 12528
        };                                                                                                             // 12529
        this.renderer.alignCursor(pos, 0.5);                                                                           // 12530
    };                                                                                                                 // 12531
    this.getCursorPosition = function() {                                                                              // 12532
        return this.selection.getCursor();                                                                             // 12533
    };                                                                                                                 // 12534
    this.getCursorPositionScreen = function() {                                                                        // 12535
        return this.session.documentToScreenPosition(this.getCursorPosition());                                        // 12536
    };                                                                                                                 // 12537
    this.getSelectionRange = function() {                                                                              // 12538
        return this.selection.getRange();                                                                              // 12539
    };                                                                                                                 // 12540
    this.selectAll = function() {                                                                                      // 12541
        this.$blockScrolling += 1;                                                                                     // 12542
        this.selection.selectAll();                                                                                    // 12543
        this.$blockScrolling -= 1;                                                                                     // 12544
    };                                                                                                                 // 12545
    this.clearSelection = function() {                                                                                 // 12546
        this.selection.clearSelection();                                                                               // 12547
    };                                                                                                                 // 12548
    this.moveCursorTo = function(row, column) {                                                                        // 12549
        this.selection.moveCursorTo(row, column);                                                                      // 12550
    };                                                                                                                 // 12551
    this.moveCursorToPosition = function(pos) {                                                                        // 12552
        this.selection.moveCursorToPosition(pos);                                                                      // 12553
    };                                                                                                                 // 12554
    this.jumpToMatching = function(select, expand) {                                                                   // 12555
        var cursor = this.getCursorPosition();                                                                         // 12556
        var iterator = new TokenIterator(this.session, cursor.row, cursor.column);                                     // 12557
        var prevToken = iterator.getCurrentToken();                                                                    // 12558
        var token = prevToken || iterator.stepForward();                                                               // 12559
                                                                                                                       // 12560
        if (!token) return;                                                                                            // 12561
        var matchType;                                                                                                 // 12562
        var found = false;                                                                                             // 12563
        var depth = {};                                                                                                // 12564
        var i = cursor.column - token.start;                                                                           // 12565
        var bracketType;                                                                                               // 12566
        var brackets = {                                                                                               // 12567
            ")": "(",                                                                                                  // 12568
            "(": "(",                                                                                                  // 12569
            "]": "[",                                                                                                  // 12570
            "[": "[",                                                                                                  // 12571
            "{": "{",                                                                                                  // 12572
            "}": "{"                                                                                                   // 12573
        };                                                                                                             // 12574
                                                                                                                       // 12575
        do {                                                                                                           // 12576
            if (token.value.match(/[{}()\[\]]/g)) {                                                                    // 12577
                for (; i < token.value.length && !found; i++) {                                                        // 12578
                    if (!brackets[token.value[i]]) {                                                                   // 12579
                        continue;                                                                                      // 12580
                    }                                                                                                  // 12581
                                                                                                                       // 12582
                    bracketType = brackets[token.value[i]] + '.' + token.type.replace("rparen", "lparen");             // 12583
                                                                                                                       // 12584
                    if (isNaN(depth[bracketType])) {                                                                   // 12585
                        depth[bracketType] = 0;                                                                        // 12586
                    }                                                                                                  // 12587
                                                                                                                       // 12588
                    switch (token.value[i]) {                                                                          // 12589
                        case '(':                                                                                      // 12590
                        case '[':                                                                                      // 12591
                        case '{':                                                                                      // 12592
                            depth[bracketType]++;                                                                      // 12593
                            break;                                                                                     // 12594
                        case ')':                                                                                      // 12595
                        case ']':                                                                                      // 12596
                        case '}':                                                                                      // 12597
                            depth[bracketType]--;                                                                      // 12598
                                                                                                                       // 12599
                            if (depth[bracketType] === -1) {                                                           // 12600
                                matchType = 'bracket';                                                                 // 12601
                                found = true;                                                                          // 12602
                            }                                                                                          // 12603
                        break;                                                                                         // 12604
                    }                                                                                                  // 12605
                }                                                                                                      // 12606
            }                                                                                                          // 12607
            else if (token && token.type.indexOf('tag-name') !== -1) {                                                 // 12608
                if (isNaN(depth[token.value])) {                                                                       // 12609
                    depth[token.value] = 0;                                                                            // 12610
                }                                                                                                      // 12611
                                                                                                                       // 12612
                if (prevToken.value === '<') {                                                                         // 12613
                    depth[token.value]++;                                                                              // 12614
                }                                                                                                      // 12615
                else if (prevToken.value === '</') {                                                                   // 12616
                    depth[token.value]--;                                                                              // 12617
                }                                                                                                      // 12618
                                                                                                                       // 12619
                if (depth[token.value] === -1) {                                                                       // 12620
                    matchType = 'tag';                                                                                 // 12621
                    found = true;                                                                                      // 12622
                }                                                                                                      // 12623
            }                                                                                                          // 12624
                                                                                                                       // 12625
            if (!found) {                                                                                              // 12626
                prevToken = token;                                                                                     // 12627
                token = iterator.stepForward();                                                                        // 12628
                i = 0;                                                                                                 // 12629
            }                                                                                                          // 12630
        } while (token && !found);                                                                                     // 12631
        if (!matchType)                                                                                                // 12632
            return;                                                                                                    // 12633
                                                                                                                       // 12634
        var range, pos;                                                                                                // 12635
        if (matchType === 'bracket') {                                                                                 // 12636
            range = this.session.getBracketRange(cursor);                                                              // 12637
            if (!range) {                                                                                              // 12638
                range = new Range(                                                                                     // 12639
                    iterator.getCurrentTokenRow(),                                                                     // 12640
                    iterator.getCurrentTokenColumn() + i - 1,                                                          // 12641
                    iterator.getCurrentTokenRow(),                                                                     // 12642
                    iterator.getCurrentTokenColumn() + i - 1                                                           // 12643
                );                                                                                                     // 12644
                pos = range.start;                                                                                     // 12645
                if (expand || pos.row === cursor.row && Math.abs(pos.column - cursor.column) < 2)                      // 12646
                    range = this.session.getBracketRange(pos);                                                         // 12647
            }                                                                                                          // 12648
        }                                                                                                              // 12649
        else if (matchType === 'tag') {                                                                                // 12650
            if (token && token.type.indexOf('tag-name') !== -1)                                                        // 12651
                var tag = token.value;                                                                                 // 12652
            else                                                                                                       // 12653
                return;                                                                                                // 12654
                                                                                                                       // 12655
            range = new Range(                                                                                         // 12656
                iterator.getCurrentTokenRow(),                                                                         // 12657
                iterator.getCurrentTokenColumn() - 2,                                                                  // 12658
                iterator.getCurrentTokenRow(),                                                                         // 12659
                iterator.getCurrentTokenColumn() - 2                                                                   // 12660
            );                                                                                                         // 12661
            if (range.compare(cursor.row, cursor.column) === 0) {                                                      // 12662
                found = false;                                                                                         // 12663
                do {                                                                                                   // 12664
                    token = prevToken;                                                                                 // 12665
                    prevToken = iterator.stepBackward();                                                               // 12666
                                                                                                                       // 12667
                    if (prevToken) {                                                                                   // 12668
                        if (prevToken.type.indexOf('tag-close') !== -1) {                                              // 12669
                            range.setEnd(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1);         // 12670
                        }                                                                                              // 12671
                                                                                                                       // 12672
                        if (token.value === tag && token.type.indexOf('tag-name') !== -1) {                            // 12673
                            if (prevToken.value === '<') {                                                             // 12674
                                depth[tag]++;                                                                          // 12675
                            }                                                                                          // 12676
                            else if (prevToken.value === '</') {                                                       // 12677
                                depth[tag]--;                                                                          // 12678
                            }                                                                                          // 12679
                                                                                                                       // 12680
                            if (depth[tag] === 0)                                                                      // 12681
                                found = true;                                                                          // 12682
                        }                                                                                              // 12683
                    }                                                                                                  // 12684
                } while (prevToken && !found);                                                                         // 12685
            }                                                                                                          // 12686
            if (token && token.type.indexOf('tag-name')) {                                                             // 12687
                pos = range.start;                                                                                     // 12688
                if (pos.row == cursor.row && Math.abs(pos.column - cursor.column) < 2)                                 // 12689
                    pos = range.end;                                                                                   // 12690
            }                                                                                                          // 12691
        }                                                                                                              // 12692
                                                                                                                       // 12693
        pos = range && range.cursor || pos;                                                                            // 12694
        if (pos) {                                                                                                     // 12695
            if (select) {                                                                                              // 12696
                if (range && expand) {                                                                                 // 12697
                    this.selection.setRange(range);                                                                    // 12698
                } else if (range && range.isEqual(this.getSelectionRange())) {                                         // 12699
                    this.clearSelection();                                                                             // 12700
                } else {                                                                                               // 12701
                    this.selection.selectTo(pos.row, pos.column);                                                      // 12702
                }                                                                                                      // 12703
            } else {                                                                                                   // 12704
                this.selection.moveTo(pos.row, pos.column);                                                            // 12705
            }                                                                                                          // 12706
        }                                                                                                              // 12707
    };                                                                                                                 // 12708
    this.gotoLine = function(lineNumber, column, animate) {                                                            // 12709
        this.selection.clearSelection();                                                                               // 12710
        this.session.unfold({row: lineNumber - 1, column: column || 0});                                               // 12711
                                                                                                                       // 12712
        this.$blockScrolling += 1;                                                                                     // 12713
        this.exitMultiSelectMode && this.exitMultiSelectMode();                                                        // 12714
        this.moveCursorTo(lineNumber - 1, column || 0);                                                                // 12715
        this.$blockScrolling -= 1;                                                                                     // 12716
                                                                                                                       // 12717
        if (!this.isRowFullyVisible(lineNumber - 1))                                                                   // 12718
            this.scrollToLine(lineNumber - 1, true, animate);                                                          // 12719
    };                                                                                                                 // 12720
    this.navigateTo = function(row, column) {                                                                          // 12721
        this.selection.moveTo(row, column);                                                                            // 12722
    };                                                                                                                 // 12723
    this.navigateUp = function(times) {                                                                                // 12724
        if (this.selection.isMultiLine() && !this.selection.isBackwards()) {                                           // 12725
            var selectionStart = this.selection.anchor.getPosition();                                                  // 12726
            return this.moveCursorToPosition(selectionStart);                                                          // 12727
        }                                                                                                              // 12728
        this.selection.clearSelection();                                                                               // 12729
        this.selection.moveCursorBy(-times || -1, 0);                                                                  // 12730
    };                                                                                                                 // 12731
    this.navigateDown = function(times) {                                                                              // 12732
        if (this.selection.isMultiLine() && this.selection.isBackwards()) {                                            // 12733
            var selectionEnd = this.selection.anchor.getPosition();                                                    // 12734
            return this.moveCursorToPosition(selectionEnd);                                                            // 12735
        }                                                                                                              // 12736
        this.selection.clearSelection();                                                                               // 12737
        this.selection.moveCursorBy(times || 1, 0);                                                                    // 12738
    };                                                                                                                 // 12739
    this.navigateLeft = function(times) {                                                                              // 12740
        if (!this.selection.isEmpty()) {                                                                               // 12741
            var selectionStart = this.getSelectionRange().start;                                                       // 12742
            this.moveCursorToPosition(selectionStart);                                                                 // 12743
        }                                                                                                              // 12744
        else {                                                                                                         // 12745
            times = times || 1;                                                                                        // 12746
            while (times--) {                                                                                          // 12747
                this.selection.moveCursorLeft();                                                                       // 12748
            }                                                                                                          // 12749
        }                                                                                                              // 12750
        this.clearSelection();                                                                                         // 12751
    };                                                                                                                 // 12752
    this.navigateRight = function(times) {                                                                             // 12753
        if (!this.selection.isEmpty()) {                                                                               // 12754
            var selectionEnd = this.getSelectionRange().end;                                                           // 12755
            this.moveCursorToPosition(selectionEnd);                                                                   // 12756
        }                                                                                                              // 12757
        else {                                                                                                         // 12758
            times = times || 1;                                                                                        // 12759
            while (times--) {                                                                                          // 12760
                this.selection.moveCursorRight();                                                                      // 12761
            }                                                                                                          // 12762
        }                                                                                                              // 12763
        this.clearSelection();                                                                                         // 12764
    };                                                                                                                 // 12765
    this.navigateLineStart = function() {                                                                              // 12766
        this.selection.moveCursorLineStart();                                                                          // 12767
        this.clearSelection();                                                                                         // 12768
    };                                                                                                                 // 12769
    this.navigateLineEnd = function() {                                                                                // 12770
        this.selection.moveCursorLineEnd();                                                                            // 12771
        this.clearSelection();                                                                                         // 12772
    };                                                                                                                 // 12773
    this.navigateFileEnd = function() {                                                                                // 12774
        this.selection.moveCursorFileEnd();                                                                            // 12775
        this.clearSelection();                                                                                         // 12776
    };                                                                                                                 // 12777
    this.navigateFileStart = function() {                                                                              // 12778
        this.selection.moveCursorFileStart();                                                                          // 12779
        this.clearSelection();                                                                                         // 12780
    };                                                                                                                 // 12781
    this.navigateWordRight = function() {                                                                              // 12782
        this.selection.moveCursorWordRight();                                                                          // 12783
        this.clearSelection();                                                                                         // 12784
    };                                                                                                                 // 12785
    this.navigateWordLeft = function() {                                                                               // 12786
        this.selection.moveCursorWordLeft();                                                                           // 12787
        this.clearSelection();                                                                                         // 12788
    };                                                                                                                 // 12789
    this.replace = function(replacement, options) {                                                                    // 12790
        if (options)                                                                                                   // 12791
            this.$search.set(options);                                                                                 // 12792
                                                                                                                       // 12793
        var range = this.$search.find(this.session);                                                                   // 12794
        var replaced = 0;                                                                                              // 12795
        if (!range)                                                                                                    // 12796
            return replaced;                                                                                           // 12797
                                                                                                                       // 12798
        if (this.$tryReplace(range, replacement)) {                                                                    // 12799
            replaced = 1;                                                                                              // 12800
        }                                                                                                              // 12801
        if (range !== null) {                                                                                          // 12802
            this.selection.setSelectionRange(range);                                                                   // 12803
            this.renderer.scrollSelectionIntoView(range.start, range.end);                                             // 12804
        }                                                                                                              // 12805
                                                                                                                       // 12806
        return replaced;                                                                                               // 12807
    };                                                                                                                 // 12808
    this.replaceAll = function(replacement, options) {                                                                 // 12809
        if (options) {                                                                                                 // 12810
            this.$search.set(options);                                                                                 // 12811
        }                                                                                                              // 12812
                                                                                                                       // 12813
        var ranges = this.$search.findAll(this.session);                                                               // 12814
        var replaced = 0;                                                                                              // 12815
        if (!ranges.length)                                                                                            // 12816
            return replaced;                                                                                           // 12817
                                                                                                                       // 12818
        this.$blockScrolling += 1;                                                                                     // 12819
                                                                                                                       // 12820
        var selection = this.getSelectionRange();                                                                      // 12821
        this.selection.moveTo(0, 0);                                                                                   // 12822
                                                                                                                       // 12823
        for (var i = ranges.length - 1; i >= 0; --i) {                                                                 // 12824
            if(this.$tryReplace(ranges[i], replacement)) {                                                             // 12825
                replaced++;                                                                                            // 12826
            }                                                                                                          // 12827
        }                                                                                                              // 12828
                                                                                                                       // 12829
        this.selection.setSelectionRange(selection);                                                                   // 12830
        this.$blockScrolling -= 1;                                                                                     // 12831
                                                                                                                       // 12832
        return replaced;                                                                                               // 12833
    };                                                                                                                 // 12834
                                                                                                                       // 12835
    this.$tryReplace = function(range, replacement) {                                                                  // 12836
        var input = this.session.getTextRange(range);                                                                  // 12837
        replacement = this.$search.replace(input, replacement);                                                        // 12838
        if (replacement !== null) {                                                                                    // 12839
            range.end = this.session.replace(range, replacement);                                                      // 12840
            return range;                                                                                              // 12841
        } else {                                                                                                       // 12842
            return null;                                                                                               // 12843
        }                                                                                                              // 12844
    };                                                                                                                 // 12845
    this.getLastSearchOptions = function() {                                                                           // 12846
        return this.$search.getOptions();                                                                              // 12847
    };                                                                                                                 // 12848
    this.find = function(needle, options, animate) {                                                                   // 12849
        if (!options)                                                                                                  // 12850
            options = {};                                                                                              // 12851
                                                                                                                       // 12852
        if (typeof needle == "string" || needle instanceof RegExp)                                                     // 12853
            options.needle = needle;                                                                                   // 12854
        else if (typeof needle == "object")                                                                            // 12855
            oop.mixin(options, needle);                                                                                // 12856
                                                                                                                       // 12857
        var range = this.selection.getRange();                                                                         // 12858
        if (options.needle == null) {                                                                                  // 12859
            needle = this.session.getTextRange(range)                                                                  // 12860
                || this.$search.$options.needle;                                                                       // 12861
            if (!needle) {                                                                                             // 12862
                range = this.session.getWordRange(range.start.row, range.start.column);                                // 12863
                needle = this.session.getTextRange(range);                                                             // 12864
            }                                                                                                          // 12865
            this.$search.set({needle: needle});                                                                        // 12866
        }                                                                                                              // 12867
                                                                                                                       // 12868
        this.$search.set(options);                                                                                     // 12869
        if (!options.start)                                                                                            // 12870
            this.$search.set({start: range});                                                                          // 12871
                                                                                                                       // 12872
        var newRange = this.$search.find(this.session);                                                                // 12873
        if (options.preventScroll)                                                                                     // 12874
            return newRange;                                                                                           // 12875
        if (newRange) {                                                                                                // 12876
            this.revealRange(newRange, animate);                                                                       // 12877
            return newRange;                                                                                           // 12878
        }                                                                                                              // 12879
        if (options.backwards)                                                                                         // 12880
            range.start = range.end;                                                                                   // 12881
        else                                                                                                           // 12882
            range.end = range.start;                                                                                   // 12883
        this.selection.setRange(range);                                                                                // 12884
    };                                                                                                                 // 12885
    this.findNext = function(options, animate) {                                                                       // 12886
        this.find({skipCurrent: true, backwards: false}, options, animate);                                            // 12887
    };                                                                                                                 // 12888
    this.findPrevious = function(options, animate) {                                                                   // 12889
        this.find(options, {skipCurrent: true, backwards: true}, animate);                                             // 12890
    };                                                                                                                 // 12891
                                                                                                                       // 12892
    this.revealRange = function(range, animate) {                                                                      // 12893
        this.$blockScrolling += 1;                                                                                     // 12894
        this.session.unfold(range);                                                                                    // 12895
        this.selection.setSelectionRange(range);                                                                       // 12896
        this.$blockScrolling -= 1;                                                                                     // 12897
                                                                                                                       // 12898
        var scrollTop = this.renderer.scrollTop;                                                                       // 12899
        this.renderer.scrollSelectionIntoView(range.start, range.end, 0.5);                                            // 12900
        if (animate !== false)                                                                                         // 12901
            this.renderer.animateScrolling(scrollTop);                                                                 // 12902
    };                                                                                                                 // 12903
    this.undo = function() {                                                                                           // 12904
        this.$blockScrolling++;                                                                                        // 12905
        this.session.getUndoManager().undo();                                                                          // 12906
        this.$blockScrolling--;                                                                                        // 12907
        this.renderer.scrollCursorIntoView(null, 0.5);                                                                 // 12908
    };                                                                                                                 // 12909
    this.redo = function() {                                                                                           // 12910
        this.$blockScrolling++;                                                                                        // 12911
        this.session.getUndoManager().redo();                                                                          // 12912
        this.$blockScrolling--;                                                                                        // 12913
        this.renderer.scrollCursorIntoView(null, 0.5);                                                                 // 12914
    };                                                                                                                 // 12915
    this.destroy = function() {                                                                                        // 12916
        this.renderer.destroy();                                                                                       // 12917
        this._signal("destroy", this);                                                                                 // 12918
        if (this.session) {                                                                                            // 12919
            this.session.destroy();                                                                                    // 12920
        }                                                                                                              // 12921
    };                                                                                                                 // 12922
    this.setAutoScrollEditorIntoView = function(enable) {                                                              // 12923
        if (!enable)                                                                                                   // 12924
            return;                                                                                                    // 12925
        var rect;                                                                                                      // 12926
        var self = this;                                                                                               // 12927
        var shouldScroll = false;                                                                                      // 12928
        if (!this.$scrollAnchor)                                                                                       // 12929
            this.$scrollAnchor = document.createElement("div");                                                        // 12930
        var scrollAnchor = this.$scrollAnchor;                                                                         // 12931
        scrollAnchor.style.cssText = "position:absolute";                                                              // 12932
        this.container.insertBefore(scrollAnchor, this.container.firstChild);                                          // 12933
        var onChangeSelection = this.on("changeSelection", function() {                                                // 12934
            shouldScroll = true;                                                                                       // 12935
        });                                                                                                            // 12936
        var onBeforeRender = this.renderer.on("beforeRender", function() {                                             // 12937
            if (shouldScroll)                                                                                          // 12938
                rect = self.renderer.container.getBoundingClientRect();                                                // 12939
        });                                                                                                            // 12940
        var onAfterRender = this.renderer.on("afterRender", function() {                                               // 12941
            if (shouldScroll && rect && (self.isFocused()                                                              // 12942
                || self.searchBox && self.searchBox.isFocused())                                                       // 12943
            ) {                                                                                                        // 12944
                var renderer = self.renderer;                                                                          // 12945
                var pos = renderer.$cursorLayer.$pixelPos;                                                             // 12946
                var config = renderer.layerConfig;                                                                     // 12947
                var top = pos.top - config.offset;                                                                     // 12948
                if (pos.top >= 0 && top + rect.top < 0) {                                                              // 12949
                    shouldScroll = true;                                                                               // 12950
                } else if (pos.top < config.height &&                                                                  // 12951
                    pos.top + rect.top + config.lineHeight > window.innerHeight) {                                     // 12952
                    shouldScroll = false;                                                                              // 12953
                } else {                                                                                               // 12954
                    shouldScroll = null;                                                                               // 12955
                }                                                                                                      // 12956
                if (shouldScroll != null) {                                                                            // 12957
                    scrollAnchor.style.top = top + "px";                                                               // 12958
                    scrollAnchor.style.left = pos.left + "px";                                                         // 12959
                    scrollAnchor.style.height = config.lineHeight + "px";                                              // 12960
                    scrollAnchor.scrollIntoView(shouldScroll);                                                         // 12961
                }                                                                                                      // 12962
                shouldScroll = rect = null;                                                                            // 12963
            }                                                                                                          // 12964
        });                                                                                                            // 12965
        this.setAutoScrollEditorIntoView = function(enable) {                                                          // 12966
            if (enable)                                                                                                // 12967
                return;                                                                                                // 12968
            delete this.setAutoScrollEditorIntoView;                                                                   // 12969
            this.removeEventListener("changeSelection", onChangeSelection);                                            // 12970
            this.renderer.removeEventListener("afterRender", onAfterRender);                                           // 12971
            this.renderer.removeEventListener("beforeRender", onBeforeRender);                                         // 12972
        };                                                                                                             // 12973
    };                                                                                                                 // 12974
                                                                                                                       // 12975
                                                                                                                       // 12976
    this.$resetCursorStyle = function() {                                                                              // 12977
        var style = this.$cursorStyle || "ace";                                                                        // 12978
        var cursorLayer = this.renderer.$cursorLayer;                                                                  // 12979
        if (!cursorLayer)                                                                                              // 12980
            return;                                                                                                    // 12981
        cursorLayer.setSmoothBlinking(/smooth/.test(style));                                                           // 12982
        cursorLayer.isBlinking = !this.$readOnly && style != "wide";                                                   // 12983
        dom.setCssClass(cursorLayer.element, "ace_slim-cursors", /slim/.test(style));                                  // 12984
    };                                                                                                                 // 12985
                                                                                                                       // 12986
}).call(Editor.prototype);                                                                                             // 12987
                                                                                                                       // 12988
                                                                                                                       // 12989
                                                                                                                       // 12990
config.defineOptions(Editor.prototype, "editor", {                                                                     // 12991
    selectionStyle: {                                                                                                  // 12992
        set: function(style) {                                                                                         // 12993
            this.onSelectionChange();                                                                                  // 12994
            this._signal("changeSelectionStyle", {data: style});                                                       // 12995
        },                                                                                                             // 12996
        initialValue: "line"                                                                                           // 12997
    },                                                                                                                 // 12998
    highlightActiveLine: {                                                                                             // 12999
        set: function() {this.$updateHighlightActiveLine();},                                                          // 13000
        initialValue: true                                                                                             // 13001
    },                                                                                                                 // 13002
    highlightSelectedWord: {                                                                                           // 13003
        set: function(shouldHighlight) {this.$onSelectionChange();},                                                   // 13004
        initialValue: true                                                                                             // 13005
    },                                                                                                                 // 13006
    readOnly: {                                                                                                        // 13007
        set: function(readOnly) {                                                                                      // 13008
            this.$resetCursorStyle();                                                                                  // 13009
        },                                                                                                             // 13010
        initialValue: false                                                                                            // 13011
    },                                                                                                                 // 13012
    cursorStyle: {                                                                                                     // 13013
        set: function(val) { this.$resetCursorStyle(); },                                                              // 13014
        values: ["ace", "slim", "smooth", "wide"],                                                                     // 13015
        initialValue: "ace"                                                                                            // 13016
    },                                                                                                                 // 13017
    mergeUndoDeltas: {                                                                                                 // 13018
        values: [false, true, "always"],                                                                               // 13019
        initialValue: true                                                                                             // 13020
    },                                                                                                                 // 13021
    behavioursEnabled: {initialValue: true},                                                                           // 13022
    wrapBehavioursEnabled: {initialValue: true},                                                                       // 13023
    autoScrollEditorIntoView: {                                                                                        // 13024
        set: function(val) {this.setAutoScrollEditorIntoView(val)}                                                     // 13025
    },                                                                                                                 // 13026
                                                                                                                       // 13027
    hScrollBarAlwaysVisible: "renderer",                                                                               // 13028
    vScrollBarAlwaysVisible: "renderer",                                                                               // 13029
    highlightGutterLine: "renderer",                                                                                   // 13030
    animatedScroll: "renderer",                                                                                        // 13031
    showInvisibles: "renderer",                                                                                        // 13032
    showPrintMargin: "renderer",                                                                                       // 13033
    printMarginColumn: "renderer",                                                                                     // 13034
    printMargin: "renderer",                                                                                           // 13035
    fadeFoldWidgets: "renderer",                                                                                       // 13036
    showFoldWidgets: "renderer",                                                                                       // 13037
    showLineNumbers: "renderer",                                                                                       // 13038
    showGutter: "renderer",                                                                                            // 13039
    displayIndentGuides: "renderer",                                                                                   // 13040
    fontSize: "renderer",                                                                                              // 13041
    fontFamily: "renderer",                                                                                            // 13042
    maxLines: "renderer",                                                                                              // 13043
    minLines: "renderer",                                                                                              // 13044
    scrollPastEnd: "renderer",                                                                                         // 13045
    fixedWidthGutter: "renderer",                                                                                      // 13046
    theme: "renderer",                                                                                                 // 13047
                                                                                                                       // 13048
    scrollSpeed: "$mouseHandler",                                                                                      // 13049
    dragDelay: "$mouseHandler",                                                                                        // 13050
    dragEnabled: "$mouseHandler",                                                                                      // 13051
    focusTimout: "$mouseHandler",                                                                                      // 13052
    tooltipFollowsMouse: "$mouseHandler",                                                                              // 13053
                                                                                                                       // 13054
    firstLineNumber: "session",                                                                                        // 13055
    overwrite: "session",                                                                                              // 13056
    newLineMode: "session",                                                                                            // 13057
    useWorker: "session",                                                                                              // 13058
    useSoftTabs: "session",                                                                                            // 13059
    tabSize: "session",                                                                                                // 13060
    wrap: "session",                                                                                                   // 13061
    indentedSoftWrap: "session",                                                                                       // 13062
    foldStyle: "session",                                                                                              // 13063
    mode: "session"                                                                                                    // 13064
});                                                                                                                    // 13065
                                                                                                                       // 13066
exports.Editor = Editor;                                                                                               // 13067
});                                                                                                                    // 13068
                                                                                                                       // 13069
define("ace/undomanager",["require","exports","module"], function(require, exports, module) {                          // 13070
"use strict";                                                                                                          // 13071
var UndoManager = function() {                                                                                         // 13072
    this.reset();                                                                                                      // 13073
};                                                                                                                     // 13074
                                                                                                                       // 13075
(function() {                                                                                                          // 13076
    this.execute = function(options) {                                                                                 // 13077
        var deltaSets = options.args[0];                                                                               // 13078
        this.$doc  = options.args[1];                                                                                  // 13079
        if (options.merge && this.hasUndo()){                                                                          // 13080
            this.dirtyCounter--;                                                                                       // 13081
            deltaSets = this.$undoStack.pop().concat(deltaSets);                                                       // 13082
        }                                                                                                              // 13083
        this.$undoStack.push(deltaSets);                                                                               // 13084
        this.$redoStack = [];                                                                                          // 13085
        if (this.dirtyCounter < 0) {                                                                                   // 13086
            this.dirtyCounter = NaN;                                                                                   // 13087
        }                                                                                                              // 13088
        this.dirtyCounter++;                                                                                           // 13089
    };                                                                                                                 // 13090
    this.undo = function(dontSelect) {                                                                                 // 13091
        var deltaSets = this.$undoStack.pop();                                                                         // 13092
        var undoSelectionRange = null;                                                                                 // 13093
        if (deltaSets) {                                                                                               // 13094
            undoSelectionRange = this.$doc.undoChanges(this.$deserializeDeltas(deltaSets), dontSelect);                // 13095
            this.$redoStack.push(deltaSets);                                                                           // 13096
            this.dirtyCounter--;                                                                                       // 13097
        }                                                                                                              // 13098
                                                                                                                       // 13099
        return undoSelectionRange;                                                                                     // 13100
    };                                                                                                                 // 13101
    this.redo = function(dontSelect) {                                                                                 // 13102
        var deltaSets = this.$redoStack.pop();                                                                         // 13103
        var redoSelectionRange = null;                                                                                 // 13104
        if (deltaSets) {                                                                                               // 13105
            redoSelectionRange =                                                                                       // 13106
                this.$doc.redoChanges(this.$deserializeDeltas(deltaSets), dontSelect);                                 // 13107
            this.$undoStack.push(deltaSets);                                                                           // 13108
            this.dirtyCounter++;                                                                                       // 13109
        }                                                                                                              // 13110
        return redoSelectionRange;                                                                                     // 13111
    };                                                                                                                 // 13112
    this.reset = function() {                                                                                          // 13113
        this.$undoStack = [];                                                                                          // 13114
        this.$redoStack = [];                                                                                          // 13115
        this.dirtyCounter = 0;                                                                                         // 13116
    };                                                                                                                 // 13117
    this.hasUndo = function() {                                                                                        // 13118
        return this.$undoStack.length > 0;                                                                             // 13119
    };                                                                                                                 // 13120
    this.hasRedo = function() {                                                                                        // 13121
        return this.$redoStack.length > 0;                                                                             // 13122
    };                                                                                                                 // 13123
    this.markClean = function() {                                                                                      // 13124
        this.dirtyCounter = 0;                                                                                         // 13125
    };                                                                                                                 // 13126
    this.isClean = function() {                                                                                        // 13127
        return this.dirtyCounter === 0;                                                                                // 13128
    };                                                                                                                 // 13129
    this.$serializeDeltas = function(deltaSets) {                                                                      // 13130
        return cloneDeltaSetsObj(deltaSets, $serializeDelta);                                                          // 13131
    };                                                                                                                 // 13132
    this.$deserializeDeltas = function(deltaSets) {                                                                    // 13133
        return cloneDeltaSetsObj(deltaSets, $deserializeDelta);                                                        // 13134
    };                                                                                                                 // 13135
                                                                                                                       // 13136
    function $serializeDelta(delta){                                                                                   // 13137
        return {                                                                                                       // 13138
            action: delta.action,                                                                                      // 13139
            start: delta.start,                                                                                        // 13140
            end: delta.end,                                                                                            // 13141
            lines: delta.lines.length == 1 ? null : delta.lines,                                                       // 13142
            text: delta.lines.length == 1 ? delta.lines[0] : null,                                                     // 13143
        };                                                                                                             // 13144
    }                                                                                                                  // 13145
                                                                                                                       // 13146
    function $deserializeDelta(delta) {                                                                                // 13147
        return {                                                                                                       // 13148
            action: delta.action,                                                                                      // 13149
            start: delta.start,                                                                                        // 13150
            end: delta.end,                                                                                            // 13151
            lines: delta.lines || [delta.text]                                                                         // 13152
        };                                                                                                             // 13153
    }                                                                                                                  // 13154
                                                                                                                       // 13155
    function cloneDeltaSetsObj(deltaSets_old, fnGetModifiedDelta) {                                                    // 13156
        var deltaSets_new = new Array(deltaSets_old.length);                                                           // 13157
        for (var i = 0; i < deltaSets_old.length; i++) {                                                               // 13158
            var deltaSet_old = deltaSets_old[i];                                                                       // 13159
            var deltaSet_new = { group: deltaSet_old.group, deltas: new Array(deltaSet_old.length)};                   // 13160
                                                                                                                       // 13161
            for (var j = 0; j < deltaSet_old.deltas.length; j++) {                                                     // 13162
                var delta_old = deltaSet_old.deltas[j];                                                                // 13163
                deltaSet_new.deltas[j] = fnGetModifiedDelta(delta_old);                                                // 13164
            }                                                                                                          // 13165
                                                                                                                       // 13166
            deltaSets_new[i] = deltaSet_new;                                                                           // 13167
        }                                                                                                              // 13168
        return deltaSets_new;                                                                                          // 13169
    }                                                                                                                  // 13170
                                                                                                                       // 13171
}).call(UndoManager.prototype);                                                                                        // 13172
                                                                                                                       // 13173
exports.UndoManager = UndoManager;                                                                                     // 13174
});                                                                                                                    // 13175
                                                                                                                       // 13176
define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"], function(require, exports, module) {
"use strict";                                                                                                          // 13178
                                                                                                                       // 13179
var dom = require("../lib/dom");                                                                                       // 13180
var oop = require("../lib/oop");                                                                                       // 13181
var lang = require("../lib/lang");                                                                                     // 13182
var EventEmitter = require("../lib/event_emitter").EventEmitter;                                                       // 13183
                                                                                                                       // 13184
var Gutter = function(parentEl) {                                                                                      // 13185
    this.element = dom.createElement("div");                                                                           // 13186
    this.element.className = "ace_layer ace_gutter-layer";                                                             // 13187
    parentEl.appendChild(this.element);                                                                                // 13188
    this.setShowFoldWidgets(this.$showFoldWidgets);                                                                    // 13189
                                                                                                                       // 13190
    this.gutterWidth = 0;                                                                                              // 13191
                                                                                                                       // 13192
    this.$annotations = [];                                                                                            // 13193
    this.$updateAnnotations = this.$updateAnnotations.bind(this);                                                      // 13194
                                                                                                                       // 13195
    this.$cells = [];                                                                                                  // 13196
};                                                                                                                     // 13197
                                                                                                                       // 13198
(function() {                                                                                                          // 13199
                                                                                                                       // 13200
    oop.implement(this, EventEmitter);                                                                                 // 13201
                                                                                                                       // 13202
    this.setSession = function(session) {                                                                              // 13203
        if (this.session)                                                                                              // 13204
            this.session.removeEventListener("change", this.$updateAnnotations);                                       // 13205
        this.session = session;                                                                                        // 13206
        if (session)                                                                                                   // 13207
            session.on("change", this.$updateAnnotations);                                                             // 13208
    };                                                                                                                 // 13209
                                                                                                                       // 13210
    this.addGutterDecoration = function(row, className){                                                               // 13211
        if (window.console)                                                                                            // 13212
            console.warn && console.warn("deprecated use session.addGutterDecoration");                                // 13213
        this.session.addGutterDecoration(row, className);                                                              // 13214
    };                                                                                                                 // 13215
                                                                                                                       // 13216
    this.removeGutterDecoration = function(row, className){                                                            // 13217
        if (window.console)                                                                                            // 13218
            console.warn && console.warn("deprecated use session.removeGutterDecoration");                             // 13219
        this.session.removeGutterDecoration(row, className);                                                           // 13220
    };                                                                                                                 // 13221
                                                                                                                       // 13222
    this.setAnnotations = function(annotations) {                                                                      // 13223
        this.$annotations = [];                                                                                        // 13224
        for (var i = 0; i < annotations.length; i++) {                                                                 // 13225
            var annotation = annotations[i];                                                                           // 13226
            var row = annotation.row;                                                                                  // 13227
            var rowInfo = this.$annotations[row];                                                                      // 13228
            if (!rowInfo)                                                                                              // 13229
                rowInfo = this.$annotations[row] = {text: []};                                                         // 13230
                                                                                                                       // 13231
            var annoText = annotation.text;                                                                            // 13232
            annoText = annoText ? lang.escapeHTML(annoText) : annotation.html || "";                                   // 13233
                                                                                                                       // 13234
            if (rowInfo.text.indexOf(annoText) === -1)                                                                 // 13235
                rowInfo.text.push(annoText);                                                                           // 13236
                                                                                                                       // 13237
            var type = annotation.type;                                                                                // 13238
            if (type == "error")                                                                                       // 13239
                rowInfo.className = " ace_error";                                                                      // 13240
            else if (type == "warning" && rowInfo.className != " ace_error")                                           // 13241
                rowInfo.className = " ace_warning";                                                                    // 13242
            else if (type == "info" && (!rowInfo.className))                                                           // 13243
                rowInfo.className = " ace_info";                                                                       // 13244
        }                                                                                                              // 13245
    };                                                                                                                 // 13246
                                                                                                                       // 13247
    this.$updateAnnotations = function (delta) {                                                                       // 13248
        if (!this.$annotations.length)                                                                                 // 13249
            return;                                                                                                    // 13250
        var firstRow = delta.start.row;                                                                                // 13251
        var len = delta.end.row - firstRow;                                                                            // 13252
        if (len === 0) {                                                                                               // 13253
        } else if (delta.action == 'remove') {                                                                         // 13254
            this.$annotations.splice(firstRow, len + 1, null);                                                         // 13255
        } else {                                                                                                       // 13256
            var args = new Array(len + 1);                                                                             // 13257
            args.unshift(firstRow, 1);                                                                                 // 13258
            this.$annotations.splice.apply(this.$annotations, args);                                                   // 13259
        }                                                                                                              // 13260
    };                                                                                                                 // 13261
                                                                                                                       // 13262
    this.update = function(config) {                                                                                   // 13263
        var session = this.session;                                                                                    // 13264
        var firstRow = config.firstRow;                                                                                // 13265
        var lastRow = Math.min(config.lastRow + config.gutterOffset,  // needed to compensate for hor scollbar         // 13266
            session.getLength() - 1);                                                                                  // 13267
        var fold = session.getNextFoldLine(firstRow);                                                                  // 13268
        var foldStart = fold ? fold.start.row : Infinity;                                                              // 13269
        var foldWidgets = this.$showFoldWidgets && session.foldWidgets;                                                // 13270
        var breakpoints = session.$breakpoints;                                                                        // 13271
        var decorations = session.$decorations;                                                                        // 13272
        var firstLineNumber = session.$firstLineNumber;                                                                // 13273
        var lastLineNumber = 0;                                                                                        // 13274
                                                                                                                       // 13275
        var gutterRenderer = session.gutterRenderer || this.$renderer;                                                 // 13276
                                                                                                                       // 13277
        var cell = null;                                                                                               // 13278
        var index = -1;                                                                                                // 13279
        var row = firstRow;                                                                                            // 13280
        while (true) {                                                                                                 // 13281
            if (row > foldStart) {                                                                                     // 13282
                row = fold.end.row + 1;                                                                                // 13283
                fold = session.getNextFoldLine(row, fold);                                                             // 13284
                foldStart = fold ? fold.start.row : Infinity;                                                          // 13285
            }                                                                                                          // 13286
            if (row > lastRow) {                                                                                       // 13287
                while (this.$cells.length > index + 1) {                                                               // 13288
                    cell = this.$cells.pop();                                                                          // 13289
                    this.element.removeChild(cell.element);                                                            // 13290
                }                                                                                                      // 13291
                break;                                                                                                 // 13292
            }                                                                                                          // 13293
                                                                                                                       // 13294
            cell = this.$cells[++index];                                                                               // 13295
            if (!cell) {                                                                                               // 13296
                cell = {element: null, textNode: null, foldWidget: null};                                              // 13297
                cell.element = dom.createElement("div");                                                               // 13298
                cell.textNode = document.createTextNode('');                                                           // 13299
                cell.element.appendChild(cell.textNode);                                                               // 13300
                this.element.appendChild(cell.element);                                                                // 13301
                this.$cells[index] = cell;                                                                             // 13302
            }                                                                                                          // 13303
                                                                                                                       // 13304
            var className = "ace_gutter-cell ";                                                                        // 13305
            if (breakpoints[row])                                                                                      // 13306
                className += breakpoints[row];                                                                         // 13307
            if (decorations[row])                                                                                      // 13308
                className += decorations[row];                                                                         // 13309
            if (this.$annotations[row])                                                                                // 13310
                className += this.$annotations[row].className;                                                         // 13311
            if (cell.element.className != className)                                                                   // 13312
                cell.element.className = className;                                                                    // 13313
                                                                                                                       // 13314
            var height = session.getRowLength(row) * config.lineHeight + "px";                                         // 13315
            if (height != cell.element.style.height)                                                                   // 13316
                cell.element.style.height = height;                                                                    // 13317
                                                                                                                       // 13318
            if (foldWidgets) {                                                                                         // 13319
                var c = foldWidgets[row];                                                                              // 13320
                if (c == null)                                                                                         // 13321
                    c = foldWidgets[row] = session.getFoldWidget(row);                                                 // 13322
            }                                                                                                          // 13323
                                                                                                                       // 13324
            if (c) {                                                                                                   // 13325
                if (!cell.foldWidget) {                                                                                // 13326
                    cell.foldWidget = dom.createElement("span");                                                       // 13327
                    cell.element.appendChild(cell.foldWidget);                                                         // 13328
                }                                                                                                      // 13329
                var className = "ace_fold-widget ace_" + c;                                                            // 13330
                if (c == "start" && row == foldStart && row < fold.end.row)                                            // 13331
                    className += " ace_closed";                                                                        // 13332
                else                                                                                                   // 13333
                    className += " ace_open";                                                                          // 13334
                if (cell.foldWidget.className != className)                                                            // 13335
                    cell.foldWidget.className = className;                                                             // 13336
                                                                                                                       // 13337
                var height = config.lineHeight + "px";                                                                 // 13338
                if (cell.foldWidget.style.height != height)                                                            // 13339
                    cell.foldWidget.style.height = height;                                                             // 13340
            } else {                                                                                                   // 13341
                if (cell.foldWidget) {                                                                                 // 13342
                    cell.element.removeChild(cell.foldWidget);                                                         // 13343
                    cell.foldWidget = null;                                                                            // 13344
                }                                                                                                      // 13345
            }                                                                                                          // 13346
                                                                                                                       // 13347
            var text = lastLineNumber = gutterRenderer                                                                 // 13348
                ? gutterRenderer.getText(session, row)                                                                 // 13349
                : row + firstLineNumber;                                                                               // 13350
            if (text != cell.textNode.data)                                                                            // 13351
                cell.textNode.data = text;                                                                             // 13352
                                                                                                                       // 13353
            row++;                                                                                                     // 13354
        }                                                                                                              // 13355
                                                                                                                       // 13356
        this.element.style.height = config.minHeight + "px";                                                           // 13357
                                                                                                                       // 13358
        if (this.$fixedWidth || session.$useWrapMode)                                                                  // 13359
            lastLineNumber = session.getLength() + firstLineNumber;                                                    // 13360
                                                                                                                       // 13361
        var gutterWidth = gutterRenderer                                                                               // 13362
            ? gutterRenderer.getWidth(session, lastLineNumber, config)                                                 // 13363
            : lastLineNumber.toString().length * config.characterWidth;                                                // 13364
                                                                                                                       // 13365
        var padding = this.$padding || this.$computePadding();                                                         // 13366
        gutterWidth += padding.left + padding.right;                                                                   // 13367
        if (gutterWidth !== this.gutterWidth && !isNaN(gutterWidth)) {                                                 // 13368
            this.gutterWidth = gutterWidth;                                                                            // 13369
            this.element.style.width = Math.ceil(this.gutterWidth) + "px";                                             // 13370
            this._emit("changeGutterWidth", gutterWidth);                                                              // 13371
        }                                                                                                              // 13372
    };                                                                                                                 // 13373
                                                                                                                       // 13374
    this.$fixedWidth = false;                                                                                          // 13375
                                                                                                                       // 13376
    this.$showLineNumbers = true;                                                                                      // 13377
    this.$renderer = "";                                                                                               // 13378
    this.setShowLineNumbers = function(show) {                                                                         // 13379
        this.$renderer = !show && {                                                                                    // 13380
            getWidth: function() {return ""},                                                                          // 13381
            getText: function() {return ""}                                                                            // 13382
        };                                                                                                             // 13383
    };                                                                                                                 // 13384
                                                                                                                       // 13385
    this.getShowLineNumbers = function() {                                                                             // 13386
        return this.$showLineNumbers;                                                                                  // 13387
    };                                                                                                                 // 13388
                                                                                                                       // 13389
    this.$showFoldWidgets = true;                                                                                      // 13390
    this.setShowFoldWidgets = function(show) {                                                                         // 13391
        if (show)                                                                                                      // 13392
            dom.addCssClass(this.element, "ace_folding-enabled");                                                      // 13393
        else                                                                                                           // 13394
            dom.removeCssClass(this.element, "ace_folding-enabled");                                                   // 13395
                                                                                                                       // 13396
        this.$showFoldWidgets = show;                                                                                  // 13397
        this.$padding = null;                                                                                          // 13398
    };                                                                                                                 // 13399
                                                                                                                       // 13400
    this.getShowFoldWidgets = function() {                                                                             // 13401
        return this.$showFoldWidgets;                                                                                  // 13402
    };                                                                                                                 // 13403
                                                                                                                       // 13404
    this.$computePadding = function() {                                                                                // 13405
        if (!this.element.firstChild)                                                                                  // 13406
            return {left: 0, right: 0};                                                                                // 13407
        var style = dom.computedStyle(this.element.firstChild);                                                        // 13408
        this.$padding = {};                                                                                            // 13409
        this.$padding.left = parseInt(style.paddingLeft) + 1 || 0;                                                     // 13410
        this.$padding.right = parseInt(style.paddingRight) || 0;                                                       // 13411
        return this.$padding;                                                                                          // 13412
    };                                                                                                                 // 13413
                                                                                                                       // 13414
    this.getRegion = function(point) {                                                                                 // 13415
        var padding = this.$padding || this.$computePadding();                                                         // 13416
        var rect = this.element.getBoundingClientRect();                                                               // 13417
        if (point.x < padding.left + rect.left)                                                                        // 13418
            return "markers";                                                                                          // 13419
        if (this.$showFoldWidgets && point.x > rect.right - padding.right)                                             // 13420
            return "foldWidgets";                                                                                      // 13421
    };                                                                                                                 // 13422
                                                                                                                       // 13423
}).call(Gutter.prototype);                                                                                             // 13424
                                                                                                                       // 13425
exports.Gutter = Gutter;                                                                                               // 13426
                                                                                                                       // 13427
});                                                                                                                    // 13428
                                                                                                                       // 13429
define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"], function(require, exports, module) {
"use strict";                                                                                                          // 13431
                                                                                                                       // 13432
var Range = require("../range").Range;                                                                                 // 13433
var dom = require("../lib/dom");                                                                                       // 13434
                                                                                                                       // 13435
var Marker = function(parentEl) {                                                                                      // 13436
    this.element = dom.createElement("div");                                                                           // 13437
    this.element.className = "ace_layer ace_marker-layer";                                                             // 13438
    parentEl.appendChild(this.element);                                                                                // 13439
};                                                                                                                     // 13440
                                                                                                                       // 13441
(function() {                                                                                                          // 13442
                                                                                                                       // 13443
    this.$padding = 0;                                                                                                 // 13444
                                                                                                                       // 13445
    this.setPadding = function(padding) {                                                                              // 13446
        this.$padding = padding;                                                                                       // 13447
    };                                                                                                                 // 13448
    this.setSession = function(session) {                                                                              // 13449
        this.session = session;                                                                                        // 13450
    };                                                                                                                 // 13451
                                                                                                                       // 13452
    this.setMarkers = function(markers) {                                                                              // 13453
        this.markers = markers;                                                                                        // 13454
    };                                                                                                                 // 13455
                                                                                                                       // 13456
    this.update = function(config) {                                                                                   // 13457
        var config = config || this.config;                                                                            // 13458
        if (!config)                                                                                                   // 13459
            return;                                                                                                    // 13460
                                                                                                                       // 13461
        this.config = config;                                                                                          // 13462
                                                                                                                       // 13463
                                                                                                                       // 13464
        var html = [];                                                                                                 // 13465
        for (var key in this.markers) {                                                                                // 13466
            var marker = this.markers[key];                                                                            // 13467
                                                                                                                       // 13468
            if (!marker.range) {                                                                                       // 13469
                marker.update(html, this, this.session, config);                                                       // 13470
                continue;                                                                                              // 13471
            }                                                                                                          // 13472
                                                                                                                       // 13473
            var range = marker.range.clipRows(config.firstRow, config.lastRow);                                        // 13474
            if (range.isEmpty()) continue;                                                                             // 13475
                                                                                                                       // 13476
            range = range.toScreenRange(this.session);                                                                 // 13477
            if (marker.renderer) {                                                                                     // 13478
                var top = this.$getTop(range.start.row, config);                                                       // 13479
                var left = this.$padding + range.start.column * config.characterWidth;                                 // 13480
                marker.renderer(html, range, left, top, config);                                                       // 13481
            } else if (marker.type == "fullLine") {                                                                    // 13482
                this.drawFullLineMarker(html, range, marker.clazz, config);                                            // 13483
            } else if (marker.type == "screenLine") {                                                                  // 13484
                this.drawScreenLineMarker(html, range, marker.clazz, config);                                          // 13485
            } else if (range.isMultiLine()) {                                                                          // 13486
                if (marker.type == "text")                                                                             // 13487
                    this.drawTextMarker(html, range, marker.clazz, config);                                            // 13488
                else                                                                                                   // 13489
                    this.drawMultiLineMarker(html, range, marker.clazz, config);                                       // 13490
            } else {                                                                                                   // 13491
                this.drawSingleLineMarker(html, range, marker.clazz + " ace_start" + " ace_br15", config);             // 13492
            }                                                                                                          // 13493
        }                                                                                                              // 13494
        this.element.innerHTML = html.join("");                                                                        // 13495
    };                                                                                                                 // 13496
                                                                                                                       // 13497
    this.$getTop = function(row, layerConfig) {                                                                        // 13498
        return (row - layerConfig.firstRowScreen) * layerConfig.lineHeight;                                            // 13499
    };                                                                                                                 // 13500
                                                                                                                       // 13501
    function getBorderClass(tl, tr, br, bl) {                                                                          // 13502
        return (tl ? 1 : 0) | (tr ? 2 : 0) | (br ? 4 : 0) | (bl ? 8 : 0);                                              // 13503
    }                                                                                                                  // 13504
    this.drawTextMarker = function(stringBuilder, range, clazz, layerConfig, extraStyle) {                             // 13505
        var session = this.session;                                                                                    // 13506
        var start = range.start.row;                                                                                   // 13507
        var end = range.end.row;                                                                                       // 13508
        var row = start;                                                                                               // 13509
        var prev = 0;                                                                                                  // 13510
        var curr = 0;                                                                                                  // 13511
        var next = session.getScreenLastRowColumn(row);                                                                // 13512
        var lineRange = new Range(row, range.start.column, row, curr);                                                 // 13513
        for (; row <= end; row++) {                                                                                    // 13514
            lineRange.start.row = lineRange.end.row = row;                                                             // 13515
            lineRange.start.column = row == start ? range.start.column : session.getRowWrapIndent(row);                // 13516
            lineRange.end.column = next;                                                                               // 13517
            prev = curr;                                                                                               // 13518
            curr = next;                                                                                               // 13519
            next = row + 1 < end ? session.getScreenLastRowColumn(row + 1) : row == end ? 0 : range.end.column;        // 13520
            this.drawSingleLineMarker(stringBuilder, lineRange,                                                        // 13521
                clazz + (row == start  ? " ace_start" : "") + " ace_br"                                                // 13522
                    + getBorderClass(row == start || row == start + 1 && range.start.column, prev < curr, curr > next, row == end),
                layerConfig, row == end ? 0 : 1, extraStyle);                                                          // 13524
        }                                                                                                              // 13525
    };                                                                                                                 // 13526
    this.drawMultiLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {                             // 13527
        var padding = this.$padding;                                                                                   // 13528
        var height = config.lineHeight;                                                                                // 13529
        var top = this.$getTop(range.start.row, config);                                                               // 13530
        var left = padding + range.start.column * config.characterWidth;                                               // 13531
        extraStyle = extraStyle || "";                                                                                 // 13532
                                                                                                                       // 13533
        stringBuilder.push(                                                                                            // 13534
            "<div class='", clazz, " ace_br1 ace_start' style='",                                                      // 13535
            "height:", height, "px;",                                                                                  // 13536
            "right:0;",                                                                                                // 13537
            "top:", top, "px;",                                                                                        // 13538
            "left:", left, "px;", extraStyle, "'></div>"                                                               // 13539
        );                                                                                                             // 13540
        top = this.$getTop(range.end.row, config);                                                                     // 13541
        var width = range.end.column * config.characterWidth;                                                          // 13542
                                                                                                                       // 13543
        stringBuilder.push(                                                                                            // 13544
            "<div class='", clazz, " ace_br12' style='",                                                               // 13545
            "height:", height, "px;",                                                                                  // 13546
            "width:", width, "px;",                                                                                    // 13547
            "top:", top, "px;",                                                                                        // 13548
            "left:", padding, "px;", extraStyle, "'></div>"                                                            // 13549
        );                                                                                                             // 13550
        height = (range.end.row - range.start.row - 1) * config.lineHeight;                                            // 13551
        if (height <= 0)                                                                                               // 13552
            return;                                                                                                    // 13553
        top = this.$getTop(range.start.row + 1, config);                                                               // 13554
                                                                                                                       // 13555
        var radiusClass = (range.start.column ? 1 : 0) | (range.end.column ? 0 : 8);                                   // 13556
                                                                                                                       // 13557
        stringBuilder.push(                                                                                            // 13558
            "<div class='", clazz, (radiusClass ? " ace_br" + radiusClass : ""), "' style='",                          // 13559
            "height:", height, "px;",                                                                                  // 13560
            "right:0;",                                                                                                // 13561
            "top:", top, "px;",                                                                                        // 13562
            "left:", padding, "px;", extraStyle, "'></div>"                                                            // 13563
        );                                                                                                             // 13564
    };                                                                                                                 // 13565
    this.drawSingleLineMarker = function(stringBuilder, range, clazz, config, extraLength, extraStyle) {               // 13566
        var height = config.lineHeight;                                                                                // 13567
        var width = (range.end.column + (extraLength || 0) - range.start.column) * config.characterWidth;              // 13568
                                                                                                                       // 13569
        var top = this.$getTop(range.start.row, config);                                                               // 13570
        var left = this.$padding + range.start.column * config.characterWidth;                                         // 13571
                                                                                                                       // 13572
        stringBuilder.push(                                                                                            // 13573
            "<div class='", clazz, "' style='",                                                                        // 13574
            "height:", height, "px;",                                                                                  // 13575
            "width:", width, "px;",                                                                                    // 13576
            "top:", top, "px;",                                                                                        // 13577
            "left:", left, "px;", extraStyle || "", "'></div>"                                                         // 13578
        );                                                                                                             // 13579
    };                                                                                                                 // 13580
                                                                                                                       // 13581
    this.drawFullLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {                              // 13582
        var top = this.$getTop(range.start.row, config);                                                               // 13583
        var height = config.lineHeight;                                                                                // 13584
        if (range.start.row != range.end.row)                                                                          // 13585
            height += this.$getTop(range.end.row, config) - top;                                                       // 13586
                                                                                                                       // 13587
        stringBuilder.push(                                                                                            // 13588
            "<div class='", clazz, "' style='",                                                                        // 13589
            "height:", height, "px;",                                                                                  // 13590
            "top:", top, "px;",                                                                                        // 13591
            "left:0;right:0;", extraStyle || "", "'></div>"                                                            // 13592
        );                                                                                                             // 13593
    };                                                                                                                 // 13594
                                                                                                                       // 13595
    this.drawScreenLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {                            // 13596
        var top = this.$getTop(range.start.row, config);                                                               // 13597
        var height = config.lineHeight;                                                                                // 13598
                                                                                                                       // 13599
        stringBuilder.push(                                                                                            // 13600
            "<div class='", clazz, "' style='",                                                                        // 13601
            "height:", height, "px;",                                                                                  // 13602
            "top:", top, "px;",                                                                                        // 13603
            "left:0;right:0;", extraStyle || "", "'></div>"                                                            // 13604
        );                                                                                                             // 13605
    };                                                                                                                 // 13606
                                                                                                                       // 13607
}).call(Marker.prototype);                                                                                             // 13608
                                                                                                                       // 13609
exports.Marker = Marker;                                                                                               // 13610
                                                                                                                       // 13611
});                                                                                                                    // 13612
                                                                                                                       // 13613
define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"], function(require, exports, module) {
"use strict";                                                                                                          // 13615
                                                                                                                       // 13616
var oop = require("../lib/oop");                                                                                       // 13617
var dom = require("../lib/dom");                                                                                       // 13618
var lang = require("../lib/lang");                                                                                     // 13619
var useragent = require("../lib/useragent");                                                                           // 13620
var EventEmitter = require("../lib/event_emitter").EventEmitter;                                                       // 13621
                                                                                                                       // 13622
var Text = function(parentEl) {                                                                                        // 13623
    this.element = dom.createElement("div");                                                                           // 13624
    this.element.className = "ace_layer ace_text-layer";                                                               // 13625
    parentEl.appendChild(this.element);                                                                                // 13626
    this.$updateEolChar = this.$updateEolChar.bind(this);                                                              // 13627
};                                                                                                                     // 13628
                                                                                                                       // 13629
(function() {                                                                                                          // 13630
                                                                                                                       // 13631
    oop.implement(this, EventEmitter);                                                                                 // 13632
                                                                                                                       // 13633
    this.EOF_CHAR = "\xB6";                                                                                            // 13634
    this.EOL_CHAR_LF = "\xAC";                                                                                         // 13635
    this.EOL_CHAR_CRLF = "\xa4";                                                                                       // 13636
    this.EOL_CHAR = this.EOL_CHAR_LF;                                                                                  // 13637
    this.TAB_CHAR = "\u2014"; //"\u21E5";                                                                              // 13638
    this.SPACE_CHAR = "\xB7";                                                                                          // 13639
    this.$padding = 0;                                                                                                 // 13640
                                                                                                                       // 13641
    this.$updateEolChar = function() {                                                                                 // 13642
        var EOL_CHAR = this.session.doc.getNewLineCharacter() == "\n"                                                  // 13643
           ? this.EOL_CHAR_LF                                                                                          // 13644
           : this.EOL_CHAR_CRLF;                                                                                       // 13645
        if (this.EOL_CHAR != EOL_CHAR) {                                                                               // 13646
            this.EOL_CHAR = EOL_CHAR;                                                                                  // 13647
            return true;                                                                                               // 13648
        }                                                                                                              // 13649
    }                                                                                                                  // 13650
                                                                                                                       // 13651
    this.setPadding = function(padding) {                                                                              // 13652
        this.$padding = padding;                                                                                       // 13653
        this.element.style.padding = "0 " + padding + "px";                                                            // 13654
    };                                                                                                                 // 13655
                                                                                                                       // 13656
    this.getLineHeight = function() {                                                                                  // 13657
        return this.$fontMetrics.$characterSize.height || 0;                                                           // 13658
    };                                                                                                                 // 13659
                                                                                                                       // 13660
    this.getCharacterWidth = function() {                                                                              // 13661
        return this.$fontMetrics.$characterSize.width || 0;                                                            // 13662
    };                                                                                                                 // 13663
                                                                                                                       // 13664
    this.$setFontMetrics = function(measure) {                                                                         // 13665
        this.$fontMetrics = measure;                                                                                   // 13666
        this.$fontMetrics.on("changeCharacterSize", function(e) {                                                      // 13667
            this._signal("changeCharacterSize", e);                                                                    // 13668
        }.bind(this));                                                                                                 // 13669
        this.$pollSizeChanges();                                                                                       // 13670
    }                                                                                                                  // 13671
                                                                                                                       // 13672
    this.checkForSizeChanges = function() {                                                                            // 13673
        this.$fontMetrics.checkForSizeChanges();                                                                       // 13674
    };                                                                                                                 // 13675
    this.$pollSizeChanges = function() {                                                                               // 13676
        return this.$pollSizeChangesTimer = this.$fontMetrics.$pollSizeChanges();                                      // 13677
    };                                                                                                                 // 13678
    this.setSession = function(session) {                                                                              // 13679
        this.session = session;                                                                                        // 13680
        if (session)                                                                                                   // 13681
            this.$computeTabString();                                                                                  // 13682
    };                                                                                                                 // 13683
                                                                                                                       // 13684
    this.showInvisibles = false;                                                                                       // 13685
    this.setShowInvisibles = function(showInvisibles) {                                                                // 13686
        if (this.showInvisibles == showInvisibles)                                                                     // 13687
            return false;                                                                                              // 13688
                                                                                                                       // 13689
        this.showInvisibles = showInvisibles;                                                                          // 13690
        this.$computeTabString();                                                                                      // 13691
        return true;                                                                                                   // 13692
    };                                                                                                                 // 13693
                                                                                                                       // 13694
    this.displayIndentGuides = true;                                                                                   // 13695
    this.setDisplayIndentGuides = function(display) {                                                                  // 13696
        if (this.displayIndentGuides == display)                                                                       // 13697
            return false;                                                                                              // 13698
                                                                                                                       // 13699
        this.displayIndentGuides = display;                                                                            // 13700
        this.$computeTabString();                                                                                      // 13701
        return true;                                                                                                   // 13702
    };                                                                                                                 // 13703
                                                                                                                       // 13704
    this.$tabStrings = [];                                                                                             // 13705
    this.onChangeTabSize =                                                                                             // 13706
    this.$computeTabString = function() {                                                                              // 13707
        var tabSize = this.session.getTabSize();                                                                       // 13708
        this.tabSize = tabSize;                                                                                        // 13709
        var tabStr = this.$tabStrings = [0];                                                                           // 13710
        for (var i = 1; i < tabSize + 1; i++) {                                                                        // 13711
            if (this.showInvisibles) {                                                                                 // 13712
                tabStr.push("<span class='ace_invisible ace_invisible_tab'>"                                           // 13713
                    + lang.stringRepeat(this.TAB_CHAR, i)                                                              // 13714
                    + "</span>");                                                                                      // 13715
            } else {                                                                                                   // 13716
                tabStr.push(lang.stringRepeat(" ", i));                                                                // 13717
            }                                                                                                          // 13718
        }                                                                                                              // 13719
        if (this.displayIndentGuides) {                                                                                // 13720
            this.$indentGuideRe =  /\s\S| \t|\t |\s$/;                                                                 // 13721
            var className = "ace_indent-guide";                                                                        // 13722
            var spaceClass = "";                                                                                       // 13723
            var tabClass = "";                                                                                         // 13724
            if (this.showInvisibles) {                                                                                 // 13725
                className += " ace_invisible";                                                                         // 13726
                spaceClass = " ace_invisible_space";                                                                   // 13727
                tabClass = " ace_invisible_tab";                                                                       // 13728
                var spaceContent = lang.stringRepeat(this.SPACE_CHAR, this.tabSize);                                   // 13729
                var tabContent = lang.stringRepeat(this.TAB_CHAR, this.tabSize);                                       // 13730
            } else{                                                                                                    // 13731
                var spaceContent = lang.stringRepeat(" ", this.tabSize);                                               // 13732
                var tabContent = spaceContent;                                                                         // 13733
            }                                                                                                          // 13734
                                                                                                                       // 13735
            this.$tabStrings[" "] = "<span class='" + className + spaceClass + "'>" + spaceContent + "</span>";        // 13736
            this.$tabStrings["\t"] = "<span class='" + className + tabClass + "'>" + tabContent + "</span>";           // 13737
        }                                                                                                              // 13738
    };                                                                                                                 // 13739
                                                                                                                       // 13740
    this.updateLines = function(config, firstRow, lastRow) {                                                           // 13741
        if (this.config.lastRow != config.lastRow ||                                                                   // 13742
            this.config.firstRow != config.firstRow) {                                                                 // 13743
            this.scrollLines(config);                                                                                  // 13744
        }                                                                                                              // 13745
        this.config = config;                                                                                          // 13746
                                                                                                                       // 13747
        var first = Math.max(firstRow, config.firstRow);                                                               // 13748
        var last = Math.min(lastRow, config.lastRow);                                                                  // 13749
                                                                                                                       // 13750
        var lineElements = this.element.childNodes;                                                                    // 13751
        var lineElementsIdx = 0;                                                                                       // 13752
                                                                                                                       // 13753
        for (var row = config.firstRow; row < first; row++) {                                                          // 13754
            var foldLine = this.session.getFoldLine(row);                                                              // 13755
            if (foldLine) {                                                                                            // 13756
                if (foldLine.containsRow(first)) {                                                                     // 13757
                    first = foldLine.start.row;                                                                        // 13758
                    break;                                                                                             // 13759
                } else {                                                                                               // 13760
                    row = foldLine.end.row;                                                                            // 13761
                }                                                                                                      // 13762
            }                                                                                                          // 13763
            lineElementsIdx ++;                                                                                        // 13764
        }                                                                                                              // 13765
                                                                                                                       // 13766
        var row = first;                                                                                               // 13767
        var foldLine = this.session.getNextFoldLine(row);                                                              // 13768
        var foldStart = foldLine ? foldLine.start.row : Infinity;                                                      // 13769
                                                                                                                       // 13770
        while (true) {                                                                                                 // 13771
            if (row > foldStart) {                                                                                     // 13772
                row = foldLine.end.row+1;                                                                              // 13773
                foldLine = this.session.getNextFoldLine(row, foldLine);                                                // 13774
                foldStart = foldLine ? foldLine.start.row :Infinity;                                                   // 13775
            }                                                                                                          // 13776
            if (row > last)                                                                                            // 13777
                break;                                                                                                 // 13778
                                                                                                                       // 13779
            var lineElement = lineElements[lineElementsIdx++];                                                         // 13780
            if (lineElement) {                                                                                         // 13781
                var html = [];                                                                                         // 13782
                this.$renderLine(                                                                                      // 13783
                    html, row, !this.$useLineGroups(), row == foldStart ? foldLine : false                             // 13784
                );                                                                                                     // 13785
                lineElement.style.height = config.lineHeight * this.session.getRowLength(row) + "px";                  // 13786
                lineElement.innerHTML = html.join("");                                                                 // 13787
            }                                                                                                          // 13788
            row++;                                                                                                     // 13789
        }                                                                                                              // 13790
    };                                                                                                                 // 13791
                                                                                                                       // 13792
    this.scrollLines = function(config) {                                                                              // 13793
        var oldConfig = this.config;                                                                                   // 13794
        this.config = config;                                                                                          // 13795
                                                                                                                       // 13796
        if (!oldConfig || oldConfig.lastRow < config.firstRow)                                                         // 13797
            return this.update(config);                                                                                // 13798
                                                                                                                       // 13799
        if (config.lastRow < oldConfig.firstRow)                                                                       // 13800
            return this.update(config);                                                                                // 13801
                                                                                                                       // 13802
        var el = this.element;                                                                                         // 13803
        if (oldConfig.firstRow < config.firstRow)                                                                      // 13804
            for (var row=this.session.getFoldedRowCount(oldConfig.firstRow, config.firstRow - 1); row>0; row--)        // 13805
                el.removeChild(el.firstChild);                                                                         // 13806
                                                                                                                       // 13807
        if (oldConfig.lastRow > config.lastRow)                                                                        // 13808
            for (var row=this.session.getFoldedRowCount(config.lastRow + 1, oldConfig.lastRow); row>0; row--)          // 13809
                el.removeChild(el.lastChild);                                                                          // 13810
                                                                                                                       // 13811
        if (config.firstRow < oldConfig.firstRow) {                                                                    // 13812
            var fragment = this.$renderLinesFragment(config, config.firstRow, oldConfig.firstRow - 1);                 // 13813
            if (el.firstChild)                                                                                         // 13814
                el.insertBefore(fragment, el.firstChild);                                                              // 13815
            else                                                                                                       // 13816
                el.appendChild(fragment);                                                                              // 13817
        }                                                                                                              // 13818
                                                                                                                       // 13819
        if (config.lastRow > oldConfig.lastRow) {                                                                      // 13820
            var fragment = this.$renderLinesFragment(config, oldConfig.lastRow + 1, config.lastRow);                   // 13821
            el.appendChild(fragment);                                                                                  // 13822
        }                                                                                                              // 13823
    };                                                                                                                 // 13824
                                                                                                                       // 13825
    this.$renderLinesFragment = function(config, firstRow, lastRow) {                                                  // 13826
        var fragment = this.element.ownerDocument.createDocumentFragment();                                            // 13827
        var row = firstRow;                                                                                            // 13828
        var foldLine = this.session.getNextFoldLine(row);                                                              // 13829
        var foldStart = foldLine ? foldLine.start.row : Infinity;                                                      // 13830
                                                                                                                       // 13831
        while (true) {                                                                                                 // 13832
            if (row > foldStart) {                                                                                     // 13833
                row = foldLine.end.row+1;                                                                              // 13834
                foldLine = this.session.getNextFoldLine(row, foldLine);                                                // 13835
                foldStart = foldLine ? foldLine.start.row : Infinity;                                                  // 13836
            }                                                                                                          // 13837
            if (row > lastRow)                                                                                         // 13838
                break;                                                                                                 // 13839
                                                                                                                       // 13840
            var container = dom.createElement("div");                                                                  // 13841
                                                                                                                       // 13842
            var html = [];                                                                                             // 13843
            this.$renderLine(html, row, false, row == foldStart ? foldLine : false);                                   // 13844
            container.innerHTML = html.join("");                                                                       // 13845
            if (this.$useLineGroups()) {                                                                               // 13846
                container.className = 'ace_line_group';                                                                // 13847
                fragment.appendChild(container);                                                                       // 13848
                container.style.height = config.lineHeight * this.session.getRowLength(row) + "px";                    // 13849
                                                                                                                       // 13850
            } else {                                                                                                   // 13851
                while(container.firstChild)                                                                            // 13852
                    fragment.appendChild(container.firstChild);                                                        // 13853
            }                                                                                                          // 13854
                                                                                                                       // 13855
            row++;                                                                                                     // 13856
        }                                                                                                              // 13857
        return fragment;                                                                                               // 13858
    };                                                                                                                 // 13859
                                                                                                                       // 13860
    this.update = function(config) {                                                                                   // 13861
        this.config = config;                                                                                          // 13862
                                                                                                                       // 13863
        var html = [];                                                                                                 // 13864
        var firstRow = config.firstRow, lastRow = config.lastRow;                                                      // 13865
                                                                                                                       // 13866
        var row = firstRow;                                                                                            // 13867
        var foldLine = this.session.getNextFoldLine(row);                                                              // 13868
        var foldStart = foldLine ? foldLine.start.row : Infinity;                                                      // 13869
                                                                                                                       // 13870
        while (true) {                                                                                                 // 13871
            if (row > foldStart) {                                                                                     // 13872
                row = foldLine.end.row+1;                                                                              // 13873
                foldLine = this.session.getNextFoldLine(row, foldLine);                                                // 13874
                foldStart = foldLine ? foldLine.start.row :Infinity;                                                   // 13875
            }                                                                                                          // 13876
            if (row > lastRow)                                                                                         // 13877
                break;                                                                                                 // 13878
                                                                                                                       // 13879
            if (this.$useLineGroups())                                                                                 // 13880
                html.push("<div class='ace_line_group' style='height:", config.lineHeight*this.session.getRowLength(row), "px'>")
                                                                                                                       // 13882
            this.$renderLine(html, row, false, row == foldStart ? foldLine : false);                                   // 13883
                                                                                                                       // 13884
            if (this.$useLineGroups())                                                                                 // 13885
                html.push("</div>"); // end the line group                                                             // 13886
                                                                                                                       // 13887
            row++;                                                                                                     // 13888
        }                                                                                                              // 13889
        this.element.innerHTML = html.join("");                                                                        // 13890
    };                                                                                                                 // 13891
                                                                                                                       // 13892
    this.$textToken = {                                                                                                // 13893
        "text": true,                                                                                                  // 13894
        "rparen": true,                                                                                                // 13895
        "lparen": true                                                                                                 // 13896
    };                                                                                                                 // 13897
                                                                                                                       // 13898
    this.$renderToken = function(stringBuilder, screenColumn, token, value) {                                          // 13899
        var self = this;                                                                                               // 13900
        var replaceReg = /\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g;
        var replaceFunc = function(c, a, b, tabIdx, idx4) {                                                            // 13902
            if (a) {                                                                                                   // 13903
                return self.showInvisibles                                                                             // 13904
                    ? "<span class='ace_invisible ace_invisible_space'>" + lang.stringRepeat(self.SPACE_CHAR, c.length) + "</span>"
                    : c;                                                                                               // 13906
            } else if (c == "&") {                                                                                     // 13907
                return "&#38;";                                                                                        // 13908
            } else if (c == "<") {                                                                                     // 13909
                return "&#60;";                                                                                        // 13910
            } else if (c == ">") {                                                                                     // 13911
                return "&#62;";                                                                                        // 13912
            } else if (c == "\t") {                                                                                    // 13913
                var tabSize = self.session.getScreenTabSize(screenColumn + tabIdx);                                    // 13914
                screenColumn += tabSize - 1;                                                                           // 13915
                return self.$tabStrings[tabSize];                                                                      // 13916
            } else if (c == "\u3000") {                                                                                // 13917
                var classToUse = self.showInvisibles ? "ace_cjk ace_invisible ace_invisible_space" : "ace_cjk";        // 13918
                var space = self.showInvisibles ? self.SPACE_CHAR : "";                                                // 13919
                screenColumn += 1;                                                                                     // 13920
                return "<span class='" + classToUse + "' style='width:" +                                              // 13921
                    (self.config.characterWidth * 2) +                                                                 // 13922
                    "px'>" + space + "</span>";                                                                        // 13923
            } else if (b) {                                                                                            // 13924
                return "<span class='ace_invisible ace_invisible_space ace_invalid'>" + self.SPACE_CHAR + "</span>";   // 13925
            } else {                                                                                                   // 13926
                screenColumn += 1;                                                                                     // 13927
                return "<span class='ace_cjk' style='width:" +                                                         // 13928
                    (self.config.characterWidth * 2) +                                                                 // 13929
                    "px'>" + c + "</span>";                                                                            // 13930
            }                                                                                                          // 13931
        };                                                                                                             // 13932
                                                                                                                       // 13933
        var output = value.replace(replaceReg, replaceFunc);                                                           // 13934
                                                                                                                       // 13935
        if (!this.$textToken[token.type]) {                                                                            // 13936
            var classes = "ace_" + token.type.replace(/\./g, " ace_");                                                 // 13937
            var style = "";                                                                                            // 13938
            if (token.type == "fold")                                                                                  // 13939
                style = " style='width:" + (token.value.length * this.config.characterWidth) + "px;' ";                // 13940
            stringBuilder.push("<span class='", classes, "'", style, ">", output, "</span>");                          // 13941
        }                                                                                                              // 13942
        else {                                                                                                         // 13943
            stringBuilder.push(output);                                                                                // 13944
        }                                                                                                              // 13945
        return screenColumn + value.length;                                                                            // 13946
    };                                                                                                                 // 13947
                                                                                                                       // 13948
    this.renderIndentGuide = function(stringBuilder, value, max) {                                                     // 13949
        var cols = value.search(this.$indentGuideRe);                                                                  // 13950
        if (cols <= 0 || cols >= max)                                                                                  // 13951
            return value;                                                                                              // 13952
        if (value[0] == " ") {                                                                                         // 13953
            cols -= cols % this.tabSize;                                                                               // 13954
            stringBuilder.push(lang.stringRepeat(this.$tabStrings[" "], cols/this.tabSize));                           // 13955
            return value.substr(cols);                                                                                 // 13956
        } else if (value[0] == "\t") {                                                                                 // 13957
            stringBuilder.push(lang.stringRepeat(this.$tabStrings["\t"], cols));                                       // 13958
            return value.substr(cols);                                                                                 // 13959
        }                                                                                                              // 13960
        return value;                                                                                                  // 13961
    };                                                                                                                 // 13962
                                                                                                                       // 13963
    this.$renderWrappedLine = function(stringBuilder, tokens, splits, onlyContents) {                                  // 13964
        var chars = 0;                                                                                                 // 13965
        var split = 0;                                                                                                 // 13966
        var splitChars = splits[0];                                                                                    // 13967
        var screenColumn = 0;                                                                                          // 13968
                                                                                                                       // 13969
        for (var i = 0; i < tokens.length; i++) {                                                                      // 13970
            var token = tokens[i];                                                                                     // 13971
            var value = token.value;                                                                                   // 13972
            if (i == 0 && this.displayIndentGuides) {                                                                  // 13973
                chars = value.length;                                                                                  // 13974
                value = this.renderIndentGuide(stringBuilder, value, splitChars);                                      // 13975
                if (!value)                                                                                            // 13976
                    continue;                                                                                          // 13977
                chars -= value.length;                                                                                 // 13978
            }                                                                                                          // 13979
                                                                                                                       // 13980
            if (chars + value.length < splitChars) {                                                                   // 13981
                screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);                           // 13982
                chars += value.length;                                                                                 // 13983
            } else {                                                                                                   // 13984
                while (chars + value.length >= splitChars) {                                                           // 13985
                    screenColumn = this.$renderToken(                                                                  // 13986
                        stringBuilder, screenColumn,                                                                   // 13987
                        token, value.substring(0, splitChars - chars)                                                  // 13988
                    );                                                                                                 // 13989
                    value = value.substring(splitChars - chars);                                                       // 13990
                    chars = splitChars;                                                                                // 13991
                                                                                                                       // 13992
                    if (!onlyContents) {                                                                               // 13993
                        stringBuilder.push("</div>",                                                                   // 13994
                            "<div class='ace_line' style='height:",                                                    // 13995
                            this.config.lineHeight, "px'>"                                                             // 13996
                        );                                                                                             // 13997
                    }                                                                                                  // 13998
                                                                                                                       // 13999
                    stringBuilder.push(lang.stringRepeat("\xa0", splits.indent));                                      // 14000
                                                                                                                       // 14001
                    split ++;                                                                                          // 14002
                    screenColumn = 0;                                                                                  // 14003
                    splitChars = splits[split] || Number.MAX_VALUE;                                                    // 14004
                }                                                                                                      // 14005
                if (value.length != 0) {                                                                               // 14006
                    chars += value.length;                                                                             // 14007
                    screenColumn = this.$renderToken(                                                                  // 14008
                        stringBuilder, screenColumn, token, value                                                      // 14009
                    );                                                                                                 // 14010
                }                                                                                                      // 14011
            }                                                                                                          // 14012
        }                                                                                                              // 14013
    };                                                                                                                 // 14014
                                                                                                                       // 14015
    this.$renderSimpleLine = function(stringBuilder, tokens) {                                                         // 14016
        var screenColumn = 0;                                                                                          // 14017
        var token = tokens[0];                                                                                         // 14018
        var value = token.value;                                                                                       // 14019
        if (this.displayIndentGuides)                                                                                  // 14020
            value = this.renderIndentGuide(stringBuilder, value);                                                      // 14021
        if (value)                                                                                                     // 14022
            screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);                               // 14023
        for (var i = 1; i < tokens.length; i++) {                                                                      // 14024
            token = tokens[i];                                                                                         // 14025
            value = token.value;                                                                                       // 14026
            screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);                               // 14027
        }                                                                                                              // 14028
    };                                                                                                                 // 14029
    this.$renderLine = function(stringBuilder, row, onlyContents, foldLine) {                                          // 14030
        if (!foldLine && foldLine != false)                                                                            // 14031
            foldLine = this.session.getFoldLine(row);                                                                  // 14032
                                                                                                                       // 14033
        if (foldLine)                                                                                                  // 14034
            var tokens = this.$getFoldLineTokens(row, foldLine);                                                       // 14035
        else                                                                                                           // 14036
            var tokens = this.session.getTokens(row);                                                                  // 14037
                                                                                                                       // 14038
                                                                                                                       // 14039
        if (!onlyContents) {                                                                                           // 14040
            stringBuilder.push(                                                                                        // 14041
                "<div class='ace_line' style='height:",                                                                // 14042
                    this.config.lineHeight * (                                                                         // 14043
                        this.$useLineGroups() ? 1 :this.session.getRowLength(row)                                      // 14044
                    ), "px'>"                                                                                          // 14045
            );                                                                                                         // 14046
        }                                                                                                              // 14047
                                                                                                                       // 14048
        if (tokens.length) {                                                                                           // 14049
            var splits = this.session.getRowSplitData(row);                                                            // 14050
            if (splits && splits.length)                                                                               // 14051
                this.$renderWrappedLine(stringBuilder, tokens, splits, onlyContents);                                  // 14052
            else                                                                                                       // 14053
                this.$renderSimpleLine(stringBuilder, tokens);                                                         // 14054
        }                                                                                                              // 14055
                                                                                                                       // 14056
        if (this.showInvisibles) {                                                                                     // 14057
            if (foldLine)                                                                                              // 14058
                row = foldLine.end.row                                                                                 // 14059
                                                                                                                       // 14060
            stringBuilder.push(                                                                                        // 14061
                "<span class='ace_invisible ace_invisible_eol'>",                                                      // 14062
                row == this.session.getLength() - 1 ? this.EOF_CHAR : this.EOL_CHAR,                                   // 14063
                "</span>"                                                                                              // 14064
            );                                                                                                         // 14065
        }                                                                                                              // 14066
        if (!onlyContents)                                                                                             // 14067
            stringBuilder.push("</div>");                                                                              // 14068
    };                                                                                                                 // 14069
                                                                                                                       // 14070
    this.$getFoldLineTokens = function(row, foldLine) {                                                                // 14071
        var session = this.session;                                                                                    // 14072
        var renderTokens = [];                                                                                         // 14073
                                                                                                                       // 14074
        function addTokens(tokens, from, to) {                                                                         // 14075
            var idx = 0, col = 0;                                                                                      // 14076
            while ((col + tokens[idx].value.length) < from) {                                                          // 14077
                col += tokens[idx].value.length;                                                                       // 14078
                idx++;                                                                                                 // 14079
                                                                                                                       // 14080
                if (idx == tokens.length)                                                                              // 14081
                    return;                                                                                            // 14082
            }                                                                                                          // 14083
            if (col != from) {                                                                                         // 14084
                var value = tokens[idx].value.substring(from - col);                                                   // 14085
                if (value.length > (to - from))                                                                        // 14086
                    value = value.substring(0, to - from);                                                             // 14087
                                                                                                                       // 14088
                renderTokens.push({                                                                                    // 14089
                    type: tokens[idx].type,                                                                            // 14090
                    value: value                                                                                       // 14091
                });                                                                                                    // 14092
                                                                                                                       // 14093
                col = from + value.length;                                                                             // 14094
                idx += 1;                                                                                              // 14095
            }                                                                                                          // 14096
                                                                                                                       // 14097
            while (col < to && idx < tokens.length) {                                                                  // 14098
                var value = tokens[idx].value;                                                                         // 14099
                if (value.length + col > to) {                                                                         // 14100
                    renderTokens.push({                                                                                // 14101
                        type: tokens[idx].type,                                                                        // 14102
                        value: value.substring(0, to - col)                                                            // 14103
                    });                                                                                                // 14104
                } else                                                                                                 // 14105
                    renderTokens.push(tokens[idx]);                                                                    // 14106
                col += value.length;                                                                                   // 14107
                idx += 1;                                                                                              // 14108
            }                                                                                                          // 14109
        }                                                                                                              // 14110
                                                                                                                       // 14111
        var tokens = session.getTokens(row);                                                                           // 14112
        foldLine.walk(function(placeholder, row, column, lastColumn, isNewRow) {                                       // 14113
            if (placeholder != null) {                                                                                 // 14114
                renderTokens.push({                                                                                    // 14115
                    type: "fold",                                                                                      // 14116
                    value: placeholder                                                                                 // 14117
                });                                                                                                    // 14118
            } else {                                                                                                   // 14119
                if (isNewRow)                                                                                          // 14120
                    tokens = session.getTokens(row);                                                                   // 14121
                                                                                                                       // 14122
                if (tokens.length)                                                                                     // 14123
                    addTokens(tokens, lastColumn, column);                                                             // 14124
            }                                                                                                          // 14125
        }, foldLine.end.row, this.session.getLine(foldLine.end.row).length);                                           // 14126
                                                                                                                       // 14127
        return renderTokens;                                                                                           // 14128
    };                                                                                                                 // 14129
                                                                                                                       // 14130
    this.$useLineGroups = function() {                                                                                 // 14131
        return this.session.getUseWrapMode();                                                                          // 14132
    };                                                                                                                 // 14133
                                                                                                                       // 14134
    this.destroy = function() {                                                                                        // 14135
        clearInterval(this.$pollSizeChangesTimer);                                                                     // 14136
        if (this.$measureNode)                                                                                         // 14137
            this.$measureNode.parentNode.removeChild(this.$measureNode);                                               // 14138
        delete this.$measureNode;                                                                                      // 14139
    };                                                                                                                 // 14140
                                                                                                                       // 14141
}).call(Text.prototype);                                                                                               // 14142
                                                                                                                       // 14143
exports.Text = Text;                                                                                                   // 14144
                                                                                                                       // 14145
});                                                                                                                    // 14146
                                                                                                                       // 14147
define("ace/layer/cursor",["require","exports","module","ace/lib/dom"], function(require, exports, module) {           // 14148
"use strict";                                                                                                          // 14149
                                                                                                                       // 14150
var dom = require("../lib/dom");                                                                                       // 14151
var isIE8;                                                                                                             // 14152
                                                                                                                       // 14153
var Cursor = function(parentEl) {                                                                                      // 14154
    this.element = dom.createElement("div");                                                                           // 14155
    this.element.className = "ace_layer ace_cursor-layer";                                                             // 14156
    parentEl.appendChild(this.element);                                                                                // 14157
                                                                                                                       // 14158
    if (isIE8 === undefined)                                                                                           // 14159
        isIE8 = !("opacity" in this.element.style);                                                                    // 14160
                                                                                                                       // 14161
    this.isVisible = false;                                                                                            // 14162
    this.isBlinking = true;                                                                                            // 14163
    this.blinkInterval = 1000;                                                                                         // 14164
    this.smoothBlinking = false;                                                                                       // 14165
                                                                                                                       // 14166
    this.cursors = [];                                                                                                 // 14167
    this.cursor = this.addCursor();                                                                                    // 14168
    dom.addCssClass(this.element, "ace_hidden-cursors");                                                               // 14169
    this.$updateCursors = (isIE8                                                                                       // 14170
        ? this.$updateVisibility                                                                                       // 14171
        : this.$updateOpacity).bind(this);                                                                             // 14172
};                                                                                                                     // 14173
                                                                                                                       // 14174
(function() {                                                                                                          // 14175
                                                                                                                       // 14176
    this.$updateVisibility = function(val) {                                                                           // 14177
        var cursors = this.cursors;                                                                                    // 14178
        for (var i = cursors.length; i--; )                                                                            // 14179
            cursors[i].style.visibility = val ? "" : "hidden";                                                         // 14180
    };                                                                                                                 // 14181
    this.$updateOpacity = function(val) {                                                                              // 14182
        var cursors = this.cursors;                                                                                    // 14183
        for (var i = cursors.length; i--; )                                                                            // 14184
            cursors[i].style.opacity = val ? "" : "0";                                                                 // 14185
    };                                                                                                                 // 14186
                                                                                                                       // 14187
                                                                                                                       // 14188
    this.$padding = 0;                                                                                                 // 14189
    this.setPadding = function(padding) {                                                                              // 14190
        this.$padding = padding;                                                                                       // 14191
    };                                                                                                                 // 14192
                                                                                                                       // 14193
    this.setSession = function(session) {                                                                              // 14194
        this.session = session;                                                                                        // 14195
    };                                                                                                                 // 14196
                                                                                                                       // 14197
    this.setBlinking = function(blinking) {                                                                            // 14198
        if (blinking != this.isBlinking){                                                                              // 14199
            this.isBlinking = blinking;                                                                                // 14200
            this.restartTimer();                                                                                       // 14201
        }                                                                                                              // 14202
    };                                                                                                                 // 14203
                                                                                                                       // 14204
    this.setBlinkInterval = function(blinkInterval) {                                                                  // 14205
        if (blinkInterval != this.blinkInterval){                                                                      // 14206
            this.blinkInterval = blinkInterval;                                                                        // 14207
            this.restartTimer();                                                                                       // 14208
        }                                                                                                              // 14209
    };                                                                                                                 // 14210
                                                                                                                       // 14211
    this.setSmoothBlinking = function(smoothBlinking) {                                                                // 14212
        if (smoothBlinking != this.smoothBlinking && !isIE8) {                                                         // 14213
            this.smoothBlinking = smoothBlinking;                                                                      // 14214
            dom.setCssClass(this.element, "ace_smooth-blinking", smoothBlinking);                                      // 14215
            this.$updateCursors(true);                                                                                 // 14216
            this.$updateCursors = (this.$updateOpacity).bind(this);                                                    // 14217
            this.restartTimer();                                                                                       // 14218
        }                                                                                                              // 14219
    };                                                                                                                 // 14220
                                                                                                                       // 14221
    this.addCursor = function() {                                                                                      // 14222
        var el = dom.createElement("div");                                                                             // 14223
        el.className = "ace_cursor";                                                                                   // 14224
        this.element.appendChild(el);                                                                                  // 14225
        this.cursors.push(el);                                                                                         // 14226
        return el;                                                                                                     // 14227
    };                                                                                                                 // 14228
                                                                                                                       // 14229
    this.removeCursor = function() {                                                                                   // 14230
        if (this.cursors.length > 1) {                                                                                 // 14231
            var el = this.cursors.pop();                                                                               // 14232
            el.parentNode.removeChild(el);                                                                             // 14233
            return el;                                                                                                 // 14234
        }                                                                                                              // 14235
    };                                                                                                                 // 14236
                                                                                                                       // 14237
    this.hideCursor = function() {                                                                                     // 14238
        this.isVisible = false;                                                                                        // 14239
        dom.addCssClass(this.element, "ace_hidden-cursors");                                                           // 14240
        this.restartTimer();                                                                                           // 14241
    };                                                                                                                 // 14242
                                                                                                                       // 14243
    this.showCursor = function() {                                                                                     // 14244
        this.isVisible = true;                                                                                         // 14245
        dom.removeCssClass(this.element, "ace_hidden-cursors");                                                        // 14246
        this.restartTimer();                                                                                           // 14247
    };                                                                                                                 // 14248
                                                                                                                       // 14249
    this.restartTimer = function() {                                                                                   // 14250
        var update = this.$updateCursors;                                                                              // 14251
        clearInterval(this.intervalId);                                                                                // 14252
        clearTimeout(this.timeoutId);                                                                                  // 14253
        if (this.smoothBlinking) {                                                                                     // 14254
            dom.removeCssClass(this.element, "ace_smooth-blinking");                                                   // 14255
        }                                                                                                              // 14256
                                                                                                                       // 14257
        update(true);                                                                                                  // 14258
                                                                                                                       // 14259
        if (!this.isBlinking || !this.blinkInterval || !this.isVisible)                                                // 14260
            return;                                                                                                    // 14261
                                                                                                                       // 14262
        if (this.smoothBlinking) {                                                                                     // 14263
            setTimeout(function(){                                                                                     // 14264
                dom.addCssClass(this.element, "ace_smooth-blinking");                                                  // 14265
            }.bind(this));                                                                                             // 14266
        }                                                                                                              // 14267
                                                                                                                       // 14268
        var blink = function(){                                                                                        // 14269
            this.timeoutId = setTimeout(function() {                                                                   // 14270
                update(false);                                                                                         // 14271
            }, 0.6 * this.blinkInterval);                                                                              // 14272
        }.bind(this);                                                                                                  // 14273
                                                                                                                       // 14274
        this.intervalId = setInterval(function() {                                                                     // 14275
            update(true);                                                                                              // 14276
            blink();                                                                                                   // 14277
        }, this.blinkInterval);                                                                                        // 14278
                                                                                                                       // 14279
        blink();                                                                                                       // 14280
    };                                                                                                                 // 14281
                                                                                                                       // 14282
    this.getPixelPosition = function(position, onScreen) {                                                             // 14283
        if (!this.config || !this.session)                                                                             // 14284
            return {left : 0, top : 0};                                                                                // 14285
                                                                                                                       // 14286
        if (!position)                                                                                                 // 14287
            position = this.session.selection.getCursor();                                                             // 14288
        var pos = this.session.documentToScreenPosition(position);                                                     // 14289
        var cursorLeft = this.$padding + pos.column * this.config.characterWidth;                                      // 14290
        var cursorTop = (pos.row - (onScreen ? this.config.firstRowScreen : 0)) *                                      // 14291
            this.config.lineHeight;                                                                                    // 14292
                                                                                                                       // 14293
        return {left : cursorLeft, top : cursorTop};                                                                   // 14294
    };                                                                                                                 // 14295
                                                                                                                       // 14296
    this.update = function(config) {                                                                                   // 14297
        this.config = config;                                                                                          // 14298
                                                                                                                       // 14299
        var selections = this.session.$selectionMarkers;                                                               // 14300
        var i = 0, cursorIndex = 0;                                                                                    // 14301
                                                                                                                       // 14302
        if (selections === undefined || selections.length === 0){                                                      // 14303
            selections = [{cursor: null}];                                                                             // 14304
        }                                                                                                              // 14305
                                                                                                                       // 14306
        for (var i = 0, n = selections.length; i < n; i++) {                                                           // 14307
            var pixelPos = this.getPixelPosition(selections[i].cursor, true);                                          // 14308
            if ((pixelPos.top > config.height + config.offset ||                                                       // 14309
                 pixelPos.top < 0) && i > 1) {                                                                         // 14310
                continue;                                                                                              // 14311
            }                                                                                                          // 14312
                                                                                                                       // 14313
            var style = (this.cursors[cursorIndex++] || this.addCursor()).style;                                       // 14314
                                                                                                                       // 14315
            if (!this.drawCursor) {                                                                                    // 14316
                style.left = pixelPos.left + "px";                                                                     // 14317
                style.top = pixelPos.top + "px";                                                                       // 14318
                style.width = config.characterWidth + "px";                                                            // 14319
                style.height = config.lineHeight + "px";                                                               // 14320
            } else {                                                                                                   // 14321
                this.drawCursor(style, pixelPos, config, selections[i], this.session);                                 // 14322
            }                                                                                                          // 14323
        }                                                                                                              // 14324
        while (this.cursors.length > cursorIndex)                                                                      // 14325
            this.removeCursor();                                                                                       // 14326
                                                                                                                       // 14327
        var overwrite = this.session.getOverwrite();                                                                   // 14328
        this.$setOverwrite(overwrite);                                                                                 // 14329
        this.$pixelPos = pixelPos;                                                                                     // 14330
        this.restartTimer();                                                                                           // 14331
    };                                                                                                                 // 14332
                                                                                                                       // 14333
    this.drawCursor = null;                                                                                            // 14334
                                                                                                                       // 14335
    this.$setOverwrite = function(overwrite) {                                                                         // 14336
        if (overwrite != this.overwrite) {                                                                             // 14337
            this.overwrite = overwrite;                                                                                // 14338
            if (overwrite)                                                                                             // 14339
                dom.addCssClass(this.element, "ace_overwrite-cursors");                                                // 14340
            else                                                                                                       // 14341
                dom.removeCssClass(this.element, "ace_overwrite-cursors");                                             // 14342
        }                                                                                                              // 14343
    };                                                                                                                 // 14344
                                                                                                                       // 14345
    this.destroy = function() {                                                                                        // 14346
        clearInterval(this.intervalId);                                                                                // 14347
        clearTimeout(this.timeoutId);                                                                                  // 14348
    };                                                                                                                 // 14349
                                                                                                                       // 14350
}).call(Cursor.prototype);                                                                                             // 14351
                                                                                                                       // 14352
exports.Cursor = Cursor;                                                                                               // 14353
                                                                                                                       // 14354
});                                                                                                                    // 14355
                                                                                                                       // 14356
define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"], function(require, exports, module) {
"use strict";                                                                                                          // 14358
                                                                                                                       // 14359
var oop = require("./lib/oop");                                                                                        // 14360
var dom = require("./lib/dom");                                                                                        // 14361
var event = require("./lib/event");                                                                                    // 14362
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 14363
var ScrollBar = function(parent) {                                                                                     // 14364
    this.element = dom.createElement("div");                                                                           // 14365
    this.element.className = "ace_scrollbar ace_scrollbar" + this.classSuffix;                                         // 14366
                                                                                                                       // 14367
    this.inner = dom.createElement("div");                                                                             // 14368
    this.inner.className = "ace_scrollbar-inner";                                                                      // 14369
    this.element.appendChild(this.inner);                                                                              // 14370
                                                                                                                       // 14371
    parent.appendChild(this.element);                                                                                  // 14372
                                                                                                                       // 14373
    this.setVisible(false);                                                                                            // 14374
    this.skipEvent = false;                                                                                            // 14375
                                                                                                                       // 14376
    event.addListener(this.element, "scroll", this.onScroll.bind(this));                                               // 14377
    event.addListener(this.element, "mousedown", event.preventDefault);                                                // 14378
};                                                                                                                     // 14379
                                                                                                                       // 14380
(function() {                                                                                                          // 14381
    oop.implement(this, EventEmitter);                                                                                 // 14382
                                                                                                                       // 14383
    this.setVisible = function(isVisible) {                                                                            // 14384
        this.element.style.display = isVisible ? "" : "none";                                                          // 14385
        this.isVisible = isVisible;                                                                                    // 14386
    };                                                                                                                 // 14387
}).call(ScrollBar.prototype);                                                                                          // 14388
var VScrollBar = function(parent, renderer) {                                                                          // 14389
    ScrollBar.call(this, parent);                                                                                      // 14390
    this.scrollTop = 0;                                                                                                // 14391
    renderer.$scrollbarWidth =                                                                                         // 14392
    this.width = dom.scrollbarWidth(parent.ownerDocument);                                                             // 14393
    this.inner.style.width =                                                                                           // 14394
    this.element.style.width = (this.width || 15) + 5 + "px";                                                          // 14395
};                                                                                                                     // 14396
                                                                                                                       // 14397
oop.inherits(VScrollBar, ScrollBar);                                                                                   // 14398
                                                                                                                       // 14399
(function() {                                                                                                          // 14400
                                                                                                                       // 14401
    this.classSuffix = '-v';                                                                                           // 14402
    this.onScroll = function() {                                                                                       // 14403
        if (!this.skipEvent) {                                                                                         // 14404
            this.scrollTop = this.element.scrollTop;                                                                   // 14405
            this._emit("scroll", {data: this.scrollTop});                                                              // 14406
        }                                                                                                              // 14407
        this.skipEvent = false;                                                                                        // 14408
    };                                                                                                                 // 14409
    this.getWidth = function() {                                                                                       // 14410
        return this.isVisible ? this.width : 0;                                                                        // 14411
    };                                                                                                                 // 14412
    this.setHeight = function(height) {                                                                                // 14413
        this.element.style.height = height + "px";                                                                     // 14414
    };                                                                                                                 // 14415
    this.setInnerHeight = function(height) {                                                                           // 14416
        this.inner.style.height = height + "px";                                                                       // 14417
    };                                                                                                                 // 14418
    this.setScrollHeight = function(height) {                                                                          // 14419
        this.inner.style.height = height + "px";                                                                       // 14420
    };                                                                                                                 // 14421
    this.setScrollTop = function(scrollTop) {                                                                          // 14422
        if (this.scrollTop != scrollTop) {                                                                             // 14423
            this.skipEvent = true;                                                                                     // 14424
            this.scrollTop = this.element.scrollTop = scrollTop;                                                       // 14425
        }                                                                                                              // 14426
    };                                                                                                                 // 14427
                                                                                                                       // 14428
}).call(VScrollBar.prototype);                                                                                         // 14429
var HScrollBar = function(parent, renderer) {                                                                          // 14430
    ScrollBar.call(this, parent);                                                                                      // 14431
    this.scrollLeft = 0;                                                                                               // 14432
    this.height = renderer.$scrollbarWidth;                                                                            // 14433
    this.inner.style.height =                                                                                          // 14434
    this.element.style.height = (this.height || 15) + 5 + "px";                                                        // 14435
};                                                                                                                     // 14436
                                                                                                                       // 14437
oop.inherits(HScrollBar, ScrollBar);                                                                                   // 14438
                                                                                                                       // 14439
(function() {                                                                                                          // 14440
                                                                                                                       // 14441
    this.classSuffix = '-h';                                                                                           // 14442
    this.onScroll = function() {                                                                                       // 14443
        if (!this.skipEvent) {                                                                                         // 14444
            this.scrollLeft = this.element.scrollLeft;                                                                 // 14445
            this._emit("scroll", {data: this.scrollLeft});                                                             // 14446
        }                                                                                                              // 14447
        this.skipEvent = false;                                                                                        // 14448
    };                                                                                                                 // 14449
    this.getHeight = function() {                                                                                      // 14450
        return this.isVisible ? this.height : 0;                                                                       // 14451
    };                                                                                                                 // 14452
    this.setWidth = function(width) {                                                                                  // 14453
        this.element.style.width = width + "px";                                                                       // 14454
    };                                                                                                                 // 14455
    this.setInnerWidth = function(width) {                                                                             // 14456
        this.inner.style.width = width + "px";                                                                         // 14457
    };                                                                                                                 // 14458
    this.setScrollWidth = function(width) {                                                                            // 14459
        this.inner.style.width = width + "px";                                                                         // 14460
    };                                                                                                                 // 14461
    this.setScrollLeft = function(scrollLeft) {                                                                        // 14462
        if (this.scrollLeft != scrollLeft) {                                                                           // 14463
            this.skipEvent = true;                                                                                     // 14464
            this.scrollLeft = this.element.scrollLeft = scrollLeft;                                                    // 14465
        }                                                                                                              // 14466
    };                                                                                                                 // 14467
                                                                                                                       // 14468
}).call(HScrollBar.prototype);                                                                                         // 14469
                                                                                                                       // 14470
                                                                                                                       // 14471
exports.ScrollBar = VScrollBar; // backward compatibility                                                              // 14472
exports.ScrollBarV = VScrollBar; // backward compatibility                                                             // 14473
exports.ScrollBarH = HScrollBar; // backward compatibility                                                             // 14474
                                                                                                                       // 14475
exports.VScrollBar = VScrollBar;                                                                                       // 14476
exports.HScrollBar = HScrollBar;                                                                                       // 14477
});                                                                                                                    // 14478
                                                                                                                       // 14479
define("ace/renderloop",["require","exports","module","ace/lib/event"], function(require, exports, module) {           // 14480
"use strict";                                                                                                          // 14481
                                                                                                                       // 14482
var event = require("./lib/event");                                                                                    // 14483
                                                                                                                       // 14484
                                                                                                                       // 14485
var RenderLoop = function(onRender, win) {                                                                             // 14486
    this.onRender = onRender;                                                                                          // 14487
    this.pending = false;                                                                                              // 14488
    this.changes = 0;                                                                                                  // 14489
    this.window = win || window;                                                                                       // 14490
};                                                                                                                     // 14491
                                                                                                                       // 14492
(function() {                                                                                                          // 14493
                                                                                                                       // 14494
                                                                                                                       // 14495
    this.schedule = function(change) {                                                                                 // 14496
        this.changes = this.changes | change;                                                                          // 14497
        if (!this.pending && this.changes) {                                                                           // 14498
            this.pending = true;                                                                                       // 14499
            var _self = this;                                                                                          // 14500
            event.nextFrame(function() {                                                                               // 14501
                _self.pending = false;                                                                                 // 14502
                var changes;                                                                                           // 14503
                while (changes = _self.changes) {                                                                      // 14504
                    _self.changes = 0;                                                                                 // 14505
                    _self.onRender(changes);                                                                           // 14506
                }                                                                                                      // 14507
            }, this.window);                                                                                           // 14508
        }                                                                                                              // 14509
    };                                                                                                                 // 14510
                                                                                                                       // 14511
}).call(RenderLoop.prototype);                                                                                         // 14512
                                                                                                                       // 14513
exports.RenderLoop = RenderLoop;                                                                                       // 14514
});                                                                                                                    // 14515
                                                                                                                       // 14516
define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"], function(require, exports, module) {
                                                                                                                       // 14518
var oop = require("../lib/oop");                                                                                       // 14519
var dom = require("../lib/dom");                                                                                       // 14520
var lang = require("../lib/lang");                                                                                     // 14521
var useragent = require("../lib/useragent");                                                                           // 14522
var EventEmitter = require("../lib/event_emitter").EventEmitter;                                                       // 14523
                                                                                                                       // 14524
var CHAR_COUNT = 0;                                                                                                    // 14525
                                                                                                                       // 14526
var FontMetrics = exports.FontMetrics = function(parentEl, interval) {                                                 // 14527
    this.el = dom.createElement("div");                                                                                // 14528
    this.$setMeasureNodeStyles(this.el.style, true);                                                                   // 14529
                                                                                                                       // 14530
    this.$main = dom.createElement("div");                                                                             // 14531
    this.$setMeasureNodeStyles(this.$main.style);                                                                      // 14532
                                                                                                                       // 14533
    this.$measureNode = dom.createElement("div");                                                                      // 14534
    this.$setMeasureNodeStyles(this.$measureNode.style);                                                               // 14535
                                                                                                                       // 14536
                                                                                                                       // 14537
    this.el.appendChild(this.$main);                                                                                   // 14538
    this.el.appendChild(this.$measureNode);                                                                            // 14539
    parentEl.appendChild(this.el);                                                                                     // 14540
                                                                                                                       // 14541
    if (!CHAR_COUNT)                                                                                                   // 14542
        this.$testFractionalRect();                                                                                    // 14543
    this.$measureNode.innerHTML = lang.stringRepeat("X", CHAR_COUNT);                                                  // 14544
                                                                                                                       // 14545
    this.$characterSize = {width: 0, height: 0};                                                                       // 14546
    this.checkForSizeChanges();                                                                                        // 14547
};                                                                                                                     // 14548
                                                                                                                       // 14549
(function() {                                                                                                          // 14550
                                                                                                                       // 14551
    oop.implement(this, EventEmitter);                                                                                 // 14552
                                                                                                                       // 14553
    this.$characterSize = {width: 0, height: 0};                                                                       // 14554
                                                                                                                       // 14555
    this.$testFractionalRect = function() {                                                                            // 14556
        var el = dom.createElement("div");                                                                             // 14557
        this.$setMeasureNodeStyles(el.style);                                                                          // 14558
        el.style.width = "0.2px";                                                                                      // 14559
        document.documentElement.appendChild(el);                                                                      // 14560
        var w = el.getBoundingClientRect().width;                                                                      // 14561
        if (w > 0 && w < 1)                                                                                            // 14562
            CHAR_COUNT = 50;                                                                                           // 14563
        else                                                                                                           // 14564
            CHAR_COUNT = 100;                                                                                          // 14565
        el.parentNode.removeChild(el);                                                                                 // 14566
    };                                                                                                                 // 14567
                                                                                                                       // 14568
    this.$setMeasureNodeStyles = function(style, isRoot) {                                                             // 14569
        style.width = style.height = "auto";                                                                           // 14570
        style.left = style.top = "0px";                                                                                // 14571
        style.visibility = "hidden";                                                                                   // 14572
        style.position = "absolute";                                                                                   // 14573
        style.whiteSpace = "pre";                                                                                      // 14574
                                                                                                                       // 14575
        if (useragent.isIE < 8) {                                                                                      // 14576
            style["font-family"] = "inherit";                                                                          // 14577
        } else {                                                                                                       // 14578
            style.font = "inherit";                                                                                    // 14579
        }                                                                                                              // 14580
        style.overflow = isRoot ? "hidden" : "visible";                                                                // 14581
    };                                                                                                                 // 14582
                                                                                                                       // 14583
    this.checkForSizeChanges = function() {                                                                            // 14584
        var size = this.$measureSizes();                                                                               // 14585
        if (size && (this.$characterSize.width !== size.width || this.$characterSize.height !== size.height)) {        // 14586
            this.$measureNode.style.fontWeight = "bold";                                                               // 14587
            var boldSize = this.$measureSizes();                                                                       // 14588
            this.$measureNode.style.fontWeight = "";                                                                   // 14589
            this.$characterSize = size;                                                                                // 14590
            this.charSizes = Object.create(null);                                                                      // 14591
            this.allowBoldFonts = boldSize && boldSize.width === size.width && boldSize.height === size.height;        // 14592
            this._emit("changeCharacterSize", {data: size});                                                           // 14593
        }                                                                                                              // 14594
    };                                                                                                                 // 14595
                                                                                                                       // 14596
    this.$pollSizeChanges = function() {                                                                               // 14597
        if (this.$pollSizeChangesTimer)                                                                                // 14598
            return this.$pollSizeChangesTimer;                                                                         // 14599
        var self = this;                                                                                               // 14600
        return this.$pollSizeChangesTimer = setInterval(function() {                                                   // 14601
            self.checkForSizeChanges();                                                                                // 14602
        }, 500);                                                                                                       // 14603
    };                                                                                                                 // 14604
                                                                                                                       // 14605
    this.setPolling = function(val) {                                                                                  // 14606
        if (val) {                                                                                                     // 14607
            this.$pollSizeChanges();                                                                                   // 14608
        } else if (this.$pollSizeChangesTimer) {                                                                       // 14609
            clearInterval(this.$pollSizeChangesTimer);                                                                 // 14610
            this.$pollSizeChangesTimer = 0;                                                                            // 14611
        }                                                                                                              // 14612
    };                                                                                                                 // 14613
                                                                                                                       // 14614
    this.$measureSizes = function() {                                                                                  // 14615
        if (CHAR_COUNT === 50) {                                                                                       // 14616
            var rect = null;                                                                                           // 14617
            try {                                                                                                      // 14618
               rect = this.$measureNode.getBoundingClientRect();                                                       // 14619
            } catch(e) {                                                                                               // 14620
               rect = {width: 0, height:0 };                                                                           // 14621
            };                                                                                                         // 14622
            var size = {                                                                                               // 14623
                height: rect.height,                                                                                   // 14624
                width: rect.width / CHAR_COUNT                                                                         // 14625
            };                                                                                                         // 14626
        } else {                                                                                                       // 14627
            var size = {                                                                                               // 14628
                height: this.$measureNode.clientHeight,                                                                // 14629
                width: this.$measureNode.clientWidth / CHAR_COUNT                                                      // 14630
            };                                                                                                         // 14631
        }                                                                                                              // 14632
        if (size.width === 0 || size.height === 0)                                                                     // 14633
            return null;                                                                                               // 14634
        return size;                                                                                                   // 14635
    };                                                                                                                 // 14636
                                                                                                                       // 14637
    this.$measureCharWidth = function(ch) {                                                                            // 14638
        this.$main.innerHTML = lang.stringRepeat(ch, CHAR_COUNT);                                                      // 14639
        var rect = this.$main.getBoundingClientRect();                                                                 // 14640
        return rect.width / CHAR_COUNT;                                                                                // 14641
    };                                                                                                                 // 14642
                                                                                                                       // 14643
    this.getCharacterWidth = function(ch) {                                                                            // 14644
        var w = this.charSizes[ch];                                                                                    // 14645
        if (w === undefined) {                                                                                         // 14646
            this.charSizes[ch] = this.$measureCharWidth(ch) / this.$characterSize.width;                               // 14647
        }                                                                                                              // 14648
        return w;                                                                                                      // 14649
    };                                                                                                                 // 14650
                                                                                                                       // 14651
    this.destroy = function() {                                                                                        // 14652
        clearInterval(this.$pollSizeChangesTimer);                                                                     // 14653
        if (this.el && this.el.parentNode)                                                                             // 14654
            this.el.parentNode.removeChild(this.el);                                                                   // 14655
    };                                                                                                                 // 14656
                                                                                                                       // 14657
}).call(FontMetrics.prototype);                                                                                        // 14658
                                                                                                                       // 14659
});                                                                                                                    // 14660
                                                                                                                       // 14661
define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"], function(require, exports, module) {
"use strict";                                                                                                          // 14663
                                                                                                                       // 14664
var oop = require("./lib/oop");                                                                                        // 14665
var dom = require("./lib/dom");                                                                                        // 14666
var config = require("./config");                                                                                      // 14667
var useragent = require("./lib/useragent");                                                                            // 14668
var GutterLayer = require("./layer/gutter").Gutter;                                                                    // 14669
var MarkerLayer = require("./layer/marker").Marker;                                                                    // 14670
var TextLayer = require("./layer/text").Text;                                                                          // 14671
var CursorLayer = require("./layer/cursor").Cursor;                                                                    // 14672
var HScrollBar = require("./scrollbar").HScrollBar;                                                                    // 14673
var VScrollBar = require("./scrollbar").VScrollBar;                                                                    // 14674
var RenderLoop = require("./renderloop").RenderLoop;                                                                   // 14675
var FontMetrics = require("./layer/font_metrics").FontMetrics;                                                         // 14676
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 14677
var editorCss = ".ace_editor {\
position: relative;\
overflow: hidden;\
font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;\
direction: ltr;\
}\
.ace_scroller {\
position: absolute;\
overflow: hidden;\
top: 0;\
bottom: 0;\
background-color: inherit;\
-ms-user-select: none;\
-moz-user-select: none;\
-webkit-user-select: none;\
user-select: none;\
cursor: text;\
}\
.ace_content {\
position: absolute;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
min-width: 100%;\
}\
.ace_dragging .ace_scroller:before{\
position: absolute;\
top: 0;\
left: 0;\
right: 0;\
bottom: 0;\
content: '';\
background: rgba(250, 250, 250, 0.01);\
z-index: 1000;\
}\
.ace_dragging.ace_dark .ace_scroller:before{\
background: rgba(0, 0, 0, 0.01);\
}\
.ace_selecting, .ace_selecting * {\
cursor: text !important;\
}\
.ace_gutter {\
position: absolute;\
overflow : hidden;\
width: auto;\
top: 0;\
bottom: 0;\
left: 0;\
cursor: default;\
z-index: 4;\
-ms-user-select: none;\
-moz-user-select: none;\
-webkit-user-select: none;\
user-select: none;\
}\
.ace_gutter-active-line {\
position: absolute;\
left: 0;\
right: 0;\
}\
.ace_scroller.ace_scroll-left {\
box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\
}\
.ace_gutter-cell {\
padding-left: 19px;\
padding-right: 6px;\
background-repeat: no-repeat;\
}\
.ace_gutter-cell.ace_error {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==\");\
background-repeat: no-repeat;\
background-position: 2px center;\
}\
.ace_gutter-cell.ace_warning {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==\");\
background-position: 2px center;\
}\
.ace_gutter-cell.ace_info {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=\");\
background-position: 2px center;\
}\
.ace_dark .ace_gutter-cell.ace_info {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC\");\
}\
.ace_scrollbar {\
position: absolute;\
right: 0;\
bottom: 0;\
z-index: 6;\
}\
.ace_scrollbar-inner {\
position: absolute;\
cursor: text;\
left: 0;\
top: 0;\
}\
.ace_scrollbar-v{\
overflow-x: hidden;\
overflow-y: scroll;\
top: 0;\
}\
.ace_scrollbar-h {\
overflow-x: scroll;\
overflow-y: hidden;\
left: 0;\
}\
.ace_print-margin {\
position: absolute;\
height: 100%;\
}\
.ace_text-input {\
position: absolute;\
z-index: 0;\
width: 0.5em;\
height: 1em;\
opacity: 0;\
background: transparent;\
-moz-appearance: none;\
appearance: none;\
border: none;\
resize: none;\
outline: none;\
overflow: hidden;\
font: inherit;\
padding: 0 1px;\
margin: 0 -1px;\
text-indent: -1em;\
-ms-user-select: text;\
-moz-user-select: text;\
-webkit-user-select: text;\
user-select: text;\
white-space: pre!important;\
}\
.ace_text-input.ace_composition {\
background: inherit;\
color: inherit;\
z-index: 1000;\
opacity: 1;\
text-indent: 0;\
}\
.ace_layer {\
z-index: 1;\
position: absolute;\
overflow: hidden;\
word-wrap: normal;\
white-space: pre;\
height: 100%;\
width: 100%;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
pointer-events: none;\
}\
.ace_gutter-layer {\
position: relative;\
width: auto;\
text-align: right;\
pointer-events: auto;\
}\
.ace_text-layer {\
font: inherit !important;\
}\
.ace_cjk {\
display: inline-block;\
text-align: center;\
}\
.ace_cursor-layer {\
z-index: 4;\
}\
.ace_cursor {\
z-index: 4;\
position: absolute;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
border-left: 2px solid;\
transform: translatez(0);\
}\
.ace_slim-cursors .ace_cursor {\
border-left-width: 1px;\
}\
.ace_overwrite-cursors .ace_cursor {\
border-left-width: 0;\
border-bottom: 1px solid;\
}\
.ace_hidden-cursors .ace_cursor {\
opacity: 0.2;\
}\
.ace_smooth-blinking .ace_cursor {\
-webkit-transition: opacity 0.18s;\
transition: opacity 0.18s;\
}\
.ace_editor.ace_multiselect .ace_cursor {\
border-left-width: 1px;\
}\
.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\
position: absolute;\
z-index: 3;\
}\
.ace_marker-layer .ace_selection {\
position: absolute;\
z-index: 5;\
}\
.ace_marker-layer .ace_bracket {\
position: absolute;\
z-index: 6;\
}\
.ace_marker-layer .ace_active-line {\
position: absolute;\
z-index: 2;\
}\
.ace_marker-layer .ace_selected-word {\
position: absolute;\
z-index: 4;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
}\
.ace_line .ace_fold {\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
display: inline-block;\
height: 11px;\
margin-top: -2px;\
vertical-align: middle;\
background-image:\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\"),\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=\");\
background-repeat: no-repeat, repeat-x;\
background-position: center center, top left;\
color: transparent;\
border: 1px solid black;\
border-radius: 2px;\
cursor: pointer;\
pointer-events: auto;\
}\
.ace_dark .ace_fold {\
}\
.ace_fold:hover{\
background-image:\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\"),\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC\");\
}\
.ace_tooltip {\
background-color: #FFF;\
background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));\
background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));\
border: 1px solid gray;\
border-radius: 1px;\
box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\
color: black;\
max-width: 100%;\
padding: 3px 4px;\
position: fixed;\
z-index: 999999;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
cursor: default;\
white-space: pre;\
word-wrap: break-word;\
line-height: normal;\
font-style: normal;\
font-weight: normal;\
letter-spacing: normal;\
pointer-events: none;\
}\
.ace_folding-enabled > .ace_gutter-cell {\
padding-right: 13px;\
}\
.ace_fold-widget {\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
margin: 0 -12px 0 1px;\
display: none;\
width: 11px;\
vertical-align: top;\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==\");\
background-repeat: no-repeat;\
background-position: center;\
border-radius: 3px;\
border: 1px solid transparent;\
cursor: pointer;\
}\
.ace_folding-enabled .ace_fold-widget {\
display: inline-block;   \
}\
.ace_fold-widget.ace_end {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==\");\
}\
.ace_fold-widget.ace_closed {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==\");\
}\
.ace_fold-widget:hover {\
border: 1px solid rgba(0, 0, 0, 0.3);\
background-color: rgba(255, 255, 255, 0.2);\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\
}\
.ace_fold-widget:active {\
border: 1px solid rgba(0, 0, 0, 0.4);\
background-color: rgba(0, 0, 0, 0.05);\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\
}\
.ace_dark .ace_fold-widget {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC\");\
}\
.ace_dark .ace_fold-widget.ace_end {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==\");\
}\
.ace_dark .ace_fold-widget.ace_closed {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==\");\
}\
.ace_dark .ace_fold-widget:hover {\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\
background-color: rgba(255, 255, 255, 0.1);\
}\
.ace_dark .ace_fold-widget:active {\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\
}\
.ace_fold-widget.ace_invalid {\
background-color: #FFB4B4;\
border-color: #DE5555;\
}\
.ace_fade-fold-widgets .ace_fold-widget {\
-webkit-transition: opacity 0.4s ease 0.05s;\
transition: opacity 0.4s ease 0.05s;\
opacity: 0;\
}\
.ace_fade-fold-widgets:hover .ace_fold-widget {\
-webkit-transition: opacity 0.05s ease 0.05s;\
transition: opacity 0.05s ease 0.05s;\
opacity:1;\
}\
.ace_underline {\
text-decoration: underline;\
}\
.ace_bold {\
font-weight: bold;\
}\
.ace_nobold .ace_bold {\
font-weight: normal;\
}\
.ace_italic {\
font-style: italic;\
}\
.ace_error-marker {\
background-color: rgba(255, 0, 0,0.2);\
position: absolute;\
z-index: 9;\
}\
.ace_highlight-marker {\
background-color: rgba(255, 255, 0,0.2);\
position: absolute;\
z-index: 8;\
}\
.ace_br1 {border-top-left-radius    : 3px;}\
.ace_br2 {border-top-right-radius   : 3px;}\
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\
.ace_br4 {border-bottom-right-radius: 3px;}\
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\
.ace_br8 {border-bottom-left-radius : 3px;}\
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\
";                                                                                                                     // 15050
                                                                                                                       // 15051
dom.importCssString(editorCss, "ace_editor.css");                                                                      // 15052
                                                                                                                       // 15053
var VirtualRenderer = function(container, theme) {                                                                     // 15054
    var _self = this;                                                                                                  // 15055
                                                                                                                       // 15056
    this.container = container || dom.createElement("div");                                                            // 15057
    this.$keepTextAreaAtCursor = !useragent.isOldIE;                                                                   // 15058
                                                                                                                       // 15059
    dom.addCssClass(this.container, "ace_editor");                                                                     // 15060
                                                                                                                       // 15061
    this.setTheme(theme);                                                                                              // 15062
                                                                                                                       // 15063
    this.$gutter = dom.createElement("div");                                                                           // 15064
    this.$gutter.className = "ace_gutter";                                                                             // 15065
    this.container.appendChild(this.$gutter);                                                                          // 15066
                                                                                                                       // 15067
    this.scroller = dom.createElement("div");                                                                          // 15068
    this.scroller.className = "ace_scroller";                                                                          // 15069
    this.container.appendChild(this.scroller);                                                                         // 15070
                                                                                                                       // 15071
    this.content = dom.createElement("div");                                                                           // 15072
    this.content.className = "ace_content";                                                                            // 15073
    this.scroller.appendChild(this.content);                                                                           // 15074
                                                                                                                       // 15075
    this.$gutterLayer = new GutterLayer(this.$gutter);                                                                 // 15076
    this.$gutterLayer.on("changeGutterWidth", this.onGutterResize.bind(this));                                         // 15077
                                                                                                                       // 15078
    this.$markerBack = new MarkerLayer(this.content);                                                                  // 15079
                                                                                                                       // 15080
    var textLayer = this.$textLayer = new TextLayer(this.content);                                                     // 15081
    this.canvas = textLayer.element;                                                                                   // 15082
                                                                                                                       // 15083
    this.$markerFront = new MarkerLayer(this.content);                                                                 // 15084
                                                                                                                       // 15085
    this.$cursorLayer = new CursorLayer(this.content);                                                                 // 15086
    this.$horizScroll = false;                                                                                         // 15087
    this.$vScroll = false;                                                                                             // 15088
                                                                                                                       // 15089
    this.scrollBar =                                                                                                   // 15090
    this.scrollBarV = new VScrollBar(this.container, this);                                                            // 15091
    this.scrollBarH = new HScrollBar(this.container, this);                                                            // 15092
    this.scrollBarV.addEventListener("scroll", function(e) {                                                           // 15093
        if (!_self.$scrollAnimation)                                                                                   // 15094
            _self.session.setScrollTop(e.data - _self.scrollMargin.top);                                               // 15095
    });                                                                                                                // 15096
    this.scrollBarH.addEventListener("scroll", function(e) {                                                           // 15097
        if (!_self.$scrollAnimation)                                                                                   // 15098
            _self.session.setScrollLeft(e.data - _self.scrollMargin.left);                                             // 15099
    });                                                                                                                // 15100
                                                                                                                       // 15101
    this.scrollTop = 0;                                                                                                // 15102
    this.scrollLeft = 0;                                                                                               // 15103
                                                                                                                       // 15104
    this.cursorPos = {                                                                                                 // 15105
        row : 0,                                                                                                       // 15106
        column : 0                                                                                                     // 15107
    };                                                                                                                 // 15108
                                                                                                                       // 15109
    this.$fontMetrics = new FontMetrics(this.container, 500);                                                          // 15110
    this.$textLayer.$setFontMetrics(this.$fontMetrics);                                                                // 15111
    this.$textLayer.addEventListener("changeCharacterSize", function(e) {                                              // 15112
        _self.updateCharacterSize();                                                                                   // 15113
        _self.onResize(true, _self.gutterWidth, _self.$size.width, _self.$size.height);                                // 15114
        _self._signal("changeCharacterSize", e);                                                                       // 15115
    });                                                                                                                // 15116
                                                                                                                       // 15117
    this.$size = {                                                                                                     // 15118
        width: 0,                                                                                                      // 15119
        height: 0,                                                                                                     // 15120
        scrollerHeight: 0,                                                                                             // 15121
        scrollerWidth: 0,                                                                                              // 15122
        $dirty: true                                                                                                   // 15123
    };                                                                                                                 // 15124
                                                                                                                       // 15125
    this.layerConfig = {                                                                                               // 15126
        width : 1,                                                                                                     // 15127
        padding : 0,                                                                                                   // 15128
        firstRow : 0,                                                                                                  // 15129
        firstRowScreen: 0,                                                                                             // 15130
        lastRow : 0,                                                                                                   // 15131
        lineHeight : 0,                                                                                                // 15132
        characterWidth : 0,                                                                                            // 15133
        minHeight : 1,                                                                                                 // 15134
        maxHeight : 1,                                                                                                 // 15135
        offset : 0,                                                                                                    // 15136
        height : 1,                                                                                                    // 15137
        gutterOffset: 1                                                                                                // 15138
    };                                                                                                                 // 15139
                                                                                                                       // 15140
    this.scrollMargin = {                                                                                              // 15141
        left: 0,                                                                                                       // 15142
        right: 0,                                                                                                      // 15143
        top: 0,                                                                                                        // 15144
        bottom: 0,                                                                                                     // 15145
        v: 0,                                                                                                          // 15146
        h: 0                                                                                                           // 15147
    };                                                                                                                 // 15148
                                                                                                                       // 15149
    this.$loop = new RenderLoop(                                                                                       // 15150
        this.$renderChanges.bind(this),                                                                                // 15151
        this.container.ownerDocument.defaultView                                                                       // 15152
    );                                                                                                                 // 15153
    this.$loop.schedule(this.CHANGE_FULL);                                                                             // 15154
                                                                                                                       // 15155
    this.updateCharacterSize();                                                                                        // 15156
    this.setPadding(4);                                                                                                // 15157
    config.resetOptions(this);                                                                                         // 15158
    config._emit("renderer", this);                                                                                    // 15159
};                                                                                                                     // 15160
                                                                                                                       // 15161
(function() {                                                                                                          // 15162
                                                                                                                       // 15163
    this.CHANGE_CURSOR = 1;                                                                                            // 15164
    this.CHANGE_MARKER = 2;                                                                                            // 15165
    this.CHANGE_GUTTER = 4;                                                                                            // 15166
    this.CHANGE_SCROLL = 8;                                                                                            // 15167
    this.CHANGE_LINES = 16;                                                                                            // 15168
    this.CHANGE_TEXT = 32;                                                                                             // 15169
    this.CHANGE_SIZE = 64;                                                                                             // 15170
    this.CHANGE_MARKER_BACK = 128;                                                                                     // 15171
    this.CHANGE_MARKER_FRONT = 256;                                                                                    // 15172
    this.CHANGE_FULL = 512;                                                                                            // 15173
    this.CHANGE_H_SCROLL = 1024;                                                                                       // 15174
                                                                                                                       // 15175
    oop.implement(this, EventEmitter);                                                                                 // 15176
                                                                                                                       // 15177
    this.updateCharacterSize = function() {                                                                            // 15178
        if (this.$textLayer.allowBoldFonts != this.$allowBoldFonts) {                                                  // 15179
            this.$allowBoldFonts = this.$textLayer.allowBoldFonts;                                                     // 15180
            this.setStyle("ace_nobold", !this.$allowBoldFonts);                                                        // 15181
        }                                                                                                              // 15182
                                                                                                                       // 15183
        this.layerConfig.characterWidth =                                                                              // 15184
        this.characterWidth = this.$textLayer.getCharacterWidth();                                                     // 15185
        this.layerConfig.lineHeight =                                                                                  // 15186
        this.lineHeight = this.$textLayer.getLineHeight();                                                             // 15187
        this.$updatePrintMargin();                                                                                     // 15188
    };                                                                                                                 // 15189
    this.setSession = function(session) {                                                                              // 15190
        if (this.session)                                                                                              // 15191
            this.session.doc.off("changeNewLineMode", this.onChangeNewLineMode);                                       // 15192
                                                                                                                       // 15193
        this.session = session;                                                                                        // 15194
        if (session && this.scrollMargin.top && session.getScrollTop() <= 0)                                           // 15195
            session.setScrollTop(-this.scrollMargin.top);                                                              // 15196
                                                                                                                       // 15197
        this.$cursorLayer.setSession(session);                                                                         // 15198
        this.$markerBack.setSession(session);                                                                          // 15199
        this.$markerFront.setSession(session);                                                                         // 15200
        this.$gutterLayer.setSession(session);                                                                         // 15201
        this.$textLayer.setSession(session);                                                                           // 15202
        if (!session)                                                                                                  // 15203
            return;                                                                                                    // 15204
                                                                                                                       // 15205
        this.$loop.schedule(this.CHANGE_FULL);                                                                         // 15206
        this.session.$setFontMetrics(this.$fontMetrics);                                                               // 15207
                                                                                                                       // 15208
        this.onChangeNewLineMode = this.onChangeNewLineMode.bind(this);                                                // 15209
        this.onChangeNewLineMode()                                                                                     // 15210
        this.session.doc.on("changeNewLineMode", this.onChangeNewLineMode);                                            // 15211
    };                                                                                                                 // 15212
    this.updateLines = function(firstRow, lastRow, force) {                                                            // 15213
        if (lastRow === undefined)                                                                                     // 15214
            lastRow = Infinity;                                                                                        // 15215
                                                                                                                       // 15216
        if (!this.$changedLines) {                                                                                     // 15217
            this.$changedLines = {                                                                                     // 15218
                firstRow: firstRow,                                                                                    // 15219
                lastRow: lastRow                                                                                       // 15220
            };                                                                                                         // 15221
        }                                                                                                              // 15222
        else {                                                                                                         // 15223
            if (this.$changedLines.firstRow > firstRow)                                                                // 15224
                this.$changedLines.firstRow = firstRow;                                                                // 15225
                                                                                                                       // 15226
            if (this.$changedLines.lastRow < lastRow)                                                                  // 15227
                this.$changedLines.lastRow = lastRow;                                                                  // 15228
        }                                                                                                              // 15229
        if (this.$changedLines.lastRow < this.layerConfig.firstRow) {                                                  // 15230
            if (force)                                                                                                 // 15231
                this.$changedLines.lastRow = this.layerConfig.lastRow;                                                 // 15232
            else                                                                                                       // 15233
                return;                                                                                                // 15234
        }                                                                                                              // 15235
        if (this.$changedLines.firstRow > this.layerConfig.lastRow)                                                    // 15236
            return;                                                                                                    // 15237
        this.$loop.schedule(this.CHANGE_LINES);                                                                        // 15238
    };                                                                                                                 // 15239
                                                                                                                       // 15240
    this.onChangeNewLineMode = function() {                                                                            // 15241
        this.$loop.schedule(this.CHANGE_TEXT);                                                                         // 15242
        this.$textLayer.$updateEolChar();                                                                              // 15243
    };                                                                                                                 // 15244
                                                                                                                       // 15245
    this.onChangeTabSize = function() {                                                                                // 15246
        this.$loop.schedule(this.CHANGE_TEXT | this.CHANGE_MARKER);                                                    // 15247
        this.$textLayer.onChangeTabSize();                                                                             // 15248
    };                                                                                                                 // 15249
    this.updateText = function() {                                                                                     // 15250
        this.$loop.schedule(this.CHANGE_TEXT);                                                                         // 15251
    };                                                                                                                 // 15252
    this.updateFull = function(force) {                                                                                // 15253
        if (force)                                                                                                     // 15254
            this.$renderChanges(this.CHANGE_FULL, true);                                                               // 15255
        else                                                                                                           // 15256
            this.$loop.schedule(this.CHANGE_FULL);                                                                     // 15257
    };                                                                                                                 // 15258
    this.updateFontSize = function() {                                                                                 // 15259
        this.$textLayer.checkForSizeChanges();                                                                         // 15260
    };                                                                                                                 // 15261
                                                                                                                       // 15262
    this.$changes = 0;                                                                                                 // 15263
    this.$updateSizeAsync = function() {                                                                               // 15264
        if (this.$loop.pending)                                                                                        // 15265
            this.$size.$dirty = true;                                                                                  // 15266
        else                                                                                                           // 15267
            this.onResize();                                                                                           // 15268
    };                                                                                                                 // 15269
    this.onResize = function(force, gutterWidth, width, height) {                                                      // 15270
        if (this.resizing > 2)                                                                                         // 15271
            return;                                                                                                    // 15272
        else if (this.resizing > 0)                                                                                    // 15273
            this.resizing++;                                                                                           // 15274
        else                                                                                                           // 15275
            this.resizing = force ? 1 : 0;                                                                             // 15276
        var el = this.container;                                                                                       // 15277
        if (!height)                                                                                                   // 15278
            height = el.clientHeight || el.scrollHeight;                                                               // 15279
        if (!width)                                                                                                    // 15280
            width = el.clientWidth || el.scrollWidth;                                                                  // 15281
        var changes = this.$updateCachedSize(force, gutterWidth, width, height);                                       // 15282
                                                                                                                       // 15283
                                                                                                                       // 15284
        if (!this.$size.scrollerHeight || (!width && !height))                                                         // 15285
            return this.resizing = 0;                                                                                  // 15286
                                                                                                                       // 15287
        if (force)                                                                                                     // 15288
            this.$gutterLayer.$padding = null;                                                                         // 15289
                                                                                                                       // 15290
        if (force)                                                                                                     // 15291
            this.$renderChanges(changes | this.$changes, true);                                                        // 15292
        else                                                                                                           // 15293
            this.$loop.schedule(changes | this.$changes);                                                              // 15294
                                                                                                                       // 15295
        if (this.resizing)                                                                                             // 15296
            this.resizing = 0;                                                                                         // 15297
        this.scrollBarV.scrollLeft = this.scrollBarV.scrollTop = null;                                                 // 15298
    };                                                                                                                 // 15299
                                                                                                                       // 15300
    this.$updateCachedSize = function(force, gutterWidth, width, height) {                                             // 15301
        height -= (this.$extraHeight || 0);                                                                            // 15302
        var changes = 0;                                                                                               // 15303
        var size = this.$size;                                                                                         // 15304
        var oldSize = {                                                                                                // 15305
            width: size.width,                                                                                         // 15306
            height: size.height,                                                                                       // 15307
            scrollerHeight: size.scrollerHeight,                                                                       // 15308
            scrollerWidth: size.scrollerWidth                                                                          // 15309
        };                                                                                                             // 15310
        if (height && (force || size.height != height)) {                                                              // 15311
            size.height = height;                                                                                      // 15312
            changes |= this.CHANGE_SIZE;                                                                               // 15313
                                                                                                                       // 15314
            size.scrollerHeight = size.height;                                                                         // 15315
            if (this.$horizScroll)                                                                                     // 15316
                size.scrollerHeight -= this.scrollBarH.getHeight();                                                    // 15317
            this.scrollBarV.element.style.bottom = this.scrollBarH.getHeight() + "px";                                 // 15318
                                                                                                                       // 15319
            changes = changes | this.CHANGE_SCROLL;                                                                    // 15320
        }                                                                                                              // 15321
                                                                                                                       // 15322
        if (width && (force || size.width != width)) {                                                                 // 15323
            changes |= this.CHANGE_SIZE;                                                                               // 15324
            size.width = width;                                                                                        // 15325
                                                                                                                       // 15326
            if (gutterWidth == null)                                                                                   // 15327
                gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;                                         // 15328
                                                                                                                       // 15329
            this.gutterWidth = gutterWidth;                                                                            // 15330
                                                                                                                       // 15331
            this.scrollBarH.element.style.left =                                                                       // 15332
            this.scroller.style.left = gutterWidth + "px";                                                             // 15333
            size.scrollerWidth = Math.max(0, width - gutterWidth - this.scrollBarV.getWidth());                        // 15334
                                                                                                                       // 15335
            this.scrollBarH.element.style.right =                                                                      // 15336
            this.scroller.style.right = this.scrollBarV.getWidth() + "px";                                             // 15337
            this.scroller.style.bottom = this.scrollBarH.getHeight() + "px";                                           // 15338
                                                                                                                       // 15339
            if (this.session && this.session.getUseWrapMode() && this.adjustWrapLimit() || force)                      // 15340
                changes |= this.CHANGE_FULL;                                                                           // 15341
        }                                                                                                              // 15342
                                                                                                                       // 15343
        size.$dirty = !width || !height;                                                                               // 15344
                                                                                                                       // 15345
        if (changes)                                                                                                   // 15346
            this._signal("resize", oldSize);                                                                           // 15347
                                                                                                                       // 15348
        return changes;                                                                                                // 15349
    };                                                                                                                 // 15350
                                                                                                                       // 15351
    this.onGutterResize = function() {                                                                                 // 15352
        var gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;                                             // 15353
        if (gutterWidth != this.gutterWidth)                                                                           // 15354
            this.$changes |= this.$updateCachedSize(true, gutterWidth, this.$size.width, this.$size.height);           // 15355
                                                                                                                       // 15356
        if (this.session.getUseWrapMode() && this.adjustWrapLimit()) {                                                 // 15357
            this.$loop.schedule(this.CHANGE_FULL);                                                                     // 15358
        } else if (this.$size.$dirty) {                                                                                // 15359
            this.$loop.schedule(this.CHANGE_FULL);                                                                     // 15360
        } else {                                                                                                       // 15361
            this.$computeLayerConfig();                                                                                // 15362
            this.$loop.schedule(this.CHANGE_MARKER);                                                                   // 15363
        }                                                                                                              // 15364
    };                                                                                                                 // 15365
    this.adjustWrapLimit = function() {                                                                                // 15366
        var availableWidth = this.$size.scrollerWidth - this.$padding * 2;                                             // 15367
        var limit = Math.floor(availableWidth / this.characterWidth);                                                  // 15368
        return this.session.adjustWrapLimit(limit, this.$showPrintMargin && this.$printMarginColumn);                  // 15369
    };                                                                                                                 // 15370
    this.setAnimatedScroll = function(shouldAnimate){                                                                  // 15371
        this.setOption("animatedScroll", shouldAnimate);                                                               // 15372
    };                                                                                                                 // 15373
    this.getAnimatedScroll = function() {                                                                              // 15374
        return this.$animatedScroll;                                                                                   // 15375
    };                                                                                                                 // 15376
    this.setShowInvisibles = function(showInvisibles) {                                                                // 15377
        this.setOption("showInvisibles", showInvisibles);                                                              // 15378
    };                                                                                                                 // 15379
    this.getShowInvisibles = function() {                                                                              // 15380
        return this.getOption("showInvisibles");                                                                       // 15381
    };                                                                                                                 // 15382
    this.getDisplayIndentGuides = function() {                                                                         // 15383
        return this.getOption("displayIndentGuides");                                                                  // 15384
    };                                                                                                                 // 15385
                                                                                                                       // 15386
    this.setDisplayIndentGuides = function(display) {                                                                  // 15387
        this.setOption("displayIndentGuides", display);                                                                // 15388
    };                                                                                                                 // 15389
    this.setShowPrintMargin = function(showPrintMargin) {                                                              // 15390
        this.setOption("showPrintMargin", showPrintMargin);                                                            // 15391
    };                                                                                                                 // 15392
    this.getShowPrintMargin = function() {                                                                             // 15393
        return this.getOption("showPrintMargin");                                                                      // 15394
    };                                                                                                                 // 15395
    this.setPrintMarginColumn = function(showPrintMargin) {                                                            // 15396
        this.setOption("printMarginColumn", showPrintMargin);                                                          // 15397
    };                                                                                                                 // 15398
    this.getPrintMarginColumn = function() {                                                                           // 15399
        return this.getOption("printMarginColumn");                                                                    // 15400
    };                                                                                                                 // 15401
    this.getShowGutter = function(){                                                                                   // 15402
        return this.getOption("showGutter");                                                                           // 15403
    };                                                                                                                 // 15404
    this.setShowGutter = function(show){                                                                               // 15405
        return this.setOption("showGutter", show);                                                                     // 15406
    };                                                                                                                 // 15407
                                                                                                                       // 15408
    this.getFadeFoldWidgets = function(){                                                                              // 15409
        return this.getOption("fadeFoldWidgets")                                                                       // 15410
    };                                                                                                                 // 15411
                                                                                                                       // 15412
    this.setFadeFoldWidgets = function(show) {                                                                         // 15413
        this.setOption("fadeFoldWidgets", show);                                                                       // 15414
    };                                                                                                                 // 15415
                                                                                                                       // 15416
    this.setHighlightGutterLine = function(shouldHighlight) {                                                          // 15417
        this.setOption("highlightGutterLine", shouldHighlight);                                                        // 15418
    };                                                                                                                 // 15419
                                                                                                                       // 15420
    this.getHighlightGutterLine = function() {                                                                         // 15421
        return this.getOption("highlightGutterLine");                                                                  // 15422
    };                                                                                                                 // 15423
                                                                                                                       // 15424
    this.$updateGutterLineHighlight = function() {                                                                     // 15425
        var pos = this.$cursorLayer.$pixelPos;                                                                         // 15426
        var height = this.layerConfig.lineHeight;                                                                      // 15427
        if (this.session.getUseWrapMode()) {                                                                           // 15428
            var cursor = this.session.selection.getCursor();                                                           // 15429
            cursor.column = 0;                                                                                         // 15430
            pos = this.$cursorLayer.getPixelPosition(cursor, true);                                                    // 15431
            height *= this.session.getRowLength(cursor.row);                                                           // 15432
        }                                                                                                              // 15433
        this.$gutterLineHighlight.style.top = pos.top - this.layerConfig.offset + "px";                                // 15434
        this.$gutterLineHighlight.style.height = height + "px";                                                        // 15435
    };                                                                                                                 // 15436
                                                                                                                       // 15437
    this.$updatePrintMargin = function() {                                                                             // 15438
        if (!this.$showPrintMargin && !this.$printMarginEl)                                                            // 15439
            return;                                                                                                    // 15440
                                                                                                                       // 15441
        if (!this.$printMarginEl) {                                                                                    // 15442
            var containerEl = dom.createElement("div");                                                                // 15443
            containerEl.className = "ace_layer ace_print-margin-layer";                                                // 15444
            this.$printMarginEl = dom.createElement("div");                                                            // 15445
            this.$printMarginEl.className = "ace_print-margin";                                                        // 15446
            containerEl.appendChild(this.$printMarginEl);                                                              // 15447
            this.content.insertBefore(containerEl, this.content.firstChild);                                           // 15448
        }                                                                                                              // 15449
                                                                                                                       // 15450
        var style = this.$printMarginEl.style;                                                                         // 15451
        style.left = ((this.characterWidth * this.$printMarginColumn) + this.$padding) + "px";                         // 15452
        style.visibility = this.$showPrintMargin ? "visible" : "hidden";                                               // 15453
                                                                                                                       // 15454
        if (this.session && this.session.$wrap == -1)                                                                  // 15455
            this.adjustWrapLimit();                                                                                    // 15456
    };                                                                                                                 // 15457
    this.getContainerElement = function() {                                                                            // 15458
        return this.container;                                                                                         // 15459
    };                                                                                                                 // 15460
    this.getMouseEventTarget = function() {                                                                            // 15461
        return this.scroller;                                                                                          // 15462
    };                                                                                                                 // 15463
    this.getTextAreaContainer = function() {                                                                           // 15464
        return this.container;                                                                                         // 15465
    };                                                                                                                 // 15466
    this.$moveTextAreaToCursor = function() {                                                                          // 15467
        if (!this.$keepTextAreaAtCursor)                                                                               // 15468
            return;                                                                                                    // 15469
        var config = this.layerConfig;                                                                                 // 15470
        var posTop = this.$cursorLayer.$pixelPos.top;                                                                  // 15471
        var posLeft = this.$cursorLayer.$pixelPos.left;                                                                // 15472
        posTop -= config.offset;                                                                                       // 15473
                                                                                                                       // 15474
        var style = this.textarea.style;                                                                               // 15475
        var h = this.lineHeight;                                                                                       // 15476
        if (posTop < 0 || posTop > config.height - h) {                                                                // 15477
            style.top = style.left = "0";                                                                              // 15478
            return;                                                                                                    // 15479
        }                                                                                                              // 15480
                                                                                                                       // 15481
        var w = this.characterWidth;                                                                                   // 15482
        if (this.$composition) {                                                                                       // 15483
            var val = this.textarea.value.replace(/^\x01+/, "");                                                       // 15484
            w *= (this.session.$getStringScreenWidth(val)[0]+2);                                                       // 15485
            h += 2;                                                                                                    // 15486
        }                                                                                                              // 15487
        posLeft -= this.scrollLeft;                                                                                    // 15488
        if (posLeft > this.$size.scrollerWidth - w)                                                                    // 15489
            posLeft = this.$size.scrollerWidth - w;                                                                    // 15490
                                                                                                                       // 15491
        posLeft += this.gutterWidth;                                                                                   // 15492
        style.height = h + "px";                                                                                       // 15493
        style.width = w + "px";                                                                                        // 15494
        style.left = Math.min(posLeft, this.$size.scrollerWidth - w) + "px";                                           // 15495
        style.top = Math.min(posTop, this.$size.height - h) + "px";                                                    // 15496
    };                                                                                                                 // 15497
    this.getFirstVisibleRow = function() {                                                                             // 15498
        return this.layerConfig.firstRow;                                                                              // 15499
    };                                                                                                                 // 15500
    this.getFirstFullyVisibleRow = function() {                                                                        // 15501
        return this.layerConfig.firstRow + (this.layerConfig.offset === 0 ? 0 : 1);                                    // 15502
    };                                                                                                                 // 15503
    this.getLastFullyVisibleRow = function() {                                                                         // 15504
        var flint = Math.floor((this.layerConfig.height + this.layerConfig.offset) / this.layerConfig.lineHeight);     // 15505
        return this.layerConfig.firstRow - 1 + flint;                                                                  // 15506
    };                                                                                                                 // 15507
    this.getLastVisibleRow = function() {                                                                              // 15508
        return this.layerConfig.lastRow;                                                                               // 15509
    };                                                                                                                 // 15510
                                                                                                                       // 15511
    this.$padding = null;                                                                                              // 15512
    this.setPadding = function(padding) {                                                                              // 15513
        this.$padding = padding;                                                                                       // 15514
        this.$textLayer.setPadding(padding);                                                                           // 15515
        this.$cursorLayer.setPadding(padding);                                                                         // 15516
        this.$markerFront.setPadding(padding);                                                                         // 15517
        this.$markerBack.setPadding(padding);                                                                          // 15518
        this.$loop.schedule(this.CHANGE_FULL);                                                                         // 15519
        this.$updatePrintMargin();                                                                                     // 15520
    };                                                                                                                 // 15521
                                                                                                                       // 15522
    this.setScrollMargin = function(top, bottom, left, right) {                                                        // 15523
        var sm = this.scrollMargin;                                                                                    // 15524
        sm.top = top|0;                                                                                                // 15525
        sm.bottom = bottom|0;                                                                                          // 15526
        sm.right = right|0;                                                                                            // 15527
        sm.left = left|0;                                                                                              // 15528
        sm.v = sm.top + sm.bottom;                                                                                     // 15529
        sm.h = sm.left + sm.right;                                                                                     // 15530
        if (sm.top && this.scrollTop <= 0 && this.session)                                                             // 15531
            this.session.setScrollTop(-sm.top);                                                                        // 15532
        this.updateFull();                                                                                             // 15533
    };                                                                                                                 // 15534
    this.getHScrollBarAlwaysVisible = function() {                                                                     // 15535
        return this.$hScrollBarAlwaysVisible;                                                                          // 15536
    };                                                                                                                 // 15537
    this.setHScrollBarAlwaysVisible = function(alwaysVisible) {                                                        // 15538
        this.setOption("hScrollBarAlwaysVisible", alwaysVisible);                                                      // 15539
    };                                                                                                                 // 15540
    this.getVScrollBarAlwaysVisible = function() {                                                                     // 15541
        return this.$vScrollBarAlwaysVisible;                                                                          // 15542
    };                                                                                                                 // 15543
    this.setVScrollBarAlwaysVisible = function(alwaysVisible) {                                                        // 15544
        this.setOption("vScrollBarAlwaysVisible", alwaysVisible);                                                      // 15545
    };                                                                                                                 // 15546
                                                                                                                       // 15547
    this.$updateScrollBarV = function() {                                                                              // 15548
        var scrollHeight = this.layerConfig.maxHeight;                                                                 // 15549
        var scrollerHeight = this.$size.scrollerHeight;                                                                // 15550
        if (!this.$maxLines && this.$scrollPastEnd) {                                                                  // 15551
            scrollHeight -= (scrollerHeight - this.lineHeight) * this.$scrollPastEnd;                                  // 15552
            if (this.scrollTop > scrollHeight - scrollerHeight) {                                                      // 15553
                scrollHeight = this.scrollTop + scrollerHeight;                                                        // 15554
                this.scrollBarV.scrollTop = null;                                                                      // 15555
            }                                                                                                          // 15556
        }                                                                                                              // 15557
        this.scrollBarV.setScrollHeight(scrollHeight + this.scrollMargin.v);                                           // 15558
        this.scrollBarV.setScrollTop(this.scrollTop + this.scrollMargin.top);                                          // 15559
    };                                                                                                                 // 15560
    this.$updateScrollBarH = function() {                                                                              // 15561
        this.scrollBarH.setScrollWidth(this.layerConfig.width + 2 * this.$padding + this.scrollMargin.h);              // 15562
        this.scrollBarH.setScrollLeft(this.scrollLeft + this.scrollMargin.left);                                       // 15563
    };                                                                                                                 // 15564
                                                                                                                       // 15565
    this.$frozen = false;                                                                                              // 15566
    this.freeze = function() {                                                                                         // 15567
        this.$frozen = true;                                                                                           // 15568
    };                                                                                                                 // 15569
                                                                                                                       // 15570
    this.unfreeze = function() {                                                                                       // 15571
        this.$frozen = false;                                                                                          // 15572
    };                                                                                                                 // 15573
                                                                                                                       // 15574
    this.$renderChanges = function(changes, force) {                                                                   // 15575
        if (this.$changes) {                                                                                           // 15576
            changes |= this.$changes;                                                                                  // 15577
            this.$changes = 0;                                                                                         // 15578
        }                                                                                                              // 15579
        if ((!this.session || !this.container.offsetWidth || this.$frozen) || (!changes && !force)) {                  // 15580
            this.$changes |= changes;                                                                                  // 15581
            return;                                                                                                    // 15582
        }                                                                                                              // 15583
        if (this.$size.$dirty) {                                                                                       // 15584
            this.$changes |= changes;                                                                                  // 15585
            return this.onResize(true);                                                                                // 15586
        }                                                                                                              // 15587
        if (!this.lineHeight) {                                                                                        // 15588
            this.$textLayer.checkForSizeChanges();                                                                     // 15589
        }                                                                                                              // 15590
                                                                                                                       // 15591
        this._signal("beforeRender");                                                                                  // 15592
        var config = this.layerConfig;                                                                                 // 15593
        if (changes & this.CHANGE_FULL ||                                                                              // 15594
            changes & this.CHANGE_SIZE ||                                                                              // 15595
            changes & this.CHANGE_TEXT ||                                                                              // 15596
            changes & this.CHANGE_LINES ||                                                                             // 15597
            changes & this.CHANGE_SCROLL ||                                                                            // 15598
            changes & this.CHANGE_H_SCROLL                                                                             // 15599
        ) {                                                                                                            // 15600
            changes |= this.$computeLayerConfig();                                                                     // 15601
            if (config.firstRow != this.layerConfig.firstRow && config.firstRowScreen == this.layerConfig.firstRowScreen) {
                var st = this.scrollTop + (config.firstRow - this.layerConfig.firstRow) * this.lineHeight;             // 15603
                if (st > 0) {                                                                                          // 15604
                    this.scrollTop = st;                                                                               // 15605
                    changes = changes | this.CHANGE_SCROLL;                                                            // 15606
                    changes |= this.$computeLayerConfig();                                                             // 15607
                }                                                                                                      // 15608
            }                                                                                                          // 15609
            config = this.layerConfig;                                                                                 // 15610
            this.$updateScrollBarV();                                                                                  // 15611
            if (changes & this.CHANGE_H_SCROLL)                                                                        // 15612
                this.$updateScrollBarH();                                                                              // 15613
            this.$gutterLayer.element.style.marginTop = (-config.offset) + "px";                                       // 15614
            this.content.style.marginTop = (-config.offset) + "px";                                                    // 15615
            this.content.style.width = config.width + 2 * this.$padding + "px";                                        // 15616
            this.content.style.height = config.minHeight + "px";                                                       // 15617
        }                                                                                                              // 15618
        if (changes & this.CHANGE_H_SCROLL) {                                                                          // 15619
            this.content.style.marginLeft = -this.scrollLeft + "px";                                                   // 15620
            this.scroller.className = this.scrollLeft <= 0 ? "ace_scroller" : "ace_scroller ace_scroll-left";          // 15621
        }                                                                                                              // 15622
        if (changes & this.CHANGE_FULL) {                                                                              // 15623
            this.$textLayer.update(config);                                                                            // 15624
            if (this.$showGutter)                                                                                      // 15625
                this.$gutterLayer.update(config);                                                                      // 15626
            this.$markerBack.update(config);                                                                           // 15627
            this.$markerFront.update(config);                                                                          // 15628
            this.$cursorLayer.update(config);                                                                          // 15629
            this.$moveTextAreaToCursor();                                                                              // 15630
            this.$highlightGutterLine && this.$updateGutterLineHighlight();                                            // 15631
            this._signal("afterRender");                                                                               // 15632
            return;                                                                                                    // 15633
        }                                                                                                              // 15634
        if (changes & this.CHANGE_SCROLL) {                                                                            // 15635
            if (changes & this.CHANGE_TEXT || changes & this.CHANGE_LINES)                                             // 15636
                this.$textLayer.update(config);                                                                        // 15637
            else                                                                                                       // 15638
                this.$textLayer.scrollLines(config);                                                                   // 15639
                                                                                                                       // 15640
            if (this.$showGutter)                                                                                      // 15641
                this.$gutterLayer.update(config);                                                                      // 15642
            this.$markerBack.update(config);                                                                           // 15643
            this.$markerFront.update(config);                                                                          // 15644
            this.$cursorLayer.update(config);                                                                          // 15645
            this.$highlightGutterLine && this.$updateGutterLineHighlight();                                            // 15646
            this.$moveTextAreaToCursor();                                                                              // 15647
            this._signal("afterRender");                                                                               // 15648
            return;                                                                                                    // 15649
        }                                                                                                              // 15650
                                                                                                                       // 15651
        if (changes & this.CHANGE_TEXT) {                                                                              // 15652
            this.$textLayer.update(config);                                                                            // 15653
            if (this.$showGutter)                                                                                      // 15654
                this.$gutterLayer.update(config);                                                                      // 15655
        }                                                                                                              // 15656
        else if (changes & this.CHANGE_LINES) {                                                                        // 15657
            if (this.$updateLines() || (changes & this.CHANGE_GUTTER) && this.$showGutter)                             // 15658
                this.$gutterLayer.update(config);                                                                      // 15659
        }                                                                                                              // 15660
        else if (changes & this.CHANGE_TEXT || changes & this.CHANGE_GUTTER) {                                         // 15661
            if (this.$showGutter)                                                                                      // 15662
                this.$gutterLayer.update(config);                                                                      // 15663
        }                                                                                                              // 15664
                                                                                                                       // 15665
        if (changes & this.CHANGE_CURSOR) {                                                                            // 15666
            this.$cursorLayer.update(config);                                                                          // 15667
            this.$moveTextAreaToCursor();                                                                              // 15668
            this.$highlightGutterLine && this.$updateGutterLineHighlight();                                            // 15669
        }                                                                                                              // 15670
                                                                                                                       // 15671
        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_FRONT)) {                                               // 15672
            this.$markerFront.update(config);                                                                          // 15673
        }                                                                                                              // 15674
                                                                                                                       // 15675
        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_BACK)) {                                                // 15676
            this.$markerBack.update(config);                                                                           // 15677
        }                                                                                                              // 15678
                                                                                                                       // 15679
        this._signal("afterRender");                                                                                   // 15680
    };                                                                                                                 // 15681
                                                                                                                       // 15682
                                                                                                                       // 15683
    this.$autosize = function() {                                                                                      // 15684
        var height = this.session.getScreenLength() * this.lineHeight;                                                 // 15685
        var maxHeight = this.$maxLines * this.lineHeight;                                                              // 15686
        var desiredHeight = Math.max(                                                                                  // 15687
            (this.$minLines||1) * this.lineHeight,                                                                     // 15688
            Math.min(maxHeight, height)                                                                                // 15689
        ) + this.scrollMargin.v + (this.$extraHeight || 0);                                                            // 15690
        if (this.$horizScroll)                                                                                         // 15691
            desiredHeight += this.scrollBarH.getHeight();                                                              // 15692
        var vScroll = height > maxHeight;                                                                              // 15693
                                                                                                                       // 15694
        if (desiredHeight != this.desiredHeight ||                                                                     // 15695
            this.$size.height != this.desiredHeight || vScroll != this.$vScroll) {                                     // 15696
            if (vScroll != this.$vScroll) {                                                                            // 15697
                this.$vScroll = vScroll;                                                                               // 15698
                this.scrollBarV.setVisible(vScroll);                                                                   // 15699
            }                                                                                                          // 15700
                                                                                                                       // 15701
            var w = this.container.clientWidth;                                                                        // 15702
            this.container.style.height = desiredHeight + "px";                                                        // 15703
            this.$updateCachedSize(true, this.$gutterWidth, w, desiredHeight);                                         // 15704
            this.desiredHeight = desiredHeight;                                                                        // 15705
                                                                                                                       // 15706
            this._signal("autosize");                                                                                  // 15707
        }                                                                                                              // 15708
    };                                                                                                                 // 15709
                                                                                                                       // 15710
    this.$computeLayerConfig = function() {                                                                            // 15711
        var session = this.session;                                                                                    // 15712
        var size = this.$size;                                                                                         // 15713
                                                                                                                       // 15714
        var hideScrollbars = size.height <= 2 * this.lineHeight;                                                       // 15715
        var screenLines = this.session.getScreenLength();                                                              // 15716
        var maxHeight = screenLines * this.lineHeight;                                                                 // 15717
                                                                                                                       // 15718
        var longestLine = this.$getLongestLine();                                                                      // 15719
                                                                                                                       // 15720
        var horizScroll = !hideScrollbars && (this.$hScrollBarAlwaysVisible ||                                         // 15721
            size.scrollerWidth - longestLine - 2 * this.$padding < 0);                                                 // 15722
                                                                                                                       // 15723
        var hScrollChanged = this.$horizScroll !== horizScroll;                                                        // 15724
        if (hScrollChanged) {                                                                                          // 15725
            this.$horizScroll = horizScroll;                                                                           // 15726
            this.scrollBarH.setVisible(horizScroll);                                                                   // 15727
        }                                                                                                              // 15728
        var vScrollBefore = this.$vScroll; // autosize can change vscroll value in which case we need to update longestLine
        if (this.$maxLines && this.lineHeight > 1)                                                                     // 15730
            this.$autosize();                                                                                          // 15731
                                                                                                                       // 15732
        var offset = this.scrollTop % this.lineHeight;                                                                 // 15733
        var minHeight = size.scrollerHeight + this.lineHeight;                                                         // 15734
                                                                                                                       // 15735
        var scrollPastEnd = !this.$maxLines && this.$scrollPastEnd                                                     // 15736
            ? (size.scrollerHeight - this.lineHeight) * this.$scrollPastEnd                                            // 15737
            : 0;                                                                                                       // 15738
        maxHeight += scrollPastEnd;                                                                                    // 15739
                                                                                                                       // 15740
        var sm = this.scrollMargin;                                                                                    // 15741
        this.session.setScrollTop(Math.max(-sm.top,                                                                    // 15742
            Math.min(this.scrollTop, maxHeight - size.scrollerHeight + sm.bottom)));                                   // 15743
                                                                                                                       // 15744
        this.session.setScrollLeft(Math.max(-sm.left, Math.min(this.scrollLeft,                                        // 15745
            longestLine + 2 * this.$padding - size.scrollerWidth + sm.right)));                                        // 15746
                                                                                                                       // 15747
        var vScroll = !hideScrollbars && (this.$vScrollBarAlwaysVisible ||                                             // 15748
            size.scrollerHeight - maxHeight + scrollPastEnd < 0 || this.scrollTop > sm.top);                           // 15749
        var vScrollChanged = vScrollBefore !== vScroll;                                                                // 15750
        if (vScrollChanged) {                                                                                          // 15751
            this.$vScroll = vScroll;                                                                                   // 15752
            this.scrollBarV.setVisible(vScroll);                                                                       // 15753
        }                                                                                                              // 15754
                                                                                                                       // 15755
        var lineCount = Math.ceil(minHeight / this.lineHeight) - 1;                                                    // 15756
        var firstRow = Math.max(0, Math.round((this.scrollTop - offset) / this.lineHeight));                           // 15757
        var lastRow = firstRow + lineCount;                                                                            // 15758
        var firstRowScreen, firstRowHeight;                                                                            // 15759
        var lineHeight = this.lineHeight;                                                                              // 15760
        firstRow = session.screenToDocumentRow(firstRow, 0);                                                           // 15761
        var foldLine = session.getFoldLine(firstRow);                                                                  // 15762
        if (foldLine) {                                                                                                // 15763
            firstRow = foldLine.start.row;                                                                             // 15764
        }                                                                                                              // 15765
                                                                                                                       // 15766
        firstRowScreen = session.documentToScreenRow(firstRow, 0);                                                     // 15767
        firstRowHeight = session.getRowLength(firstRow) * lineHeight;                                                  // 15768
                                                                                                                       // 15769
        lastRow = Math.min(session.screenToDocumentRow(lastRow, 0), session.getLength() - 1);                          // 15770
        minHeight = size.scrollerHeight + session.getRowLength(lastRow) * lineHeight +                                 // 15771
                                                firstRowHeight;                                                        // 15772
                                                                                                                       // 15773
        offset = this.scrollTop - firstRowScreen * lineHeight;                                                         // 15774
                                                                                                                       // 15775
        var changes = 0;                                                                                               // 15776
        if (this.layerConfig.width != longestLine)                                                                     // 15777
            changes = this.CHANGE_H_SCROLL;                                                                            // 15778
        if (hScrollChanged || vScrollChanged) {                                                                        // 15779
            changes = this.$updateCachedSize(true, this.gutterWidth, size.width, size.height);                         // 15780
            this._signal("scrollbarVisibilityChanged");                                                                // 15781
            if (vScrollChanged)                                                                                        // 15782
                longestLine = this.$getLongestLine();                                                                  // 15783
        }                                                                                                              // 15784
                                                                                                                       // 15785
        this.layerConfig = {                                                                                           // 15786
            width : longestLine,                                                                                       // 15787
            padding : this.$padding,                                                                                   // 15788
            firstRow : firstRow,                                                                                       // 15789
            firstRowScreen: firstRowScreen,                                                                            // 15790
            lastRow : lastRow,                                                                                         // 15791
            lineHeight : lineHeight,                                                                                   // 15792
            characterWidth : this.characterWidth,                                                                      // 15793
            minHeight : minHeight,                                                                                     // 15794
            maxHeight : maxHeight,                                                                                     // 15795
            offset : offset,                                                                                           // 15796
            gutterOffset : Math.max(0, Math.ceil((offset + size.height - size.scrollerHeight) / lineHeight)),          // 15797
            height : this.$size.scrollerHeight                                                                         // 15798
        };                                                                                                             // 15799
                                                                                                                       // 15800
        return changes;                                                                                                // 15801
    };                                                                                                                 // 15802
                                                                                                                       // 15803
    this.$updateLines = function() {                                                                                   // 15804
        var firstRow = this.$changedLines.firstRow;                                                                    // 15805
        var lastRow = this.$changedLines.lastRow;                                                                      // 15806
        this.$changedLines = null;                                                                                     // 15807
                                                                                                                       // 15808
        var layerConfig = this.layerConfig;                                                                            // 15809
                                                                                                                       // 15810
        if (firstRow > layerConfig.lastRow + 1) { return; }                                                            // 15811
        if (lastRow < layerConfig.firstRow) { return; }                                                                // 15812
        if (lastRow === Infinity) {                                                                                    // 15813
            if (this.$showGutter)                                                                                      // 15814
                this.$gutterLayer.update(layerConfig);                                                                 // 15815
            this.$textLayer.update(layerConfig);                                                                       // 15816
            return;                                                                                                    // 15817
        }                                                                                                              // 15818
        this.$textLayer.updateLines(layerConfig, firstRow, lastRow);                                                   // 15819
        return true;                                                                                                   // 15820
    };                                                                                                                 // 15821
                                                                                                                       // 15822
    this.$getLongestLine = function() {                                                                                // 15823
        var charCount = this.session.getScreenWidth();                                                                 // 15824
        if (this.showInvisibles && !this.session.$useWrapMode)                                                         // 15825
            charCount += 1;                                                                                            // 15826
                                                                                                                       // 15827
        return Math.max(this.$size.scrollerWidth - 2 * this.$padding, Math.round(charCount * this.characterWidth));    // 15828
    };                                                                                                                 // 15829
    this.updateFrontMarkers = function() {                                                                             // 15830
        this.$markerFront.setMarkers(this.session.getMarkers(true));                                                   // 15831
        this.$loop.schedule(this.CHANGE_MARKER_FRONT);                                                                 // 15832
    };                                                                                                                 // 15833
    this.updateBackMarkers = function() {                                                                              // 15834
        this.$markerBack.setMarkers(this.session.getMarkers());                                                        // 15835
        this.$loop.schedule(this.CHANGE_MARKER_BACK);                                                                  // 15836
    };                                                                                                                 // 15837
    this.addGutterDecoration = function(row, className){                                                               // 15838
        this.$gutterLayer.addGutterDecoration(row, className);                                                         // 15839
    };                                                                                                                 // 15840
    this.removeGutterDecoration = function(row, className){                                                            // 15841
        this.$gutterLayer.removeGutterDecoration(row, className);                                                      // 15842
    };                                                                                                                 // 15843
    this.updateBreakpoints = function(rows) {                                                                          // 15844
        this.$loop.schedule(this.CHANGE_GUTTER);                                                                       // 15845
    };                                                                                                                 // 15846
    this.setAnnotations = function(annotations) {                                                                      // 15847
        this.$gutterLayer.setAnnotations(annotations);                                                                 // 15848
        this.$loop.schedule(this.CHANGE_GUTTER);                                                                       // 15849
    };                                                                                                                 // 15850
    this.updateCursor = function() {                                                                                   // 15851
        this.$loop.schedule(this.CHANGE_CURSOR);                                                                       // 15852
    };                                                                                                                 // 15853
    this.hideCursor = function() {                                                                                     // 15854
        this.$cursorLayer.hideCursor();                                                                                // 15855
    };                                                                                                                 // 15856
    this.showCursor = function() {                                                                                     // 15857
        this.$cursorLayer.showCursor();                                                                                // 15858
    };                                                                                                                 // 15859
                                                                                                                       // 15860
    this.scrollSelectionIntoView = function(anchor, lead, offset) {                                                    // 15861
        this.scrollCursorIntoView(anchor, offset);                                                                     // 15862
        this.scrollCursorIntoView(lead, offset);                                                                       // 15863
    };                                                                                                                 // 15864
    this.scrollCursorIntoView = function(cursor, offset, $viewMargin) {                                                // 15865
        if (this.$size.scrollerHeight === 0)                                                                           // 15866
            return;                                                                                                    // 15867
                                                                                                                       // 15868
        var pos = this.$cursorLayer.getPixelPosition(cursor);                                                          // 15869
                                                                                                                       // 15870
        var left = pos.left;                                                                                           // 15871
        var top = pos.top;                                                                                             // 15872
                                                                                                                       // 15873
        var topMargin = $viewMargin && $viewMargin.top || 0;                                                           // 15874
        var bottomMargin = $viewMargin && $viewMargin.bottom || 0;                                                     // 15875
                                                                                                                       // 15876
        var scrollTop = this.$scrollAnimation ? this.session.getScrollTop() : this.scrollTop;                          // 15877
                                                                                                                       // 15878
        if (scrollTop + topMargin > top) {                                                                             // 15879
            if (offset)                                                                                                // 15880
                top -= offset * this.$size.scrollerHeight;                                                             // 15881
            if (top === 0)                                                                                             // 15882
                top = -this.scrollMargin.top;                                                                          // 15883
            this.session.setScrollTop(top);                                                                            // 15884
        } else if (scrollTop + this.$size.scrollerHeight - bottomMargin < top + this.lineHeight) {                     // 15885
            if (offset)                                                                                                // 15886
                top += offset * this.$size.scrollerHeight;                                                             // 15887
            this.session.setScrollTop(top + this.lineHeight - this.$size.scrollerHeight);                              // 15888
        }                                                                                                              // 15889
                                                                                                                       // 15890
        var scrollLeft = this.scrollLeft;                                                                              // 15891
                                                                                                                       // 15892
        if (scrollLeft > left) {                                                                                       // 15893
            if (left < this.$padding + 2 * this.layerConfig.characterWidth)                                            // 15894
                left = -this.scrollMargin.left;                                                                        // 15895
            this.session.setScrollLeft(left);                                                                          // 15896
        } else if (scrollLeft + this.$size.scrollerWidth < left + this.characterWidth) {                               // 15897
            this.session.setScrollLeft(Math.round(left + this.characterWidth - this.$size.scrollerWidth));             // 15898
        } else if (scrollLeft <= this.$padding && left - scrollLeft < this.characterWidth) {                           // 15899
            this.session.setScrollLeft(0);                                                                             // 15900
        }                                                                                                              // 15901
    };                                                                                                                 // 15902
    this.getScrollTop = function() {                                                                                   // 15903
        return this.session.getScrollTop();                                                                            // 15904
    };                                                                                                                 // 15905
    this.getScrollLeft = function() {                                                                                  // 15906
        return this.session.getScrollLeft();                                                                           // 15907
    };                                                                                                                 // 15908
    this.getScrollTopRow = function() {                                                                                // 15909
        return this.scrollTop / this.lineHeight;                                                                       // 15910
    };                                                                                                                 // 15911
    this.getScrollBottomRow = function() {                                                                             // 15912
        return Math.max(0, Math.floor((this.scrollTop + this.$size.scrollerHeight) / this.lineHeight) - 1);            // 15913
    };                                                                                                                 // 15914
    this.scrollToRow = function(row) {                                                                                 // 15915
        this.session.setScrollTop(row * this.lineHeight);                                                              // 15916
    };                                                                                                                 // 15917
                                                                                                                       // 15918
    this.alignCursor = function(cursor, alignment) {                                                                   // 15919
        if (typeof cursor == "number")                                                                                 // 15920
            cursor = {row: cursor, column: 0};                                                                         // 15921
                                                                                                                       // 15922
        var pos = this.$cursorLayer.getPixelPosition(cursor);                                                          // 15923
        var h = this.$size.scrollerHeight - this.lineHeight;                                                           // 15924
        var offset = pos.top - h * (alignment || 0);                                                                   // 15925
                                                                                                                       // 15926
        this.session.setScrollTop(offset);                                                                             // 15927
        return offset;                                                                                                 // 15928
    };                                                                                                                 // 15929
                                                                                                                       // 15930
    this.STEPS = 8;                                                                                                    // 15931
    this.$calcSteps = function(fromValue, toValue){                                                                    // 15932
        var i = 0;                                                                                                     // 15933
        var l = this.STEPS;                                                                                            // 15934
        var steps = [];                                                                                                // 15935
                                                                                                                       // 15936
        var func  = function(t, x_min, dx) {                                                                           // 15937
            return dx * (Math.pow(t - 1, 3) + 1) + x_min;                                                              // 15938
        };                                                                                                             // 15939
                                                                                                                       // 15940
        for (i = 0; i < l; ++i)                                                                                        // 15941
            steps.push(func(i / this.STEPS, fromValue, toValue - fromValue));                                          // 15942
                                                                                                                       // 15943
        return steps;                                                                                                  // 15944
    };                                                                                                                 // 15945
    this.scrollToLine = function(line, center, animate, callback) {                                                    // 15946
        var pos = this.$cursorLayer.getPixelPosition({row: line, column: 0});                                          // 15947
        var offset = pos.top;                                                                                          // 15948
        if (center)                                                                                                    // 15949
            offset -= this.$size.scrollerHeight / 2;                                                                   // 15950
                                                                                                                       // 15951
        var initialScroll = this.scrollTop;                                                                            // 15952
        this.session.setScrollTop(offset);                                                                             // 15953
        if (animate !== false)                                                                                         // 15954
            this.animateScrolling(initialScroll, callback);                                                            // 15955
    };                                                                                                                 // 15956
                                                                                                                       // 15957
    this.animateScrolling = function(fromValue, callback) {                                                            // 15958
        var toValue = this.scrollTop;                                                                                  // 15959
        if (!this.$animatedScroll)                                                                                     // 15960
            return;                                                                                                    // 15961
        var _self = this;                                                                                              // 15962
                                                                                                                       // 15963
        if (fromValue == toValue)                                                                                      // 15964
            return;                                                                                                    // 15965
                                                                                                                       // 15966
        if (this.$scrollAnimation) {                                                                                   // 15967
            var oldSteps = this.$scrollAnimation.steps;                                                                // 15968
            if (oldSteps.length) {                                                                                     // 15969
                fromValue = oldSteps[0];                                                                               // 15970
                if (fromValue == toValue)                                                                              // 15971
                    return;                                                                                            // 15972
            }                                                                                                          // 15973
        }                                                                                                              // 15974
                                                                                                                       // 15975
        var steps = _self.$calcSteps(fromValue, toValue);                                                              // 15976
        this.$scrollAnimation = {from: fromValue, to: toValue, steps: steps};                                          // 15977
                                                                                                                       // 15978
        clearInterval(this.$timer);                                                                                    // 15979
                                                                                                                       // 15980
        _self.session.setScrollTop(steps.shift());                                                                     // 15981
        _self.session.$scrollTop = toValue;                                                                            // 15982
        this.$timer = setInterval(function() {                                                                         // 15983
            if (steps.length) {                                                                                        // 15984
                _self.session.setScrollTop(steps.shift());                                                             // 15985
                _self.session.$scrollTop = toValue;                                                                    // 15986
            } else if (toValue != null) {                                                                              // 15987
                _self.session.$scrollTop = -1;                                                                         // 15988
                _self.session.setScrollTop(toValue);                                                                   // 15989
                toValue = null;                                                                                        // 15990
            } else {                                                                                                   // 15991
                _self.$timer = clearInterval(_self.$timer);                                                            // 15992
                _self.$scrollAnimation = null;                                                                         // 15993
                callback && callback();                                                                                // 15994
            }                                                                                                          // 15995
        }, 10);                                                                                                        // 15996
    };                                                                                                                 // 15997
    this.scrollToY = function(scrollTop) {                                                                             // 15998
        if (this.scrollTop !== scrollTop) {                                                                            // 15999
            this.$loop.schedule(this.CHANGE_SCROLL);                                                                   // 16000
            this.scrollTop = scrollTop;                                                                                // 16001
        }                                                                                                              // 16002
    };                                                                                                                 // 16003
    this.scrollToX = function(scrollLeft) {                                                                            // 16004
        if (this.scrollLeft !== scrollLeft)                                                                            // 16005
            this.scrollLeft = scrollLeft;                                                                              // 16006
        this.$loop.schedule(this.CHANGE_H_SCROLL);                                                                     // 16007
    };                                                                                                                 // 16008
    this.scrollTo = function(x, y) {                                                                                   // 16009
        this.session.setScrollTop(y);                                                                                  // 16010
        this.session.setScrollLeft(y);                                                                                 // 16011
    };                                                                                                                 // 16012
    this.scrollBy = function(deltaX, deltaY) {                                                                         // 16013
        deltaY && this.session.setScrollTop(this.session.getScrollTop() + deltaY);                                     // 16014
        deltaX && this.session.setScrollLeft(this.session.getScrollLeft() + deltaX);                                   // 16015
    };                                                                                                                 // 16016
    this.isScrollableBy = function(deltaX, deltaY) {                                                                   // 16017
        if (deltaY < 0 && this.session.getScrollTop() >= 1 - this.scrollMargin.top)                                    // 16018
           return true;                                                                                                // 16019
        if (deltaY > 0 && this.session.getScrollTop() + this.$size.scrollerHeight                                      // 16020
            - this.layerConfig.maxHeight < -1 + this.scrollMargin.bottom)                                              // 16021
           return true;                                                                                                // 16022
        if (deltaX < 0 && this.session.getScrollLeft() >= 1 - this.scrollMargin.left)                                  // 16023
            return true;                                                                                               // 16024
        if (deltaX > 0 && this.session.getScrollLeft() + this.$size.scrollerWidth                                      // 16025
            - this.layerConfig.width < -1 + this.scrollMargin.right)                                                   // 16026
           return true;                                                                                                // 16027
    };                                                                                                                 // 16028
                                                                                                                       // 16029
    this.pixelToScreenCoordinates = function(x, y) {                                                                   // 16030
        var canvasPos = this.scroller.getBoundingClientRect();                                                         // 16031
                                                                                                                       // 16032
        var offset = (x + this.scrollLeft - canvasPos.left - this.$padding) / this.characterWidth;                     // 16033
        var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);                                  // 16034
        var col = Math.round(offset);                                                                                  // 16035
                                                                                                                       // 16036
        return {row: row, column: col, side: offset - col > 0 ? 1 : -1};                                               // 16037
    };                                                                                                                 // 16038
                                                                                                                       // 16039
    this.screenToTextCoordinates = function(x, y) {                                                                    // 16040
        var canvasPos = this.scroller.getBoundingClientRect();                                                         // 16041
                                                                                                                       // 16042
        var col = Math.round(                                                                                          // 16043
            (x + this.scrollLeft - canvasPos.left - this.$padding) / this.characterWidth                               // 16044
        );                                                                                                             // 16045
                                                                                                                       // 16046
        var row = (y + this.scrollTop - canvasPos.top) / this.lineHeight;                                              // 16047
                                                                                                                       // 16048
        return this.session.screenToDocumentPosition(row, Math.max(col, 0));                                           // 16049
    };                                                                                                                 // 16050
    this.textToScreenCoordinates = function(row, column) {                                                             // 16051
        var canvasPos = this.scroller.getBoundingClientRect();                                                         // 16052
        var pos = this.session.documentToScreenPosition(row, column);                                                  // 16053
                                                                                                                       // 16054
        var x = this.$padding + Math.round(pos.column * this.characterWidth);                                          // 16055
        var y = pos.row * this.lineHeight;                                                                             // 16056
                                                                                                                       // 16057
        return {                                                                                                       // 16058
            pageX: canvasPos.left + x - this.scrollLeft,                                                               // 16059
            pageY: canvasPos.top + y - this.scrollTop                                                                  // 16060
        };                                                                                                             // 16061
    };                                                                                                                 // 16062
    this.visualizeFocus = function() {                                                                                 // 16063
        dom.addCssClass(this.container, "ace_focus");                                                                  // 16064
    };                                                                                                                 // 16065
    this.visualizeBlur = function() {                                                                                  // 16066
        dom.removeCssClass(this.container, "ace_focus");                                                               // 16067
    };                                                                                                                 // 16068
    this.showComposition = function(position) {                                                                        // 16069
        if (!this.$composition)                                                                                        // 16070
            this.$composition = {                                                                                      // 16071
                keepTextAreaAtCursor: this.$keepTextAreaAtCursor,                                                      // 16072
                cssText: this.textarea.style.cssText                                                                   // 16073
            };                                                                                                         // 16074
                                                                                                                       // 16075
        this.$keepTextAreaAtCursor = true;                                                                             // 16076
        dom.addCssClass(this.textarea, "ace_composition");                                                             // 16077
        this.textarea.style.cssText = "";                                                                              // 16078
        this.$moveTextAreaToCursor();                                                                                  // 16079
    };                                                                                                                 // 16080
    this.setCompositionText = function(text) {                                                                         // 16081
        this.$moveTextAreaToCursor();                                                                                  // 16082
    };                                                                                                                 // 16083
    this.hideComposition = function() {                                                                                // 16084
        if (!this.$composition)                                                                                        // 16085
            return;                                                                                                    // 16086
                                                                                                                       // 16087
        dom.removeCssClass(this.textarea, "ace_composition");                                                          // 16088
        this.$keepTextAreaAtCursor = this.$composition.keepTextAreaAtCursor;                                           // 16089
        this.textarea.style.cssText = this.$composition.cssText;                                                       // 16090
        this.$composition = null;                                                                                      // 16091
    };                                                                                                                 // 16092
    this.setTheme = function(theme, cb) {                                                                              // 16093
        var _self = this;                                                                                              // 16094
        this.$themeId = theme;                                                                                         // 16095
        _self._dispatchEvent('themeChange',{theme:theme});                                                             // 16096
                                                                                                                       // 16097
        if (!theme || typeof theme == "string") {                                                                      // 16098
            var moduleName = theme || this.$options.theme.initialValue;                                                // 16099
            config.loadModule(["theme", moduleName], afterLoad);                                                       // 16100
        } else {                                                                                                       // 16101
            afterLoad(theme);                                                                                          // 16102
        }                                                                                                              // 16103
                                                                                                                       // 16104
        function afterLoad(module) {                                                                                   // 16105
            if (_self.$themeId != theme)                                                                               // 16106
                return cb && cb();                                                                                     // 16107
            if (!module.cssClass)                                                                                      // 16108
                return;                                                                                                // 16109
            dom.importCssString(                                                                                       // 16110
                module.cssText,                                                                                        // 16111
                module.cssClass,                                                                                       // 16112
                _self.container.ownerDocument                                                                          // 16113
            );                                                                                                         // 16114
                                                                                                                       // 16115
            if (_self.theme)                                                                                           // 16116
                dom.removeCssClass(_self.container, _self.theme.cssClass);                                             // 16117
                                                                                                                       // 16118
            var padding = "padding" in module ? module.padding                                                         // 16119
                : "padding" in (_self.theme || {}) ? 4 : _self.$padding;                                               // 16120
            if (_self.$padding && padding != _self.$padding)                                                           // 16121
                _self.setPadding(padding);                                                                             // 16122
            _self.$theme = module.cssClass;                                                                            // 16123
                                                                                                                       // 16124
            _self.theme = module;                                                                                      // 16125
            dom.addCssClass(_self.container, module.cssClass);                                                         // 16126
            dom.setCssClass(_self.container, "ace_dark", module.isDark);                                               // 16127
            if (_self.$size) {                                                                                         // 16128
                _self.$size.width = 0;                                                                                 // 16129
                _self.$updateSizeAsync();                                                                              // 16130
            }                                                                                                          // 16131
                                                                                                                       // 16132
            _self._dispatchEvent('themeLoaded', {theme:module});                                                       // 16133
            cb && cb();                                                                                                // 16134
        }                                                                                                              // 16135
    };                                                                                                                 // 16136
    this.getTheme = function() {                                                                                       // 16137
        return this.$themeId;                                                                                          // 16138
    };                                                                                                                 // 16139
    this.setStyle = function(style, include) {                                                                         // 16140
        dom.setCssClass(this.container, style, include !== false);                                                     // 16141
    };                                                                                                                 // 16142
    this.unsetStyle = function(style) {                                                                                // 16143
        dom.removeCssClass(this.container, style);                                                                     // 16144
    };                                                                                                                 // 16145
                                                                                                                       // 16146
    this.setCursorStyle = function(style) {                                                                            // 16147
        if (this.scroller.style.cursor != style)                                                                       // 16148
            this.scroller.style.cursor = style;                                                                        // 16149
    };                                                                                                                 // 16150
    this.setMouseCursor = function(cursorStyle) {                                                                      // 16151
        this.scroller.style.cursor = cursorStyle;                                                                      // 16152
    };                                                                                                                 // 16153
    this.destroy = function() {                                                                                        // 16154
        this.$textLayer.destroy();                                                                                     // 16155
        this.$cursorLayer.destroy();                                                                                   // 16156
    };                                                                                                                 // 16157
                                                                                                                       // 16158
}).call(VirtualRenderer.prototype);                                                                                    // 16159
                                                                                                                       // 16160
                                                                                                                       // 16161
config.defineOptions(VirtualRenderer.prototype, "renderer", {                                                          // 16162
    animatedScroll: {initialValue: false},                                                                             // 16163
    showInvisibles: {                                                                                                  // 16164
        set: function(value) {                                                                                         // 16165
            if (this.$textLayer.setShowInvisibles(value))                                                              // 16166
                this.$loop.schedule(this.CHANGE_TEXT);                                                                 // 16167
        },                                                                                                             // 16168
        initialValue: false                                                                                            // 16169
    },                                                                                                                 // 16170
    showPrintMargin: {                                                                                                 // 16171
        set: function() { this.$updatePrintMargin(); },                                                                // 16172
        initialValue: true                                                                                             // 16173
    },                                                                                                                 // 16174
    printMarginColumn: {                                                                                               // 16175
        set: function() { this.$updatePrintMargin(); },                                                                // 16176
        initialValue: 80                                                                                               // 16177
    },                                                                                                                 // 16178
    printMargin: {                                                                                                     // 16179
        set: function(val) {                                                                                           // 16180
            if (typeof val == "number")                                                                                // 16181
                this.$printMarginColumn = val;                                                                         // 16182
            this.$showPrintMargin = !!val;                                                                             // 16183
            this.$updatePrintMargin();                                                                                 // 16184
        },                                                                                                             // 16185
        get: function() {                                                                                              // 16186
            return this.$showPrintMargin && this.$printMarginColumn;                                                   // 16187
        }                                                                                                              // 16188
    },                                                                                                                 // 16189
    showGutter: {                                                                                                      // 16190
        set: function(show){                                                                                           // 16191
            this.$gutter.style.display = show ? "block" : "none";                                                      // 16192
            this.$loop.schedule(this.CHANGE_FULL);                                                                     // 16193
            this.onGutterResize();                                                                                     // 16194
        },                                                                                                             // 16195
        initialValue: true                                                                                             // 16196
    },                                                                                                                 // 16197
    fadeFoldWidgets: {                                                                                                 // 16198
        set: function(show) {                                                                                          // 16199
            dom.setCssClass(this.$gutter, "ace_fade-fold-widgets", show);                                              // 16200
        },                                                                                                             // 16201
        initialValue: false                                                                                            // 16202
    },                                                                                                                 // 16203
    showFoldWidgets: {                                                                                                 // 16204
        set: function(show) {this.$gutterLayer.setShowFoldWidgets(show)},                                              // 16205
        initialValue: true                                                                                             // 16206
    },                                                                                                                 // 16207
    showLineNumbers: {                                                                                                 // 16208
        set: function(show) {                                                                                          // 16209
            this.$gutterLayer.setShowLineNumbers(show);                                                                // 16210
            this.$loop.schedule(this.CHANGE_GUTTER);                                                                   // 16211
        },                                                                                                             // 16212
        initialValue: true                                                                                             // 16213
    },                                                                                                                 // 16214
    displayIndentGuides: {                                                                                             // 16215
        set: function(show) {                                                                                          // 16216
            if (this.$textLayer.setDisplayIndentGuides(show))                                                          // 16217
                this.$loop.schedule(this.CHANGE_TEXT);                                                                 // 16218
        },                                                                                                             // 16219
        initialValue: true                                                                                             // 16220
    },                                                                                                                 // 16221
    highlightGutterLine: {                                                                                             // 16222
        set: function(shouldHighlight) {                                                                               // 16223
            if (!this.$gutterLineHighlight) {                                                                          // 16224
                this.$gutterLineHighlight = dom.createElement("div");                                                  // 16225
                this.$gutterLineHighlight.className = "ace_gutter-active-line";                                        // 16226
                this.$gutter.appendChild(this.$gutterLineHighlight);                                                   // 16227
                return;                                                                                                // 16228
            }                                                                                                          // 16229
                                                                                                                       // 16230
            this.$gutterLineHighlight.style.display = shouldHighlight ? "" : "none";                                   // 16231
            if (this.$cursorLayer.$pixelPos)                                                                           // 16232
                this.$updateGutterLineHighlight();                                                                     // 16233
        },                                                                                                             // 16234
        initialValue: false,                                                                                           // 16235
        value: true                                                                                                    // 16236
    },                                                                                                                 // 16237
    hScrollBarAlwaysVisible: {                                                                                         // 16238
        set: function(val) {                                                                                           // 16239
            if (!this.$hScrollBarAlwaysVisible || !this.$horizScroll)                                                  // 16240
                this.$loop.schedule(this.CHANGE_SCROLL);                                                               // 16241
        },                                                                                                             // 16242
        initialValue: false                                                                                            // 16243
    },                                                                                                                 // 16244
    vScrollBarAlwaysVisible: {                                                                                         // 16245
        set: function(val) {                                                                                           // 16246
            if (!this.$vScrollBarAlwaysVisible || !this.$vScroll)                                                      // 16247
                this.$loop.schedule(this.CHANGE_SCROLL);                                                               // 16248
        },                                                                                                             // 16249
        initialValue: false                                                                                            // 16250
    },                                                                                                                 // 16251
    fontSize:  {                                                                                                       // 16252
        set: function(size) {                                                                                          // 16253
            if (typeof size == "number")                                                                               // 16254
                size = size + "px";                                                                                    // 16255
            this.container.style.fontSize = size;                                                                      // 16256
            this.updateFontSize();                                                                                     // 16257
        },                                                                                                             // 16258
        initialValue: 12                                                                                               // 16259
    },                                                                                                                 // 16260
    fontFamily: {                                                                                                      // 16261
        set: function(name) {                                                                                          // 16262
            this.container.style.fontFamily = name;                                                                    // 16263
            this.updateFontSize();                                                                                     // 16264
        }                                                                                                              // 16265
    },                                                                                                                 // 16266
    maxLines: {                                                                                                        // 16267
        set: function(val) {                                                                                           // 16268
            this.updateFull();                                                                                         // 16269
        }                                                                                                              // 16270
    },                                                                                                                 // 16271
    minLines: {                                                                                                        // 16272
        set: function(val) {                                                                                           // 16273
            this.updateFull();                                                                                         // 16274
        }                                                                                                              // 16275
    },                                                                                                                 // 16276
    scrollPastEnd: {                                                                                                   // 16277
        set: function(val) {                                                                                           // 16278
            val = +val || 0;                                                                                           // 16279
            if (this.$scrollPastEnd == val)                                                                            // 16280
                return;                                                                                                // 16281
            this.$scrollPastEnd = val;                                                                                 // 16282
            this.$loop.schedule(this.CHANGE_SCROLL);                                                                   // 16283
        },                                                                                                             // 16284
        initialValue: 0,                                                                                               // 16285
        handlesSet: true                                                                                               // 16286
    },                                                                                                                 // 16287
    fixedWidthGutter: {                                                                                                // 16288
        set: function(val) {                                                                                           // 16289
            this.$gutterLayer.$fixedWidth = !!val;                                                                     // 16290
            this.$loop.schedule(this.CHANGE_GUTTER);                                                                   // 16291
        }                                                                                                              // 16292
    },                                                                                                                 // 16293
    theme: {                                                                                                           // 16294
        set: function(val) { this.setTheme(val) },                                                                     // 16295
        get: function() { return this.$themeId || this.theme; },                                                       // 16296
        initialValue: "./theme/textmate",                                                                              // 16297
        handlesSet: true                                                                                               // 16298
    }                                                                                                                  // 16299
});                                                                                                                    // 16300
                                                                                                                       // 16301
exports.VirtualRenderer = VirtualRenderer;                                                                             // 16302
});                                                                                                                    // 16303
                                                                                                                       // 16304
define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"], function(require, exports, module) {
"use strict";                                                                                                          // 16306
                                                                                                                       // 16307
var oop = require("../lib/oop");                                                                                       // 16308
var net = require("../lib/net");                                                                                       // 16309
var EventEmitter = require("../lib/event_emitter").EventEmitter;                                                       // 16310
var config = require("../config");                                                                                     // 16311
                                                                                                                       // 16312
var WorkerClient = function(topLevelNamespaces, mod, classname, workerUrl) {                                           // 16313
    this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this);                                                            // 16314
    this.changeListener = this.changeListener.bind(this);                                                              // 16315
    this.onMessage = this.onMessage.bind(this);                                                                        // 16316
    if (require.nameToUrl && !require.toUrl)                                                                           // 16317
        require.toUrl = require.nameToUrl;                                                                             // 16318
                                                                                                                       // 16319
    if (config.get("packaged") || !require.toUrl) {                                                                    // 16320
        workerUrl = workerUrl || config.moduleUrl(mod, "worker");                                                      // 16321
    } else {                                                                                                           // 16322
        var normalizePath = this.$normalizePath;                                                                       // 16323
        workerUrl = workerUrl || normalizePath(require.toUrl("ace/worker/worker.js", null, "_"));                      // 16324
                                                                                                                       // 16325
        var tlns = {};                                                                                                 // 16326
        topLevelNamespaces.forEach(function(ns) {                                                                      // 16327
            tlns[ns] = normalizePath(require.toUrl(ns, null, "_").replace(/(\.js)?(\?.*)?$/, ""));                     // 16328
        });                                                                                                            // 16329
    }                                                                                                                  // 16330
                                                                                                                       // 16331
    try {                                                                                                              // 16332
        this.$worker = new Worker(workerUrl);                                                                          // 16333
    } catch(e) {                                                                                                       // 16334
        if (e instanceof window.DOMException) {                                                                        // 16335
            var blob = this.$workerBlob(workerUrl);                                                                    // 16336
            var URL = window.URL || window.webkitURL;                                                                  // 16337
            var blobURL = URL.createObjectURL(blob);                                                                   // 16338
                                                                                                                       // 16339
            this.$worker = new Worker(blobURL);                                                                        // 16340
            URL.revokeObjectURL(blobURL);                                                                              // 16341
        } else {                                                                                                       // 16342
            throw e;                                                                                                   // 16343
        }                                                                                                              // 16344
    }                                                                                                                  // 16345
    this.$worker.postMessage({                                                                                         // 16346
        init : true,                                                                                                   // 16347
        tlns : tlns,                                                                                                   // 16348
        module : mod,                                                                                                  // 16349
        classname : classname                                                                                          // 16350
    });                                                                                                                // 16351
                                                                                                                       // 16352
    this.callbackId = 1;                                                                                               // 16353
    this.callbacks = {};                                                                                               // 16354
                                                                                                                       // 16355
    this.$worker.onmessage = this.onMessage;                                                                           // 16356
};                                                                                                                     // 16357
                                                                                                                       // 16358
(function(){                                                                                                           // 16359
                                                                                                                       // 16360
    oop.implement(this, EventEmitter);                                                                                 // 16361
                                                                                                                       // 16362
    this.onMessage = function(e) {                                                                                     // 16363
        var msg = e.data;                                                                                              // 16364
        switch(msg.type) {                                                                                             // 16365
            case "event":                                                                                              // 16366
                this._signal(msg.name, {data: msg.data});                                                              // 16367
                break;                                                                                                 // 16368
            case "call":                                                                                               // 16369
                var callback = this.callbacks[msg.id];                                                                 // 16370
                if (callback) {                                                                                        // 16371
                    callback(msg.data);                                                                                // 16372
                    delete this.callbacks[msg.id];                                                                     // 16373
                }                                                                                                      // 16374
                break;                                                                                                 // 16375
            case "error":                                                                                              // 16376
                this.reportError(msg.data);                                                                            // 16377
                break;                                                                                                 // 16378
            case "log":                                                                                                // 16379
                window.console && console.log && console.log.apply(console, msg.data);                                 // 16380
                break;                                                                                                 // 16381
        }                                                                                                              // 16382
    };                                                                                                                 // 16383
                                                                                                                       // 16384
    this.reportError = function(err) {                                                                                 // 16385
        window.console && console.error && console.error(err);                                                         // 16386
    };                                                                                                                 // 16387
                                                                                                                       // 16388
    this.$normalizePath = function(path) {                                                                             // 16389
        return net.qualifyURL(path);                                                                                   // 16390
    };                                                                                                                 // 16391
                                                                                                                       // 16392
    this.terminate = function() {                                                                                      // 16393
        this._signal("terminate", {});                                                                                 // 16394
        this.deltaQueue = null;                                                                                        // 16395
        this.$worker.terminate();                                                                                      // 16396
        this.$worker = null;                                                                                           // 16397
        if (this.$doc)                                                                                                 // 16398
            this.$doc.off("change", this.changeListener);                                                              // 16399
        this.$doc = null;                                                                                              // 16400
    };                                                                                                                 // 16401
                                                                                                                       // 16402
    this.send = function(cmd, args) {                                                                                  // 16403
        this.$worker.postMessage({command: cmd, args: args});                                                          // 16404
    };                                                                                                                 // 16405
                                                                                                                       // 16406
    this.call = function(cmd, args, callback) {                                                                        // 16407
        if (callback) {                                                                                                // 16408
            var id = this.callbackId++;                                                                                // 16409
            this.callbacks[id] = callback;                                                                             // 16410
            args.push(id);                                                                                             // 16411
        }                                                                                                              // 16412
        this.send(cmd, args);                                                                                          // 16413
    };                                                                                                                 // 16414
                                                                                                                       // 16415
    this.emit = function(event, data) {                                                                                // 16416
        try {                                                                                                          // 16417
            this.$worker.postMessage({event: event, data: {data: data.data}});                                         // 16418
        }                                                                                                              // 16419
        catch(ex) {                                                                                                    // 16420
            console.error(ex.stack);                                                                                   // 16421
        }                                                                                                              // 16422
    };                                                                                                                 // 16423
                                                                                                                       // 16424
    this.attachToDocument = function(doc) {                                                                            // 16425
        if(this.$doc)                                                                                                  // 16426
            this.terminate();                                                                                          // 16427
                                                                                                                       // 16428
        this.$doc = doc;                                                                                               // 16429
        this.call("setValue", [doc.getValue()]);                                                                       // 16430
        doc.on("change", this.changeListener);                                                                         // 16431
    };                                                                                                                 // 16432
                                                                                                                       // 16433
    this.changeListener = function(delta) {                                                                            // 16434
        if (!this.deltaQueue) {                                                                                        // 16435
            this.deltaQueue = [];                                                                                      // 16436
            setTimeout(this.$sendDeltaQueue, 0);                                                                       // 16437
        }                                                                                                              // 16438
        if (delta.action == "insert")                                                                                  // 16439
            this.deltaQueue.push(delta.start, delta.lines);                                                            // 16440
        else                                                                                                           // 16441
            this.deltaQueue.push(delta.start, delta.end);                                                              // 16442
    };                                                                                                                 // 16443
                                                                                                                       // 16444
    this.$sendDeltaQueue = function() {                                                                                // 16445
        var q = this.deltaQueue;                                                                                       // 16446
        if (!q) return;                                                                                                // 16447
        this.deltaQueue = null;                                                                                        // 16448
        if (q.length > 50 && q.length > this.$doc.getLength() >> 1) {                                                  // 16449
            this.call("setValue", [this.$doc.getValue()]);                                                             // 16450
        } else                                                                                                         // 16451
            this.emit("change", {data: q});                                                                            // 16452
    };                                                                                                                 // 16453
                                                                                                                       // 16454
    this.$workerBlob = function(workerUrl) {                                                                           // 16455
        var script = "importScripts('" + net.qualifyURL(workerUrl) + "');";                                            // 16456
        try {                                                                                                          // 16457
            return new Blob([script], {"type": "application/javascript"});                                             // 16458
        } catch (e) { // Backwards-compatibility                                                                       // 16459
            var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;                 // 16460
            var blobBuilder = new BlobBuilder();                                                                       // 16461
            blobBuilder.append(script);                                                                                // 16462
            return blobBuilder.getBlob("application/javascript");                                                      // 16463
        }                                                                                                              // 16464
    };                                                                                                                 // 16465
                                                                                                                       // 16466
}).call(WorkerClient.prototype);                                                                                       // 16467
                                                                                                                       // 16468
                                                                                                                       // 16469
var UIWorkerClient = function(topLevelNamespaces, mod, classname) {                                                    // 16470
    this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this);                                                            // 16471
    this.changeListener = this.changeListener.bind(this);                                                              // 16472
    this.callbackId = 1;                                                                                               // 16473
    this.callbacks = {};                                                                                               // 16474
    this.messageBuffer = [];                                                                                           // 16475
                                                                                                                       // 16476
    var main = null;                                                                                                   // 16477
    var emitSync = false;                                                                                              // 16478
    var sender = Object.create(EventEmitter);                                                                          // 16479
    var _self = this;                                                                                                  // 16480
                                                                                                                       // 16481
    this.$worker = {};                                                                                                 // 16482
    this.$worker.terminate = function() {};                                                                            // 16483
    this.$worker.postMessage = function(e) {                                                                           // 16484
        _self.messageBuffer.push(e);                                                                                   // 16485
        if (main) {                                                                                                    // 16486
            if (emitSync)                                                                                              // 16487
                setTimeout(processNext);                                                                               // 16488
            else                                                                                                       // 16489
                processNext();                                                                                         // 16490
        }                                                                                                              // 16491
    };                                                                                                                 // 16492
    this.setEmitSync = function(val) { emitSync = val };                                                               // 16493
                                                                                                                       // 16494
    var processNext = function() {                                                                                     // 16495
        var msg = _self.messageBuffer.shift();                                                                         // 16496
        if (msg.command)                                                                                               // 16497
            main[msg.command].apply(main, msg.args);                                                                   // 16498
        else if (msg.event)                                                                                            // 16499
            sender._signal(msg.event, msg.data);                                                                       // 16500
    };                                                                                                                 // 16501
                                                                                                                       // 16502
    sender.postMessage = function(msg) {                                                                               // 16503
        _self.onMessage({data: msg});                                                                                  // 16504
    };                                                                                                                 // 16505
    sender.callback = function(data, callbackId) {                                                                     // 16506
        this.postMessage({type: "call", id: callbackId, data: data});                                                  // 16507
    };                                                                                                                 // 16508
    sender.emit = function(name, data) {                                                                               // 16509
        this.postMessage({type: "event", name: name, data: data});                                                     // 16510
    };                                                                                                                 // 16511
                                                                                                                       // 16512
    config.loadModule(["worker", mod], function(Main) {                                                                // 16513
        main = new Main[classname](sender);                                                                            // 16514
        while (_self.messageBuffer.length)                                                                             // 16515
            processNext();                                                                                             // 16516
    });                                                                                                                // 16517
};                                                                                                                     // 16518
                                                                                                                       // 16519
UIWorkerClient.prototype = WorkerClient.prototype;                                                                     // 16520
                                                                                                                       // 16521
exports.UIWorkerClient = UIWorkerClient;                                                                               // 16522
exports.WorkerClient = WorkerClient;                                                                                   // 16523
                                                                                                                       // 16524
});                                                                                                                    // 16525
                                                                                                                       // 16526
define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"], function(require, exports, module) {
"use strict";                                                                                                          // 16528
                                                                                                                       // 16529
var Range = require("./range").Range;                                                                                  // 16530
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 16531
var oop = require("./lib/oop");                                                                                        // 16532
                                                                                                                       // 16533
var PlaceHolder = function(session, length, pos, others, mainClass, othersClass) {                                     // 16534
    var _self = this;                                                                                                  // 16535
    this.length = length;                                                                                              // 16536
    this.session = session;                                                                                            // 16537
    this.doc = session.getDocument();                                                                                  // 16538
    this.mainClass = mainClass;                                                                                        // 16539
    this.othersClass = othersClass;                                                                                    // 16540
    this.$onUpdate = this.onUpdate.bind(this);                                                                         // 16541
    this.doc.on("change", this.$onUpdate);                                                                             // 16542
    this.$others = others;                                                                                             // 16543
                                                                                                                       // 16544
    this.$onCursorChange = function() {                                                                                // 16545
        setTimeout(function() {                                                                                        // 16546
            _self.onCursorChange();                                                                                    // 16547
        });                                                                                                            // 16548
    };                                                                                                                 // 16549
                                                                                                                       // 16550
    this.$pos = pos;                                                                                                   // 16551
    var undoStack = session.getUndoManager().$undoStack || session.getUndoManager().$undostack || {length: -1};        // 16552
    this.$undoStackDepth =  undoStack.length;                                                                          // 16553
    this.setup();                                                                                                      // 16554
                                                                                                                       // 16555
    session.selection.on("changeCursor", this.$onCursorChange);                                                        // 16556
};                                                                                                                     // 16557
                                                                                                                       // 16558
(function() {                                                                                                          // 16559
                                                                                                                       // 16560
    oop.implement(this, EventEmitter);                                                                                 // 16561
    this.setup = function() {                                                                                          // 16562
        var _self = this;                                                                                              // 16563
        var doc = this.doc;                                                                                            // 16564
        var session = this.session;                                                                                    // 16565
        var pos = this.$pos;                                                                                           // 16566
                                                                                                                       // 16567
        this.selectionBefore = session.selection.toJSON();                                                             // 16568
        if (session.selection.inMultiSelectMode)                                                                       // 16569
            session.selection.toSingleRange();                                                                         // 16570
                                                                                                                       // 16571
        this.pos = doc.createAnchor(pos.row, pos.column);                                                              // 16572
        this.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column + this.length), this.mainClass, null, false);
        this.pos.on("change", function(event) {                                                                        // 16574
            session.removeMarker(_self.markerId);                                                                      // 16575
            _self.markerId = session.addMarker(new Range(event.value.row, event.value.column, event.value.row, event.value.column+_self.length), _self.mainClass, null, false);
        });                                                                                                            // 16577
        this.others = [];                                                                                              // 16578
        this.$others.forEach(function(other) {                                                                         // 16579
            var anchor = doc.createAnchor(other.row, other.column);                                                    // 16580
            _self.others.push(anchor);                                                                                 // 16581
        });                                                                                                            // 16582
        session.setUndoSelect(false);                                                                                  // 16583
    };                                                                                                                 // 16584
    this.showOtherMarkers = function() {                                                                               // 16585
        if(this.othersActive) return;                                                                                  // 16586
        var session = this.session;                                                                                    // 16587
        var _self = this;                                                                                              // 16588
        this.othersActive = true;                                                                                      // 16589
        this.others.forEach(function(anchor) {                                                                         // 16590
            anchor.markerId = session.addMarker(new Range(anchor.row, anchor.column, anchor.row, anchor.column+_self.length), _self.othersClass, null, false);
            anchor.on("change", function(event) {                                                                      // 16592
                session.removeMarker(anchor.markerId);                                                                 // 16593
                anchor.markerId = session.addMarker(new Range(event.value.row, event.value.column, event.value.row, event.value.column+_self.length), _self.othersClass, null, false);
            });                                                                                                        // 16595
        });                                                                                                            // 16596
    };                                                                                                                 // 16597
    this.hideOtherMarkers = function() {                                                                               // 16598
        if(!this.othersActive) return;                                                                                 // 16599
        this.othersActive = false;                                                                                     // 16600
        for (var i = 0; i < this.others.length; i++) {                                                                 // 16601
            this.session.removeMarker(this.others[i].markerId);                                                        // 16602
        }                                                                                                              // 16603
    };                                                                                                                 // 16604
    this.onUpdate = function(delta) {                                                                                  // 16605
        var range = delta;                                                                                             // 16606
        if(range.start.row !== range.end.row) return;                                                                  // 16607
        if(range.start.row !== this.pos.row) return;                                                                   // 16608
        if (this.$updating) return;                                                                                    // 16609
        this.$updating = true;                                                                                         // 16610
        var lengthDiff = delta.action === "insert" ? range.end.column - range.start.column : range.start.column - range.end.column;
                                                                                                                       // 16612
        if(range.start.column >= this.pos.column && range.start.column <= this.pos.column + this.length + 1) {         // 16613
            var distanceFromStart = range.start.column - this.pos.column;                                              // 16614
            this.length += lengthDiff;                                                                                 // 16615
            if(!this.session.$fromUndo) {                                                                              // 16616
                if(delta.action === 'insert') {                                                                        // 16617
                    for (var i = this.others.length - 1; i >= 0; i--) {                                                // 16618
                        var otherPos = this.others[i];                                                                 // 16619
                        var newPos = {row: otherPos.row, column: otherPos.column + distanceFromStart};                 // 16620
                        if(otherPos.row === range.start.row && range.start.column < otherPos.column)                   // 16621
                            newPos.column += lengthDiff;                                                               // 16622
                        this.doc.insertMergedLines(newPos, delta.lines);                                               // 16623
                    }                                                                                                  // 16624
                } else if(delta.action === 'remove') {                                                                 // 16625
                    for (var i = this.others.length - 1; i >= 0; i--) {                                                // 16626
                        var otherPos = this.others[i];                                                                 // 16627
                        var newPos = {row: otherPos.row, column: otherPos.column + distanceFromStart};                 // 16628
                        if(otherPos.row === range.start.row && range.start.column < otherPos.column)                   // 16629
                            newPos.column += lengthDiff;                                                               // 16630
                        this.doc.remove(new Range(newPos.row, newPos.column, newPos.row, newPos.column - lengthDiff));
                    }                                                                                                  // 16632
                }                                                                                                      // 16633
                if(range.start.column === this.pos.column && delta.action === 'insert') {                              // 16634
                    setTimeout(function() {                                                                            // 16635
                        this.pos.setPosition(this.pos.row, this.pos.column - lengthDiff);                              // 16636
                        for (var i = 0; i < this.others.length; i++) {                                                 // 16637
                            var other = this.others[i];                                                                // 16638
                            var newPos = {row: other.row, column: other.column - lengthDiff};                          // 16639
                            if(other.row === range.start.row && range.start.column < other.column)                     // 16640
                                newPos.column += lengthDiff;                                                           // 16641
                            other.setPosition(newPos.row, newPos.column);                                              // 16642
                        }                                                                                              // 16643
                    }.bind(this), 0);                                                                                  // 16644
                }                                                                                                      // 16645
                else if(range.start.column === this.pos.column && delta.action === 'remove') {                         // 16646
                    setTimeout(function() {                                                                            // 16647
                        for (var i = 0; i < this.others.length; i++) {                                                 // 16648
                            var other = this.others[i];                                                                // 16649
                            if(other.row === range.start.row && range.start.column < other.column) {                   // 16650
                                other.setPosition(other.row, other.column - lengthDiff);                               // 16651
                            }                                                                                          // 16652
                        }                                                                                              // 16653
                    }.bind(this), 0);                                                                                  // 16654
                }                                                                                                      // 16655
            }                                                                                                          // 16656
            this.pos._emit("change", {value: this.pos});                                                               // 16657
            for (var i = 0; i < this.others.length; i++) {                                                             // 16658
                this.others[i]._emit("change", {value: this.others[i]});                                               // 16659
            }                                                                                                          // 16660
        }                                                                                                              // 16661
        this.$updating = false;                                                                                        // 16662
    };                                                                                                                 // 16663
                                                                                                                       // 16664
    this.onCursorChange = function(event) {                                                                            // 16665
        if (this.$updating || !this.session) return;                                                                   // 16666
        var pos = this.session.selection.getCursor();                                                                  // 16667
        if (pos.row === this.pos.row && pos.column >= this.pos.column && pos.column <= this.pos.column + this.length) {
            this.showOtherMarkers();                                                                                   // 16669
            this._emit("cursorEnter", event);                                                                          // 16670
        } else {                                                                                                       // 16671
            this.hideOtherMarkers();                                                                                   // 16672
            this._emit("cursorLeave", event);                                                                          // 16673
        }                                                                                                              // 16674
    };                                                                                                                 // 16675
    this.detach = function() {                                                                                         // 16676
        this.session.removeMarker(this.markerId);                                                                      // 16677
        this.hideOtherMarkers();                                                                                       // 16678
        this.doc.removeEventListener("change", this.$onUpdate);                                                        // 16679
        this.session.selection.removeEventListener("changeCursor", this.$onCursorChange);                              // 16680
        this.pos.detach();                                                                                             // 16681
        for (var i = 0; i < this.others.length; i++) {                                                                 // 16682
            this.others[i].detach();                                                                                   // 16683
        }                                                                                                              // 16684
        this.session.setUndoSelect(true);                                                                              // 16685
        this.session = null;                                                                                           // 16686
    };                                                                                                                 // 16687
    this.cancel = function() {                                                                                         // 16688
        if(this.$undoStackDepth === -1)                                                                                // 16689
            throw Error("Canceling placeholders only supported with undo manager attached to session.");               // 16690
        var undoManager = this.session.getUndoManager();                                                               // 16691
        var undosRequired = (undoManager.$undoStack || undoManager.$undostack).length - this.$undoStackDepth;          // 16692
        for (var i = 0; i < undosRequired; i++) {                                                                      // 16693
            undoManager.undo(true);                                                                                    // 16694
        }                                                                                                              // 16695
        if (this.selectionBefore)                                                                                      // 16696
            this.session.selection.fromJSON(this.selectionBefore);                                                     // 16697
    };                                                                                                                 // 16698
}).call(PlaceHolder.prototype);                                                                                        // 16699
                                                                                                                       // 16700
                                                                                                                       // 16701
exports.PlaceHolder = PlaceHolder;                                                                                     // 16702
});                                                                                                                    // 16703
                                                                                                                       // 16704
define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"], function(require, exports, module) {
                                                                                                                       // 16706
var event = require("../lib/event");                                                                                   // 16707
var useragent = require("../lib/useragent");                                                                           // 16708
function isSamePoint(p1, p2) {                                                                                         // 16709
    return p1.row == p2.row && p1.column == p2.column;                                                                 // 16710
}                                                                                                                      // 16711
                                                                                                                       // 16712
function onMouseDown(e) {                                                                                              // 16713
    var ev = e.domEvent;                                                                                               // 16714
    var alt = ev.altKey;                                                                                               // 16715
    var shift = ev.shiftKey;                                                                                           // 16716
    var ctrl = ev.ctrlKey;                                                                                             // 16717
    var accel = e.getAccelKey();                                                                                       // 16718
    var button = e.getButton();                                                                                        // 16719
                                                                                                                       // 16720
    if (ctrl && useragent.isMac)                                                                                       // 16721
        button = ev.button;                                                                                            // 16722
                                                                                                                       // 16723
    if (e.editor.inMultiSelectMode && button == 2) {                                                                   // 16724
        e.editor.textInput.onContextMenu(e.domEvent);                                                                  // 16725
        return;                                                                                                        // 16726
    }                                                                                                                  // 16727
                                                                                                                       // 16728
    if (!ctrl && !alt && !accel) {                                                                                     // 16729
        if (button === 0 && e.editor.inMultiSelectMode)                                                                // 16730
            e.editor.exitMultiSelectMode();                                                                            // 16731
        return;                                                                                                        // 16732
    }                                                                                                                  // 16733
                                                                                                                       // 16734
    if (button !== 0)                                                                                                  // 16735
        return;                                                                                                        // 16736
                                                                                                                       // 16737
    var editor = e.editor;                                                                                             // 16738
    var selection = editor.selection;                                                                                  // 16739
    var isMultiSelect = editor.inMultiSelectMode;                                                                      // 16740
    var pos = e.getDocumentPosition();                                                                                 // 16741
    var cursor = selection.getCursor();                                                                                // 16742
    var inSelection = e.inSelection() || (selection.isEmpty() && isSamePoint(pos, cursor));                            // 16743
                                                                                                                       // 16744
    var mouseX = e.x, mouseY = e.y;                                                                                    // 16745
    var onMouseSelection = function(e) {                                                                               // 16746
        mouseX = e.clientX;                                                                                            // 16747
        mouseY = e.clientY;                                                                                            // 16748
    };                                                                                                                 // 16749
                                                                                                                       // 16750
    var session = editor.session;                                                                                      // 16751
    var screenAnchor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);                                       // 16752
    var screenCursor = screenAnchor;                                                                                   // 16753
                                                                                                                       // 16754
    var selectionMode;                                                                                                 // 16755
    if (editor.$mouseHandler.$enableJumpToDef) {                                                                       // 16756
        if (ctrl && alt || accel && alt)                                                                               // 16757
            selectionMode = shift ? "block" : "add";                                                                   // 16758
        else if (alt && editor.$blockSelectEnabled)                                                                    // 16759
            selectionMode = "block";                                                                                   // 16760
    } else {                                                                                                           // 16761
        if (accel && !alt) {                                                                                           // 16762
            selectionMode = "add";                                                                                     // 16763
            if (!isMultiSelect && shift)                                                                               // 16764
                return;                                                                                                // 16765
        } else if (alt && editor.$blockSelectEnabled) {                                                                // 16766
            selectionMode = "block";                                                                                   // 16767
        }                                                                                                              // 16768
    }                                                                                                                  // 16769
                                                                                                                       // 16770
    if (selectionMode && useragent.isMac && ev.ctrlKey) {                                                              // 16771
        editor.$mouseHandler.cancelContextMenu();                                                                      // 16772
    }                                                                                                                  // 16773
                                                                                                                       // 16774
    if (selectionMode == "add") {                                                                                      // 16775
        if (!isMultiSelect && inSelection)                                                                             // 16776
            return; // dragging                                                                                        // 16777
                                                                                                                       // 16778
        if (!isMultiSelect) {                                                                                          // 16779
            var range = selection.toOrientedRange();                                                                   // 16780
            editor.addSelectionMarker(range);                                                                          // 16781
        }                                                                                                              // 16782
                                                                                                                       // 16783
        var oldRange = selection.rangeList.rangeAtPoint(pos);                                                          // 16784
                                                                                                                       // 16785
                                                                                                                       // 16786
        editor.$blockScrolling++;                                                                                      // 16787
        editor.inVirtualSelectionMode = true;                                                                          // 16788
                                                                                                                       // 16789
        if (shift) {                                                                                                   // 16790
            oldRange = null;                                                                                           // 16791
            range = selection.ranges[0] || range;                                                                      // 16792
            editor.removeSelectionMarker(range);                                                                       // 16793
        }                                                                                                              // 16794
        editor.once("mouseup", function() {                                                                            // 16795
            var tmpSel = selection.toOrientedRange();                                                                  // 16796
                                                                                                                       // 16797
            if (oldRange && tmpSel.isEmpty() && isSamePoint(oldRange.cursor, tmpSel.cursor))                           // 16798
                selection.substractPoint(tmpSel.cursor);                                                               // 16799
            else {                                                                                                     // 16800
                if (shift) {                                                                                           // 16801
                    selection.substractPoint(range.cursor);                                                            // 16802
                } else if (range) {                                                                                    // 16803
                    editor.removeSelectionMarker(range);                                                               // 16804
                    selection.addRange(range);                                                                         // 16805
                }                                                                                                      // 16806
                selection.addRange(tmpSel);                                                                            // 16807
            }                                                                                                          // 16808
            editor.$blockScrolling--;                                                                                  // 16809
            editor.inVirtualSelectionMode = false;                                                                     // 16810
        });                                                                                                            // 16811
                                                                                                                       // 16812
    } else if (selectionMode == "block") {                                                                             // 16813
        e.stop();                                                                                                      // 16814
        editor.inVirtualSelectionMode = true;                                                                          // 16815
        var initialRange;                                                                                              // 16816
        var rectSel = [];                                                                                              // 16817
        var blockSelect = function() {                                                                                 // 16818
            var newCursor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);                                  // 16819
            var cursor = session.screenToDocumentPosition(newCursor.row, newCursor.column);                            // 16820
                                                                                                                       // 16821
            if (isSamePoint(screenCursor, newCursor) && isSamePoint(cursor, selection.lead))                           // 16822
                return;                                                                                                // 16823
            screenCursor = newCursor;                                                                                  // 16824
                                                                                                                       // 16825
            editor.$blockScrolling++;                                                                                  // 16826
            editor.selection.moveToPosition(cursor);                                                                   // 16827
            editor.renderer.scrollCursorIntoView();                                                                    // 16828
                                                                                                                       // 16829
            editor.removeSelectionMarkers(rectSel);                                                                    // 16830
            rectSel = selection.rectangularRangeBlock(screenCursor, screenAnchor);                                     // 16831
            if (editor.$mouseHandler.$clickSelection && rectSel.length == 1 && rectSel[0].isEmpty())                   // 16832
                rectSel[0] = editor.$mouseHandler.$clickSelection.clone();                                             // 16833
            rectSel.forEach(editor.addSelectionMarker, editor);                                                        // 16834
            editor.updateSelectionMarkers();                                                                           // 16835
            editor.$blockScrolling--;                                                                                  // 16836
        };                                                                                                             // 16837
        editor.$blockScrolling++;                                                                                      // 16838
        if (isMultiSelect && !accel) {                                                                                 // 16839
            selection.toSingleRange();                                                                                 // 16840
        } else if (!isMultiSelect && accel) {                                                                          // 16841
            initialRange = selection.toOrientedRange();                                                                // 16842
            editor.addSelectionMarker(initialRange);                                                                   // 16843
        }                                                                                                              // 16844
                                                                                                                       // 16845
        if (shift)                                                                                                     // 16846
            screenAnchor = session.documentToScreenPosition(selection.lead);                                           // 16847
        else                                                                                                           // 16848
            selection.moveToPosition(pos);                                                                             // 16849
        editor.$blockScrolling--;                                                                                      // 16850
                                                                                                                       // 16851
        screenCursor = {row: -1, column: -1};                                                                          // 16852
                                                                                                                       // 16853
        var onMouseSelectionEnd = function(e) {                                                                        // 16854
            clearInterval(timerId);                                                                                    // 16855
            editor.removeSelectionMarkers(rectSel);                                                                    // 16856
            if (!rectSel.length)                                                                                       // 16857
                rectSel = [selection.toOrientedRange()];                                                               // 16858
            editor.$blockScrolling++;                                                                                  // 16859
            if (initialRange) {                                                                                        // 16860
                editor.removeSelectionMarker(initialRange);                                                            // 16861
                selection.toSingleRange(initialRange);                                                                 // 16862
            }                                                                                                          // 16863
            for (var i = 0; i < rectSel.length; i++)                                                                   // 16864
                selection.addRange(rectSel[i]);                                                                        // 16865
            editor.inVirtualSelectionMode = false;                                                                     // 16866
            editor.$mouseHandler.$clickSelection = null;                                                               // 16867
            editor.$blockScrolling--;                                                                                  // 16868
        };                                                                                                             // 16869
                                                                                                                       // 16870
        var onSelectionInterval = blockSelect;                                                                         // 16871
                                                                                                                       // 16872
        event.capture(editor.container, onMouseSelection, onMouseSelectionEnd);                                        // 16873
        var timerId = setInterval(function() {onSelectionInterval();}, 20);                                            // 16874
                                                                                                                       // 16875
        return e.preventDefault();                                                                                     // 16876
    }                                                                                                                  // 16877
}                                                                                                                      // 16878
                                                                                                                       // 16879
                                                                                                                       // 16880
exports.onMouseDown = onMouseDown;                                                                                     // 16881
                                                                                                                       // 16882
});                                                                                                                    // 16883
                                                                                                                       // 16884
define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"], function(require, exports, module) {
exports.defaultCommands = [{                                                                                           // 16886
    name: "addCursorAbove",                                                                                            // 16887
    exec: function(editor) { editor.selectMoreLines(-1); },                                                            // 16888
    bindKey: {win: "Ctrl-Alt-Up", mac: "Ctrl-Alt-Up"},                                                                 // 16889
    scrollIntoView: "cursor",                                                                                          // 16890
    readOnly: true                                                                                                     // 16891
}, {                                                                                                                   // 16892
    name: "addCursorBelow",                                                                                            // 16893
    exec: function(editor) { editor.selectMoreLines(1); },                                                             // 16894
    bindKey: {win: "Ctrl-Alt-Down", mac: "Ctrl-Alt-Down"},                                                             // 16895
    scrollIntoView: "cursor",                                                                                          // 16896
    readOnly: true                                                                                                     // 16897
}, {                                                                                                                   // 16898
    name: "addCursorAboveSkipCurrent",                                                                                 // 16899
    exec: function(editor) { editor.selectMoreLines(-1, true); },                                                      // 16900
    bindKey: {win: "Ctrl-Alt-Shift-Up", mac: "Ctrl-Alt-Shift-Up"},                                                     // 16901
    scrollIntoView: "cursor",                                                                                          // 16902
    readOnly: true                                                                                                     // 16903
}, {                                                                                                                   // 16904
    name: "addCursorBelowSkipCurrent",                                                                                 // 16905
    exec: function(editor) { editor.selectMoreLines(1, true); },                                                       // 16906
    bindKey: {win: "Ctrl-Alt-Shift-Down", mac: "Ctrl-Alt-Shift-Down"},                                                 // 16907
    scrollIntoView: "cursor",                                                                                          // 16908
    readOnly: true                                                                                                     // 16909
}, {                                                                                                                   // 16910
    name: "selectMoreBefore",                                                                                          // 16911
    exec: function(editor) { editor.selectMore(-1); },                                                                 // 16912
    bindKey: {win: "Ctrl-Alt-Left", mac: "Ctrl-Alt-Left"},                                                             // 16913
    scrollIntoView: "cursor",                                                                                          // 16914
    readOnly: true                                                                                                     // 16915
}, {                                                                                                                   // 16916
    name: "selectMoreAfter",                                                                                           // 16917
    exec: function(editor) { editor.selectMore(1); },                                                                  // 16918
    bindKey: {win: "Ctrl-Alt-Right", mac: "Ctrl-Alt-Right"},                                                           // 16919
    scrollIntoView: "cursor",                                                                                          // 16920
    readOnly: true                                                                                                     // 16921
}, {                                                                                                                   // 16922
    name: "selectNextBefore",                                                                                          // 16923
    exec: function(editor) { editor.selectMore(-1, true); },                                                           // 16924
    bindKey: {win: "Ctrl-Alt-Shift-Left", mac: "Ctrl-Alt-Shift-Left"},                                                 // 16925
    scrollIntoView: "cursor",                                                                                          // 16926
    readOnly: true                                                                                                     // 16927
}, {                                                                                                                   // 16928
    name: "selectNextAfter",                                                                                           // 16929
    exec: function(editor) { editor.selectMore(1, true); },                                                            // 16930
    bindKey: {win: "Ctrl-Alt-Shift-Right", mac: "Ctrl-Alt-Shift-Right"},                                               // 16931
    scrollIntoView: "cursor",                                                                                          // 16932
    readOnly: true                                                                                                     // 16933
}, {                                                                                                                   // 16934
    name: "splitIntoLines",                                                                                            // 16935
    exec: function(editor) { editor.multiSelect.splitIntoLines(); },                                                   // 16936
    bindKey: {win: "Ctrl-Alt-L", mac: "Ctrl-Alt-L"},                                                                   // 16937
    readOnly: true                                                                                                     // 16938
}, {                                                                                                                   // 16939
    name: "alignCursors",                                                                                              // 16940
    exec: function(editor) { editor.alignCursors(); },                                                                 // 16941
    bindKey: {win: "Ctrl-Alt-A", mac: "Ctrl-Alt-A"},                                                                   // 16942
    scrollIntoView: "cursor"                                                                                           // 16943
}, {                                                                                                                   // 16944
    name: "findAll",                                                                                                   // 16945
    exec: function(editor) { editor.findAll(); },                                                                      // 16946
    bindKey: {win: "Ctrl-Alt-K", mac: "Ctrl-Alt-G"},                                                                   // 16947
    scrollIntoView: "cursor",                                                                                          // 16948
    readOnly: true                                                                                                     // 16949
}];                                                                                                                    // 16950
exports.multiSelectCommands = [{                                                                                       // 16951
    name: "singleSelection",                                                                                           // 16952
    bindKey: "esc",                                                                                                    // 16953
    exec: function(editor) { editor.exitMultiSelectMode(); },                                                          // 16954
    scrollIntoView: "cursor",                                                                                          // 16955
    readOnly: true,                                                                                                    // 16956
    isAvailable: function(editor) {return editor && editor.inMultiSelectMode}                                          // 16957
}];                                                                                                                    // 16958
                                                                                                                       // 16959
var HashHandler = require("../keyboard/hash_handler").HashHandler;                                                     // 16960
exports.keyboardHandler = new HashHandler(exports.multiSelectCommands);                                                // 16961
                                                                                                                       // 16962
});                                                                                                                    // 16963
                                                                                                                       // 16964
define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"], function(require, exports, module) {
                                                                                                                       // 16966
var RangeList = require("./range_list").RangeList;                                                                     // 16967
var Range = require("./range").Range;                                                                                  // 16968
var Selection = require("./selection").Selection;                                                                      // 16969
var onMouseDown = require("./mouse/multi_select_handler").onMouseDown;                                                 // 16970
var event = require("./lib/event");                                                                                    // 16971
var lang = require("./lib/lang");                                                                                      // 16972
var commands = require("./commands/multi_select_commands");                                                            // 16973
exports.commands = commands.defaultCommands.concat(commands.multiSelectCommands);                                      // 16974
var Search = require("./search").Search;                                                                               // 16975
var search = new Search();                                                                                             // 16976
                                                                                                                       // 16977
function find(session, needle, dir) {                                                                                  // 16978
    search.$options.wrap = true;                                                                                       // 16979
    search.$options.needle = needle;                                                                                   // 16980
    search.$options.backwards = dir == -1;                                                                             // 16981
    return search.find(session);                                                                                       // 16982
}                                                                                                                      // 16983
var EditSession = require("./edit_session").EditSession;                                                               // 16984
(function() {                                                                                                          // 16985
    this.getSelectionMarkers = function() {                                                                            // 16986
        return this.$selectionMarkers;                                                                                 // 16987
    };                                                                                                                 // 16988
}).call(EditSession.prototype);                                                                                        // 16989
(function() {                                                                                                          // 16990
    this.ranges = null;                                                                                                // 16991
    this.rangeList = null;                                                                                             // 16992
    this.addRange = function(range, $blockChangeEvents) {                                                              // 16993
        if (!range)                                                                                                    // 16994
            return;                                                                                                    // 16995
                                                                                                                       // 16996
        if (!this.inMultiSelectMode && this.rangeCount === 0) {                                                        // 16997
            var oldRange = this.toOrientedRange();                                                                     // 16998
            this.rangeList.add(oldRange);                                                                              // 16999
            this.rangeList.add(range);                                                                                 // 17000
            if (this.rangeList.ranges.length != 2) {                                                                   // 17001
                this.rangeList.removeAll();                                                                            // 17002
                return $blockChangeEvents || this.fromOrientedRange(range);                                            // 17003
            }                                                                                                          // 17004
            this.rangeList.removeAll();                                                                                // 17005
            this.rangeList.add(oldRange);                                                                              // 17006
            this.$onAddRange(oldRange);                                                                                // 17007
        }                                                                                                              // 17008
                                                                                                                       // 17009
        if (!range.cursor)                                                                                             // 17010
            range.cursor = range.end;                                                                                  // 17011
                                                                                                                       // 17012
        var removed = this.rangeList.add(range);                                                                       // 17013
                                                                                                                       // 17014
        this.$onAddRange(range);                                                                                       // 17015
                                                                                                                       // 17016
        if (removed.length)                                                                                            // 17017
            this.$onRemoveRange(removed);                                                                              // 17018
                                                                                                                       // 17019
        if (this.rangeCount > 1 && !this.inMultiSelectMode) {                                                          // 17020
            this._signal("multiSelect");                                                                               // 17021
            this.inMultiSelectMode = true;                                                                             // 17022
            this.session.$undoSelect = false;                                                                          // 17023
            this.rangeList.attach(this.session);                                                                       // 17024
        }                                                                                                              // 17025
                                                                                                                       // 17026
        return $blockChangeEvents || this.fromOrientedRange(range);                                                    // 17027
    };                                                                                                                 // 17028
                                                                                                                       // 17029
    this.toSingleRange = function(range) {                                                                             // 17030
        range = range || this.ranges[0];                                                                               // 17031
        var removed = this.rangeList.removeAll();                                                                      // 17032
        if (removed.length)                                                                                            // 17033
            this.$onRemoveRange(removed);                                                                              // 17034
                                                                                                                       // 17035
        range && this.fromOrientedRange(range);                                                                        // 17036
    };                                                                                                                 // 17037
    this.substractPoint = function(pos) {                                                                              // 17038
        var removed = this.rangeList.substractPoint(pos);                                                              // 17039
        if (removed) {                                                                                                 // 17040
            this.$onRemoveRange(removed);                                                                              // 17041
            return removed[0];                                                                                         // 17042
        }                                                                                                              // 17043
    };                                                                                                                 // 17044
    this.mergeOverlappingRanges = function() {                                                                         // 17045
        var removed = this.rangeList.merge();                                                                          // 17046
        if (removed.length)                                                                                            // 17047
            this.$onRemoveRange(removed);                                                                              // 17048
        else if(this.ranges[0])                                                                                        // 17049
            this.fromOrientedRange(this.ranges[0]);                                                                    // 17050
    };                                                                                                                 // 17051
                                                                                                                       // 17052
    this.$onAddRange = function(range) {                                                                               // 17053
        this.rangeCount = this.rangeList.ranges.length;                                                                // 17054
        this.ranges.unshift(range);                                                                                    // 17055
        this._signal("addRange", {range: range});                                                                      // 17056
    };                                                                                                                 // 17057
                                                                                                                       // 17058
    this.$onRemoveRange = function(removed) {                                                                          // 17059
        this.rangeCount = this.rangeList.ranges.length;                                                                // 17060
        if (this.rangeCount == 1 && this.inMultiSelectMode) {                                                          // 17061
            var lastRange = this.rangeList.ranges.pop();                                                               // 17062
            removed.push(lastRange);                                                                                   // 17063
            this.rangeCount = 0;                                                                                       // 17064
        }                                                                                                              // 17065
                                                                                                                       // 17066
        for (var i = removed.length; i--; ) {                                                                          // 17067
            var index = this.ranges.indexOf(removed[i]);                                                               // 17068
            this.ranges.splice(index, 1);                                                                              // 17069
        }                                                                                                              // 17070
                                                                                                                       // 17071
        this._signal("removeRange", {ranges: removed});                                                                // 17072
                                                                                                                       // 17073
        if (this.rangeCount === 0 && this.inMultiSelectMode) {                                                         // 17074
            this.inMultiSelectMode = false;                                                                            // 17075
            this._signal("singleSelect");                                                                              // 17076
            this.session.$undoSelect = true;                                                                           // 17077
            this.rangeList.detach(this.session);                                                                       // 17078
        }                                                                                                              // 17079
                                                                                                                       // 17080
        lastRange = lastRange || this.ranges[0];                                                                       // 17081
        if (lastRange && !lastRange.isEqual(this.getRange()))                                                          // 17082
            this.fromOrientedRange(lastRange);                                                                         // 17083
    };                                                                                                                 // 17084
    this.$initRangeList = function() {                                                                                 // 17085
        if (this.rangeList)                                                                                            // 17086
            return;                                                                                                    // 17087
                                                                                                                       // 17088
        this.rangeList = new RangeList();                                                                              // 17089
        this.ranges = [];                                                                                              // 17090
        this.rangeCount = 0;                                                                                           // 17091
    };                                                                                                                 // 17092
    this.getAllRanges = function() {                                                                                   // 17093
        return this.rangeCount ? this.rangeList.ranges.concat() : [this.getRange()];                                   // 17094
    };                                                                                                                 // 17095
                                                                                                                       // 17096
    this.splitIntoLines = function () {                                                                                // 17097
        if (this.rangeCount > 1) {                                                                                     // 17098
            var ranges = this.rangeList.ranges;                                                                        // 17099
            var lastRange = ranges[ranges.length - 1];                                                                 // 17100
            var range = Range.fromPoints(ranges[0].start, lastRange.end);                                              // 17101
                                                                                                                       // 17102
            this.toSingleRange();                                                                                      // 17103
            this.setSelectionRange(range, lastRange.cursor == lastRange.start);                                        // 17104
        } else {                                                                                                       // 17105
            var range = this.getRange();                                                                               // 17106
            var isBackwards = this.isBackwards();                                                                      // 17107
            var startRow = range.start.row;                                                                            // 17108
            var endRow = range.end.row;                                                                                // 17109
            if (startRow == endRow) {                                                                                  // 17110
                if (isBackwards)                                                                                       // 17111
                    var start = range.end, end = range.start;                                                          // 17112
                else                                                                                                   // 17113
                    var start = range.start, end = range.end;                                                          // 17114
                                                                                                                       // 17115
                this.addRange(Range.fromPoints(end, end));                                                             // 17116
                this.addRange(Range.fromPoints(start, start));                                                         // 17117
                return;                                                                                                // 17118
            }                                                                                                          // 17119
                                                                                                                       // 17120
            var rectSel = [];                                                                                          // 17121
            var r = this.getLineRange(startRow, true);                                                                 // 17122
            r.start.column = range.start.column;                                                                       // 17123
            rectSel.push(r);                                                                                           // 17124
                                                                                                                       // 17125
            for (var i = startRow + 1; i < endRow; i++)                                                                // 17126
                rectSel.push(this.getLineRange(i, true));                                                              // 17127
                                                                                                                       // 17128
            r = this.getLineRange(endRow, true);                                                                       // 17129
            r.end.column = range.end.column;                                                                           // 17130
            rectSel.push(r);                                                                                           // 17131
                                                                                                                       // 17132
            rectSel.forEach(this.addRange, this);                                                                      // 17133
        }                                                                                                              // 17134
    };                                                                                                                 // 17135
    this.toggleBlockSelection = function () {                                                                          // 17136
        if (this.rangeCount > 1) {                                                                                     // 17137
            var ranges = this.rangeList.ranges;                                                                        // 17138
            var lastRange = ranges[ranges.length - 1];                                                                 // 17139
            var range = Range.fromPoints(ranges[0].start, lastRange.end);                                              // 17140
                                                                                                                       // 17141
            this.toSingleRange();                                                                                      // 17142
            this.setSelectionRange(range, lastRange.cursor == lastRange.start);                                        // 17143
        } else {                                                                                                       // 17144
            var cursor = this.session.documentToScreenPosition(this.selectionLead);                                    // 17145
            var anchor = this.session.documentToScreenPosition(this.selectionAnchor);                                  // 17146
                                                                                                                       // 17147
            var rectSel = this.rectangularRangeBlock(cursor, anchor);                                                  // 17148
            rectSel.forEach(this.addRange, this);                                                                      // 17149
        }                                                                                                              // 17150
    };                                                                                                                 // 17151
    this.rectangularRangeBlock = function(screenCursor, screenAnchor, includeEmptyLines) {                             // 17152
        var rectSel = [];                                                                                              // 17153
                                                                                                                       // 17154
        var xBackwards = screenCursor.column < screenAnchor.column;                                                    // 17155
        if (xBackwards) {                                                                                              // 17156
            var startColumn = screenCursor.column;                                                                     // 17157
            var endColumn = screenAnchor.column;                                                                       // 17158
        } else {                                                                                                       // 17159
            var startColumn = screenAnchor.column;                                                                     // 17160
            var endColumn = screenCursor.column;                                                                       // 17161
        }                                                                                                              // 17162
                                                                                                                       // 17163
        var yBackwards = screenCursor.row < screenAnchor.row;                                                          // 17164
        if (yBackwards) {                                                                                              // 17165
            var startRow = screenCursor.row;                                                                           // 17166
            var endRow = screenAnchor.row;                                                                             // 17167
        } else {                                                                                                       // 17168
            var startRow = screenAnchor.row;                                                                           // 17169
            var endRow = screenCursor.row;                                                                             // 17170
        }                                                                                                              // 17171
                                                                                                                       // 17172
        if (startColumn < 0)                                                                                           // 17173
            startColumn = 0;                                                                                           // 17174
        if (startRow < 0)                                                                                              // 17175
            startRow = 0;                                                                                              // 17176
                                                                                                                       // 17177
        if (startRow == endRow)                                                                                        // 17178
            includeEmptyLines = true;                                                                                  // 17179
                                                                                                                       // 17180
        for (var row = startRow; row <= endRow; row++) {                                                               // 17181
            var range = Range.fromPoints(                                                                              // 17182
                this.session.screenToDocumentPosition(row, startColumn),                                               // 17183
                this.session.screenToDocumentPosition(row, endColumn)                                                  // 17184
            );                                                                                                         // 17185
            if (range.isEmpty()) {                                                                                     // 17186
                if (docEnd && isSamePoint(range.end, docEnd))                                                          // 17187
                    break;                                                                                             // 17188
                var docEnd = range.end;                                                                                // 17189
            }                                                                                                          // 17190
            range.cursor = xBackwards ? range.start : range.end;                                                       // 17191
            rectSel.push(range);                                                                                       // 17192
        }                                                                                                              // 17193
                                                                                                                       // 17194
        if (yBackwards)                                                                                                // 17195
            rectSel.reverse();                                                                                         // 17196
                                                                                                                       // 17197
        if (!includeEmptyLines) {                                                                                      // 17198
            var end = rectSel.length - 1;                                                                              // 17199
            while (rectSel[end].isEmpty() && end > 0)                                                                  // 17200
                end--;                                                                                                 // 17201
            if (end > 0) {                                                                                             // 17202
                var start = 0;                                                                                         // 17203
                while (rectSel[start].isEmpty())                                                                       // 17204
                    start++;                                                                                           // 17205
            }                                                                                                          // 17206
            for (var i = end; i >= start; i--) {                                                                       // 17207
                if (rectSel[i].isEmpty())                                                                              // 17208
                    rectSel.splice(i, 1);                                                                              // 17209
            }                                                                                                          // 17210
        }                                                                                                              // 17211
                                                                                                                       // 17212
        return rectSel;                                                                                                // 17213
    };                                                                                                                 // 17214
}).call(Selection.prototype);                                                                                          // 17215
var Editor = require("./editor").Editor;                                                                               // 17216
(function() {                                                                                                          // 17217
    this.updateSelectionMarkers = function() {                                                                         // 17218
        this.renderer.updateCursor();                                                                                  // 17219
        this.renderer.updateBackMarkers();                                                                             // 17220
    };                                                                                                                 // 17221
    this.addSelectionMarker = function(orientedRange) {                                                                // 17222
        if (!orientedRange.cursor)                                                                                     // 17223
            orientedRange.cursor = orientedRange.end;                                                                  // 17224
                                                                                                                       // 17225
        var style = this.getSelectionStyle();                                                                          // 17226
        orientedRange.marker = this.session.addMarker(orientedRange, "ace_selection", style);                          // 17227
                                                                                                                       // 17228
        this.session.$selectionMarkers.push(orientedRange);                                                            // 17229
        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;                                     // 17230
        return orientedRange;                                                                                          // 17231
    };                                                                                                                 // 17232
    this.removeSelectionMarker = function(range) {                                                                     // 17233
        if (!range.marker)                                                                                             // 17234
            return;                                                                                                    // 17235
        this.session.removeMarker(range.marker);                                                                       // 17236
        var index = this.session.$selectionMarkers.indexOf(range);                                                     // 17237
        if (index != -1)                                                                                               // 17238
            this.session.$selectionMarkers.splice(index, 1);                                                           // 17239
        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;                                     // 17240
    };                                                                                                                 // 17241
                                                                                                                       // 17242
    this.removeSelectionMarkers = function(ranges) {                                                                   // 17243
        var markerList = this.session.$selectionMarkers;                                                               // 17244
        for (var i = ranges.length; i--; ) {                                                                           // 17245
            var range = ranges[i];                                                                                     // 17246
            if (!range.marker)                                                                                         // 17247
                continue;                                                                                              // 17248
            this.session.removeMarker(range.marker);                                                                   // 17249
            var index = markerList.indexOf(range);                                                                     // 17250
            if (index != -1)                                                                                           // 17251
                markerList.splice(index, 1);                                                                           // 17252
        }                                                                                                              // 17253
        this.session.selectionMarkerCount = markerList.length;                                                         // 17254
    };                                                                                                                 // 17255
                                                                                                                       // 17256
    this.$onAddRange = function(e) {                                                                                   // 17257
        this.addSelectionMarker(e.range);                                                                              // 17258
        this.renderer.updateCursor();                                                                                  // 17259
        this.renderer.updateBackMarkers();                                                                             // 17260
    };                                                                                                                 // 17261
                                                                                                                       // 17262
    this.$onRemoveRange = function(e) {                                                                                // 17263
        this.removeSelectionMarkers(e.ranges);                                                                         // 17264
        this.renderer.updateCursor();                                                                                  // 17265
        this.renderer.updateBackMarkers();                                                                             // 17266
    };                                                                                                                 // 17267
                                                                                                                       // 17268
    this.$onMultiSelect = function(e) {                                                                                // 17269
        if (this.inMultiSelectMode)                                                                                    // 17270
            return;                                                                                                    // 17271
        this.inMultiSelectMode = true;                                                                                 // 17272
                                                                                                                       // 17273
        this.setStyle("ace_multiselect");                                                                              // 17274
        this.keyBinding.addKeyboardHandler(commands.keyboardHandler);                                                  // 17275
        this.commands.setDefaultHandler("exec", this.$onMultiSelectExec);                                              // 17276
                                                                                                                       // 17277
        this.renderer.updateCursor();                                                                                  // 17278
        this.renderer.updateBackMarkers();                                                                             // 17279
    };                                                                                                                 // 17280
                                                                                                                       // 17281
    this.$onSingleSelect = function(e) {                                                                               // 17282
        if (this.session.multiSelect.inVirtualMode)                                                                    // 17283
            return;                                                                                                    // 17284
        this.inMultiSelectMode = false;                                                                                // 17285
                                                                                                                       // 17286
        this.unsetStyle("ace_multiselect");                                                                            // 17287
        this.keyBinding.removeKeyboardHandler(commands.keyboardHandler);                                               // 17288
                                                                                                                       // 17289
        this.commands.removeDefaultHandler("exec", this.$onMultiSelectExec);                                           // 17290
        this.renderer.updateCursor();                                                                                  // 17291
        this.renderer.updateBackMarkers();                                                                             // 17292
        this._emit("changeSelection");                                                                                 // 17293
    };                                                                                                                 // 17294
                                                                                                                       // 17295
    this.$onMultiSelectExec = function(e) {                                                                            // 17296
        var command = e.command;                                                                                       // 17297
        var editor = e.editor;                                                                                         // 17298
        if (!editor.multiSelect)                                                                                       // 17299
            return;                                                                                                    // 17300
        if (!command.multiSelectAction) {                                                                              // 17301
            var result = command.exec(editor, e.args || {});                                                           // 17302
            editor.multiSelect.addRange(editor.multiSelect.toOrientedRange());                                         // 17303
            editor.multiSelect.mergeOverlappingRanges();                                                               // 17304
        } else if (command.multiSelectAction == "forEach") {                                                           // 17305
            result = editor.forEachSelection(command, e.args);                                                         // 17306
        } else if (command.multiSelectAction == "forEachLine") {                                                       // 17307
            result = editor.forEachSelection(command, e.args, true);                                                   // 17308
        } else if (command.multiSelectAction == "single") {                                                            // 17309
            editor.exitMultiSelectMode();                                                                              // 17310
            result = command.exec(editor, e.args || {});                                                               // 17311
        } else {                                                                                                       // 17312
            result = command.multiSelectAction(editor, e.args || {});                                                  // 17313
        }                                                                                                              // 17314
        return result;                                                                                                 // 17315
    };                                                                                                                 // 17316
    this.forEachSelection = function(cmd, args, options) {                                                             // 17317
        if (this.inVirtualSelectionMode)                                                                               // 17318
            return;                                                                                                    // 17319
        var keepOrder = options && options.keepOrder;                                                                  // 17320
        var $byLines = options == true || options && options.$byLines                                                  // 17321
        var session = this.session;                                                                                    // 17322
        var selection = this.selection;                                                                                // 17323
        var rangeList = selection.rangeList;                                                                           // 17324
        var ranges = (keepOrder ? selection : rangeList).ranges;                                                       // 17325
        var result;                                                                                                    // 17326
                                                                                                                       // 17327
        if (!ranges.length)                                                                                            // 17328
            return cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});                                      // 17329
                                                                                                                       // 17330
        var reg = selection._eventRegistry;                                                                            // 17331
        selection._eventRegistry = {};                                                                                 // 17332
                                                                                                                       // 17333
        var tmpSel = new Selection(session);                                                                           // 17334
        this.inVirtualSelectionMode = true;                                                                            // 17335
        for (var i = ranges.length; i--;) {                                                                            // 17336
            if ($byLines) {                                                                                            // 17337
                while (i > 0 && ranges[i].start.row == ranges[i - 1].end.row)                                          // 17338
                    i--;                                                                                               // 17339
            }                                                                                                          // 17340
            tmpSel.fromOrientedRange(ranges[i]);                                                                       // 17341
            tmpSel.index = i;                                                                                          // 17342
            this.selection = session.selection = tmpSel;                                                               // 17343
            var cmdResult = cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});                             // 17344
            if (!result && cmdResult !== undefined)                                                                    // 17345
                result = cmdResult;                                                                                    // 17346
            tmpSel.toOrientedRange(ranges[i]);                                                                         // 17347
        }                                                                                                              // 17348
        tmpSel.detach();                                                                                               // 17349
                                                                                                                       // 17350
        this.selection = session.selection = selection;                                                                // 17351
        this.inVirtualSelectionMode = false;                                                                           // 17352
        selection._eventRegistry = reg;                                                                                // 17353
        selection.mergeOverlappingRanges();                                                                            // 17354
                                                                                                                       // 17355
        var anim = this.renderer.$scrollAnimation;                                                                     // 17356
        this.onCursorChange();                                                                                         // 17357
        this.onSelectionChange();                                                                                      // 17358
        if (anim && anim.from == anim.to)                                                                              // 17359
            this.renderer.animateScrolling(anim.from);                                                                 // 17360
                                                                                                                       // 17361
        return result;                                                                                                 // 17362
    };                                                                                                                 // 17363
    this.exitMultiSelectMode = function() {                                                                            // 17364
        if (!this.inMultiSelectMode || this.inVirtualSelectionMode)                                                    // 17365
            return;                                                                                                    // 17366
        this.multiSelect.toSingleRange();                                                                              // 17367
    };                                                                                                                 // 17368
                                                                                                                       // 17369
    this.getSelectedText = function() {                                                                                // 17370
        var text = "";                                                                                                 // 17371
        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {                                                  // 17372
            var ranges = this.multiSelect.rangeList.ranges;                                                            // 17373
            var buf = [];                                                                                              // 17374
            for (var i = 0; i < ranges.length; i++) {                                                                  // 17375
                buf.push(this.session.getTextRange(ranges[i]));                                                        // 17376
            }                                                                                                          // 17377
            var nl = this.session.getDocument().getNewLineCharacter();                                                 // 17378
            text = buf.join(nl);                                                                                       // 17379
            if (text.length == (buf.length - 1) * nl.length)                                                           // 17380
                text = "";                                                                                             // 17381
        } else if (!this.selection.isEmpty()) {                                                                        // 17382
            text = this.session.getTextRange(this.getSelectionRange());                                                // 17383
        }                                                                                                              // 17384
        return text;                                                                                                   // 17385
    };                                                                                                                 // 17386
                                                                                                                       // 17387
    this.$checkMultiselectChange = function(e, anchor) {                                                               // 17388
        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {                                                  // 17389
            var range = this.multiSelect.ranges[0];                                                                    // 17390
            if (this.multiSelect.isEmpty() && anchor == this.multiSelect.anchor)                                       // 17391
                return;                                                                                                // 17392
            var pos = anchor == this.multiSelect.anchor                                                                // 17393
                ? range.cursor == range.start ? range.end : range.start                                                // 17394
                : range.cursor;                                                                                        // 17395
            if (pos.row != anchor.row                                                                                  // 17396
                || this.session.$clipPositionToDocument(pos.row, pos.column).column != anchor.column)                  // 17397
                this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange());                                    // 17398
        }                                                                                                              // 17399
    };                                                                                                                 // 17400
    this.findAll = function(needle, options, additive) {                                                               // 17401
        options = options || {};                                                                                       // 17402
        options.needle = needle || options.needle;                                                                     // 17403
        if (options.needle == undefined) {                                                                             // 17404
            var range = this.selection.isEmpty()                                                                       // 17405
                ? this.selection.getWordRange()                                                                        // 17406
                : this.selection.getRange();                                                                           // 17407
            options.needle = this.session.getTextRange(range);                                                         // 17408
        }                                                                                                              // 17409
        this.$search.set(options);                                                                                     // 17410
                                                                                                                       // 17411
        var ranges = this.$search.findAll(this.session);                                                               // 17412
        if (!ranges.length)                                                                                            // 17413
            return 0;                                                                                                  // 17414
                                                                                                                       // 17415
        this.$blockScrolling += 1;                                                                                     // 17416
        var selection = this.multiSelect;                                                                              // 17417
                                                                                                                       // 17418
        if (!additive)                                                                                                 // 17419
            selection.toSingleRange(ranges[0]);                                                                        // 17420
                                                                                                                       // 17421
        for (var i = ranges.length; i--; )                                                                             // 17422
            selection.addRange(ranges[i], true);                                                                       // 17423
        if (range && selection.rangeList.rangeAtPoint(range.start))                                                    // 17424
            selection.addRange(range, true);                                                                           // 17425
                                                                                                                       // 17426
        this.$blockScrolling -= 1;                                                                                     // 17427
                                                                                                                       // 17428
        return ranges.length;                                                                                          // 17429
    };                                                                                                                 // 17430
    this.selectMoreLines = function(dir, skip) {                                                                       // 17431
        var range = this.selection.toOrientedRange();                                                                  // 17432
        var isBackwards = range.cursor == range.end;                                                                   // 17433
                                                                                                                       // 17434
        var screenLead = this.session.documentToScreenPosition(range.cursor);                                          // 17435
        if (this.selection.$desiredColumn)                                                                             // 17436
            screenLead.column = this.selection.$desiredColumn;                                                         // 17437
                                                                                                                       // 17438
        var lead = this.session.screenToDocumentPosition(screenLead.row + dir, screenLead.column);                     // 17439
                                                                                                                       // 17440
        if (!range.isEmpty()) {                                                                                        // 17441
            var screenAnchor = this.session.documentToScreenPosition(isBackwards ? range.end : range.start);           // 17442
            var anchor = this.session.screenToDocumentPosition(screenAnchor.row + dir, screenAnchor.column);           // 17443
        } else {                                                                                                       // 17444
            var anchor = lead;                                                                                         // 17445
        }                                                                                                              // 17446
                                                                                                                       // 17447
        if (isBackwards) {                                                                                             // 17448
            var newRange = Range.fromPoints(lead, anchor);                                                             // 17449
            newRange.cursor = newRange.start;                                                                          // 17450
        } else {                                                                                                       // 17451
            var newRange = Range.fromPoints(anchor, lead);                                                             // 17452
            newRange.cursor = newRange.end;                                                                            // 17453
        }                                                                                                              // 17454
                                                                                                                       // 17455
        newRange.desiredColumn = screenLead.column;                                                                    // 17456
        if (!this.selection.inMultiSelectMode) {                                                                       // 17457
            this.selection.addRange(range);                                                                            // 17458
        } else {                                                                                                       // 17459
            if (skip)                                                                                                  // 17460
                var toRemove = range.cursor;                                                                           // 17461
        }                                                                                                              // 17462
                                                                                                                       // 17463
        this.selection.addRange(newRange);                                                                             // 17464
        if (toRemove)                                                                                                  // 17465
            this.selection.substractPoint(toRemove);                                                                   // 17466
    };                                                                                                                 // 17467
    this.transposeSelections = function(dir) {                                                                         // 17468
        var session = this.session;                                                                                    // 17469
        var sel = session.multiSelect;                                                                                 // 17470
        var all = sel.ranges;                                                                                          // 17471
                                                                                                                       // 17472
        for (var i = all.length; i--; ) {                                                                              // 17473
            var range = all[i];                                                                                        // 17474
            if (range.isEmpty()) {                                                                                     // 17475
                var tmp = session.getWordRange(range.start.row, range.start.column);                                   // 17476
                range.start.row = tmp.start.row;                                                                       // 17477
                range.start.column = tmp.start.column;                                                                 // 17478
                range.end.row = tmp.end.row;                                                                           // 17479
                range.end.column = tmp.end.column;                                                                     // 17480
            }                                                                                                          // 17481
        }                                                                                                              // 17482
        sel.mergeOverlappingRanges();                                                                                  // 17483
                                                                                                                       // 17484
        var words = [];                                                                                                // 17485
        for (var i = all.length; i--; ) {                                                                              // 17486
            var range = all[i];                                                                                        // 17487
            words.unshift(session.getTextRange(range));                                                                // 17488
        }                                                                                                              // 17489
                                                                                                                       // 17490
        if (dir < 0)                                                                                                   // 17491
            words.unshift(words.pop());                                                                                // 17492
        else                                                                                                           // 17493
            words.push(words.shift());                                                                                 // 17494
                                                                                                                       // 17495
        for (var i = all.length; i--; ) {                                                                              // 17496
            var range = all[i];                                                                                        // 17497
            var tmp = range.clone();                                                                                   // 17498
            session.replace(range, words[i]);                                                                          // 17499
            range.start.row = tmp.start.row;                                                                           // 17500
            range.start.column = tmp.start.column;                                                                     // 17501
        }                                                                                                              // 17502
    };                                                                                                                 // 17503
    this.selectMore = function(dir, skip, stopAtFirst) {                                                               // 17504
        var session = this.session;                                                                                    // 17505
        var sel = session.multiSelect;                                                                                 // 17506
                                                                                                                       // 17507
        var range = sel.toOrientedRange();                                                                             // 17508
        if (range.isEmpty()) {                                                                                         // 17509
            range = session.getWordRange(range.start.row, range.start.column);                                         // 17510
            range.cursor = dir == -1 ? range.start : range.end;                                                        // 17511
            this.multiSelect.addRange(range);                                                                          // 17512
            if (stopAtFirst)                                                                                           // 17513
                return;                                                                                                // 17514
        }                                                                                                              // 17515
        var needle = session.getTextRange(range);                                                                      // 17516
                                                                                                                       // 17517
        var newRange = find(session, needle, dir);                                                                     // 17518
        if (newRange) {                                                                                                // 17519
            newRange.cursor = dir == -1 ? newRange.start : newRange.end;                                               // 17520
            this.$blockScrolling += 1;                                                                                 // 17521
            this.session.unfold(newRange);                                                                             // 17522
            this.multiSelect.addRange(newRange);                                                                       // 17523
            this.$blockScrolling -= 1;                                                                                 // 17524
            this.renderer.scrollCursorIntoView(null, 0.5);                                                             // 17525
        }                                                                                                              // 17526
        if (skip)                                                                                                      // 17527
            this.multiSelect.substractPoint(range.cursor);                                                             // 17528
    };                                                                                                                 // 17529
    this.alignCursors = function() {                                                                                   // 17530
        var session = this.session;                                                                                    // 17531
        var sel = session.multiSelect;                                                                                 // 17532
        var ranges = sel.ranges;                                                                                       // 17533
        var row = -1;                                                                                                  // 17534
        var sameRowRanges = ranges.filter(function(r) {                                                                // 17535
            if (r.cursor.row == row)                                                                                   // 17536
                return true;                                                                                           // 17537
            row = r.cursor.row;                                                                                        // 17538
        });                                                                                                            // 17539
                                                                                                                       // 17540
        if (!ranges.length || sameRowRanges.length == ranges.length - 1) {                                             // 17541
            var range = this.selection.getRange();                                                                     // 17542
            var fr = range.start.row, lr = range.end.row;                                                              // 17543
            var guessRange = fr == lr;                                                                                 // 17544
            if (guessRange) {                                                                                          // 17545
                var max = this.session.getLength();                                                                    // 17546
                var line;                                                                                              // 17547
                do {                                                                                                   // 17548
                    line = this.session.getLine(lr);                                                                   // 17549
                } while (/[=:]/.test(line) && ++lr < max);                                                             // 17550
                do {                                                                                                   // 17551
                    line = this.session.getLine(fr);                                                                   // 17552
                } while (/[=:]/.test(line) && --fr > 0);                                                               // 17553
                                                                                                                       // 17554
                if (fr < 0) fr = 0;                                                                                    // 17555
                if (lr >= max) lr = max - 1;                                                                           // 17556
            }                                                                                                          // 17557
            var lines = this.session.removeFullLines(fr, lr);                                                          // 17558
            lines = this.$reAlignText(lines, guessRange);                                                              // 17559
            this.session.insert({row: fr, column: 0}, lines.join("\n") + "\n");                                        // 17560
            if (!guessRange) {                                                                                         // 17561
                range.start.column = 0;                                                                                // 17562
                range.end.column = lines[lines.length - 1].length;                                                     // 17563
            }                                                                                                          // 17564
            this.selection.setRange(range);                                                                            // 17565
        } else {                                                                                                       // 17566
            sameRowRanges.forEach(function(r) {                                                                        // 17567
                sel.substractPoint(r.cursor);                                                                          // 17568
            });                                                                                                        // 17569
                                                                                                                       // 17570
            var maxCol = 0;                                                                                            // 17571
            var minSpace = Infinity;                                                                                   // 17572
            var spaceOffsets = ranges.map(function(r) {                                                                // 17573
                var p = r.cursor;                                                                                      // 17574
                var line = session.getLine(p.row);                                                                     // 17575
                var spaceOffset = line.substr(p.column).search(/\S/g);                                                 // 17576
                if (spaceOffset == -1)                                                                                 // 17577
                    spaceOffset = 0;                                                                                   // 17578
                                                                                                                       // 17579
                if (p.column > maxCol)                                                                                 // 17580
                    maxCol = p.column;                                                                                 // 17581
                if (spaceOffset < minSpace)                                                                            // 17582
                    minSpace = spaceOffset;                                                                            // 17583
                return spaceOffset;                                                                                    // 17584
            });                                                                                                        // 17585
            ranges.forEach(function(r, i) {                                                                            // 17586
                var p = r.cursor;                                                                                      // 17587
                var l = maxCol - p.column;                                                                             // 17588
                var d = spaceOffsets[i] - minSpace;                                                                    // 17589
                if (l > d)                                                                                             // 17590
                    session.insert(p, lang.stringRepeat(" ", l - d));                                                  // 17591
                else                                                                                                   // 17592
                    session.remove(new Range(p.row, p.column, p.row, p.column - l + d));                               // 17593
                                                                                                                       // 17594
                r.start.column = r.end.column = maxCol;                                                                // 17595
                r.start.row = r.end.row = p.row;                                                                       // 17596
                r.cursor = r.end;                                                                                      // 17597
            });                                                                                                        // 17598
            sel.fromOrientedRange(ranges[0]);                                                                          // 17599
            this.renderer.updateCursor();                                                                              // 17600
            this.renderer.updateBackMarkers();                                                                         // 17601
        }                                                                                                              // 17602
    };                                                                                                                 // 17603
                                                                                                                       // 17604
    this.$reAlignText = function(lines, forceLeft) {                                                                   // 17605
        var isLeftAligned = true, isRightAligned = true;                                                               // 17606
        var startW, textW, endW;                                                                                       // 17607
                                                                                                                       // 17608
        return lines.map(function(line) {                                                                              // 17609
            var m = line.match(/(\s*)(.*?)(\s*)([=:].*)/);                                                             // 17610
            if (!m)                                                                                                    // 17611
                return [line];                                                                                         // 17612
                                                                                                                       // 17613
            if (startW == null) {                                                                                      // 17614
                startW = m[1].length;                                                                                  // 17615
                textW = m[2].length;                                                                                   // 17616
                endW = m[3].length;                                                                                    // 17617
                return m;                                                                                              // 17618
            }                                                                                                          // 17619
                                                                                                                       // 17620
            if (startW + textW + endW != m[1].length + m[2].length + m[3].length)                                      // 17621
                isRightAligned = false;                                                                                // 17622
            if (startW != m[1].length)                                                                                 // 17623
                isLeftAligned = false;                                                                                 // 17624
                                                                                                                       // 17625
            if (startW > m[1].length)                                                                                  // 17626
                startW = m[1].length;                                                                                  // 17627
            if (textW < m[2].length)                                                                                   // 17628
                textW = m[2].length;                                                                                   // 17629
            if (endW > m[3].length)                                                                                    // 17630
                endW = m[3].length;                                                                                    // 17631
                                                                                                                       // 17632
            return m;                                                                                                  // 17633
        }).map(forceLeft ? alignLeft :                                                                                 // 17634
            isLeftAligned ? isRightAligned ? alignRight : alignLeft : unAlign);                                        // 17635
                                                                                                                       // 17636
        function spaces(n) {                                                                                           // 17637
            return lang.stringRepeat(" ", n);                                                                          // 17638
        }                                                                                                              // 17639
                                                                                                                       // 17640
        function alignLeft(m) {                                                                                        // 17641
            return !m[2] ? m[0] : spaces(startW) + m[2]                                                                // 17642
                + spaces(textW - m[2].length + endW)                                                                   // 17643
                + m[4].replace(/^([=:])\s+/, "$1 ");                                                                   // 17644
        }                                                                                                              // 17645
        function alignRight(m) {                                                                                       // 17646
            return !m[2] ? m[0] : spaces(startW + textW - m[2].length) + m[2]                                          // 17647
                + spaces(endW, " ")                                                                                    // 17648
                + m[4].replace(/^([=:])\s+/, "$1 ");                                                                   // 17649
        }                                                                                                              // 17650
        function unAlign(m) {                                                                                          // 17651
            return !m[2] ? m[0] : spaces(startW) + m[2]                                                                // 17652
                + spaces(endW)                                                                                         // 17653
                + m[4].replace(/^([=:])\s+/, "$1 ");                                                                   // 17654
        }                                                                                                              // 17655
    };                                                                                                                 // 17656
}).call(Editor.prototype);                                                                                             // 17657
                                                                                                                       // 17658
                                                                                                                       // 17659
function isSamePoint(p1, p2) {                                                                                         // 17660
    return p1.row == p2.row && p1.column == p2.column;                                                                 // 17661
}                                                                                                                      // 17662
exports.onSessionChange = function(e) {                                                                                // 17663
    var session = e.session;                                                                                           // 17664
    if (session && !session.multiSelect) {                                                                             // 17665
        session.$selectionMarkers = [];                                                                                // 17666
        session.selection.$initRangeList();                                                                            // 17667
        session.multiSelect = session.selection;                                                                       // 17668
    }                                                                                                                  // 17669
    this.multiSelect = session && session.multiSelect;                                                                 // 17670
                                                                                                                       // 17671
    var oldSession = e.oldSession;                                                                                     // 17672
    if (oldSession) {                                                                                                  // 17673
        oldSession.multiSelect.off("addRange", this.$onAddRange);                                                      // 17674
        oldSession.multiSelect.off("removeRange", this.$onRemoveRange);                                                // 17675
        oldSession.multiSelect.off("multiSelect", this.$onMultiSelect);                                                // 17676
        oldSession.multiSelect.off("singleSelect", this.$onSingleSelect);                                              // 17677
        oldSession.multiSelect.lead.off("change",  this.$checkMultiselectChange);                                      // 17678
        oldSession.multiSelect.anchor.off("change",  this.$checkMultiselectChange);                                    // 17679
    }                                                                                                                  // 17680
                                                                                                                       // 17681
    if (session) {                                                                                                     // 17682
        session.multiSelect.on("addRange", this.$onAddRange);                                                          // 17683
        session.multiSelect.on("removeRange", this.$onRemoveRange);                                                    // 17684
        session.multiSelect.on("multiSelect", this.$onMultiSelect);                                                    // 17685
        session.multiSelect.on("singleSelect", this.$onSingleSelect);                                                  // 17686
        session.multiSelect.lead.on("change",  this.$checkMultiselectChange);                                          // 17687
        session.multiSelect.anchor.on("change",  this.$checkMultiselectChange);                                        // 17688
    }                                                                                                                  // 17689
                                                                                                                       // 17690
    if (session && this.inMultiSelectMode != session.selection.inMultiSelectMode) {                                    // 17691
        if (session.selection.inMultiSelectMode)                                                                       // 17692
            this.$onMultiSelect();                                                                                     // 17693
        else                                                                                                           // 17694
            this.$onSingleSelect();                                                                                    // 17695
    }                                                                                                                  // 17696
};                                                                                                                     // 17697
function MultiSelect(editor) {                                                                                         // 17698
    if (editor.$multiselectOnSessionChange)                                                                            // 17699
        return;                                                                                                        // 17700
    editor.$onAddRange = editor.$onAddRange.bind(editor);                                                              // 17701
    editor.$onRemoveRange = editor.$onRemoveRange.bind(editor);                                                        // 17702
    editor.$onMultiSelect = editor.$onMultiSelect.bind(editor);                                                        // 17703
    editor.$onSingleSelect = editor.$onSingleSelect.bind(editor);                                                      // 17704
    editor.$multiselectOnSessionChange = exports.onSessionChange.bind(editor);                                         // 17705
    editor.$checkMultiselectChange = editor.$checkMultiselectChange.bind(editor);                                      // 17706
                                                                                                                       // 17707
    editor.$multiselectOnSessionChange(editor);                                                                        // 17708
    editor.on("changeSession", editor.$multiselectOnSessionChange);                                                    // 17709
                                                                                                                       // 17710
    editor.on("mousedown", onMouseDown);                                                                               // 17711
    editor.commands.addCommands(commands.defaultCommands);                                                             // 17712
                                                                                                                       // 17713
    addAltCursorListeners(editor);                                                                                     // 17714
}                                                                                                                      // 17715
                                                                                                                       // 17716
function addAltCursorListeners(editor){                                                                                // 17717
    var el = editor.textInput.getElement();                                                                            // 17718
    var altCursor = false;                                                                                             // 17719
    event.addListener(el, "keydown", function(e) {                                                                     // 17720
        var altDown = e.keyCode == 18 && !(e.ctrlKey || e.shiftKey || e.metaKey);                                      // 17721
        if (editor.$blockSelectEnabled && altDown) {                                                                   // 17722
            if (!altCursor) {                                                                                          // 17723
                editor.renderer.setMouseCursor("crosshair");                                                           // 17724
                altCursor = true;                                                                                      // 17725
            }                                                                                                          // 17726
        } else if (altCursor) {                                                                                        // 17727
            reset();                                                                                                   // 17728
        }                                                                                                              // 17729
    });                                                                                                                // 17730
                                                                                                                       // 17731
    event.addListener(el, "keyup", reset);                                                                             // 17732
    event.addListener(el, "blur", reset);                                                                              // 17733
    function reset(e) {                                                                                                // 17734
        if (altCursor) {                                                                                               // 17735
            editor.renderer.setMouseCursor("");                                                                        // 17736
            altCursor = false;                                                                                         // 17737
        }                                                                                                              // 17738
    }                                                                                                                  // 17739
}                                                                                                                      // 17740
                                                                                                                       // 17741
exports.MultiSelect = MultiSelect;                                                                                     // 17742
                                                                                                                       // 17743
                                                                                                                       // 17744
require("./config").defineOptions(Editor.prototype, "editor", {                                                        // 17745
    enableMultiselect: {                                                                                               // 17746
        set: function(val) {                                                                                           // 17747
            MultiSelect(this);                                                                                         // 17748
            if (val) {                                                                                                 // 17749
                this.on("changeSession", this.$multiselectOnSessionChange);                                            // 17750
                this.on("mousedown", onMouseDown);                                                                     // 17751
            } else {                                                                                                   // 17752
                this.off("changeSession", this.$multiselectOnSessionChange);                                           // 17753
                this.off("mousedown", onMouseDown);                                                                    // 17754
            }                                                                                                          // 17755
        },                                                                                                             // 17756
        value: true                                                                                                    // 17757
    },                                                                                                                 // 17758
    enableBlockSelect: {                                                                                               // 17759
        set: function(val) {                                                                                           // 17760
            this.$blockSelectEnabled = val;                                                                            // 17761
        },                                                                                                             // 17762
        value: true                                                                                                    // 17763
    }                                                                                                                  // 17764
});                                                                                                                    // 17765
                                                                                                                       // 17766
                                                                                                                       // 17767
                                                                                                                       // 17768
});                                                                                                                    // 17769
                                                                                                                       // 17770
define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"], function(require, exports, module) {   // 17771
"use strict";                                                                                                          // 17772
                                                                                                                       // 17773
var Range = require("../../range").Range;                                                                              // 17774
                                                                                                                       // 17775
var FoldMode = exports.FoldMode = function() {};                                                                       // 17776
                                                                                                                       // 17777
(function() {                                                                                                          // 17778
                                                                                                                       // 17779
    this.foldingStartMarker = null;                                                                                    // 17780
    this.foldingStopMarker = null;                                                                                     // 17781
    this.getFoldWidget = function(session, foldStyle, row) {                                                           // 17782
        var line = session.getLine(row);                                                                               // 17783
        if (this.foldingStartMarker.test(line))                                                                        // 17784
            return "start";                                                                                            // 17785
        if (foldStyle == "markbeginend"                                                                                // 17786
                && this.foldingStopMarker                                                                              // 17787
                && this.foldingStopMarker.test(line))                                                                  // 17788
            return "end";                                                                                              // 17789
        return "";                                                                                                     // 17790
    };                                                                                                                 // 17791
                                                                                                                       // 17792
    this.getFoldWidgetRange = function(session, foldStyle, row) {                                                      // 17793
        return null;                                                                                                   // 17794
    };                                                                                                                 // 17795
                                                                                                                       // 17796
    this.indentationBlock = function(session, row, column) {                                                           // 17797
        var re = /\S/;                                                                                                 // 17798
        var line = session.getLine(row);                                                                               // 17799
        var startLevel = line.search(re);                                                                              // 17800
        if (startLevel == -1)                                                                                          // 17801
            return;                                                                                                    // 17802
                                                                                                                       // 17803
        var startColumn = column || line.length;                                                                       // 17804
        var maxRow = session.getLength();                                                                              // 17805
        var startRow = row;                                                                                            // 17806
        var endRow = row;                                                                                              // 17807
                                                                                                                       // 17808
        while (++row < maxRow) {                                                                                       // 17809
            var level = session.getLine(row).search(re);                                                               // 17810
                                                                                                                       // 17811
            if (level == -1)                                                                                           // 17812
                continue;                                                                                              // 17813
                                                                                                                       // 17814
            if (level <= startLevel)                                                                                   // 17815
                break;                                                                                                 // 17816
                                                                                                                       // 17817
            endRow = row;                                                                                              // 17818
        }                                                                                                              // 17819
                                                                                                                       // 17820
        if (endRow > startRow) {                                                                                       // 17821
            var endColumn = session.getLine(endRow).length;                                                            // 17822
            return new Range(startRow, startColumn, endRow, endColumn);                                                // 17823
        }                                                                                                              // 17824
    };                                                                                                                 // 17825
                                                                                                                       // 17826
    this.openingBracketBlock = function(session, bracket, row, column, typeRe) {                                       // 17827
        var start = {row: row, column: column + 1};                                                                    // 17828
        var end = session.$findClosingBracket(bracket, start, typeRe);                                                 // 17829
        if (!end)                                                                                                      // 17830
            return;                                                                                                    // 17831
                                                                                                                       // 17832
        var fw = session.foldWidgets[end.row];                                                                         // 17833
        if (fw == null)                                                                                                // 17834
            fw = session.getFoldWidget(end.row);                                                                       // 17835
                                                                                                                       // 17836
        if (fw == "start" && end.row > start.row) {                                                                    // 17837
            end.row --;                                                                                                // 17838
            end.column = session.getLine(end.row).length;                                                              // 17839
        }                                                                                                              // 17840
        return Range.fromPoints(start, end);                                                                           // 17841
    };                                                                                                                 // 17842
                                                                                                                       // 17843
    this.closingBracketBlock = function(session, bracket, row, column, typeRe) {                                       // 17844
        var end = {row: row, column: column};                                                                          // 17845
        var start = session.$findOpeningBracket(bracket, end);                                                         // 17846
                                                                                                                       // 17847
        if (!start)                                                                                                    // 17848
            return;                                                                                                    // 17849
                                                                                                                       // 17850
        start.column++;                                                                                                // 17851
        end.column--;                                                                                                  // 17852
                                                                                                                       // 17853
        return  Range.fromPoints(start, end);                                                                          // 17854
    };                                                                                                                 // 17855
}).call(FoldMode.prototype);                                                                                           // 17856
                                                                                                                       // 17857
});                                                                                                                    // 17858
                                                                                                                       // 17859
define("ace/theme/textmate",["require","exports","module","ace/lib/dom"], function(require, exports, module) {         // 17860
"use strict";                                                                                                          // 17861
                                                                                                                       // 17862
exports.isDark = false;                                                                                                // 17863
exports.cssClass = "ace-tm";                                                                                           // 17864
exports.cssText = ".ace-tm .ace_gutter {\
background: #f0f0f0;\
color: #333;\
}\
.ace-tm .ace_print-margin {\
width: 1px;\
background: #e8e8e8;\
}\
.ace-tm .ace_fold {\
background-color: #6B72E6;\
}\
.ace-tm {\
background-color: #FFFFFF;\
color: black;\
}\
.ace-tm .ace_cursor {\
color: black;\
}\
.ace-tm .ace_invisible {\
color: rgb(191, 191, 191);\
}\
.ace-tm .ace_storage,\
.ace-tm .ace_keyword {\
color: blue;\
}\
.ace-tm .ace_constant {\
color: rgb(197, 6, 11);\
}\
.ace-tm .ace_constant.ace_buildin {\
color: rgb(88, 72, 246);\
}\
.ace-tm .ace_constant.ace_language {\
color: rgb(88, 92, 246);\
}\
.ace-tm .ace_constant.ace_library {\
color: rgb(6, 150, 14);\
}\
.ace-tm .ace_invalid {\
background-color: rgba(255, 0, 0, 0.1);\
color: red;\
}\
.ace-tm .ace_support.ace_function {\
color: rgb(60, 76, 114);\
}\
.ace-tm .ace_support.ace_constant {\
color: rgb(6, 150, 14);\
}\
.ace-tm .ace_support.ace_type,\
.ace-tm .ace_support.ace_class {\
color: rgb(109, 121, 222);\
}\
.ace-tm .ace_keyword.ace_operator {\
color: rgb(104, 118, 135);\
}\
.ace-tm .ace_string {\
color: rgb(3, 106, 7);\
}\
.ace-tm .ace_comment {\
color: rgb(76, 136, 107);\
}\
.ace-tm .ace_comment.ace_doc {\
color: rgb(0, 102, 255);\
}\
.ace-tm .ace_comment.ace_doc.ace_tag {\
color: rgb(128, 159, 191);\
}\
.ace-tm .ace_constant.ace_numeric {\
color: rgb(0, 0, 205);\
}\
.ace-tm .ace_variable {\
color: rgb(49, 132, 149);\
}\
.ace-tm .ace_xml-pe {\
color: rgb(104, 104, 91);\
}\
.ace-tm .ace_entity.ace_name.ace_function {\
color: #0000A2;\
}\
.ace-tm .ace_heading {\
color: rgb(12, 7, 255);\
}\
.ace-tm .ace_list {\
color:rgb(185, 6, 144);\
}\
.ace-tm .ace_meta.ace_tag {\
color:rgb(0, 22, 142);\
}\
.ace-tm .ace_string.ace_regex {\
color: rgb(255, 0, 0)\
}\
.ace-tm .ace_marker-layer .ace_selection {\
background: rgb(181, 213, 255);\
}\
.ace-tm.ace_multiselect .ace_selection.ace_start {\
box-shadow: 0 0 3px 0px white;\
}\
.ace-tm .ace_marker-layer .ace_step {\
background: rgb(252, 255, 0);\
}\
.ace-tm .ace_marker-layer .ace_stack {\
background: rgb(164, 229, 101);\
}\
.ace-tm .ace_marker-layer .ace_bracket {\
margin: -1px 0 0 -1px;\
border: 1px solid rgb(192, 192, 192);\
}\
.ace-tm .ace_marker-layer .ace_active-line {\
background: rgba(0, 0, 0, 0.07);\
}\
.ace-tm .ace_gutter-active-line {\
background-color : #dcdcdc;\
}\
.ace-tm .ace_marker-layer .ace_selected-word {\
background: rgb(250, 250, 255);\
border: 1px solid rgb(200, 200, 250);\
}\
.ace-tm .ace_indent-guide {\
background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\") right repeat-y;\
}\
";                                                                                                                     // 17984
                                                                                                                       // 17985
var dom = require("../lib/dom");                                                                                       // 17986
dom.importCssString(exports.cssText, exports.cssClass);                                                                // 17987
});                                                                                                                    // 17988
                                                                                                                       // 17989
define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 17991
                                                                                                                       // 17992
var oop = require("./lib/oop");                                                                                        // 17993
var dom = require("./lib/dom");                                                                                        // 17994
var Range = require("./range").Range;                                                                                  // 17995
                                                                                                                       // 17996
                                                                                                                       // 17997
function LineWidgets(session) {                                                                                        // 17998
    this.session = session;                                                                                            // 17999
    this.session.widgetManager = this;                                                                                 // 18000
    this.session.getRowLength = this.getRowLength;                                                                     // 18001
    this.session.$getWidgetScreenLength = this.$getWidgetScreenLength;                                                 // 18002
    this.updateOnChange = this.updateOnChange.bind(this);                                                              // 18003
    this.renderWidgets = this.renderWidgets.bind(this);                                                                // 18004
    this.measureWidgets = this.measureWidgets.bind(this);                                                              // 18005
    this.session._changedWidgets = [];                                                                                 // 18006
    this.$onChangeEditor = this.$onChangeEditor.bind(this);                                                            // 18007
                                                                                                                       // 18008
    this.session.on("change", this.updateOnChange);                                                                    // 18009
    this.session.on("changeEditor", this.$onChangeEditor);                                                             // 18010
}                                                                                                                      // 18011
                                                                                                                       // 18012
(function() {                                                                                                          // 18013
    this.getRowLength = function(row) {                                                                                // 18014
        var h;                                                                                                         // 18015
        if (this.lineWidgets)                                                                                          // 18016
            h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;                                          // 18017
        else                                                                                                           // 18018
            h = 0;                                                                                                     // 18019
        if (!this.$useWrapMode || !this.$wrapData[row]) {                                                              // 18020
            return 1 + h;                                                                                              // 18021
        } else {                                                                                                       // 18022
            return this.$wrapData[row].length + 1 + h;                                                                 // 18023
        }                                                                                                              // 18024
    };                                                                                                                 // 18025
                                                                                                                       // 18026
    this.$getWidgetScreenLength = function() {                                                                         // 18027
        var screenRows = 0;                                                                                            // 18028
        this.lineWidgets.forEach(function(w){                                                                          // 18029
            if (w && w.rowCount)                                                                                       // 18030
                screenRows +=w.rowCount;                                                                               // 18031
        });                                                                                                            // 18032
        return screenRows;                                                                                             // 18033
    };                                                                                                                 // 18034
                                                                                                                       // 18035
    this.$onChangeEditor = function(e) {                                                                               // 18036
        this.attach(e.editor);                                                                                         // 18037
    };                                                                                                                 // 18038
                                                                                                                       // 18039
    this.attach = function(editor) {                                                                                   // 18040
        if (editor  && editor.widgetManager && editor.widgetManager != this)                                           // 18041
            editor.widgetManager.detach();                                                                             // 18042
                                                                                                                       // 18043
        if (this.editor == editor)                                                                                     // 18044
            return;                                                                                                    // 18045
                                                                                                                       // 18046
        this.detach();                                                                                                 // 18047
        this.editor = editor;                                                                                          // 18048
                                                                                                                       // 18049
        if (editor) {                                                                                                  // 18050
            editor.widgetManager = this;                                                                               // 18051
            editor.renderer.on("beforeRender", this.measureWidgets);                                                   // 18052
            editor.renderer.on("afterRender", this.renderWidgets);                                                     // 18053
        }                                                                                                              // 18054
    };                                                                                                                 // 18055
    this.detach = function(e) {                                                                                        // 18056
        var editor = this.editor;                                                                                      // 18057
        if (!editor)                                                                                                   // 18058
            return;                                                                                                    // 18059
                                                                                                                       // 18060
        this.editor = null;                                                                                            // 18061
        editor.widgetManager = null;                                                                                   // 18062
                                                                                                                       // 18063
        editor.renderer.off("beforeRender", this.measureWidgets);                                                      // 18064
        editor.renderer.off("afterRender", this.renderWidgets);                                                        // 18065
        var lineWidgets = this.session.lineWidgets;                                                                    // 18066
        lineWidgets && lineWidgets.forEach(function(w) {                                                               // 18067
            if (w && w.el && w.el.parentNode) {                                                                        // 18068
                w._inDocument = false;                                                                                 // 18069
                w.el.parentNode.removeChild(w.el);                                                                     // 18070
            }                                                                                                          // 18071
        });                                                                                                            // 18072
    };                                                                                                                 // 18073
                                                                                                                       // 18074
    this.updateOnChange = function(delta) {                                                                            // 18075
        var lineWidgets = this.session.lineWidgets;                                                                    // 18076
        if (!lineWidgets) return;                                                                                      // 18077
                                                                                                                       // 18078
        var startRow = delta.start.row;                                                                                // 18079
        var len = delta.end.row - startRow;                                                                            // 18080
                                                                                                                       // 18081
        if (len === 0) {                                                                                               // 18082
        } else if (delta.action == 'remove') {                                                                         // 18083
            var removed = lineWidgets.splice(startRow + 1, len);                                                       // 18084
            removed.forEach(function(w) {                                                                              // 18085
                w && this.removeLineWidget(w);                                                                         // 18086
            }, this);                                                                                                  // 18087
            this.$updateRows();                                                                                        // 18088
        } else {                                                                                                       // 18089
            var args = new Array(len);                                                                                 // 18090
            args.unshift(startRow, 0);                                                                                 // 18091
            lineWidgets.splice.apply(lineWidgets, args);                                                               // 18092
            this.$updateRows();                                                                                        // 18093
        }                                                                                                              // 18094
    };                                                                                                                 // 18095
                                                                                                                       // 18096
    this.$updateRows = function() {                                                                                    // 18097
        var lineWidgets = this.session.lineWidgets;                                                                    // 18098
        if (!lineWidgets) return;                                                                                      // 18099
        var noWidgets = true;                                                                                          // 18100
        lineWidgets.forEach(function(w, i) {                                                                           // 18101
            if (w) {                                                                                                   // 18102
                noWidgets = false;                                                                                     // 18103
                w.row = i;                                                                                             // 18104
            }                                                                                                          // 18105
        });                                                                                                            // 18106
        if (noWidgets)                                                                                                 // 18107
            this.session.lineWidgets = null;                                                                           // 18108
    };                                                                                                                 // 18109
                                                                                                                       // 18110
    this.addLineWidget = function(w) {                                                                                 // 18111
        if (!this.session.lineWidgets)                                                                                 // 18112
            this.session.lineWidgets = new Array(this.session.getLength());                                            // 18113
                                                                                                                       // 18114
        this.session.lineWidgets[w.row] = w;                                                                           // 18115
                                                                                                                       // 18116
        var renderer = this.editor.renderer;                                                                           // 18117
        if (w.html && !w.el) {                                                                                         // 18118
            w.el = dom.createElement("div");                                                                           // 18119
            w.el.innerHTML = w.html;                                                                                   // 18120
        }                                                                                                              // 18121
        if (w.el) {                                                                                                    // 18122
            dom.addCssClass(w.el, "ace_lineWidgetContainer");                                                          // 18123
            w.el.style.position = "absolute";                                                                          // 18124
            w.el.style.zIndex = 5;                                                                                     // 18125
            renderer.container.appendChild(w.el);                                                                      // 18126
            w._inDocument = true;                                                                                      // 18127
        }                                                                                                              // 18128
                                                                                                                       // 18129
        if (!w.coverGutter) {                                                                                          // 18130
            w.el.style.zIndex = 3;                                                                                     // 18131
        }                                                                                                              // 18132
        if (!w.pixelHeight) {                                                                                          // 18133
            w.pixelHeight = w.el.offsetHeight;                                                                         // 18134
        }                                                                                                              // 18135
        if (w.rowCount == null)                                                                                        // 18136
            w.rowCount = w.pixelHeight / renderer.layerConfig.lineHeight;                                              // 18137
                                                                                                                       // 18138
        this.session._emit("changeFold", {data:{start:{row: w.row}}});                                                 // 18139
                                                                                                                       // 18140
        this.$updateRows();                                                                                            // 18141
        this.renderWidgets(null, renderer);                                                                            // 18142
        return w;                                                                                                      // 18143
    };                                                                                                                 // 18144
                                                                                                                       // 18145
    this.removeLineWidget = function(w) {                                                                              // 18146
        w._inDocument = false;                                                                                         // 18147
        if (w.el && w.el.parentNode)                                                                                   // 18148
            w.el.parentNode.removeChild(w.el);                                                                         // 18149
        if (w.editor && w.editor.destroy) try {                                                                        // 18150
            w.editor.destroy();                                                                                        // 18151
        } catch(e){}                                                                                                   // 18152
        if (this.session.lineWidgets)                                                                                  // 18153
            this.session.lineWidgets[w.row] = undefined;                                                               // 18154
        this.session._emit("changeFold", {data:{start:{row: w.row}}});                                                 // 18155
        this.$updateRows();                                                                                            // 18156
    };                                                                                                                 // 18157
                                                                                                                       // 18158
    this.onWidgetChanged = function(w) {                                                                               // 18159
        this.session._changedWidgets.push(w);                                                                          // 18160
        this.editor && this.editor.renderer.updateFull();                                                              // 18161
    };                                                                                                                 // 18162
                                                                                                                       // 18163
    this.measureWidgets = function(e, renderer) {                                                                      // 18164
        var changedWidgets = this.session._changedWidgets;                                                             // 18165
        var config = renderer.layerConfig;                                                                             // 18166
                                                                                                                       // 18167
        if (!changedWidgets || !changedWidgets.length) return;                                                         // 18168
        var min = Infinity;                                                                                            // 18169
        for (var i = 0; i < changedWidgets.length; i++) {                                                              // 18170
            var w = changedWidgets[i];                                                                                 // 18171
            if (!w._inDocument) {                                                                                      // 18172
                w._inDocument = true;                                                                                  // 18173
                renderer.container.appendChild(w.el);                                                                  // 18174
            }                                                                                                          // 18175
                                                                                                                       // 18176
            w.h = w.el.offsetHeight;                                                                                   // 18177
                                                                                                                       // 18178
            if (!w.fixedWidth) {                                                                                       // 18179
                w.w = w.el.offsetWidth;                                                                                // 18180
                w.screenWidth = Math.ceil(w.w / config.characterWidth);                                                // 18181
            }                                                                                                          // 18182
                                                                                                                       // 18183
            var rowCount = w.h / config.lineHeight;                                                                    // 18184
            if (w.coverLine) {                                                                                         // 18185
                rowCount -= this.session.getRowLineCount(w.row);                                                       // 18186
                if (rowCount < 0)                                                                                      // 18187
                    rowCount = 0;                                                                                      // 18188
            }                                                                                                          // 18189
            if (w.rowCount != rowCount) {                                                                              // 18190
                w.rowCount = rowCount;                                                                                 // 18191
                if (w.row < min)                                                                                       // 18192
                    min = w.row;                                                                                       // 18193
            }                                                                                                          // 18194
        }                                                                                                              // 18195
        if (min != Infinity) {                                                                                         // 18196
            this.session._emit("changeFold", {data:{start:{row: min}}});                                               // 18197
            this.session.lineWidgetWidth = null;                                                                       // 18198
        }                                                                                                              // 18199
        this.session._changedWidgets = [];                                                                             // 18200
    };                                                                                                                 // 18201
                                                                                                                       // 18202
    this.renderWidgets = function(e, renderer) {                                                                       // 18203
        var config = renderer.layerConfig;                                                                             // 18204
        var lineWidgets = this.session.lineWidgets;                                                                    // 18205
        if (!lineWidgets)                                                                                              // 18206
            return;                                                                                                    // 18207
        var first = Math.min(this.firstRow, config.firstRow);                                                          // 18208
        var last = Math.max(this.lastRow, config.lastRow, lineWidgets.length);                                         // 18209
                                                                                                                       // 18210
        while (first > 0 && !lineWidgets[first])                                                                       // 18211
            first--;                                                                                                   // 18212
                                                                                                                       // 18213
        this.firstRow = config.firstRow;                                                                               // 18214
        this.lastRow = config.lastRow;                                                                                 // 18215
                                                                                                                       // 18216
        renderer.$cursorLayer.config = config;                                                                         // 18217
        for (var i = first; i <= last; i++) {                                                                          // 18218
            var w = lineWidgets[i];                                                                                    // 18219
            if (!w || !w.el) continue;                                                                                 // 18220
                                                                                                                       // 18221
            if (!w._inDocument) {                                                                                      // 18222
                w._inDocument = true;                                                                                  // 18223
                renderer.container.appendChild(w.el);                                                                  // 18224
            }                                                                                                          // 18225
            var top = renderer.$cursorLayer.getPixelPosition({row: i, column:0}, true).top;                            // 18226
            if (!w.coverLine)                                                                                          // 18227
                top += config.lineHeight * this.session.getRowLineCount(w.row);                                        // 18228
            w.el.style.top = top - config.offset + "px";                                                               // 18229
                                                                                                                       // 18230
            var left = w.coverGutter ? 0 : renderer.gutterWidth;                                                       // 18231
            if (!w.fixedWidth)                                                                                         // 18232
                left -= renderer.scrollLeft;                                                                           // 18233
            w.el.style.left = left + "px";                                                                             // 18234
                                                                                                                       // 18235
            if (w.fixedWidth) {                                                                                        // 18236
                w.el.style.right = renderer.scrollBar.getWidth() + "px";                                               // 18237
            } else {                                                                                                   // 18238
                w.el.style.right = "";                                                                                 // 18239
            }                                                                                                          // 18240
        }                                                                                                              // 18241
    };                                                                                                                 // 18242
                                                                                                                       // 18243
}).call(LineWidgets.prototype);                                                                                        // 18244
                                                                                                                       // 18245
                                                                                                                       // 18246
exports.LineWidgets = LineWidgets;                                                                                     // 18247
                                                                                                                       // 18248
});                                                                                                                    // 18249
                                                                                                                       // 18250
define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 18252
var LineWidgets = require("../line_widgets").LineWidgets;                                                              // 18253
var dom = require("../lib/dom");                                                                                       // 18254
var Range = require("../range").Range;                                                                                 // 18255
                                                                                                                       // 18256
function binarySearch(array, needle, comparator) {                                                                     // 18257
    var first = 0;                                                                                                     // 18258
    var last = array.length - 1;                                                                                       // 18259
                                                                                                                       // 18260
    while (first <= last) {                                                                                            // 18261
        var mid = (first + last) >> 1;                                                                                 // 18262
        var c = comparator(needle, array[mid]);                                                                        // 18263
        if (c > 0)                                                                                                     // 18264
            first = mid + 1;                                                                                           // 18265
        else if (c < 0)                                                                                                // 18266
            last = mid - 1;                                                                                            // 18267
        else                                                                                                           // 18268
            return mid;                                                                                                // 18269
    }                                                                                                                  // 18270
    return -(first + 1);                                                                                               // 18271
}                                                                                                                      // 18272
                                                                                                                       // 18273
function findAnnotations(session, row, dir) {                                                                          // 18274
    var annotations = session.getAnnotations().sort(Range.comparePoints);                                              // 18275
    if (!annotations.length)                                                                                           // 18276
        return;                                                                                                        // 18277
                                                                                                                       // 18278
    var i = binarySearch(annotations, {row: row, column: -1}, Range.comparePoints);                                    // 18279
    if (i < 0)                                                                                                         // 18280
        i = -i - 1;                                                                                                    // 18281
                                                                                                                       // 18282
    if (i >= annotations.length)                                                                                       // 18283
        i = dir > 0 ? 0 : annotations.length - 1;                                                                      // 18284
    else if (i === 0 && dir < 0)                                                                                       // 18285
        i = annotations.length - 1;                                                                                    // 18286
                                                                                                                       // 18287
    var annotation = annotations[i];                                                                                   // 18288
    if (!annotation || !dir)                                                                                           // 18289
        return;                                                                                                        // 18290
                                                                                                                       // 18291
    if (annotation.row === row) {                                                                                      // 18292
        do {                                                                                                           // 18293
            annotation = annotations[i += dir];                                                                        // 18294
        } while (annotation && annotation.row === row);                                                                // 18295
        if (!annotation)                                                                                               // 18296
            return annotations.slice();                                                                                // 18297
    }                                                                                                                  // 18298
                                                                                                                       // 18299
                                                                                                                       // 18300
    var matched = [];                                                                                                  // 18301
    row = annotation.row;                                                                                              // 18302
    do {                                                                                                               // 18303
        matched[dir < 0 ? "unshift" : "push"](annotation);                                                             // 18304
        annotation = annotations[i += dir];                                                                            // 18305
    } while (annotation && annotation.row == row);                                                                     // 18306
    return matched.length && matched;                                                                                  // 18307
}                                                                                                                      // 18308
                                                                                                                       // 18309
exports.showErrorMarker = function(editor, dir) {                                                                      // 18310
    var session = editor.session;                                                                                      // 18311
    if (!session.widgetManager) {                                                                                      // 18312
        session.widgetManager = new LineWidgets(session);                                                              // 18313
        session.widgetManager.attach(editor);                                                                          // 18314
    }                                                                                                                  // 18315
                                                                                                                       // 18316
    var pos = editor.getCursorPosition();                                                                              // 18317
    var row = pos.row;                                                                                                 // 18318
    var oldWidget = session.lineWidgets && session.lineWidgets[row];                                                   // 18319
    if (oldWidget) {                                                                                                   // 18320
        oldWidget.destroy();                                                                                           // 18321
    } else {                                                                                                           // 18322
        row -= dir;                                                                                                    // 18323
    }                                                                                                                  // 18324
    var annotations = findAnnotations(session, row, dir);                                                              // 18325
    var gutterAnno;                                                                                                    // 18326
    if (annotations) {                                                                                                 // 18327
        var annotation = annotations[0];                                                                               // 18328
        pos.column = (annotation.pos && typeof annotation.column != "number"                                           // 18329
            ? annotation.pos.sc                                                                                        // 18330
            : annotation.column) || 0;                                                                                 // 18331
        pos.row = annotation.row;                                                                                      // 18332
        gutterAnno = editor.renderer.$gutterLayer.$annotations[pos.row];                                               // 18333
    } else if (oldWidget) {                                                                                            // 18334
        return;                                                                                                        // 18335
    } else {                                                                                                           // 18336
        gutterAnno = {                                                                                                 // 18337
            text: ["Looks good!"],                                                                                     // 18338
            className: "ace_ok"                                                                                        // 18339
        };                                                                                                             // 18340
    }                                                                                                                  // 18341
    editor.session.unfold(pos.row);                                                                                    // 18342
    editor.selection.moveToPosition(pos);                                                                              // 18343
                                                                                                                       // 18344
    var w = {                                                                                                          // 18345
        row: pos.row,                                                                                                  // 18346
        fixedWidth: true,                                                                                              // 18347
        coverGutter: true,                                                                                             // 18348
        el: dom.createElement("div")                                                                                   // 18349
    };                                                                                                                 // 18350
    var el = w.el.appendChild(dom.createElement("div"));                                                               // 18351
    var arrow = w.el.appendChild(dom.createElement("div"));                                                            // 18352
    arrow.className = "error_widget_arrow " + gutterAnno.className;                                                    // 18353
                                                                                                                       // 18354
    var left = editor.renderer.$cursorLayer                                                                            // 18355
        .getPixelPosition(pos).left;                                                                                   // 18356
    arrow.style.left = left + editor.renderer.gutterWidth - 5 + "px";                                                  // 18357
                                                                                                                       // 18358
    w.el.className = "error_widget_wrapper";                                                                           // 18359
    el.className = "error_widget " + gutterAnno.className;                                                             // 18360
    el.innerHTML = gutterAnno.text.join("<br>");                                                                       // 18361
                                                                                                                       // 18362
    el.appendChild(dom.createElement("div"));                                                                          // 18363
                                                                                                                       // 18364
    var kb = function(_, hashId, keyString) {                                                                          // 18365
        if (hashId === 0 && (keyString === "esc" || keyString === "return")) {                                         // 18366
            w.destroy();                                                                                               // 18367
            return {command: "null"};                                                                                  // 18368
        }                                                                                                              // 18369
    };                                                                                                                 // 18370
                                                                                                                       // 18371
    w.destroy = function() {                                                                                           // 18372
        if (editor.$mouseHandler.isMousePressed)                                                                       // 18373
            return;                                                                                                    // 18374
        editor.keyBinding.removeKeyboardHandler(kb);                                                                   // 18375
        session.widgetManager.removeLineWidget(w);                                                                     // 18376
        editor.off("changeSelection", w.destroy);                                                                      // 18377
        editor.off("changeSession", w.destroy);                                                                        // 18378
        editor.off("mouseup", w.destroy);                                                                              // 18379
        editor.off("change", w.destroy);                                                                               // 18380
    };                                                                                                                 // 18381
                                                                                                                       // 18382
    editor.keyBinding.addKeyboardHandler(kb);                                                                          // 18383
    editor.on("changeSelection", w.destroy);                                                                           // 18384
    editor.on("changeSession", w.destroy);                                                                             // 18385
    editor.on("mouseup", w.destroy);                                                                                   // 18386
    editor.on("change", w.destroy);                                                                                    // 18387
                                                                                                                       // 18388
    editor.session.widgetManager.addLineWidget(w);                                                                     // 18389
                                                                                                                       // 18390
    w.el.onmousedown = editor.focus.bind(editor);                                                                      // 18391
                                                                                                                       // 18392
    editor.renderer.scrollCursorIntoView(null, 0.5, {bottom: w.el.offsetHeight});                                      // 18393
};                                                                                                                     // 18394
                                                                                                                       // 18395
                                                                                                                       // 18396
dom.importCssString("\
    .error_widget_wrapper {\
        background: inherit;\
        color: inherit;\
        border:none\
    }\
    .error_widget {\
        border-top: solid 2px;\
        border-bottom: solid 2px;\
        margin: 5px 0;\
        padding: 10px 40px;\
        white-space: pre-wrap;\
    }\
    .error_widget.ace_error, .error_widget_arrow.ace_error{\
        border-color: #ff5a5a\
    }\
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\
        border-color: #F1D817\
    }\
    .error_widget.ace_info, .error_widget_arrow.ace_info{\
        border-color: #5a5a5a\
    }\
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\
        border-color: #5aaa5a\
    }\
    .error_widget_arrow {\
        position: absolute;\
        border: solid 5px;\
        border-top-color: transparent!important;\
        border-right-color: transparent!important;\
        border-left-color: transparent!important;\
        top: -5px;\
    }\
", "");                                                                                                                // 18430
                                                                                                                       // 18431
});                                                                                                                    // 18432
                                                                                                                       // 18433
define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"], function(require, exports, module) {
"use strict";                                                                                                          // 18435
                                                                                                                       // 18436
require("./lib/fixoldbrowsers");                                                                                       // 18437
                                                                                                                       // 18438
var dom = require("./lib/dom");                                                                                        // 18439
var event = require("./lib/event");                                                                                    // 18440
                                                                                                                       // 18441
var Editor = require("./editor").Editor;                                                                               // 18442
var EditSession = require("./edit_session").EditSession;                                                               // 18443
var UndoManager = require("./undomanager").UndoManager;                                                                // 18444
var Renderer = require("./virtual_renderer").VirtualRenderer;                                                          // 18445
require("./worker/worker_client");                                                                                     // 18446
require("./keyboard/hash_handler");                                                                                    // 18447
require("./placeholder");                                                                                              // 18448
require("./multi_select");                                                                                             // 18449
require("./mode/folding/fold_mode");                                                                                   // 18450
require("./theme/textmate");                                                                                           // 18451
require("./ext/error_marker");                                                                                         // 18452
                                                                                                                       // 18453
exports.config = require("./config");                                                                                  // 18454
exports.require = require;                                                                                             // 18455
exports.edit = function(el) {                                                                                          // 18456
    if (typeof(el) == "string") {                                                                                      // 18457
        var _id = el;                                                                                                  // 18458
        el = document.getElementById(_id);                                                                             // 18459
        if (!el)                                                                                                       // 18460
            throw new Error("ace.edit can't find div #" + _id);                                                        // 18461
    }                                                                                                                  // 18462
                                                                                                                       // 18463
    if (el && el.env && el.env.editor instanceof Editor)                                                               // 18464
        return el.env.editor;                                                                                          // 18465
                                                                                                                       // 18466
    var value = "";                                                                                                    // 18467
    if (el && /input|textarea/i.test(el.tagName)) {                                                                    // 18468
        var oldNode = el;                                                                                              // 18469
        value = oldNode.value;                                                                                         // 18470
        el = dom.createElement("pre");                                                                                 // 18471
        oldNode.parentNode.replaceChild(el, oldNode);                                                                  // 18472
    } else if (el) {                                                                                                   // 18473
        value = dom.getInnerText(el);                                                                                  // 18474
        el.innerHTML = '';                                                                                             // 18475
    }                                                                                                                  // 18476
                                                                                                                       // 18477
    var doc = exports.createEditSession(value);                                                                        // 18478
                                                                                                                       // 18479
    var editor = new Editor(new Renderer(el));                                                                         // 18480
    editor.setSession(doc);                                                                                            // 18481
                                                                                                                       // 18482
    var env = {                                                                                                        // 18483
        document: doc,                                                                                                 // 18484
        editor: editor,                                                                                                // 18485
        onResize: editor.resize.bind(editor, null)                                                                     // 18486
    };                                                                                                                 // 18487
    if (oldNode) env.textarea = oldNode;                                                                               // 18488
    event.addListener(window, "resize", env.onResize);                                                                 // 18489
    editor.on("destroy", function() {                                                                                  // 18490
        event.removeListener(window, "resize", env.onResize);                                                          // 18491
        env.editor.container.env = null; // prevent memory leak on old ie                                              // 18492
    });                                                                                                                // 18493
    editor.container.env = editor.env = env;                                                                           // 18494
    return editor;                                                                                                     // 18495
};                                                                                                                     // 18496
exports.createEditSession = function(text, mode) {                                                                     // 18497
    var doc = new EditSession(text, mode);                                                                             // 18498
    doc.setUndoManager(new UndoManager());                                                                             // 18499
    return doc;                                                                                                        // 18500
}                                                                                                                      // 18501
exports.EditSession = EditSession;                                                                                     // 18502
exports.UndoManager = UndoManager;                                                                                     // 18503
});                                                                                                                    // 18504
            (function() {                                                                                              // 18505
                window.require(["ace/ace"], function(a) {                                                              // 18506
                    a && a.config.init(true);                                                                          // 18507
                    if (!window.ace)                                                                                   // 18508
                        window.ace = a;                                                                                // 18509
                    for (var key in a) if (a.hasOwnProperty(key))                                                      // 18510
                        window.ace[key] = a[key];                                                                      // 18511
                });                                                                                                    // 18512
            })();                                                                                                      // 18513
                                                                                                                       // 18514






(function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/mizzao_sharejs-ace/template.templates.js                                                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
                                                                                                                       // 1
Template.__checkName("_sharejsAce");                                                                                   // 2
Template["_sharejsAce"] = new Template("Template._sharejsAce", (function() {                                           // 3
  var view = this;                                                                                                     // 4
  return HTML.DIV({                                                                                                    // 5
    id: function() {                                                                                                   // 6
      return Spacebars.mustache(view.lookup("id"));                                                                    // 7
    },                                                                                                                 // 8
    "data-docid": function() {                                                                                         // 9
      return Spacebars.mustache(view.lookup("docid"));                                                                 // 10
    },                                                                                                                 // 11
    "class": "shareJSAce"                                                                                              // 12
  });                                                                                                                  // 13
}));                                                                                                                   // 14
                                                                                                                       // 15
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/mizzao_sharejs-ace/client.coffee.js                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;
var ShareJSAceConnector, UndoManager,                                                                                  // 2
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;                                                                                         //
                                                                                                                       //
require('ace/config').set('basePath', '/packages/mizzao_sharejs-ace/ace-builds/src');                                  // 2
                                                                                                                       //
UndoManager = require('ace/undomanager').UndoManager;                                                                  // 2
                                                                                                                       //
ShareJSAceConnector = (function(superClass) {                                                                          // 2
  extend(ShareJSAceConnector, superClass);                                                                             // 6
                                                                                                                       //
  function ShareJSAceConnector() {                                                                                     //
    return ShareJSAceConnector.__super__.constructor.apply(this, arguments);                                           //
  }                                                                                                                    //
                                                                                                                       //
  ShareJSAceConnector.prototype.createView = function() {                                                              // 6
    return Blaze.With(Blaze.getData, function() {                                                                      // 7
      return Template._sharejsAce;                                                                                     //
    });                                                                                                                //
  };                                                                                                                   //
                                                                                                                       //
  ShareJSAceConnector.prototype.rendered = function(element) {                                                         // 6
    ShareJSAceConnector.__super__.rendered.apply(this, arguments);                                                     // 10
    this.ace = ace.edit(element);                                                                                      // 10
    return typeof this.configCallback === "function" ? this.configCallback(this.ace) : void 0;                         //
  };                                                                                                                   //
                                                                                                                       //
  ShareJSAceConnector.prototype.connect = function() {                                                                 // 6
    this.ace.setReadOnly(true);                                                                                        // 16
    return ShareJSAceConnector.__super__.connect.apply(this, arguments);                                               //
  };                                                                                                                   //
                                                                                                                       //
  ShareJSAceConnector.prototype.attach = function(doc) {                                                               // 6
    ShareJSAceConnector.__super__.attach.apply(this, arguments);                                                       // 20
    doc.attach_ace(this.ace);                                                                                          // 20
    this.ace.getSession().setUndoManager(new UndoManager);                                                             // 20
    this.ace.setReadOnly(false);                                                                                       // 20
    return typeof this.connectCallback === "function" ? this.connectCallback(this.ace) : void 0;                       //
  };                                                                                                                   //
                                                                                                                       //
  ShareJSAceConnector.prototype.disconnect = function() {                                                              // 6
    var ref;                                                                                                           // 32
    if ((ref = this.doc) != null) {                                                                                    //
      if (typeof ref.detach_ace === "function") {                                                                      //
        ref.detach_ace();                                                                                              //
      }                                                                                                                //
    }                                                                                                                  //
    return ShareJSAceConnector.__super__.disconnect.apply(this, arguments);                                            //
  };                                                                                                                   //
                                                                                                                       //
  ShareJSAceConnector.prototype.destroy = function() {                                                                 // 6
    var ref;                                                                                                           // 36
    ShareJSAceConnector.__super__.destroy.apply(this, arguments);                                                      // 36
    if ((ref = this.ace) != null) {                                                                                    //
      ref.destroy();                                                                                                   //
    }                                                                                                                  //
    return this.ace = null;                                                                                            //
  };                                                                                                                   //
                                                                                                                       //
  return ShareJSAceConnector;                                                                                          //
                                                                                                                       //
})(ShareJSConnector);                                                                                                  //
                                                                                                                       //
UI.registerHelper("sharejsAce", new Template('sharejsAce', function() {                                                // 2
  return new ShareJSAceConnector(this).create();                                                                       // 42
}));                                                                                                                   // 41
                                                                                                                       //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
Package['mizzao:sharejs-ace'] = {};

})();
