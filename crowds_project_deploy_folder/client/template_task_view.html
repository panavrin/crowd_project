
<template name="cm_task_view">
	<div class = "container-fluid">
		<div class = "row">
			<button id = "btn_creat_task" class = "btn btn-default"> + 		Creat New Task
			</button>
    	<button class="accordion-expand-all btn btn-default" href="#">Collapse All</button>

		</div>
		<div class = "row">
			<div class="accordion_region ui-accordion ui-widget ui-helper-reset">
				{{#each allregions}}
				  {{> cm_region_task_list}}
				{{/each}}
			</div>
		</div>
	</div>

	<div id="create_task_dialg" title="Create New Task">
		<h2 for="name"> Task 2</h2>
		<div class="validateTips"></div>
		<form id="crete_task_form">
			<fieldset>
			  	<label for="name"> Region </label>
					<div class="dropdown">
						<button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" id = "cm_dialog_region_dropdown_btn" value = "null">Select a Region!
						<span class="caret"></span></button>
						<ul class="dropdown-menu">
							<li><a href="#" value="new">Create New Region!</a></li>
							{{#each allregions}}
							  <li><a href="#" value = {{_id}}>Region {{name}}</a></li>
							{{/each}}
						</ul>
					</div>

			  	<label for="name"> Title (0-30) </label>
			  	<input type="text" name="name" id="cm_dialog_title" placeholder="Name it informative and short!!!!" class="text ui-widget-content ui-corner-all">
			  	<label for="email">Description (5-500)</label>
			  	<textarea name="desc" id="cm_dialog_desc" placeholder="Write the descirption of the task. Make the task reasonably small so others can create a task too." class="text ui-widget-content ui-corner-all" rows="10"></textarea>
			  	<label for="name"> Deliverable (optional)</label>
			 	 <input type="text" name="name" id="cm_dialog_delverbale" placeholder="Please specify what will be available if complete." class="text ui-widget-content ui-corner-all">
			  <!-- Allow form submission with keyboard without duplicating the dialog button -->
			 	 <input type="submit" tabindex="-1" style="position:absolute; top:-1000px">
			</fieldset>
		</form>
	</div>

</template>

<template name="cm_region_task_list">

	<h2 class="accordion-header ui-accordion-header ui-helper-reset ui-state-default ui-accordion-icons ui-corner-all">
			<span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span><strong> Region {{name}}</strong>
	</h2>
	<div class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
		<div class="accordion_task ui-accordion ui-widget ui-helper-reset">
			{{#each tasksinregion _id}}
				{{> cm_task}}
			{{/each}}
		</div>
	</div>
</template>
<!--    title: _title,
		desc:_desc,
		deliverable:_deliverable,
		createdAt: now,
		region: _region_id,
		owner: Meteor.userId(),
		username: Meteor.user().username,
		// state: _state, // state can be : open, available, locked,
		updatedAt: now-->
<template name="cm_task">
		<h3 class="accordion-header ui-accordion-header ui-helper-reset ui-state-default ui-accordion-icons ui-corner-all">
			<strong> Task - {{title}} </strong>
		</h3>
		<div class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
		<p>
				<strong>Description</strong>
				<p>{{desc}}</p>
			</p>
			<p>
				{{#if deliverable}}
	        <strong>Deliverable</strong>
					<p>{{deliverable}}</p>
	    	{{/if}}
			</p>
			<p>
				{{#if creator_user_name}}
	        <strong>Creator</strong>
					<p>{{creator_user_name}}</p>
	    	{{/if}}
			</p>
		</div>
</template>
